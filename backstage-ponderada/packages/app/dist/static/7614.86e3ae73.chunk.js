"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7614],{96472:(X,T,t)=>{t.d(T,{C:()=>O});var i=t(29835),m=t(22968),c=t(92651),P=t(2069),E=t(72501),p=t(58837),b=t(7031);const M={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};var W=t(75625),N=t(39330),F=t(80109),Y=t(15303),j=t(45250),$=t(65398),V=t.n($),n=t(14041),L=t(67720),J=t(75173);const d=Object.freeze({createNameColumn(e){function a(o){var l;return((l=o.metadata)==null?void 0:l.title)||(0,c.SE)(o,{defaultKind:e==null?void 0:e.defaultKind})}return{title:"Name",field:"resolved.entityRef",highlight:!0,customSort({entity:o},{entity:l}){return a(o).localeCompare(a(l))},render:({entity:o})=>n.createElement(c.zI,{entityRef:o,defaultKind:(e==null?void 0:e.defaultKind)||"Component"})}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:e})=>n.createElement(c.iI,{entityRefs:e.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:e})=>n.createElement(c.iI,{entityRefs:e.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",customFilterAndSearch:(e,a)=>{var o,l,r,s,u,v,S,x,U,R;let D=[];return(l=(o=a.entity)==null?void 0:o.spec)!=null&&l.targets&&Array.isArray((s=(r=a.entity)==null?void 0:r.spec)==null?void 0:s.targets)?D=(v=(u=a.entity)==null?void 0:u.spec)==null?void 0:v.targets:(x=(S=a.entity)==null?void 0:S.spec)!=null&&x.target&&(D=[(R=(U=a.entity)==null?void 0:U.spec)==null?void 0:R.target]),D.join(", ").toLocaleUpperCase("en-US").includes(e.toLocaleUpperCase("en-US"))},render:({entity:e})=>{var a,o;return n.createElement(n.Fragment,null,(((a=e==null?void 0:e.spec)==null?void 0:a.targets)||((o=e==null?void 0:e.spec)==null?void 0:o.target))&&n.createElement(m.Mm,{text:(e.spec.targets||[e.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(e={hidden:!1}){return{title:"Type",field:"entity.spec.type",hidden:e.hidden,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:e})=>n.createElement(m.Mm,{text:e.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:e})=>n.createElement(n.Fragment,null,e.metadata.tags&&e.metadata.tags.map(a=>n.createElement(L.A,{key:a,label:a,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(e){return{title:"Title",field:"entity.metadata.title",hidden:e==null?void 0:e.hidden,searchable:!0}},createLabelColumn(e,a){function o(l,r){var s;const u=(s=r.metadata)==null?void 0:s.labels;return u&&u[l]||""}return{title:(a==null?void 0:a.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},customSort({entity:l},{entity:r}){return o(e,l).localeCompare(o(e,r))},render:({entity:l})=>{var r;const s=(r=l.metadata)==null?void 0:r.labels,u=s&&s[e]||(a==null?void 0:a.defaultValue);return n.createElement(n.Fragment,null,u&&n.createElement(L.A,{key:u,label:u,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}}),B=(0,p.A)(e=>({root:{paddingTop:e.spacing(1.25),paddingLeft:e.spacing(2.5),paddingBottom:e.spacing(.75),display:"flex",justifyContent:"space-between"},text:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),{name:"BackstageTableToolbar"});function K(e){const a=B();return n.createElement(J.A,{className:a.root},n.createElement(E.A,{variant:"h5",className:a.text},e.title),n.createElement(c.lD,null))}function H(e){const{columns:a,data:o,next:l,prev:r,title:s,isLoading:u,options:v}=e;return n.createElement(m.XI,{title:u?"":s,columns:a,data:o,options:{...v,paginationPosition:"both",pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1},onPageChange:S=>{S>0?l==null||l():r==null||r()},components:{Toolbar:K},page:r?1:0,totalCount:l?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}}})}const f=({filters:e,entities:a})=>{var o;const l=e.type===void 0;return[d.createTitleColumn({hidden:!0}),d.createNameColumn({defaultKind:(o=e.kind)==null?void 0:o.value}),...r(),d.createMetadataDescriptionColumn(),d.createTagsColumn()];function r(){var s;const u=[d.createSystemColumn(),d.createOwnerColumn(),d.createSpecTypeColumn({hidden:!l}),d.createSpecLifecycleColumn()];switch((s=e.kind)==null?void 0:s.value){case"user":return[];case"domain":case"system":return[d.createOwnerColumn()];case"group":case"template":return[d.createSpecTypeColumn({hidden:!l})];case"location":return[d.createSpecTypeColumn({hidden:!l}),d.createSpecTargetsColumn()];default:return a.every(v=>v.metadata.namespace==="default")?u:[...u,d.createNamespaceColumn()]}}},h=(0,b.A)({root:{color:"#f3ba37"}})(F.A),_=(e,a)=>{const o=l=>l.metadata.title||(0,c.SE)(l,{defaultKind:"Component"});return o(e).localeCompare(o(a))},O=e=>{var a,o,l,r;const{columns:s=f,tableOptions:u,subtitle:v,emptyContent:S}=e,{isStarredEntity:x,toggleStarredEntity:U}=(0,c.IT)(),R=(0,c.nK)(),{loading:D,error:Q,entities:Z,filters:G,pageInfo:w,totalItems:le}=R,oe=!!w,k=(0,n.useMemo)(()=>typeof s=="function"?s(R):s,[s,R]);if(Q)return n.createElement("div",null,n.createElement(m.Bp,{severity:"error",title:"Could not fetch catalog entities."},n.createElement(m.z7,{language:"text",text:Q.toString()})));const ie=[({entity:C})=>{var y;const g=(y=C.metadata.annotations)==null?void 0:y[i._P],I="View";return{icon:()=>n.createElement(n.Fragment,null,n.createElement(E.A,{style:M},I),n.createElement(N.A,{fontSize:"small"})),tooltip:I,disabled:!g,onClick:()=>{g&&window.open(g,"_blank")}}},({entity:C})=>{var y;const g=(y=C.metadata.annotations)==null?void 0:y[i.P],I="Edit";return{icon:()=>n.createElement(n.Fragment,null,n.createElement(E.A,{style:M},I),n.createElement(W.A,{fontSize:"small"})),tooltip:I,disabled:!g,onClick:()=>{g&&window.open(g,"_blank")}}},({entity:C})=>{const y=x(C),g=y?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>n.createElement(n.Fragment,null,n.createElement(E.A,{style:M},g),y?n.createElement(h,null):n.createElement(Y.A,null)),tooltip:g,onClick:()=>U(C)}}],re=((a=G.kind)==null?void 0:a.value)||"",se=((o=G.type)==null?void 0:o.value)||"",q=[(0,j.capitalize)((r=(l=G.user)==null?void 0:l.value)!=null?r:"all"),se,V()(re)].filter(C=>C).join(" "),ce=`${q} (${le})`,ee=e.actions||ie,te={actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!D,padding:"dense",...u};if(oe)return n.createElement(H,{columns:k,emptyContent:S,isLoading:D,title:q,actions:ee,subtitle:v,options:te,data:Z.map(A),next:w.next,prev:w.prev});const ae=Z.sort(_).map(A),ne=20,de=ae.length>ne;return n.createElement(m.XI,{isLoading:D,columns:k,options:{paging:de,pageSize:ne,pageSizeOptions:[20,50,100],...te},title:ce,data:ae,actions:ee,subtitle:v,emptyContent:S})};O.columns=d,O.defaultColumnsFunc=f;function A(e){const a=(0,P.g)(e,i.jn,{kind:"system"}),o=(0,P.g)(e,i.vv);return{entity:e,resolved:{name:(0,c.SE)(e,{defaultKind:"Component"}),entityRef:(0,i.U2)(e),ownedByRelationsTitle:o.map(l=>(0,c.SE)(l,{defaultKind:"group"})).join(", "),ownedByRelations:o,partOfSystemRelationTitle:a.map(l=>(0,c.SE)(l,{defaultKind:"system"})).join(", "),partOfSystemRelations:a}}}},97614:(X,T,t)=>{t.r(T),t.d(T,{BaseCatalogPage:()=>B,CatalogPage:()=>H,DefaultCatalogPage:()=>K});var i=t(14041),m=t(18690),c=t(22968),P=t(5124),E=t(11638),p=t(92651),b=t(21319),z=t(96472),M=t(59294),W=t(99993),N=t(17899),F=t(25033),Y=t.n(F),j=t(96403),$=t.n(j),V=t(45250),n=t.n(V),L=t(65398),J=t.n(L);const d=(0,M.h2)({id:"catalog",messages:{indexPage:{title:"{{orgName}} Catalog",createButtonTitle:"Create"}}});function B(f){var h;const{filters:_,content:O=i.createElement(z.C,null),pagination:A}=f,e=(h=(0,P.u)(P.p).getOptionalString("organization.name"))!=null?h:"Backstage",a=(0,E.Sf)(b.c),{t:o}=(0,M.ie)(d),{allowed:l}=(0,N.JT)({permission:W.C4});return i.createElement(c.dT,{title:o("indexPage.title",{orgName:e}),themeId:"home"},i.createElement(c.UC,null,i.createElement(c.dv,{title:""},l&&i.createElement(c.ly,{title:o("indexPage.createButtonTitle"),to:a&&a()}),i.createElement(c.Yl,null,"All your software catalog entities")),i.createElement(p.B9,{pagination:A},i.createElement(p.GI,null,i.createElement(p.GI.Filters,null,_),i.createElement(p.GI.Content,null,O)))))}function K(f){const{columns:h,actions:_,initiallySelectedFilter:O="owned",initialKind:A="component",tableOptions:e={},emptyContent:a,pagination:o,ownerPickerMode:l,filters:r,initiallySelectedNamespaces:s}=f;return i.createElement(B,{filters:r!=null?r:i.createElement(p.rd,{initialKind:A,initiallySelectedFilter:O,ownerPickerMode:l,initiallySelectedNamespaces:s}),content:i.createElement(z.C,{columns:h,actions:_,tableOptions:e,emptyContent:a}),pagination:o})}function H(f){return(0,m.P1)()||i.createElement(K,{...f})}},39330:(X,T,t)=>{var i,m=t(4293),c=t(78920);i={value:!0},T.A=void 0;var P=c(t(14041)),E=m(t(74044)),p=(0,E.default)(P.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew");T.A=p}}]);})();

//# sourceMappingURL=7614.86e3ae73.chunk.js.map