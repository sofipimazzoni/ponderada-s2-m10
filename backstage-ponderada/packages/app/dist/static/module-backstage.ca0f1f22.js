(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1556],{19589:(Tn,_t,e)=>{"use strict";e.d(_t,{E:()=>Ze});var s=e(12082),l=e(11638),b=e(5124),A=e(17899),W=e(14041),r=e(64947),q=e(22968),Q=e(18690),t=e(73657),pe=e(14451),_=e(27799),de=e(94389),me=e(20947),H=e(20473),xe=e(45917),ve=e(39347),dt=e(63309),z=e(4832),ee=e(85121),D=e(17400),w=e(42226),M=e(69550),y=e(52755),v=e(89350),F=e(8911),re=e(33602),Ne=e(48108),ye=e(77225),X=e(55700),N=e(71865),V=e(98392),ie=e(55288),oe=e(91360),Ce=e(50868),nt=e(80012),He=e(56558),Xe=e(12285),at=e(88714),Ge=e(14360),Ye=e(58733);const Re=Y=>(...he)=>{const fe=he.length===0?[1]:he,Ct=(Ft,cn)=>typeof Ft=="string"?Ft:cn*Ft;return fe.map(Ft=>{const cn=Ct(Ft,Y);return typeof cn=="number"?`${cn}px`:cn}).join(" ")};function Le(Y,he){if(!he||typeof he=="string")return;const fe=typeof he=="function"?he(Y):he;if(fe)return{"@global":fe}}function ct(Y,he){if(!(!he||typeof he=="string")){if(typeof he=="object"){const fe={...Y},Ct=Y.spacing(1);return typeof Ct=="number"&&(fe.spacing=Re(Ct)),Object.fromEntries(Object.entries(he).map(([Ft,cn])=>typeof cn=="function"?[Ft,cn({theme:fe})]:[Ft,cn]))}return he}}const vt=/^&.Mui-([\w-]+)$/;function St(Y){let he=Y;if(!Y||typeof Y!="object")return he;for(const fe of Object.keys(Y)){const Ct=Y[fe];if(!(!Ct||typeof Ct!="object"))for(const Ft of Object.keys(Ct)){const cn=Ft,An=cn.match(vt);if(An){const[,In]=An,{[cn]:Bn,...Hn}=Ct;Bn&&(he={...he,[fe]:Hn,[In]:Bn})}}}return he}function Jt(Y,he={}){const fe={},Ct={};for(const Ft of Object.keys(he)){const cn=he[Ft];cn&&("styleOverrides"in cn&&(Ft==="MuiCssBaseline"?fe[Ft]=Le(Y,cn.styleOverrides):fe[Ft]=St(ct(Y,cn.styleOverrides))),"defaultProps"in cn&&(Ct[Ft]=cn.defaultProps))}return{overrides:fe,props:Ct}}const At={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},ue={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function ft(Y){var he;const{colors:fe,shape:Ct,options:Ft}=Y,An=`linear-gradient(90deg, ${(fe.length===1?[fe[0],fe[0]]:fe).join(", ")})`,In=`${Ct},  ${An}`,Bn=(he=Ft==null?void 0:Ft.fontColor)!=null?he:"#FFFFFF";return{colors:fe,shape:Ct,backgroundImage:In,fontColor:Bn}}const xt={home:ft({colors:ue.teal,shape:At.wave}),documentation:ft({colors:ue.pinkSea,shape:At.wave2}),tool:ft({colors:ue.purpleSky,shape:At.round}),service:ft({colors:ue.marineBlue,shape:At.wave}),website:ft({colors:ue.veryBlue,shape:At.wave}),library:ft({colors:ue.rubyRed,shape:At.wave}),other:ft({colors:ue.darkGrey,shape:At.wave}),app:ft({colors:ue.toastyOrange,shape:At.wave}),apis:ft({colors:ue.teal,shape:At.wave2}),card:ft({colors:ue.greens,shape:At.wave})},gt=16,Nt='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',S="home",P={htmlFontSize:gt,fontFamily:Nt,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};function j(Y){const{palette:he,htmlFontSize:fe=gt,fontFamily:Ct=Nt,defaultPageTheme:Ft=S,pageTheme:cn=xt,typography:An}=Y;if(!cn[Ft])throw new Error(`${Ft} is not defined in pageTheme.`);return P.htmlFontSize=fe,P.fontFamily=Ct,{palette:he,typography:An!=null?An:P,page:cn[Ft],getPageTheme:({themeId:In})=>{var Bn;return(Bn=cn[In])!=null?Bn:cn[Ft]}}}const Z={MuiCssBaseline:{styleOverrides:Y=>({html:{height:"100%",fontFamily:Y.typography.fontFamily},body:{height:"100%",fontFamily:Y.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:Y})=>({"&:nth-of-type(odd)":{backgroundColor:Y.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:Y})=>({"&:nth-of-type(odd)":{backgroundColor:Y.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:Y})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:Y.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:Y})=>({padding:Y.spacing(1.5,2,1.5,2.5)}),head:({theme:Y})=>({wordBreak:"break-word",overflow:"hidden",color:Y.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:Y})=>({color:Y.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,nt.e$)(Y.palette.link,.3),background:(0,nt.a)(Y.palette.link,.95)},[Y.breakpoints.up("md")]:{minWidth:120,fontSize:Y.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:Y})=>({color:Y.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:Y})=>({marginRight:Y.spacing(1),marginBottom:Y.spacing(1)}),label:({theme:Y})=>({lineHeight:Y.spacing(2.5),fontWeight:Y.typography.fontWeightMedium,fontSize:Y.spacing(1.75)}),labelSmall:({theme:Y})=>({fontSize:Y.spacing(1.5)}),deleteIcon:({theme:Y})=>({width:Y.spacing(3),height:Y.spacing(3),margin:Y.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:Y})=>({width:Y.spacing(2),height:Y.spacing(2),margin:Y.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}};var Te=(Y,he,fe)=>{if(!he.has(Y))throw TypeError("Cannot "+fe)},Ke=(Y,he,fe)=>(Te(Y,he,"read from private field"),fe?fe.call(Y):he.get(Y)),mt=(Y,he,fe)=>{if(he.has(Y))throw TypeError("Cannot add the same private member more than once");he instanceof WeakSet?he.add(Y):he.set(Y,fe)},Je=(Y,he,fe,Ct)=>(Te(Y,he,"write to private field"),Ct?Ct.call(Y,fe):he.set(Y,fe),fe),qe;class Ut{constructor(he,fe){mt(this,qe,new Map),Je(this,qe,new Map),he&&Ke(this,qe).set("v4",he),fe&&Ke(this,qe).set("v5",fe)}getTheme(he){return Ke(this,qe).get(he)}}qe=new WeakMap;function nn(Y){const he=j(Y),fe={...Z,...Y.components},Ct=(0,He.A)({...he,components:fe}),Ft=Jt(Ct,fe),cn={...(0,V.A)(he),...Ft};return new Ut(cn,Ct)}function It(Y){const he=adaptV4Theme(Y),fe=createTheme$2(Y);return new Ut(fe,createTheme$1(he))}const ht={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},Zt={light:nn({palette:ht.light}),dark:nn({palette:ht.dark})};Ge.A.configure(Y=>`v5-${Y}`);const ln=(0,ie.A)({productionPrefix:"jss4-"});function on(Y){const{children:he,theme:fe,noCssBaseline:Ct=!1}=Y,Ft=fe.getTheme("v4"),cn=fe.getTheme("v5");let An;Ct||(An=W.createElement(Ye.Ay,null));let In=W.createElement(W.Fragment,null,An,he);return Ft&&(In=W.createElement(oe.Ay,{generateClassName:ln},W.createElement(Ce.A,{theme:Ft},In))),cn&&(In=W.createElement(Xe.A,{injectFirst:!0},W.createElement(at.A,{theme:cn},In))),In}function Qt(Y){var he,fe,Ct,Ft;return{props:{MuiGrid:(fe=(he=Z)==null?void 0:he.MuiGrid)==null?void 0:fe.defaultProps,MuiSwitch:(Ft=(Ct=Z)==null?void 0:Ct.MuiSwitch)==null?void 0:Ft.defaultProps},...j(Y)}}function Ae(Y){return Jt(Y,Z).overrides}function Ve(Y){const he=Qt(Y),fe=(0,V.A)(he),Ct=Ae(fe);return{...fe,overrides:Ct}}const jt=Ve({palette:ht.light}),zt=Ve({palette:ht.dark});var Kt=e(75962),Et=e(87145);const xn=[(0,l.bW)({api:b.q,deps:{configApi:b.p},factory:({configApi:Y})=>s.Yi.compile(`${Y.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,l.bW)({api:b.l,deps:{},factory:()=>new s.$K}),(0,l.bW)({api:b.a,deps:{},factory:()=>new s.R8}),(0,l.bW)({api:b.r,deps:{alertApi:b.l},factory:({alertApi:Y})=>{const he=new s.i3(Y,new s.Fb);return s.u_.forward(he,{hidden:!1}),he}}),(0,l.bW)({api:b.y,deps:{errorApi:b.r},factory:({errorApi:Y})=>s.gu.create({errorApi:Y})}),(0,l.bW)({api:b.s,deps:{configApi:b.p,identityApi:b.t,discoveryApi:b.q},factory:({configApi:Y,identityApi:he,discoveryApi:fe})=>(0,s.FA)({middleware:[s.W.resolvePluginProtocol({discoveryApi:fe}),s.W.injectIdentityAuth({identityApi:he,config:Y})]})}),(0,l.bW)({api:b.x,deps:{},factory:()=>new s.aQ}),(0,l.bW)({api:b.g,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.kF.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,environment:fe.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.m,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.n5.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,environment:fe.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.d,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.Qf.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,defaultScopes:["read:user"],environment:fe.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.o,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.gE.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,environment:fe.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.e,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.WW.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,environment:fe.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.h,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.kI.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,environment:fe.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.i,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.Ke.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,defaultScopes:["account"],environment:fe.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.j,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.l9.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,defaultScopes:["REPO_READ"]})}),(0,l.bW)({api:b.k,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.l2.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,environment:fe.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.v,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:Y,oauthRequestApi:he,configApi:fe})=>s.Ud.create({configApi:fe,discoveryApi:Y,oauthRequestApi:he,environment:fe.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.x9,deps:{discovery:b.q,identity:b.t,config:b.p},factory:({config:Y,discovery:he,identity:fe})=>A.ak.create({config:Y,discovery:he,identity:fe})})];function dn({children:Y}){return(0,Q.Ri)()?W.createElement(W.Fragment,null,Y):W.createElement(Q.fS,null,Y)}const Xt=()=>W.createElement(q.M,{status:"404",statusMessage:"PAGE NOT FOUND"}),yn=({step:Y,error:he})=>{let fe="";return Y==="load-config"?fe=`The configuration failed to load, someone should have a look at this error: ${he.message}`:Y==="load-chunk"&&(fe=`Lazy loaded chunk failed to load, try to reload the page: ${he.message}`),W.createElement(dn,null,W.createElement(q.M,{statusMessage:fe,stack:he.stack}))},Qe=({error:Y,resetError:he,plugin:fe})=>W.createElement(q.bJ,{title:`Error in ${fe==null?void 0:fe.getId()}`,defaultExpanded:!0,error:Y},W.createElement(r.A,{variant:"outlined",onClick:he},"Retry")),pt={Progress:q.ke,Router:t.Kd,NotFoundErrorPage:Xt,BootErrorPage:yn,ErrorBoundaryFallback:Qe},Dt={brokenImage:_.A,catalog:F.A,scaffolder:me.A,techdocs:H.A,search:xe.A,chat:ve.A,dashboard:dt.A,docs:z.A,email:ee.A,github:w.A,group:re.A,help:M.A,"kind:api":D.A,"kind:component":v.A,"kind:domain":pe.A,"kind:group":re.A,"kind:location":y.A,"kind:system":de.A,"kind:user":Ne.A,"kind:resource":X.A,"kind:template":N.A,user:Ne.A,warning:ye.A},it=[{id:"light",title:"Light Theme",variant:"light",icon:W.createElement(Et.A,null),Provider:({children:Y})=>W.createElement(on,{theme:Zt.light,children:Y})},{id:"dark",title:"Dark Theme",variant:"dark",icon:W.createElement(Kt.A,null),Provider:({children:Y})=>W.createElement(on,{theme:Zt.dark,children:Y})}];function Ze(Y){var he,fe,Ct,Ft;return(0,s.Z8)({...Y,apis:(he=Y==null?void 0:Y.apis)!=null?he:[],bindRoutes:Y==null?void 0:Y.bindRoutes,components:{...pt,...Y==null?void 0:Y.components},configLoader:Y==null?void 0:Y.configLoader,defaultApis:xn,icons:{...Dt,...Y==null?void 0:Y.icons},plugins:(fe=Y==null?void 0:Y.plugins)!=null?fe:[],featureFlags:(Ct=Y==null?void 0:Y.featureFlags)!=null?Ct:[],themes:(Ft=Y==null?void 0:Y.themes)!=null?Ft:it})}},75757:(Tn,_t,e)=>{"use strict";e.d(_t,{K3:()=>z,cr:()=>q,dJ:()=>dt});var s=e(29835),l=e(3399),b=e(10288),A=e.n(b),W=e(94214),r=e.n(W);const q=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function Q(ee){return!ee.cursor}const t="catalog";var pe=Object.defineProperty,_=(ee,D,w)=>D in ee?pe(ee,D,{enumerable:!0,configurable:!0,writable:!0,value:w}):ee[D]=w,de=(ee,D,w)=>(_(ee,typeof D!="symbol"?D+"":D,w),w);class me{constructor(D){de(this,"discoveryApi"),de(this,"fetchApi"),this.discoveryApi=D.discoveryApi,this.fetchApi=D.fetchApi||{fetch:A()}}async analyzeLocation(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/analyze-location").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}async createLocation(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations{?dryRun}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}async deleteEntityByUid(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-uid/{uid}").expand({uid:D.path.uid});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"DELETE"})}async deleteLocation(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations/{id}").expand({id:D.path.id});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"DELETE"})}async getEntities(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities{?fields,limit,filter*,offset,after,order*}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntitiesByQuery(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntitiesByRefs(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-refs/{?filter*}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}async getEntityAncestryByName(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-name/{kind}/{namespace}/{name}/ancestry").expand({kind:D.path.kind,namespace:D.path.namespace,name:D.path.name});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntityByName(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-name/{kind}/{namespace}/{name}").expand({kind:D.path.kind,namespace:D.path.namespace,name:D.path.name});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntityByUid(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-uid/{uid}").expand({uid:D.path.uid});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntityFacets(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entity-facets{?facet*,filter*}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getLocation(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations/{id}").expand({id:D.path.id});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getLocationByEntity(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations/by-entity/{kind}/{namespace}/{name}").expand({kind:D.path.kind,namespace:D.path.namespace,name:D.path.name});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getLocations(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async refreshEntity(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/refresh").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}async validateEntity(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/validate-entity").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}}var H=Object.defineProperty,xe=(ee,D,w)=>D in ee?H(ee,D,{enumerable:!0,configurable:!0,writable:!0,value:w}):ee[D]=w,ve=(ee,D,w)=>(xe(ee,typeof D!="symbol"?D+"":D,w),w);class dt{constructor(D){ve(this,"apiClient"),this.apiClient=new me(D)}async getEntityAncestors(D,w){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,s.KU)(D.entityRef)},w))}async getLocationById(D,w){return await this.requestOptional(await this.apiClient.getLocation({path:{id:D}},w))}async getLocationByEntity(D,w){return await this.requestOptional(await this.apiClient.getLocationByEntity({path:(0,s.KU)(D)},w))}async getEntities(D,w){const{filter:M=[],fields:y=[],order:v,offset:F,limit:re,after:Ne}=D!=null?D:{},ye=[];if(v)for(const V of[v].flat())V&&ye.push(`${V.order}:${V.field}`);const X=await this.requestRequired(await this.apiClient.getEntities({query:{fields:y,limit:re,filter:this.getFilterValue(M),offset:F,after:Ne,order:v?ye:void 0}},w));if(ye.length)return{items:X};const N=(V,ie)=>{var oe,Ce;if(((oe=V.metadata)==null?void 0:oe.name)===void 0||V.kind===void 0||((Ce=ie.metadata)==null?void 0:Ce.name)===void 0||ie.kind===void 0)return 0;const nt=(0,s.U2)(V),He=(0,s.U2)(ie);return nt<He?-1:nt>He?1:0};return{items:X.sort(N)}}async getEntitiesByRefs(D,w){const M=await this.apiClient.getEntitiesByRefs({body:{entityRefs:D.entityRefs,fields:D.fields},query:{filter:this.getFilterValue(D.filter)}},w);if(!M.ok)throw await l.o3.fromResponse(M);const{items:y}=await M.json();return{items:y.map(v=>v!=null?v:void 0)}}async queryEntities(D={},w){var M,y;const v={};if(Q(D)){const{fields:F=[],filter:re,limit:Ne,orderFields:ye,fullTextFilter:X}=D;v.filter=this.getFilterValue(re),Ne!==void 0&&(v.limit=Ne),ye!==void 0&&(v.orderField=(Array.isArray(ye)?ye:[ye]).map(({field:V,order:ie})=>`${V},${ie}`)),F.length&&(v.fields=F);const N=(M=X==null?void 0:X.term)==null?void 0:M.trim();N&&(v.fullTextFilterTerm=N),(y=X==null?void 0:X.fields)!=null&&y.length&&(v.fullTextFilterFields=X.fields)}else{const{fields:F=[],limit:re,cursor:Ne}=D;v.cursor=Ne,re!==void 0&&(v.limit=re),F.length&&(v.fields=F)}return this.apiClient.getEntitiesByQuery({query:v},w).then(F=>F.json())}async getEntityByRef(D,w){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,s.KU)(D)},w))}async getEntityByName(D,w){const{kind:M,namespace:y="default",name:v}=D;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:M,namespace:y,name:v}},w))}async refreshEntity(D,w){const M=await this.apiClient.refreshEntity({body:{entityRef:D}},w);if(M.status!==200)throw new Error(await M.text())}async getEntityFacets(D,w){const{filter:M=[],facets:y}=D;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:y,filter:this.getFilterValue(M)}},w))}async addLocation(D,w){const{type:M="url",target:y,dryRun:v}=D,F=await this.apiClient.createLocation({body:{type:M,target:y},query:{dryRun:v?"true":void 0}},w);if(F.status!==201)throw new Error(await F.text());const{location:re,entities:Ne,exists:ye}=await F.json();if(!re)throw new Error(`Location wasn't added: ${y}`);return{location:re,entities:Ne,exists:ye}}async getLocationByRef(D,w){return(await this.requestRequired(await this.apiClient.getLocations({},w))).map(y=>y.data).find(y=>D===(0,s.KL)(y))}async removeLocationById(D,w){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:D}},w))}async removeEntityByUid(D,w){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:D}},w))}async validateEntity(D,w,M){const y=await this.apiClient.validateEntity({body:{entity:D,location:w}},M);if(y.ok)return{valid:!0};if(y.status!==400)throw await l.o3.fromResponse(y);const{errors:v=[]}=await y.json();return{valid:!1,errors:v}}async requestIgnored(D){if(!D.ok)throw await l.o3.fromResponse(D)}async requestRequired(D){if(!D.ok)throw await l.o3.fromResponse(D);return D.json()}async requestOptional(D){if(!D.ok){if(D.status===404)return;throw await l.o3.fromResponse(D)}return await D.json()}getFilterValue(D=[]){const w=[];for(const M of[D].flat()){const y=[];for(const[v,F]of Object.entries(M))for(const re of[F].flat())re===q?y.push(v):typeof re=="string"&&y.push(`${v}=${re}`);y.length&&w.push(y.join(","))}return w}}const z="backstage.io/catalog-processing"},29835:(Tn,_t,e)=>{"use strict";e.d(_t,{Cr:()=>ar,Eo:()=>or,Ey:()=>We,I4:()=>Pa,IB:()=>Ot,KL:()=>ir,KU:()=>F,Kx:()=>Ie,L8:()=>be,P:()=>xe,Qz:()=>ke,U2:()=>re,ZD:()=>wt,_P:()=>H,aY:()=>er,fO:()=>ot,fT:()=>te,jn:()=>tt,nC:()=>rn,oQ:()=>me,r2:()=>ur,sA:()=>bt,sM:()=>v,tj:()=>xn,u0:()=>ze,vv:()=>G,yz:()=>Kt,zj:()=>et,zu:()=>jt});var s=e(45250),l=e.n(s),b=e(11601),A=e.n(b);function W($e){return $e.kind.toLocaleUpperCase("en-US")==="API"}function r($e){return $e.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function q($e){return $e.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function Q($e){return $e.kind.toLocaleUpperCase("en-US")==="GROUP"}function t($e){return $e.kind.toLocaleUpperCase("en-US")==="LOCATION"}function pe($e){return $e.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function _($e){return $e.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function de($e){return $e.kind.toLocaleUpperCase("en-US")==="USER"}const me="default",H="backstage.io/view-url",xe="backstage.io/edit-url",ve="kubernetes.io/api-server",dt="kubernetes.io/api-server-certificate-authority",z="kubernetes.io/auth-provider";var ee=Object.defineProperty,D=($e,ce,lt)=>ce in $e?ee($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:lt}):$e[ce]=lt,w=($e,ce,lt)=>(D($e,typeof ce!="symbol"?ce+"":ce,lt),lt);class M{constructor(ce=me){w(this,"namespace"),this.namespace=ce}async enforce(ce){return ce.metadata.namespace?ce:lodash.merge({metadata:{namespace:this.namespace}},ce)}}function y($e){let ce=$e.indexOf(":");const lt=$e.indexOf("/");lt!==-1&&lt<ce&&(ce=-1);const Rn=ce===-1?void 0:$e.slice(0,ce),Kn=lt===-1?void 0:$e.slice(ce+1,lt),na=$e.slice(Math.max(ce+1,lt+1));if(Rn===""||Kn===""||na==="")throw new TypeError(`Entity reference "${$e}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:Rn,namespace:Kn,name:na}}function v($e){return{kind:$e.kind,namespace:$e.metadata.namespace||me,name:$e.metadata.name}}function F($e,ce){var lt,Rn,Kn,na;if(!$e)throw new Error("Entity reference must not be empty");const aa=ce==null?void 0:ce.defaultKind,Ea=(ce==null?void 0:ce.defaultNamespace)||me;let ba,wa,Ta;if(typeof $e=="string"){const Ka=y($e);ba=(lt=Ka.kind)!=null?lt:aa,wa=(Rn=Ka.namespace)!=null?Rn:Ea,Ta=Ka.name}else ba=(Kn=$e.kind)!=null?Kn:aa,wa=(na=$e.namespace)!=null?na:Ea,Ta=$e.name;if(ba)if(wa){if(!Ta){const Ka=JSON.stringify($e);throw new Error(`Entity reference ${Ka} had missing or empty name`)}}else{const Ka=JSON.stringify($e);throw new Error(`Entity reference ${Ka} had missing or empty namespace`)}else{const Ka=JSON.stringify($e);throw new Error(`Entity reference ${Ka} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:ba,namespace:wa,name:Ta}}function re($e){var ce,lt;let Rn,Kn,na;return"metadata"in $e?(Rn=$e.kind,Kn=(ce=$e.metadata.namespace)!=null?ce:me,na=$e.metadata.name):(Rn=$e.kind,Kn=(lt=$e.namespace)!=null?lt:me,na=$e.name),`${Rn.toLocaleLowerCase("en-US")}:${Kn.toLocaleLowerCase("en-US")}/${na.toLocaleLowerCase("en-US")}`}var Ne=Object.defineProperty,ye=($e,ce,lt)=>ce in $e?Ne($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:lt}):$e[ce]=lt,X=($e,ce,lt)=>(ye($e,typeof ce!="symbol"?ce+"":ce,lt),lt);class N{constructor(ce){X(this,"parentRef");const{kind:lt,namespace:Rn,name:Kn}=F(ce,{defaultKind:"Group",defaultNamespace:me});if(lt.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=re({kind:lt,namespace:Rn,name:Kn})}async enforce(ce){if(ce.kind!=="Group")return ce;const lt=ce;return lt.spec.parent||re(lt)!==this.parentRef&&(lt.spec.parent=this.parentRef),lt}}class V{static isValidPrefixAndOrSuffix(ce,lt,Rn,Kn){if(typeof ce!="string")return!1;const na=ce.split(lt);return na.length===1?Kn(na[0]):na.length===2?Rn(na[0])&&Kn(na[1]):!1}static isJsonSafe(ce){try{return l().isEqual(ce,JSON.parse(JSON.stringify(ce)))}catch{return!1}}static isValidDnsSubdomain(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=253&&ce.split(".").every(V.isValidDnsLabel)}static isValidDnsLabel(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(ce)}static isValidTag(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(ce)}static isValidUrl(ce){if(typeof ce!="string")return!1;try{return new URL(ce),!0}catch{return!1}}static isValidString(ce){var lt;return typeof ce=="string"&&((lt=ce==null?void 0:ce.trim())==null?void 0:lt.length)>=1}static isNonEmptyString(ce){var lt;return typeof ce=="string"&&((lt=ce==null?void 0:ce.trim())==null?void 0:lt.length)>=1}}var ie="http://json-schema.org/draft-07/schema",oe="EntityEnvelope",Ce="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",nt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],He="object",Xe=["apiVersion","kind","metadata"],at=!0,Ge={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},Ye={$schema:ie,$id:oe,description:Ce,examples:nt,type:He,required:Xe,additionalProperties:at,properties:Ge},Re="http://json-schema.org/draft-07/schema",Le="Entity",ct="The parts of the format that's common to all versions/kinds of entity.",vt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],St="object",Jt=["apiVersion","kind","metadata"],At=!1,ue={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},ft={$schema:Re,$id:Le,description:ct,examples:vt,type:St,required:Jt,additionalProperties:At,properties:ue},xt="http://json-schema.org/draft-07/schema",gt="EntityMeta",Nt="Metadata fields common to all versions/kinds of entity.",S=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],P="object",j=["name"],Z=!0,Te={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},Ke={$schema:xt,$id:gt,description:Nt,examples:S,type:P,required:j,additionalProperties:Z,properties:Te},mt="http://json-schema.org/draft-07/schema",Je="common",qe="object",Ut="Common definitions to import from other schemas",nn={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},It={$schema:mt,$id:Je,type:qe,description:Ut,definitions:nn};const ht=new Map,Zt=[Ye,ft,Ke,It];function ln($e){if(!($e!=null&&$e.length))throw new TypeError("Unknown error");const ce=$e[0];throw new TypeError(`${ce.instancePath||"<root>"} ${ce.message}${ce.params?` - ${Object.entries(ce.params).map(([lt,Rn])=>`${lt}: ${Rn}`).join(", ")}`:""}`)}function on($e,ce={}){var lt;const Rn=(lt=ce==null?void 0:ce.disableCache)!=null?lt:!1,Kn=Rn?"":JSON.stringify($e);if(!Rn){const ba=ht.get(Kn);if(ba)return ba}const na=Qt($e),aa=new(A())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});na.length&&aa.addSchema(na,void 0,void 0,!0);const Ea=aa.compile($e);return Rn||ht.set(Kn,Ea),Ea}function Qt($e){if(typeof $e!="object")return[];const ce=new Set;$e.$id&&ce.add($e.$id);const lt=new Array,Rn=[$e];for(;Rn.length;){const Kn=Rn.pop();for(const na of Ae(Kn))if(!ce.has(na)){ce.add(na);const aa=Zt.find(Ea=>Ea.$id===na);aa&&(lt.push(aa),Rn.push(aa))}}return lt}function*Ae($e){const ce=[$e];for(;ce.length;){const lt=ce.pop();if(typeof lt=="object"&&lt)for(const[Rn,Kn]of Object.entries(lt))Rn==="$ref"&&typeof Kn=="string"?yield Kn.split("#")[0]:ce.push(Kn)}}function Ve($e){const ce=on($e||Ye);return lt=>{if(ce(lt)===!0)return lt;throw ln(ce.errors)}}function jt($e){const ce=on($e);return lt=>{var Rn;if(ce(lt)===!0)return lt;const na=(Rn=ce.errors)==null?void 0:Rn.filter(aa=>["/kind","/apiVersion"].includes(aa.instancePath));if(na!=null&&na.length&&na.every(aa=>aa.keyword==="enum"))return!1;throw ln(ce.errors)}}function zt($e){const ce=on($e||ft);return lt=>{if(ce(lt)===!0)return lt;throw ln(ce.errors)}}class Kt{static isValidApiVersion(ce){return V.isValidPrefixAndOrSuffix(ce,"/",V.isValidDnsSubdomain,lt=>lt.length>=1&&lt.length<=63&&/^[a-z0-9A-Z]+$/.test(lt))}static isValidKind(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(ce)}static isValidObjectName(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(ce)}static isValidNamespace(ce){return V.isValidDnsLabel(ce)}static isValidLabelKey(ce){return V.isValidPrefixAndOrSuffix(ce,"/",V.isValidDnsSubdomain,Kt.isValidObjectName)}static isValidLabelValue(ce){return ce===""||Kt.isValidObjectName(ce)}static isValidAnnotationKey(ce){return V.isValidPrefixAndOrSuffix(ce,"/",V.isValidDnsSubdomain,Kt.isValidObjectName)}static isValidAnnotationValue(ce){return typeof ce=="string"}}const Et={isValidApiVersion:Kt.isValidApiVersion,isValidKind:Kt.isValidKind,isValidEntityName:Kt.isValidObjectName,isValidNamespace:Kt.isValidNamespace,isValidLabelKey:Kt.isValidLabelKey,isValidLabelValue:Kt.isValidLabelValue,isValidAnnotationKey:Kt.isValidAnnotationKey,isValidAnnotationValue:Kt.isValidAnnotationValue,isValidTag:$e=>typeof $e=="string"&&$e.length>=1&&$e.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test($e)};function xn($e={}){return{...Et,...$e}}var dn=Object.defineProperty,Xt=($e,ce,lt)=>ce in $e?dn($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:lt}):$e[ce]=lt,yn=($e,ce,lt)=>(Xt($e,typeof ce!="symbol"?ce+"":ce,lt),lt);class Qe{constructor(ce=xn()){yn(this,"validators"),this.validators=ce}async enforce(ce){var lt,Rn,Kn,na,aa,Ea,ba;function wa(ha,za,Er){if(za==null)throw new Error(`${ha} must have a value`);let sr;try{sr=Er(za)}catch($a){throw new Error(`${ha} could not be validated, ${$a}`)}if(!sr){let $a;switch(Er.name){case"isValidLabelValue":case"isValidObjectName":$a="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":$a="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":$a="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":$a="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":$a="a string";break;case"isValidKind":$a="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":$a="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":$a="a non empty string";break;default:$a=void 0;break}const Ar=$a?` expected ${$a} but found "${za}".`:"";throw new Error(`"${ha}" is not valid;${Ar} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function Ta(ha,za,Er){return za===void 0||wa(ha,za,Er)}wa("apiVersion",ce.apiVersion,this.validators.isValidApiVersion),wa("kind",ce.kind,this.validators.isValidKind),wa("metadata.name",ce.metadata.name,this.validators.isValidEntityName),Ta("metadata.namespace",ce.metadata.namespace,this.validators.isValidNamespace);for(const[ha,za]of Object.entries((lt=ce.metadata.labels)!=null?lt:[]))wa(`labels.${ha}`,ha,this.validators.isValidLabelKey),wa(`labels.${ha}`,za,this.validators.isValidLabelValue);for(const[ha,za]of Object.entries((Rn=ce.metadata.annotations)!=null?Rn:[]))wa(`annotations.${ha}`,ha,this.validators.isValidAnnotationKey),wa(`annotations.${ha}`,za,this.validators.isValidAnnotationValue);const Ka=(Kn=ce.metadata.tags)!=null?Kn:[];for(let ha=0;ha<Ka.length;++ha)wa(`tags.${ha}`,Ka[ha],this.validators.isValidTag);const dr=(na=ce.metadata.links)!=null?na:[];for(let ha=0;ha<dr.length;++ha)wa(`links.${ha}.url`,(aa=dr[ha])==null?void 0:aa.url,V.isValidUrl),Ta(`links.${ha}.title`,(Ea=dr[ha])==null?void 0:Ea.title,V.isNonEmptyString),Ta(`links.${ha}.icon`,(ba=dr[ha])==null?void 0:ba.icon,Kt.isValidObjectName);return ce}}var pt=Object.defineProperty,Dt=($e,ce,lt)=>ce in $e?pt($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:lt}):$e[ce]=lt,it=($e,ce,lt)=>(Dt($e,typeof ce!="symbol"?ce+"":ce,lt),lt);const Ze=null;class Y{constructor(ce=Ze){it(this,"knownFields"),this.knownFields=ce}async enforce(ce){for(const lt of Object.keys(ce))if(!this.knownFields.includes(lt))throw new Error(`Unknown field ${lt}`);return ce}}var he=Object.defineProperty,fe=($e,ce,lt)=>ce in $e?he($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:lt}):$e[ce]=lt,Ct=($e,ce,lt)=>(fe($e,typeof ce!="symbol"?ce+"":ce,lt),lt);class Ft{constructor(){Ct(this,"validate")}async enforce(ce){if(!this.validate){const Kn=new Ajv({allowUnionTypes:!0});this.validate=Kn.addSchema([It,Ke],void 0,void 0,!0).compile(ft)}if(this.validate(ce)===!0)return ce;const[Rn]=this.validate.errors||[];throw Rn?new Error(`Malformed envelope, ${Rn.instancePath||"<root>"} ${Rn.message}`):new Error("Malformed envelope, Unknown error")}}class cn{constructor(ce){this.policies=ce}async enforce(ce){let lt=ce;for(const Rn of this.policies){const Kn=await Rn.enforce(lt);if(!Kn)throw new Error(`Policy ${Rn.constructor.name} did not return a result`);lt=Kn}return lt}}class An{constructor(ce){this.policies=ce}async enforce(ce){for(const lt of this.policies){const Rn=await lt.enforce(ce);if(Rn)return Rn}throw new Error("The entity did not match any known policy")}}const In={allOf($e){return new cn($e)},oneOf($e){return new An($e)}};var Bn="http://json-schema.org/draft-07/schema",Hn="ApiV1alpha1",Cn="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Vn=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],ua=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],ut={$schema:Bn,$id:Hn,description:Cn,examples:Vn,allOf:ua};function m($e){let ce;return{async check(lt){return ce||(ce=jt($e)),ce(lt)===lt}}}const R=m(ut);var K="http://json-schema.org/draft-07/schema",le="ComponentV1alpha1",I='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',U=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],J=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],we={$schema:K,$id:le,description:I,examples:U,allOf:J};const Oe=m(we);var st="http://json-schema.org/draft-07/schema",Rt="DomainV1alpha1",qt="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",en=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],hn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],pn={$schema:st,$id:Rt,description:qt,examples:en,allOf:hn};const $t=m(pn);var Pn="http://json-schema.org/draft-07/schema",un="GroupV1alpha1",Un="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",qn=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],ta=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],$n={$schema:Pn,$id:un,description:Un,examples:qn,allOf:ta};const bn=m($n);var fn="http://json-schema.org/draft-07/schema",Vt="LocationV1alpha1",En="A location is a marker that references other places to look for catalog data.",Sn=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],ya=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Ra={$schema:fn,$id:Vt,description:En,examples:Sn,allOf:ya};const Oa=m(Ra),G="ownedBy",be="ownerOf",We="consumesApi",ot="apiConsumedBy",wt="providesApi",Ot="apiProvidedBy",rn="dependsOn",te="dependencyOf",Ie="parentOf",ke="childOf",ze="memberOf",et="hasMember",tt="partOf",bt="hasPart";var Lt="http://json-schema.org/draft-07/schema",Gt="ResourceV1alpha1",mn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",tn=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],ia=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Nn={$schema:Lt,$id:Gt,description:mn,examples:tn,allOf:ia};const Dn=m(Nn);var Fn="http://json-schema.org/draft-07/schema",Yn="SystemV1alpha1",Wn="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",la=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],sa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Aa={$schema:Fn,$id:Yn,description:Wn,examples:la,allOf:sa};const pa=m(Aa);var Sa="http://json-schema.org/draft-07/schema",xa="UserV1alpha1",Ha="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Va=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Ya=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],hr={$schema:Sa,$id:xa,description:Ha,examples:Va,allOf:Ya};const gr=m(hr),or="backstage.io/managed-by-location",ur="backstage.io/managed-by-origin-location",Pa="backstage.io/source-location",qa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function er($e){if(typeof $e!="string")throw new TypeError(`Unable to parse location ref '${$e}', unexpected argument ${typeof $e}`);const ce=$e.indexOf(":");if(ce<0)throw new TypeError(`Unable to parse location ref '${$e}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const lt=$e.substring(0,ce).trim(),Rn=$e.substring(ce+1).trim();if(!lt||!Rn)throw new TypeError(`Unable to parse location ref '${$e}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(lt==="http"||lt==="https")throw new TypeError(`Invalid location ref '${$e}', please prefix it with 'url:', e.g. 'url:${$e}'`);if(qa.test(Rn))throw new TypeError(`Invalid location ref '${$e}', target is a javascript: URL`);return{type:lt,target:Rn}}function ir($e){const{type:ce,target:lt}=$e;if(ce){if(!lt)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(qa.test(lt))throw new TypeError(`Invalid location ref '${ce}:${lt}', target is a javascript: URL`);return`${ce}:${lt}`}function ar($e){var ce,lt,Rn,Kn,na;const aa=(na=(lt=(ce=$e.metadata)==null?void 0:ce.annotations)==null?void 0:lt[Pa])!=null?na:(Kn=(Rn=$e.metadata)==null?void 0:Rn.annotations)==null?void 0:Kn[or];if(!aa)throw new Error(`Entity '${re($e)}' is missing location`);return er(aa)}},12082:(Tn,_t,e)=>{"use strict";e.d(_t,{$K:()=>ta,Lz:()=>lt,l2:()=>pn,Ke:()=>Rt,l9:()=>en,i3:()=>be,Fb:()=>Ot,W:()=>Nn,iO:()=>yo,Qf:()=>Y,WW:()=>fe,kF:()=>cn,n5:()=>I,R8:()=>bn,aQ:()=>xa,gE:()=>Hn,kI:()=>Oe,u_:()=>rn,Yi:()=>Oa,Ud:()=>Pn,gu:()=>or,FA:()=>tt,Z8:()=>Qo});var s=e(14041),l=e(39067),b=e.n(l),A=e(97388),W=e(96403),r=e.n(W),q=e(5124),Q=e(11638),t=e(46195);const pe=null;function _(d,a){let i,p=!1;const T={};try{i=a!=null&&a.key?d.getConfig(a.key):d;for(const se of pe){const Me=i.getOptionalNumber(se);Me!==void 0&&(T[se]=Me,p=!0)}}catch(se){throw new InputError(`Failed to read duration from config, ${se}`)}try{if(!p){const Me=pe.map(Ue=>`'${Ue}'`).join(", ");throw new Error(`Needs one or more of ${Me}`)}const se=i.keys().filter(Me=>!pe.includes(Me));if(se.length){const Me=se.length===1?"property":"properties",Ue=se.map(kt=>`'${kt}'`).join(", "),yt=pe.map(kt=>`'${kt}'`).join(", ");throw new Error(`Unknown ${Me} ${Ue}; expected one or more of ${yt}`)}}catch(se){let Me="Failed to read duration from config";throw a!=null&&a.key&&(Me+=` at '${a.key}'`),new InputError(`${Me}, ${se}`)}return T}var de=Object.defineProperty,me=(d,a,i)=>a in d?de(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,H=(d,a,i)=>(me(d,typeof a!="symbol"?a+"":a,i),i);const xe=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function ve(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function dt(d){return typeof d!="object"||d===null?d:Array.isArray(d)?d.map(dt):Object.fromEntries(Object.entries(d).map(([a,i])=>[a,dt(i)]))}function z(d,a){if(d===null)return;if(d===void 0)return a===void 0?void 0:z(a);if(typeof d!="object"||Array.isArray(d))return d;const i=ve(a)?a:{},p={};for(const T of new Set([...Object.keys(d),...Object.keys(i)])){const se=z(d[T],i[T]);se!==void 0&&(p[T]=se)}return p}function ee(d){if(d===null)return"null";if(Array.isArray(d))return"array";const a=typeof d;return a==="number"&&isNaN(d)?"nan":a==="string"&&d===""?"empty-string":a}const D={type(d,a,i,p){return`Invalid type in config for key '${d}' in '${a}', got ${i}, wanted ${p}`},missing(d,a){return`Missing required config value at '${d}' in '${a}'`},convert(d,a,i){return`Unable to convert config value for key '${d}' in '${a}' to a ${i}`}};class w{constructor(a,i="mock-config",p,T=""){this.data=a,this.context=i,this.fallback=p,this.prefix=T,H(this,"filteredKeys"),H(this,"notifiedFilteredKeys",new Set)}static fromConfigs(a){return a.length===0?new w(void 0):a.reduce((i,{data:p,context:T,filteredKeys:se,deprecatedKeys:Me})=>{const Ue=new w(p,T,i);if(Ue.filteredKeys=se,Me)for(const{key:yt,description:kt}of Me)console.warn(`The configuration key '${yt}' of ${T} is deprecated and may be removed soon. ${kt||""}`);return Ue},void 0)}has(a){var i,p;const T=this.readValue(a);return T===null?!1:T!==void 0?!0:(p=(i=this.fallback)==null?void 0:i.has(a))!=null?p:!1}keys(){var a,i;const p=this.data?Object.keys(this.data):[],T=(i=(a=this.fallback)==null?void 0:a.keys())!=null?i:[];return[...new Set([...p,...T])].filter(se=>{var Me;return((Me=this.data)==null?void 0:Me[se])!==null})}get(a){const i=this.getOptional(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a!=null?a:""),this.context));return i}getOptional(a){var i,p;const T=dt(this.readValue(a)),se=(i=this.fallback)==null?void 0:i.getOptional(a);if(T!==null)return T===void 0?z(se):se===void 0?z(T):z(T,se)}getConfig(a){const i=this.getOptionalConfig(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalConfig(a){var i;const p=this.readValue(a),T=(i=this.fallback)==null?void 0:i.getOptionalConfig(a);if(ve(p))return this.copy(p,a,T);if(p!==null){if(p!==void 0)throw new TypeError(D.type(this.fullKey(a),this.context,ee(p),"object"));return T}}getConfigArray(a){const i=this.getOptionalConfigArray(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalConfigArray(a){var i;const p=this.readConfigValue(a,T=>{if(!Array.isArray(T))return{expected:"object-array"};for(const[se,Me]of T.entries())if(!ve(Me))return{expected:"object-array",value:Me,key:`${a}[${se}]`};return!0});if(p)return p.map((T,se)=>this.copy(T,`${a}[${se}]`))}getNumber(a){const i=this.getOptionalNumber(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalNumber(a){const i=this.readConfigValue(a,T=>typeof T=="number"||typeof T=="string"||{expected:"number"});if(typeof i=="number"||i===void 0)return i;const p=Number(i);if(!Number.isFinite(p))throw new Error(D.convert(this.fullKey(a),this.context,"number"));return p}getBoolean(a){const i=this.getOptionalBoolean(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalBoolean(a){const i=this.readConfigValue(a,T=>typeof T=="boolean"||typeof T=="number"||typeof T=="string"||{expected:"boolean"});if(typeof i=="boolean"||i===void 0)return i;const p=String(i).trim();if(/^(?:y|yes|true|1|on)$/i.test(p))return!0;if(/^(?:n|no|false|0|off)$/i.test(p))return!1;throw new Error(D.convert(this.fullKey(a),this.context,"boolean"))}getString(a){const i=this.getOptionalString(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalString(a){return this.readConfigValue(a,i=>typeof i=="string"&&i!==""||{expected:"string"})}getStringArray(a){const i=this.getOptionalStringArray(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalStringArray(a){return this.readConfigValue(a,i=>{if(!Array.isArray(i))return{expected:"string-array"};for(const[p,T]of i.entries())if(typeof T!="string"||T==="")return{expected:"string-array",value:T,key:`${a}[${p}]`};return!0})}fullKey(a){return`${this.prefix}${this.prefix?".":""}${a}`}copy(a,i,p){const T=new w(a,this.context,p,this.fullKey(i));return T.filteredKeys=this.filteredKeys,T}readConfigValue(a,i){var p,T;const se=this.readValue(a);if(se===void 0)return(T=this.fallback)==null?void 0:T.readConfigValue(a,i);if(se===null)return;const Me=i(se);if(Me!==!0){const{key:Ue=a,value:yt=se,expected:kt}=Me;throw new TypeError(D.type(this.fullKey(Ue),this.context,ee(yt),kt))}return se}readValue(a){const i=a?a.split("."):[];for(const T of i)if(!xe.test(T))throw new TypeError(`Invalid config key '${a}'`);if(this.data===void 0)return;let p=this.data;for(const[T,se]of i.entries())if(ve(p))p=p[se];else if(p!=null){const Me=this.fullKey(i.slice(0,T).join("."));throw new TypeError(D.type(Me,this.context,ee(p),"object"))}return p}}var M=e(18690),y=e(21613),v=e(73466),F=e(59294),re=e(46155),Ne=e.n(re),ye=e(11746),X=e(47304),N=Object.defineProperty,V=(d,a,i)=>a in d?N(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,ie=(d,a,i)=>(V(d,typeof a!="symbol"?a+"":a,i),i);class oe{constructor(...a){ie(this,"holders"),this.holders=a}get(a){for(const i of this.holders){const p=i.get(a);if(p)return p}}}const Ce=(0,A.tK)("api-context"),nt=d=>{var a;const{apis:i,children:p}=d,T=(a=(0,s.useContext)(Ce))==null?void 0:a.atVersion(1),se=T?new oe(i,T):i;return s.createElement(Ce.Provider,{value:(0,A.Bl)({1:se}),children:p})};nt.propTypes={apis:b().shape({get:b().func.isRequired}).isRequired,children:b().node};var He=Object.defineProperty,Xe=(d,a,i)=>a in d?He(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,at=(d,a,i)=>(Xe(d,typeof a!="symbol"?a+"":a,i),i);class Ge{constructor(a){this.factories=a,at(this,"apis",new Map)}static validateFactories(a,i){for(const p of i){const T=[p],se=new Set;for(;T.length;){const Me=T.shift(),Ue=a.get(Me);if(Ue)for(const yt of Object.values(Ue.deps)){if(yt.id===p.id)throw new Error(`Circular dependency of api factory for ${p}`);se.has(yt)||(se.add(yt),T.push(yt))}}}}get(a){return this.load(a)}load(a,i=[]){const p=this.apis.get(a.id);if(p)return p;const T=this.factories.get(a);if(!T)return;if(i.includes(T.api))throw new Error(`Circular dependency of api factory for ${T.api}`);const se=this.loadDeps(a,T.deps,[...i,T.api]),Me=T.factory(se);return this.apis.set(a.id,Me),Me}loadDeps(a,i,p){const T={};for(const se in i)if(i.hasOwnProperty(se)){const Me=i[se],Ue=this.load(Me,p);if(!Ue)throw new Error(`No API factory available for dependency ${Me} of dependent ${a}`);T[se]=Ue}return T}}var Ye=Object.defineProperty,Re=(d,a,i)=>a in d?Ye(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Le=(d,a,i)=>(Re(d,typeof a!="symbol"?a+"":a,i),i),ct=(d=>(d[d.default=10]="default",d[d.app=50]="app",d[d.static=100]="static",d))(ct||{});class vt{constructor(){Le(this,"factories",new Map)}register(a,i){const p=ct[a],T=this.factories.get(i.api.id);return T&&T.priority>=p?!1:(this.factories.set(i.api.id,{priority:p,factory:i}),!0)}get(a){const i=this.factories.get(a.id);if(i)return i.factory}getAllApis(){const a=new Set;for(const{factory:i}of this.factories.values())a.add(i.api);return a}}function St(d){return new Promise((a,i)=>{const p=d.width||500,T=d.height||700,se=window.screen.width/2-p/2,Me=window.screen.height/2-T/2,Ue=window.open(d.url,d.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${p},height=${T},top=${Me},left=${se}`);let yt="";if(!Ue||typeof Ue.closed=="undefined"||Ue.closed){const vn=new Error("Failed to open auth popup.");vn.name="PopupRejectedError",i(vn);return}const kt=vn=>{if(vn.source!==Ue||vn.origin!==d.origin)return;const{data:ra}=vn;if(ra.type==="config_info"){yt=ra.targetOrigin;return}if(ra.type!=="authorization_response")return;const ea=ra;if("error"in ea){const oa=new Error(ea.error.message);oa.name=ea.error.name,i(oa)}else a(ea.response);Ln()},jn=setInterval(()=>{if(Ue.closed){const vn=`Login failed, ${yt&&yt!==window.location.origin?`Incorrect app origin, expected ${yt}`:"popup was closed"}`,ra=new Error(vn);ra.name="PopupClosedError",i(ra),Ln()}},100);function Ln(){window.removeEventListener("message",kt),clearInterval(jn)}window.addEventListener("message",kt)})}var Jt=Object.defineProperty,At=(d,a,i)=>a in d?Jt(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,ue=(d,a,i)=>(At(d,typeof a!="symbol"?a+"":a,i),i);let ft=!1;function xt(d){return[...d].join(" ")}class gt{constructor(a){ue(this,"discoveryApi"),ue(this,"environment"),ue(this,"provider"),ue(this,"joinScopesFunc"),ue(this,"authRequester"),ue(this,"sessionTransform"),ue(this,"enableExperimentalRedirectFlow"),ue(this,"popupOptions");var i;const{configApi:p,discoveryApi:T,environment:se,provider:Me,joinScopes:Ue=xt,oauthRequestApi:yt,sessionTransform:kt=Ln=>Ln,popupOptions:jn}=a;!ft&&!p&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),ft=!0),this.enableExperimentalRedirectFlow=p&&(i=p.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?i:!1,this.authRequester=yt.createAuthRequester({provider:Me,onAuthRequest:async Ln=>this.enableExperimentalRedirectFlow?this.executeRedirect(Ln):this.showPopup(Ln)}),this.discoveryApi=T,this.environment=se,this.provider=Me,this.joinScopesFunc=Ue,this.sessionTransform=kt,this.popupOptions=jn}async createSession(a){return a.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(a.scopes):this.showPopup(a.scopes):this.authRequester(a.scopes)}async refreshSession(a){const i=await fetch(await this.buildUrl("/refresh",{optional:!0,...a&&{scope:this.joinScopesFunc(a)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(T=>{throw new Error(`Auth refresh request failed, ${T}`)});if(!i.ok){const T=new Error(`Auth refresh request failed, ${i.statusText}`);throw T.status=i.status,T}const p=await i.json();if(p.error){const T=new Error(p.error.message);throw p.error.name&&(T.name=p.error.name),T}return await this.sessionTransform(p)}async removeSession(){const a=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!a.ok){const i=new Error(`Logout request failed, ${a.statusText}`);throw i.status=a.status,i}}async showPopup(a){var i,p,T,se,Me,Ue,yt,kt;const jn=this.joinScopesFunc(a),Ln=await this.buildUrl("/start",{scope:jn,origin:window.location.origin,flow:"popup"}),vn=(p=(i=this.popupOptions)==null?void 0:i.size)!=null&&p.fullscreen?window.screen.width:((se=(T=this.popupOptions)==null?void 0:T.size)==null?void 0:se.width)||450,ra=(Ue=(Me=this.popupOptions)==null?void 0:Me.size)!=null&&Ue.fullscreen?window.screen.height:((kt=(yt=this.popupOptions)==null?void 0:yt.size)==null?void 0:kt.height)||730,ea=await St({url:Ln,name:`${this.provider.title} Login`,origin:new URL(Ln).origin,width:vn,height:ra});return await this.sessionTransform(ea)}async executeRedirect(a){const i=this.joinScopesFunc(a);return window.location.href=await this.buildUrl("/start",{scope:i,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(a,i){const p=await this.discoveryApi.getBaseUrl("auth"),T=this.buildQueryString({...i,env:this.environment});return`${p}/${this.provider.id}${a}${T}`}buildQueryString(a){if(!a)return"";const i=Object.entries(a).map(([p,T])=>{if(typeof T=="string")return`${encodeURIComponent(p)}=${encodeURIComponent(T)}`;if(T)return encodeURIComponent(p)}).filter(Boolean).join("&");return i?`?${i}`:""}}var Nt=Object.defineProperty,S=(d,a,i)=>a in d?Nt(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,P=(d,a,i)=>(S(d,typeof a!="symbol"?a+"":a,i),i);class j{constructor(a){P(this,"discoveryApi"),P(this,"environment"),P(this,"provider");const{discoveryApi:i,environment:p,provider:T}=a;this.discoveryApi=i,this.environment=p,this.provider=T}async createSession(){const a=await this.buildUrl("/start"),i=await St({url:a,name:`${this.provider.title} Login`,origin:new URL(a).origin,width:450,height:730});return{...i,id:i.profile.email}}async refreshSession(){}async removeSession(){const a=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!a.ok){const i=new Error(`Logout request failed, ${a.statusText}`);throw i.status=a.status,i}}async buildUrl(a){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${a}?env=${this.environment}`}}function Z(d,a){for(const i of a)if(!d.has(i))return!1;return!0}class Te{constructor(a){this.options=a}sessionExistsAndHasScope(a,i){if(!a)return!1;if(!i||this.options.sessionScopes===void 0)return!0;const p=this.options.sessionScopes(a);return Z(p,i)}getExtendedScope(a,i){const p=new Set(this.options.defaultScopes);if(a&&this.options.sessionScopes!==void 0){const T=this.options.sessionScopes(a);for(const se of T)p.add(se)}if(i)for(const T of i)p.add(T);return p}}var Ke=Object.defineProperty,mt=(d,a,i)=>a in d?Ke(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Je=(d,a,i)=>(mt(d,typeof a!="symbol"?a+"":a,i),i);class qe{constructor(){Je(this,"isClosed",!1),Je(this,"terminatingError"),Je(this,"observable",new(r())(a=>this.isClosed?(this.terminatingError?a.error(this.terminatingError):a.complete(),()=>{}):(this.subscribers.add(a),()=>{this.subscribers.delete(a)}))),Je(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(a){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(i=>i.next(a))}error(a){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=a,this.subscribers.forEach(i=>i.error(a))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(a=>a.complete())}subscribe(a,i,p){const T=typeof a=="function"?{next:a,error:i,complete:p}:a;return this.observable.subscribe(T)}}class Ut{constructor(a){Je(this,"isClosed"),Je(this,"currentValue"),Je(this,"terminatingError"),Je(this,"observable"),Je(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=a,this.terminatingError=void 0,this.observable=new(r())(i=>this.isClosed?(this.terminatingError?i.error(this.terminatingError):i.complete(),()=>{}):(i.next(this.currentValue),this.subscribers.add(i),()=>{this.subscribers.delete(i)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(a){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=a,this.subscribers.forEach(i=>i.next(a))}error(a){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=a,this.subscribers.forEach(i=>i.error(a))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(a=>a.complete())}subscribe(a,i,p){const T=typeof a=="function"?{next:a,error:i,complete:p}:a;return this.observable.subscribe(T)}}var nn=Object.defineProperty,It=(d,a,i)=>a in d?nn(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,ht=(d,a,i)=>(It(d,typeof a!="symbol"?a+"":a,i),i);class Zt{constructor(){ht(this,"subject",new Ut(q.S.SignedOut)),ht(this,"signedIn",!1)}setIsSignedIn(a){this.signedIn!==a&&(this.signedIn=a,this.subject.next(this.signedIn?q.S.SignedIn:q.S.SignedOut))}sessionState$(){return this.subject}}var ln=Object.defineProperty,on=(d,a,i)=>a in d?ln(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Qt=(d,a,i)=>(on(d,typeof a!="symbol"?a+"":a,i),i);class Ae{constructor(a){Qt(this,"connector"),Qt(this,"helper"),Qt(this,"sessionScopesFunc"),Qt(this,"sessionShouldRefreshFunc"),Qt(this,"stateTracker",new Zt),Qt(this,"refreshPromise"),Qt(this,"currentSession");const{connector:i,defaultScopes:p=new Set,sessionScopes:T,sessionShouldRefresh:se}=a;this.connector=i,this.sessionScopesFunc=T,this.sessionShouldRefreshFunc=se,this.helper=new Te({sessionScopes:T,defaultScopes:p})}async getSession(a){if(this.helper.sessionExistsAndHasScope(this.currentSession,a.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const p=await this.collapsedSessionRefresh(a.scopes),T=this.sessionScopesFunc(this.currentSession),se=this.sessionScopesFunc(p);return Z(se,T)&&(this.currentSession=p),p}catch(p){if(a.optional)return;throw p}}if(!this.currentSession&&!a.instantPopup)try{const i=await this.collapsedSessionRefresh(a.scopes);return this.currentSession=i,this.getSession(a)}catch{}if(!a.optional)return this.currentSession=await this.connector.createSession({...a,scopes:this.helper.getExtendedScope(this.currentSession,a.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(a){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,a));try{const i=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),i}finally{delete this.refreshPromise}}}var Ve=Object.defineProperty,jt=(d,a,i)=>a in d?Ve(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,zt=(d,a,i)=>(jt(d,typeof a!="symbol"?a+"":a,i),i);class Kt{constructor(a){zt(this,"connector"),zt(this,"helper"),zt(this,"stateTracker",new Zt),zt(this,"currentSession");const{connector:i,defaultScopes:p=new Set,sessionScopes:T}=a;this.connector=i,this.helper=new Te({sessionScopes:T,defaultScopes:p})}setSession(a){this.currentSession=a,this.stateTracker.setIsSignedIn(!!a)}async getSession(a){if(this.helper.sessionExistsAndHasScope(this.currentSession,a.scopes))return this.currentSession;if(!a.optional)return this.currentSession=await this.connector.createSession({...a,scopes:this.helper.getExtendedScope(this.currentSession,a.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var Et=Object.defineProperty,xn=(d,a,i)=>a in d?Et(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,dn=(d,a,i)=>(xn(d,typeof a!="symbol"?a+"":a,i),i);class Xt{constructor(a){dn(this,"manager"),dn(this,"storageKey"),dn(this,"schema"),dn(this,"sessionShouldRefreshFunc"),dn(this,"helper");const{manager:i,storageKey:p,schema:T,sessionScopes:se,sessionShouldRefresh:Me=()=>!1}=a;this.manager=i,this.storageKey=p,this.schema=T,this.sessionShouldRefreshFunc=Me,this.helper=new Te({sessionScopes:se,defaultScopes:new Set})}setSession(a){this.manager.setSession(a),this.saveSession(a)}async getSession(a){const{scopes:i}=a,p=this.loadSession();if(this.helper.sessionExistsAndHasScope(p,i)&&!this.sessionShouldRefreshFunc(p))return this.manager.setSession(p),p;const T=await this.manager.getSession(a);return this.saveSession(T),T}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const a=localStorage.getItem(this.storageKey);if(a){const i=JSON.parse(a,(p,T)=>(T==null?void 0:T.__type)==="Set"?new Set(T.__value):T);try{return this.schema.parse(i)}catch(p){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${p}`),p}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(a){if(a===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(a)}catch(i){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${i}`);return}localStorage.setItem(this.storageKey,JSON.stringify(a,(i,p)=>p instanceof Set?{__type:"Set",__value:Array.from(p)}:p))}}var yn=Object.defineProperty,Qe=(d,a,i)=>a in d?yn(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,pt=(d,a,i)=>(Qe(d,typeof a!="symbol"?a+"":a,i),i);const Dt={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class it{constructor(a){pt(this,"sessionManager"),pt(this,"scopeTransform"),this.sessionManager=a.sessionManager,this.scopeTransform=a.scopeTransform}static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=Dt,oauthRequestApi:Me,defaultScopes:Ue=[],scopeTransform:yt=vn=>vn,popupOptions:kt}=a,jn=new gt({configApi:i,discoveryApi:p,environment:T,provider:se,oauthRequestApi:Me,sessionTransform({backstageIdentity:vn,...ra}){var ea;const oa={...ra,providerInfo:{idToken:ra.providerInfo.idToken,accessToken:ra.providerInfo.accessToken,scopes:it.normalizeScopes(yt,ra.providerInfo.scope),expiresAt:ra.providerInfo.expiresInSeconds?new Date(Date.now()+ra.providerInfo.expiresInSeconds*1e3):void 0}};if(vn){const Da=(ea=vn.expiresInSeconds)!=null?ea:ra.providerInfo.expiresInSeconds;oa.backstageIdentity={token:vn.token,identity:vn.identity,expiresAt:Da?new Date(Date.now()+Da*1e3):void 0}}return oa},popupOptions:kt}),Ln=new Ae({connector:jn,defaultScopes:new Set(Ue),sessionScopes:vn=>vn.providerInfo.scopes,sessionShouldRefresh:vn=>{var ra,ea;let oa=1/0;return(ra=vn.providerInfo)!=null&&ra.expiresAt&&(oa=Math.min(oa,(vn.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(ea=vn.backstageIdentity)!=null&&ea.expiresAt&&(oa=Math.min(oa,(vn.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),oa<60*5}});return new it({sessionManager:Ln,scopeTransform:yt})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(a,i){var p;const T=it.normalizeScopes(this.scopeTransform,a),se=await this.sessionManager.getSession({...i,scopes:T});return(p=se==null?void 0:se.providerInfo.accessToken)!=null?p:""}async getIdToken(a={}){var i;const p=await this.sessionManager.getSession({...a,scopes:new Set(["openid"])});return(i=p==null?void 0:p.providerInfo.idToken)!=null?i:""}async getBackstageIdentity(a={}){const i=await this.sessionManager.getSession(a);return i==null?void 0:i.backstageIdentity}async getProfile(a={}){const i=await this.sessionManager.getSession(a);return i==null?void 0:i.profile}static normalizeScopes(a,i){if(!i)return new Set;const p=Array.isArray(i)?i:i.split(/[\s|,]/).filter(Boolean);return new Set(a(p))}}const Ze={id:"github",title:"GitHub",icon:()=>null};class Y{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=Ze,oauthRequestApi:Me,defaultScopes:Ue=["read:user"]}=a;return it.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue})}}const he={id:"gitlab",title:"GitLab",icon:()=>null};class fe{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=he,oauthRequestApi:Me,defaultScopes:Ue=["read_user"]}=a;return it.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue})}}const Ct={id:"google",title:"Google",icon:()=>null},Ft="https://www.googleapis.com/auth/";class cn{static create(a){const{configApi:i,discoveryApi:p,oauthRequestApi:T,environment:se="development",provider:Me=Ct,defaultScopes:Ue=["openid",`${Ft}userinfo.email`,`${Ft}userinfo.profile`]}=a;return it.create({configApi:i,discoveryApi:p,oauthRequestApi:T,provider:Me,environment:se,defaultScopes:Ue,scopeTransform(yt){return yt.map(kt=>kt==="openid"?kt:kt==="profile"||kt==="email"?`${Ft}userinfo.${kt}`:kt.startsWith(Ft)?kt:`${Ft}${kt}`)}})}}const An={id:"okta",title:"Okta",icon:()=>null},In=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Bn="okta.";class Hn{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=An,oauthRequestApi:Me,defaultScopes:Ue=["openid","email","profile","offline_access"]}=a;return it.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue,scopeTransform(yt){return yt.map(kt=>In.has(kt)||kt.startsWith(Bn)?kt:`${Bn}${kt}`)}})}}const Cn=t.z.object({profile:t.z.object({email:t.z.string().optional(),displayName:t.z.string().optional(),picture:t.z.string().optional()}),backstageIdentity:t.z.object({token:t.z.string(),identity:t.z.object({type:t.z.literal("user"),userEntityRef:t.z.string(),ownershipEntityRefs:t.z.array(t.z.string())})})}),Vn={id:"saml",title:"SAML",icon:()=>null};class ua{constructor(a){this.sessionManager=a}static create(a){const{discoveryApi:i,environment:p="development",provider:T=Vn}=a,se=new j({discoveryApi:i,environment:p,provider:T}),Me=new Kt({connector:se}),Ue=new Xt({manager:Me,storageKey:`${T.id}Session`,schema:Cn});return new ua(Ue)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(a={}){const i=await this.sessionManager.getSession(a);return i==null?void 0:i.backstageIdentity}async getProfile(a={}){const i=await this.sessionManager.getSession(a);return i==null?void 0:i.profile}}var ut=Object.defineProperty,m=(d,a,i)=>a in d?ut(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,R=(d,a,i)=>(m(d,typeof a!="symbol"?a+"":a,i),i);const K={id:"microsoft",title:"Microsoft",icon:()=>null},le=class Kr{constructor(a){R(this,"oauth2"),R(this,"configApi"),R(this,"environment"),R(this,"provider"),R(this,"oauthRequestApi"),R(this,"discoveryApi"),R(this,"scopeTransform");const{configApi:i,environment:p="development",provider:T=K,oauthRequestApi:se,discoveryApi:Me,defaultScopes:Ue=["openid","offline_access","profile","email","User.Read"],scopeTransform:yt=kt=>kt.concat("offline_access")}=a;this.configApi=i,this.environment=p,this.provider=T,this.oauthRequestApi=se,this.discoveryApi=Me,this.scopeTransform=yt,this.oauth2={[Kr.MicrosoftGraphID]:it.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:Ue})}}static create(a){return new Kr(a)}microsoftGraph(){return this.oauth2[Kr.MicrosoftGraphID]}static resourceForScopes(a){var i;const p=[...new Set(a.split(" ").map(Kr.resourceForScope).filter(se=>se!=="openid"))];if(p.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${p.join(", ")}. Access tokens can only have a single audience.`));const T=(i=p[0])!=null?i:Kr.MicrosoftGraphID;return Promise.resolve(T)}static resourceForScope(a){var i;const p=(i=a.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:i.groups;if(p){const{resourceURI:T}=p;return T.replace(/^api:\/\//,"")}switch(a){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Kr.MicrosoftGraphID}}async getAccessToken(a,i){const p=a===void 0?Kr.MicrosoftGraphID:await Kr.resourceForScopes(Array.isArray(a)?a.join(" "):a);return p in this.oauth2||(this.oauth2[p]=it.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[p].getAccessToken(a,i)}getIdToken(a){return this.microsoftGraph().getIdToken(a)}getProfile(a){return this.microsoftGraph().getProfile(a)}getBackstageIdentity(a){return this.microsoftGraph().getBackstageIdentity(a)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};R(le,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let I=le;const U={id:"onelogin",title:"onelogin",icon:()=>null},J=new Set(["openid","profile","email","phone","address","groups","offline_access"]),we="onelogin.";class Oe{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=U,oauthRequestApi:Me}=a;return it.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(Ue){return Ue.map(yt=>J.has(yt)||yt.startsWith(we)?yt:`${we}${yt}`)}})}}const st={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Rt{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=st,oauthRequestApi:Me,defaultScopes:Ue=["account"]}=a;return it.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue})}}const qt={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class en{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=qt,oauthRequestApi:Me,defaultScopes:Ue=["PROJECT_ADMIN"]}=a;return it.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue})}}const hn={id:"atlassian",title:"Atlassian",icon:()=>null};class pn{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=hn,oauthRequestApi:Me}=a;return it.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T})}}const $t={id:"vmwareCloudServices",title:"VMware Cloud",icon:()=>null};class Pn{static create(a){const{configApi:i,discoveryApi:p,oauthRequestApi:T,environment:se="development",provider:Me=$t,defaultScopes:Ue=["openid"]}=a;return it.create({configApi:i,discoveryApi:p,oauthRequestApi:T,provider:Me,environment:se,defaultScopes:Ue})}}var un=Object.defineProperty,Un=(d,a,i)=>a in d?un(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,qn=(d,a,i)=>(Un(d,typeof a!="symbol"?a+"":a,i),i);class ta{constructor(){qn(this,"subject",new qe)}post(a){this.subject.next(a)}alert$(){return this.subject}}class $n{constructor(a){this.actualApis=a}static fromApis(a){return new $n(a)}captureEvent(a){this.actualApis.forEach(i=>{try{i.captureEvent(a)}catch{}})}}class bn{captureEvent(a){}}var fn=Object.defineProperty,Vt=(d,a,i)=>a in d?fn(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,En=(d,a,i)=>(Vt(d,typeof a!="symbol"?a+"":a,i),i);const Sn="theme";class ya{constructor(a){this.themes=a,En(this,"activeThemeId"),En(this,"subject",new Ut(void 0))}static createWithStorage(a){var i;const p=new ya(a);if(!window.localStorage)return p;const T=(i=window.localStorage.getItem(Sn))!=null?i:void 0;return p.setActiveThemeId(T),p.activeThemeId$().subscribe(se=>{se?window.localStorage.setItem(Sn,se):window.localStorage.removeItem(Sn)}),window.addEventListener("storage",se=>{var Me;if(se.key===Sn){const Ue=(Me=localStorage.getItem(Sn))!=null?Me:void 0;p.setActiveThemeId(Ue)}}),p}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(a){this.activeThemeId=a,this.subject.next(a)}}const Ra="Invalid discovery URL pattern,";class Oa{constructor(a){this.parts=a}static compile(a){const i=a.split(/\{\{\s*pluginId\s*\}\}/),p=i.join("pluginId");let T;try{T=new URL(p)}catch{throw new Error(`${Ra} URL '${p}' is invalid`)}if(T.hash)throw new Error(`${Ra} URL must not have a hash`);if(T.search)throw new Error(`${Ra} URL must not have a query`);if(p.endsWith("/"))throw new Error(`${Ra} URL must not end with a slash`);return new Oa(i)}async getBaseUrl(a){return this.parts.join(encodeURIComponent(a))}}class G{constructor(a,i){this.endpoints=a,this.defaultEndpoint=i}static fromConfig(a,i){var p,T;const se=(p=i==null?void 0:i.pathPattern)!=null?p:"/api/{{ pluginId }}",Me=a.getString("backend.baseUrl"),Ue=(T=a.getOptionalConfigArray("discovery.endpoints"))==null?void 0:T.flatMap(yt=>{const kt=typeof yt.get("target")=="object"?yt.getString("target.external"):yt.getString("target"),jn=Oa.compile(kt);return yt.getStringArray("plugins").map(Ln=>[Ln,jn])});return new G(new Map(Ue),Oa.compile(`${Me}${se}`))}async getBaseUrl(a){const i=this.endpoints.get(a);return i?i.getBaseUrl(a):this.defaultEndpoint.getBaseUrl(a)}}class be{constructor(a,i){this.alertApi=a,this.errorApi=i}post(a,i){return i!=null&&i.hidden||this.alertApi.post({message:a.message,severity:"error"}),this.errorApi.post(a,i)}error$(){return this.errorApi.error$()}}var We=Object.defineProperty,ot=(d,a,i)=>a in d?We(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,wt=(d,a,i)=>(ot(d,typeof a!="symbol"?a+"":a,i),i);class Ot{constructor(){wt(this,"subject",new qe)}post(a,i){this.subject.next({error:a,context:i})}error$(){return this.subject}}class rn{static forward(a,i){window.addEventListener("unhandledrejection",p=>{a.post(p.reason,i)})}}var te=Object.defineProperty,Ie=(d,a,i)=>a in d?te(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,ke=(d,a,i)=>(Ie(d,typeof a!="symbol"?a+"":a,i),i);function ze(d){if(d.length<3)throw new Error(`The '${d}' feature flag must have a minimum length of three characters.`);if(d.length>150)throw new Error(`The '${d}' feature flag must not exceed 150 characters.`);if(!d.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${d}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class et{constructor(){ke(this,"registeredFeatureFlags",[]),ke(this,"flags")}registerFlag(a){ze(a.name),this.registeredFeatureFlags.push(a)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(a){return this.flags||(this.flags=this.load()),this.flags.get(a)===q.F.Active}save(a){this.flags||(this.flags=this.load()),a.merge||this.flags.clear();for(const[p,T]of Object.entries(a.states))this.flags.set(p,T);const i=Array.from(this.flags.entries()).filter(([,p])=>p===q.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(i)))}load(){try{const a=window.localStorage.getItem("featureFlags");if(!a)return new Map;const i=JSON.parse(a);if(typeof i!="object"||i===null||Array.isArray(i))return new Map;const p=Object.entries(i).filter(([T,se])=>(ze(T),se===q.F.Active));return new Map(p)}catch{return new Map}}}function tt(d){var a;let i=d.baseImplementation||e.g.fetch;const p=[(a=d.middleware)!=null?a:[]].flat().reverse();for(const T of p)i=T.apply(i);return{fetch:i}}class bt{constructor(a,i,p,T){this.identityApi=a,this.allowUrl=i,this.headerName=p,this.headerValue=T}static create(a){var i,p;const T=Lt(a),se=((i=a.header)==null?void 0:i.name)||"authorization",Me=((p=a.header)==null?void 0:p.value)||(Ue=>`Bearer ${Ue}`);return new bt(a.identityApi,T,se,Me)}apply(a){return async(i,p)=>{const T=new Request(i,p),{token:se}=await this.identityApi.getCredentials();return T.headers.get(this.headerName)||typeof se!="string"||!se||!this.allowUrl(T.url)?a(i,p):(T.headers.set(this.headerName,this.headerValue(se)),a(T))}}}function Lt(d){return d.allowUrl?d.allowUrl:d.urlPrefixAllowlist?Gt(d.urlPrefixAllowlist):d.config?Gt([d.config.getString("backend.baseUrl")]):()=>!1}function Gt(d){const a=d.map(i=>i.replace(/\/$/,""));return i=>a.some(p=>i===p||i.startsWith(`${p}/`))}function mn(d,a){return!a||a==="/"?d:`${d.replace(/\/$/,"")}/${a.replace(/^\//,"")}`}class tn{constructor(a){this.discoveryApi=a}apply(a){return async(i,p)=>{const T=new Request(i,p),se="plugin://";if(!T.url.startsWith(se))return a(i,p);const{hostname:Me,pathname:Ue,search:yt,hash:kt,username:jn,password:Ln}=new URL(`http://${T.url.substring(se.length)}`);let vn=await this.discoveryApi.getBaseUrl(Me);if(jn||Ln){const ea=new URL(vn),oa=`${jn}${Ln?`:${Ln}`:""}@`;vn=`${ea.protocol}//${oa}${ea.host}${ea.pathname}`}const ra=`${mn(vn,Ue)}${yt}${kt}`;return a(ra,typeof i=="string"||ia(i)?p:i)}}}function ia(d){return typeof d=="object"&&(d==null?void 0:d.constructor)===URL}class Nn{static resolvePluginProtocol(a){return new tn(a.discoveryApi)}static injectIdentityAuth(a){return bt.create(a)}constructor(){}}var Dn=Object.defineProperty,Fn=(d,a,i)=>a in d?Dn(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Yn=(d,a,i)=>(Fn(d,typeof a!="symbol"?a+"":a,i),i);function Wn(d,a){for(const i of a)if(!d.has(i))return!1;return!0}function la(d,...a){const i=new Set(d);for(const p of a)for(const T of p)i.add(T);return i}class sa{constructor(){Yn(this,"requests",[]),Yn(this,"subject",new Ut(this.getCurrentPending()))}request(a){return new Promise((i,p)=>{this.requests.push({scopes:a,resolve:i,reject:p}),this.subject.next(this.getCurrentPending())})}resolve(a,i){this.requests=this.requests.filter(p=>Wn(a,p.scopes)?(p.resolve(i),!1):!0),this.subject.next(this.getCurrentPending())}reject(a){this.requests.forEach(i=>i.reject(a)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const a=this.requests.length===0?void 0:this.requests.slice(1).reduce((i,p)=>la(i,p.scopes),this.requests[0].scopes);return{scopes:a,resolve:i=>{a&&this.resolve(a,i)},reject:i=>{a&&this.reject(i)}}}}var Aa=Object.defineProperty,pa=(d,a,i)=>a in d?Aa(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Sa=(d,a,i)=>(pa(d,typeof a!="symbol"?a+"":a,i),i);class xa{constructor(){Sa(this,"subject",new Ut([])),Sa(this,"currentRequests",[]),Sa(this,"handlerCount",0)}createAuthRequester(a){const i=new sa,p=this.handlerCount;return this.handlerCount++,i.pending().subscribe({next:T=>{const se=this.currentRequests.slice(),Me=this.makeAuthRequest(T,a);Me?se[p]=Me:delete se[p],this.currentRequests=se,this.subject.next(se.filter(Boolean))}}),T=>i.request(T)}makeAuthRequest(a,i){const{scopes:p}=a;if(p)return{provider:i.provider,trigger:async()=>{const T=await i.onAuthRequest(p);a.resolve(T)},reject:()=>{const T=new Error("Login failed, rejected by user");T.name="RejectedError",a.reject(T)}}}authRequest$(){return this.subject}}var Ha=Object.defineProperty,Va=(d,a,i)=>a in d?Ha(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Ya=(d,a,i)=>(Va(d,typeof a!="symbol"?a+"":a,i),i);const hr=new Map,gr=class co{constructor(a,i){this.namespace=a,this.errorApi=i,Ya(this,"subscribers",new Set),Ya(this,"observable",new(r())(p=>(this.subscribers.add(p),()=>{this.subscribers.delete(p)})))}static create(a){var i;return new co((i=a.namespace)!=null?i:"",a.errorApi)}static addStorageEventListener(){window.addEventListener("storage",a=>{var i;for(const[p,T]of hr.entries())(i=a.key)!=null&&i.startsWith(p)&&T.handleStorageChange(a.key)})}get(a){return this.snapshot(a).value}snapshot(a){let i,p="absent";try{const T=localStorage.getItem(this.getKeyName(a));T&&(i=JSON.parse(T,(se,Me)=>(typeof Me=="object"&&Me!==null&&Object.freeze(Me),Me)),p="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${a}`))}return{key:a,value:i,presence:p}}forBucket(a){const i=`${this.namespace}/${a}`;return hr.has(i)||hr.set(i,new co(i,this.errorApi)),hr.get(i)}async set(a,i){localStorage.setItem(this.getKeyName(a),JSON.stringify(i)),this.notifyChanges(a)}async remove(a){localStorage.removeItem(this.getKeyName(a)),this.notifyChanges(a)}observe$(a){return co.hasSubscribed||(co.addStorageEventListener(),co.hasSubscribed=!0),this.observable.filter(({key:i})=>i===a)}handleStorageChange(a){if(!(a!=null&&a.startsWith(this.namespace)))return;const i=a==null?void 0:a.slice(`${this.namespace}/`.length);i.includes("/")||this.notifyChanges(decodeURIComponent(i))}getKeyName(a){return`${this.namespace}/${encodeURIComponent(a)}`}notifyChanges(a){const i=this.snapshot(a);for(const p of this.subscribers)p.next(i)}};Ya(gr,"hasSubscribed",!1);let or=gr;const ur=(0,s.createContext)(void 0);function Pa(){const[d]=(0,M.AV)(s.createElement(M.qh,{index:!0,element:s.createElement("div",null)}));return!d.index}const qa=(d,a)=>{try{const i=(0,y.ue)(a,{pathname:d}),p=i==null?void 0:i.filter(yt=>{var kt;return((kt=yt==null?void 0:yt.route.routeRefs)==null?void 0:kt.size)>0}).pop(),T=p==null?void 0:p.route;if(!T||T.path===""&&d!=="/")return;let se;T.routeRefs.size===1&&(se=T.routeRefs.values().next().value);let Me;T.plugins.size===1&&(Me=T.plugins.values().next().value);const Ue=Object.entries((p==null?void 0:p.params)||{}).reduce((yt,[kt,jn])=>(jn!==void 0&&kt!=="*"&&(yt[kt]=jn),yt),{});return{extension:"App",pluginId:(Me==null?void 0:Me.getId())||"root",...se?{routeRef:se.id}:{},_routeNodeType:T.element,params:Ue}}catch{return}},er=({pathname:d,search:a,hash:i,attributes:p})=>{const T=(0,Q.st)();return(0,s.useEffect)(()=>{T.captureEvent("navigate",`${d}${a}${i}`,{attributes:p})},[T,d,a,i,p]),null},ir=({routeObjects:d})=>{const{pathname:a,search:i,hash:p}=(0,M.zy)(),{params:T,...se}=qa(a,d)||{params:{}};return s.createElement(Q.Ig,{attributes:se},s.createElement(er,{pathname:a,search:i,hash:p,attributes:T}))};function ar(d){return Pa()?$e(d):""}function $e(d){var a;let{pathname:i}=new URL((a=d.getOptionalString("app.baseUrl"))!=null?a:"/","http://sample.dev");return i=i.replace(/\/*$/,""),i}function ce({component:d,appIdentityProxy:a,children:i}){const[p,T]=(0,s.useState)(),se=(0,q.u)(q.p),Me=$e(se);return p?(a.setTarget(p,{signOutTargetUrl:Me||"/"}),s.createElement(s.Fragment,null,i)):s.createElement(d,{onSignInSuccess:T})}function lt(d){const{Router:a,SignInPage:i}=(0,Q.nm)().getComponents(),p=(0,q.u)(q.p),T=$e(p),se=`${T}/*`,Me=(0,s.useContext)(ur);if(!Me)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:Ue,appIdentityProxy:yt}=Me;return i?Pa()?s.createElement(a,null,s.createElement(ir,{routeObjects:Ue}),s.createElement(ce,{component:i,appIdentityProxy:yt},s.createElement(M.BV,null,s.createElement(M.qh,{path:se,element:s.createElement(s.Fragment,null,d.children)})))):s.createElement(a,{basename:T},s.createElement(ir,{routeObjects:Ue}),s.createElement(ce,{component:i,appIdentityProxy:yt},d.children)):(yt.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:T||"/"}),Pa()?s.createElement(a,null,s.createElement(ir,{routeObjects:Ue}),s.createElement(M.BV,null,s.createElement(M.qh,{path:se,element:s.createElement(s.Fragment,null,d.children)}))):s.createElement(a,{basename:T},s.createElement(ir,{routeObjects:Ue}),d.children))}(0,Q.h3)(lt,"core.type","AppRouter");function Rn(d){const a={};for(const p in d.collectors)d.collectors.hasOwnProperty(p)&&(a[p]=d.collectors[p]());const i=[{node:s.Children.toArray(d.root),parent:void 0,contexts:{}}];for(;i.length!==0;){const{node:p,parent:T,contexts:se}=i.shift();s.Children.forEach(p,Me=>{if(!(0,s.isValidElement)(Me))return;const Ue={};for(const yt in a)if(a.hasOwnProperty(yt)){const kt=a[yt];Ue[yt]=kt.visit(kt.accumulator,Me,T,se[yt])}for(const yt of d.discoverers){const kt=yt(Me);kt&&i.push({node:kt,parent:Me,contexts:Ue})}})}return Object.fromEntries(Object.entries(a).map(([p,T])=>[p,T.accumulator]))}function Kn(d,a){return()=>({accumulator:d(),visit:a})}function na(d){var a;return(a=d.props)==null?void 0:a.children}function aa(d){var a,i,p;if((a=d.props)!=null&&a.path&&((i=d.props)!=null&&i.element))return(p=d.props)==null?void 0:p.element}const Ea=Kn(()=>new Set,(d,a)=>{const i=(0,Q.E0)(a,"core.plugin");i&&d.add(i)}),ba=d=>{const{children:a}=d,i=(0,q.u)(q.f),p="with"in d?i.isActive(d.with):!i.isActive(d.without);return s.createElement(s.Fragment,null,p?a:null)};(0,Q.h3)(ba,"core.featureFlagged",!0);const wa={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Ta(d){var a,i;const p=d;return p!=null&&p.type?(i=(a=p.type.displayName)!=null?a:p.type.name)!=null?i:String(p.type):String(p)}const Ka=d=>{const a=new Set;return d&&a.add(d),a};function dr(d,a=new Array){return s.Children.forEach(d,i=>{if(!(0,s.isValidElement)(i))return;const p=(0,Q.E0)(i,"core.mountPoint");if(p){const T=(0,Q.E0)(i,"core.plugin");a.push({routeRef:p,plugin:T})}dr(i.props.children,a)}),a}const ha=Kn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,a,i,p)=>{var T,se,Me,Ue,yt,kt,jn;if(p!=null&&p.isElementAncestor)return p;if((i==null?void 0:i.props.element)===a)return{...p,isElementAncestor:!0};const Ln=(T=a.props)==null?void 0:T.path,vn=(0,Q.E0)(a,"core.mountPoint");if(vn&&Ln)throw new Error(`Path property may not be set directly on a routable extension "${Ta(a)}"`);const ra=(Me=(se=p==null?void 0:p.obj)==null?void 0:se.children)!=null?Me:d.objects;if(Ln!==void 0){if(typeof Ln!="string")throw new Error(`Element path must be a string at "${Ta(a)}"`);const ea=Ln.startsWith("/")?Ln.slice(1):Ln,oa=a.props.element;if((0,Q.E0)(a,"core.gatherMountPoints")){if(oa)throw new Error(`Mount point gatherers may not have an element prop "${Ta(a)}"`);const Da={path:ea,element:"gathered",routeRefs:new Set,caseSensitive:!!((Ue=a.props)!=null&&Ue.caseSensitive),children:[wa],plugins:new Set};return ra.push(Da),{obj:Da,gatherPath:ea,routeRef:p==null?void 0:p.routeRef,gatherRouteRef:p==null?void 0:p.routeRef}}if(oa){const[Da,...Ua]=dr(oa);if(Ua.length>0)throw new Error(`Route element with path "${Ln}" may not contain multiple routable extensions`);if(!Da)return p;const{routeRef:Fa,plugin:mr}=Da,Oo={path:ea,element:"mounted",routeRefs:new Set([Fa]),caseSensitive:!!((yt=a.props)!=null&&yt.caseSensitive),children:[wa],plugins:Ka(mr)};return ra.push(Oo),d.paths.set(Fa,ea),d.parents.set(Fa,p==null?void 0:p.routeRef),{obj:Oo,routeRef:Fa!=null?Fa:p==null?void 0:p.routeRef,gatherPath:ea,gatherRouteRef:p==null?void 0:p.gatherRouteRef}}}if(vn){if((p==null?void 0:p.gatherPath)===void 0)throw new Error(`Routable extension "${Ta(a)}" with mount point "${vn}" must be assigned a path`);(kt=p==null?void 0:p.obj)==null||kt.routeRefs.add(vn);const ea=(0,Q.E0)(a,"core.plugin");return ea&&((jn=p==null?void 0:p.obj)==null||jn.plugins.add(ea)),d.paths.set(vn,p.gatherPath),d.parents.set(vn,p==null?void 0:p.gatherRouteRef),{...p,routeRef:vn}}return p}),za=Kn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,a,i,p)=>{var T,se,Me,Ue,yt;if((i==null?void 0:i.props.element)===a)return p;let kt=p==null?void 0:p.obj,jn=p==null?void 0:p.routeRef,Ln=p==null?void 0:p.sticky;const vn=(T=a.props)==null?void 0:T.path,ra=(se=kt==null?void 0:kt.children)!=null?se:d.objects,ea=!!((Me=a.props)!=null&&Me.caseSensitive);let oa=p==null?void 0:p.path;if((0,Q.E0)(a,"core.gatherMountPoints")){if(!vn)throw new Error("Mount point gatherer must have a path");oa=vn}const Da=(Ue=a.props)==null?void 0:Ue.element;let Ua=(0,Q.E0)(a,"core.mountPoint");if(!Ua&&(0,s.isValidElement)(Da)&&(Ua=(0,Q.E0)(Da,"core.mountPoint")),Ua){let mr=vn;if(oa&&(mr?oa=void 0:mr=oa),!mr)throw new Error("Mounted routable extension must have a path");d.paths.set(Ua,mr),jn&&Ln?(d.parents.set(Ua,jn),vn&&(jn=Ua,Ln=!1)):(d.parents.set(Ua,jn),jn=Ua),vn?(kt={caseSensitive:ea,path:vn,element:"mounted",routeRefs:new Set([Ua]),children:[wa],plugins:Ka((0,Q.E0)(a.props.element,"core.plugin"))},ra.push(kt)):kt==null||kt.routeRefs.add(Ua)}if((0,Q.E0)(a,"core.gatherMountPoints")&&(Ln=!0),(0,Q.E0)(a,"core.gatherMountPoints")){if(!vn)throw new Error("Mount point gatherer must have a path");Ua||(kt={caseSensitive:ea,path:vn,element:"gathered",routeRefs:new Set,children:[wa],plugins:((yt=p==null?void 0:p.obj)==null?void 0:yt.plugins)||new Set},ra.push(kt))}return{obj:kt,path:oa,routeRef:jn,sticky:Ln}}),Er=Kn(()=>new Set,(d,a)=>{if(a.type===ba){const i=a.props;d.add("with"in i?i.with:i.without)}}),sr=(0,A.Q6)("route-ref-type",()=>Symbol("route-ref-type"));function $a(d){return d[sr]==="absolute"}function Ar(d){return d[sr]==="sub"}function Zr(d){return d[sr]==="external"}function Lr(...d){const a=d.join("/").replace(/\/\/+/g,"/");return a!=="/"&&a.endsWith("/")?a.slice(0,-1):a}function Br(d,a,i){let p,T="";if($a(d))p=d;else if(Ar(d))p=d.parent,T=d.path;else if(Zr(d)){const Ue=i.get(d);if(!Ue)return[void 0,""];if($a(Ue))p=Ue;else if(Ar(Ue))p=Ue.parent,T=Ue.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${Ue}`)}else throw d[sr]?new Error(`Unknown or invalid route ref type, ${d[sr]}`):new Error(`Unknown object passed to useRouteRef, got ${d}`);if(!p)return[void 0,""];const se=a.get(p);if(se===void 0)return[void 0,""];const Me=Lr(se,T);return[p,Me]}function g(d,a,i,p,T){var se;const Me=(se=(0,y.ue)(T,a))!=null?se:[],Ue=Array();let yt=-1;for(let Ln=d;Ln&&(yt=Me.findIndex(vn=>vn.route.routeRefs.has(Ln)),yt===-1);Ln=p.get(Ln))Ue.unshift(Ln);Ue.length===0&&(yt-=1);const kt=yt===-1?"":Me[yt].pathname,jn=Ue.slice(0,-1).map(Ln=>{const vn=i.get(Ln);if(vn===void 0)throw new Error(`No path for ${Ln}`);if(vn.includes(":"))throw new Error(`Cannot route to ${d} with parent ${Ln} as it has parameters`);return vn});return`${Lr(kt,...jn)}/`}class c{constructor(a,i,p,T,se){this.routePaths=a,this.routeParents=i,this.routeObjects=p,this.routeBindings=T,this.appBasePath=se}resolve(a,i){const[p,T]=Br(a,this.routePaths,this.routeBindings);if(!p)return;let se;typeof i=="string"?se=this.trimPath(i):i.pathname?se={...i,pathname:this.trimPath(i.pathname)}:se=i;const Me=this.appBasePath+g(p,se,this.routePaths,this.routeParents,this.routeObjects);return(...[yt])=>{const kt=yt&&Ne()(yt,jn=>typeof jn=="string"?jn.replaceAll(/[&?#;\/]/g,Ln=>encodeURIComponent(Ln)):jn);return Lr(Me,(0,y.tW)(T,kt))}}trimPath(a){return a&&(a.startsWith(this.appBasePath)?a.slice(this.appBasePath.length):a)}}const E=(0,A.tK)("routing-context"),$=({routePaths:d,routeParents:a,routeObjects:i,routeBindings:p,basePath:T="",children:se})=>{const Me=new c(d,a,i,p,T),Ue=(0,A.Bl)({1:Me});return s.createElement(E.Provider,{value:Ue},se)};function Pe(d,a){const i=new Set(a.values());i.delete(void 0);for(const p of a.keys()){if(i.has(p))continue;let T=p,se="";for(;T;){const Ue=d.get(T);if(Ue===void 0)throw new Error(`No path for ${T}`);se=Lr(Ue,se),T=a.get(T)}const Me=se.match(/:(\w+)/g);if(Me){for(let Ue=0;Ue<Me.length;Ue++)for(let yt=Ue+1;yt<Me.length;yt++)if(Me[yt]===Me[Ue])throw new Error(`Parameter ${Me[yt]} is duplicated in path ${se}`)}}}function Be(d,a){for(const i of a)if(i.externalRoutes){for(const[p,T]of Object.entries(i.externalRoutes))if(!T.optional&&!d.has(T))throw new Error(`External route '${p}' of the '${i.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const Pt=(0,A.tK)("app-context"),Wt=({appContext:d,children:a})=>{const i=(0,A.Bl)({1:d});return s.createElement(Pt.Provider,{value:i,children:a})},wn="app",kn=`${wn}-auth-cookie-expires-at`,La=5*6e4,ka=5e3,Ba=2,_a=5*6e4;function ja({discoveryApi:d,fetchApi:a,errorApi:i}){let p=!1,T,se=!0,Me=ka;const Ue="BroadcastChannel"in window?new BroadcastChannel(kn):void 0,yt=vn=>{const ra=(1+3*Math.random())*6e4;return Math.max(vn-Date.now(),La)-ra},kt=async()=>{try{const ra=`${await d.getBaseUrl(wn)}/.backstage/auth/v1/cookie`,ea=await a.fetch(ra,{credentials:"include"});if(!ea.ok)throw new Error(`Request failed with status ${ea.status} ${ea.statusText}, see request towards ${ra} for more details`);const oa=await ea.json();if(!oa.expiresAt)throw new Error("No expiration date in response");const Da=Date.parse(oa.expiresAt);if(Number.isNaN(Da))throw new Error("Invalid expiration date in response");se=!0,Ue==null||Ue.postMessage({action:"COOKIE_REFRESH_SUCCESS",payload:{expiresAt:new Date(Da).toISOString()}}),Ln(yt(Da))}catch(vn){se?(se=!1,Me=ka):(Me=Math.min(_a,Me*Ba),console.error("Session cookie refresh failed",vn),i.post(new Error("Session refresh failed, see developer console for details"))),Ln(Me)}},jn=vn=>{const{data:ra}=vn;if(!(ra===null||typeof ra!="object")&&"action"in ra&&ra.action==="COOKIE_REFRESH_SUCCESS"){const ea=Date.parse(ra.payload.expiresAt);if(Number.isNaN(ea)){console.warn("Received invalid expiration from session refresh channel");return}Ln(yt(ea))}};function Ln(vn){p||(T&&clearTimeout(T),T=setTimeout(kt,vn))}return Ue==null||Ue.addEventListener("message",jn),kt(),()=>{p=!0,T&&clearTimeout(T),Ue==null||Ue.removeEventListener("message",jn),Ue==null||Ue.close()}}var tr=Object.defineProperty,Na=(d,a,i)=>a in d?tr(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Ja=(d,a,i)=>(Na(d,typeof a!="symbol"?a+"":a,i),i),wr=(d,a,i)=>{if(!a.has(d))throw TypeError("Cannot "+i)},Yr=(d,a,i)=>(wr(d,a,"read from private field"),i?i.call(d):a.get(d)),Jr=(d,a,i)=>{if(a.has(d))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(d):a.set(d,i)},qr=(d,a,i,p)=>(wr(d,a,"write to private field"),p?p.call(d,i):a.set(d,i),i),Ur;function eo(d){return new Error(`Tried to access IdentityApi ${d} before app was loaded`)}function Or(d){console.warn(`WARNING: Call to ${d} is deprecated and will break in the future`)}class uo{constructor(){Ja(this,"target"),Ja(this,"waitForTarget"),Ja(this,"resolveTarget",()=>{}),Ja(this,"signOutTargetUrl","/"),Jr(this,Ur,void 0),this.waitForTarget=new Promise(a=>{this.resolveTarget=a})}setTarget(a,i){this.target=a,this.signOutTargetUrl=i.signOutTargetUrl,this.resolveTarget(a)}getUserId(){if(!this.target)throw eo("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Or("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw eo("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Or("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(a=>a.getProfileInfo())}async getBackstageIdentity(){const a=await this.waitForTarget.then(i=>i.getBackstageIdentity());return a.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${a.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),a}async getCredentials(){return this.waitForTarget.then(a=>a.getCredentials())}async getIdToken(){return this.waitForTarget.then(a=>{if(!a.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Or("getIdToken"),a.getIdToken()})}async signOut(){var a;await this.waitForTarget.then(i=>i.signOut()),await((a=Yr(this,Ur))==null?void 0:a.call(this)),window.location.href=this.signOutTargetUrl}enableCookieAuth(a){if(Yr(this,Ur))return;const i=ja(a);qr(this,Ur,async()=>{i();const p=await a.discoveryApi.getBaseUrl("app");try{await a.fetchApi.fetch(`${p}/.backstage/auth/v1/cookie`,{method:"DELETE"})}catch{}})}}Ur=new WeakMap;function mo(d,a,i){if(d!==void 0){const T=i.find(se=>se.id===d);if(T)return T}if(a){const T=i.find(se=>se.variant==="dark");if(T)return T}const p=i.find(T=>T.variant==="light");return p||i[0]}const Tr=()=>{const d=(0,s.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[a,i]=(0,s.useState)(d.matches);return(0,s.useEffect)(()=>{const p=T=>{i(T.matches)};return d.addListener(p),()=>{d.removeListener(p)}},[d]),a};function to({children:d}){const a=(0,q.u)(q.n),i=(0,ye.A)(a.activeThemeId$(),a.getActiveThemeId()),p=window.matchMedia?Tr():!1,T=mo(i,p,a.getInstalledThemes());if(!T)throw new Error("App has no themes");return s.createElement(T.Provider,{children:d})}const po=async()=>ho();function ho(d=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"app\":{\"title\":\"Scaffolded Backstage App\",\"baseUrl\":\"http://localhost:3000\"},\"organization\":{\"name\":\"My Company\"},\"backend\":{\"baseUrl\":\"http://localhost:7007\"},\"integrations\":{\"github\":[{\"host\":\"github.com\"}]},\"techdocs\":{\"builder\":\"local\"},\"auth\":{\"providers\":{\"guest\":{}}},\"catalog\":{\"import\":{\"entityFilename\":\"catalog-info.yaml\",\"pullRequestBranchName\":\"backstage-integration\"}}}}]"/*__INJECTED_END__*/){const a=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},auth:{providers:{guest:{}}},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!a)throw new Error("No static configuration provided");if(!Array.isArray(a))throw new Error("Static configuration has invalid format");const i=a.slice();if(d!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const T=JSON.parse(d);Array.isArray(T)?i.push(...T):i.push({data:T,context:"env"})}catch(T){throw new Error(`Failed to load runtime configuration, ${T}`)}const p=window.__APP_CONFIG__;return p&&i.push({context:"window",data:p}),i}var go=Object.defineProperty,no=(d,a,i)=>a in d?go(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,br=(d,a,i)=>(no(d,typeof a!="symbol"?a+"":a,i),i);class $r{constructor(){br(this,"apis",[])}add(a,i){return this.apis.push([a.id,i]),i}build(){return new Ir(new Map(this.apis))}}class Ir{constructor(a){this.apis=a}static builder(){return new $r}static from(a){return new Ir(new Map(a.map(([i,p])=>[i.id,p])))}static with(a,i){return new Ir(new Map([[a.id,i]]))}with(a,i){return new Ir(new Map([...this.apis,[a.id,i]]))}get(a){return this.apis.get(a.id)}}function fo(d){const a=new Map;return d&&d({bind:(p,T)=>{for(const[se,Me]of Object.entries(T)){const Ue=p[se];if(!Ue)throw new Error(`Key ${se} is not an existing external route`);if(!Me&&!Ue.optional)throw new Error(`External route ${se} is required but was undefined`);Me&&a.set(Ue,Me)}}}),a}var ao=(d,a,i)=>{if(!a.has(d))throw TypeError("Cannot "+i)},_r=(d,a,i)=>(ao(d,a,"read from private field"),i?i.call(d):a.get(d)),Qr=(d,a,i)=>{if(a.has(d))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(d):a.set(d,i)},zr=(d,a,i,p)=>(ao(d,a,"write to private field"),p?p.call(d,i):a.set(d,i),i),Dr,Cr,Mr;const jr="language",f="en",O=class di{constructor(a,i){Qr(this,Dr,void 0),Qr(this,Cr,void 0),Qr(this,Mr,void 0),zr(this,Dr,a),zr(this,Cr,i),zr(this,Mr,new Ut({language:_r(this,Cr)}))}static create(a){var i,p;const T=(i=a==null?void 0:a.availableLanguages)!=null?i:[f];if(T.length!==new Set(T).size)throw new Error(`Supported languages may not contain duplicates, got '${T.join("', '")}'`);if(!T.includes(f))throw new Error(`Supported languages must include '${f}'`);const se=(p=a==null?void 0:a.defaultLanguage)!=null?p:f;if(!T.includes(se))throw new Error(`Initial language must be one of the supported languages, got '${se}'`);return new di(T,se)}static createWithStorage(a){const i=di.create(a);if(!window.localStorage)return i;const p=window.localStorage.getItem(jr),{languages:T}=i.getAvailableLanguages();return p&&T.includes(p)&&i.setLanguage(p),i.language$().subscribe(({language:se})=>{se!==window.localStorage.getItem(jr)&&window.localStorage.setItem(jr,se)}),window.addEventListener("storage",se=>{var Me;if(se.key===jr){const Ue=(Me=localStorage.getItem(jr))!=null?Me:void 0;Ue&&i.setLanguage(Ue)}}),i}getAvailableLanguages(){return{languages:_r(this,Dr).slice()}}setLanguage(a){const i=a!=null?a:f;if(i!==_r(this,Cr)){if(i&&!_r(this,Dr).includes(i))throw new Error(`Failed to change language to '${i}', available languages are '${_r(this,Dr).join("', '")}'`);zr(this,Cr,i),_r(this,Mr).next({language:i})}}getLanguage(){return{language:_r(this,Cr)}}language$(){return _r(this,Mr)}};Dr=new WeakMap,Cr=new WeakMap,Mr=new WeakMap;let x=O;function B(d){const a=d;if(a.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${a.$$type}'`);if(a.version!=="v1")throw new Error(`Invalid translation resource, bad version '${a.version}'`);return a}function ae(d){const a=d;if(a.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${a.$$type}'`);if(a.version!=="v1")throw new Error(`Invalid translation ref, bad version '${a.version}'`);return a}var Se=(d,a,i)=>{if(!a.has(d))throw TypeError("Cannot "+i)},_e=(d,a,i)=>(Se(d,a,"read from private field"),i?i.call(d):a.get(d)),De=(d,a,i)=>{if(a.has(d))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(d):a.set(d,i)},rt=(d,a,i,p)=>(Se(d,a,"write to private field"),p?p.call(d,i):a.set(d,i),i),Mt=(d,a,i)=>(Se(d,a,"access private method"),i),Tt,an,gn,sn,On,zn,_n,Xn,ga,Mn,Jn,ca,Ia,fa,da,va;function Ca(d){return Object.fromEntries(Object.entries(d).filter(a=>a[1]!==null))}class fr{constructor(a){this.onLoad=a,De(this,sn),De(this,Tt,new Set),De(this,an,new Map),De(this,gn,new Map)}addTranslationResource(a){const i=B(a);for(const p of i.resources){const T=Mt(this,sn,On).call(this,p.language,i.id);_e(this,gn).has(T)||_e(this,gn).set(T,p.loader)}}needsLoading(a,i){const p=Mt(this,sn,On).call(this,a,i);return _e(this,gn).get(p)?!_e(this,Tt).has(p):!1}async load(a,i){const p=Mt(this,sn,On).call(this,a,i),T=_e(this,gn).get(p);if(!T||_e(this,Tt).has(p))return;const se=_e(this,an).get(p);if(se){await se;return}const Me=T().then(Ue=>{this.onLoad({language:a,namespace:i,messages:Ue.messages}),_e(this,Tt).add(p)},Ue=>{throw _e(this,Tt).add(p),Ue});_e(this,an).set(p,Me),await Me}}Tt=new WeakMap,an=new WeakMap,gn=new WeakMap,sn=new WeakSet,On=function(d,a){return`${d}/${a}`};const ro=class es{constructor(a,i,p){De(this,Jn),De(this,Ia),De(this,da),De(this,zn,void 0),De(this,_n,void 0),De(this,Xn,void 0),De(this,ga,new Set),De(this,Mn,new Set),rt(this,zn,a),rt(this,_n,i),rt(this,Xn,p)}static create(a){const{languages:i}=a.languageApi.getAvailableLanguages(),p=(0,X.Q_)({fallbackLng:f,supportedLngs:i,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(p.init(),!p.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:T}=a.languageApi.getLanguage();T!==f&&p.changeLanguage(T);const se=new fr(yt=>{p.addResourceBundle(yt.language,yt.namespace,Ca(yt.messages),!1,!0)}),Me=(a==null?void 0:a.resources)||[];for(let yt=Me.length-1;yt>=0;yt--){const kt=Me[yt];kt.$$type==="@backstage/TranslationResource"?se.addTranslationResource(kt):kt.$$type==="@backstage/TranslationMessages"&&p.addResourceBundle(f,kt.id,Ca(kt.messages),!0,!1)}const Ue=new es(p,se,a.languageApi.getLanguage().language);return a.languageApi.language$().subscribe(({language:yt})=>{var kt;Mt(kt=Ue,Jn,ca).call(kt,yt)}),Ue}getTranslation(a){const i=ae(a);return Mt(this,da,va).call(this,i),Mt(this,Ia,fa).call(this,i)}translation$(a){const i=ae(a);return Mt(this,da,va).call(this,i),new(r())(p=>{let T={};const se=()=>{T={};const Ue=T;_e(this,_n).load(_e(this,Xn),i.id).then(()=>{if(Ue===T){const yt=Mt(this,Ia,fa).call(this,i);yt.ready&&p.next(yt)}},yt=>{Ue===T&&p.error(Array.isArray(yt)?yt[0]:yt)})},Me=()=>{const Ue=Mt(this,Ia,fa).call(this,i);Ue.ready?p.next(Ue):se()};return _e(this,_n).needsLoading(_e(this,Xn),i.id)&&se(),_e(this,Mn).add(Me),()=>{_e(this,Mn).delete(Me)}})}};zn=new WeakMap,_n=new WeakMap,Xn=new WeakMap,ga=new WeakMap,Mn=new WeakMap,Jn=new WeakSet,ca=function(d){_e(this,Xn)!==d&&(rt(this,Xn,d),_e(this,zn).changeLanguage(d),_e(this,Mn).forEach(a=>a()))},Ia=new WeakSet,fa=function(d){return _e(this,_n).needsLoading(_e(this,Xn),d.id)?{ready:!1}:{ready:!0,t:_e(this,zn).getFixedT(null,d.id)}},da=new WeakSet,va=function(d){if(_e(this,ga).has(d.id))return;_e(this,ga).add(d.id);const a=d.getDefaultMessages();_e(this,zn).addResourceBundle(f,d.id,a,!0,!1);const i=d.getDefaultResource();i&&_e(this,_n).addTranslationResource(i)};let pi=ro;function Ko(d){const a=new URL(d);return a.protocol=document.location.protocol,a.hostname=document.location.hostname,a.port=document.location.port,a.toString().replace(/\/$/,"")}function zo(d){const a=w.fromConfigs(d),i=a.getOptionalString("app.baseUrl"),p=a.getOptionalString("backend.baseUrl");let T=d,se,Me;if(i&&p){const Ue=new URL(i).origin,yt=new URL(p).origin;if(Ue===yt){const kt=Ko(p);p!==kt&&(se=kt)}}if(i){const Ue=Ko(i);i!==Ue&&(Me=Ue)}return(Me||se)&&(T=T.concat({data:{app:Me&&{baseUrl:Me},backend:se&&{baseUrl:se}},context:"relative-resolver"})),T}function jo(){var d;const a=document.querySelector('meta[name="backstage-app-mode"]');return((d=a==null?void 0:a.getAttribute("content"))!=null?d:"public")==="protected"}var Go=Object.defineProperty,Ho=(d,a,i)=>a in d?Go(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,nr=(d,a,i)=>(Ho(d,typeof a!="symbol"?a+"":a,i),i),Po=(d,a,i)=>{if(!a.has(d))throw TypeError("Cannot "+i)},So=(d,a,i)=>(Po(d,a,"read from private field"),i?i.call(d):a.get(d)),Eo=(d,a,i)=>{if(a.has(d))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(d):a.set(d,i)},Ro=(d,a,i,p)=>(Po(d,a,"write to private field"),p?p.call(d,i):a.set(d,i),i),vo;function Vo(d,a,i){var p;const T=!!d,se=(0,v.A)(d||(()=>Promise.resolve([])));let Me;if(T&&se.loading){const{Progress:kt}=a;Me=s.createElement(kt,null)}else if(se.error){const{BootErrorPage:kt}=a;Me=s.createElement(kt,{step:"load-config",error:se.error})}const{ThemeProvider:Ue=to}=a;return Me?{node:s.createElement(nt,{apis:Ir.with(q.n,i)},s.createElement(Ue,null,Me))}:{api:w.fromConfigs((p=se.value)!=null&&p.length?zo(se.value):[])}}class Yo{constructor(a){this.app=a}getPlugins(){return this.app.getPlugins()}getSystemIcon(a){return this.app.getSystemIcon(a)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class Jo{constructor(a){nr(this,"apiHolder"),nr(this,"configApi"),nr(this,"apis"),nr(this,"icons"),nr(this,"plugins"),nr(this,"featureFlags"),nr(this,"components"),nr(this,"themes"),nr(this,"configLoader"),nr(this,"defaultApis"),nr(this,"bindRoutes"),nr(this,"appLanguageApi"),nr(this,"translationResources"),nr(this,"appIdentityProxy",new uo),nr(this,"apiFactoryRegistry"),Eo(this,vo,!1);var i,p,T,se,Me,Ue,yt,kt,jn;this.apis=(i=a.apis)!=null?i:[],this.icons=a.icons,this.plugins=new Set((p=a.plugins)!=null?p:[]),this.featureFlags=(T=a.featureFlags)!=null?T:[],this.components=a.components,this.themes=a.themes,this.configLoader=(se=a.configLoader)!=null?se:po,this.defaultApis=(Me=a.defaultApis)!=null?Me:[],this.bindRoutes=a.bindRoutes,this.apiFactoryRegistry=new vt,this.appLanguageApi=x.createWithStorage({defaultLanguage:(Ue=a.__experimentalTranslations)==null?void 0:Ue.defaultLanguage,availableLanguages:(yt=a.__experimentalTranslations)==null?void 0:yt.availableLanguages}),this.translationResources=(jn=(kt=a.__experimentalTranslations)==null?void 0:kt.resources)!=null?jn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(a){return this.icons[a]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(a){const i=this.getProvider();return()=>s.createElement(i,null,a)}getProvider(){if(So(this,vo))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");Ro(this,vo,!0);const a=new Yo(this);let i=!1;return({children:T})=>{const se=(0,s.useRef)(!0),Me=(0,s.useMemo)(()=>ya.createWithStorage(this.themes),[]),{routing:Ue,featureFlags:yt,routeBindings:kt}=(0,s.useMemo)(()=>{const oa=Pa();oa&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const Da=Rn({root:T,discoverers:[na,aa],collectors:{routing:oa?za:ha,collectedPlugins:Ea,featureFlags:Er}});return Da.collectedPlugins.forEach(Ua=>this.plugins.add(Ua)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...Da,routeBindings:fo(this.bindRoutes)}},[T]);i||(i=!0,Pe(Ue.paths,Ue.parents),Be(kt,this.plugins));const jn=Vo(this.configLoader,this.components,Me),Ln="api"in jn;if(Ln){const{api:oa}=jn;this.configApi=oa}if("node"in jn)return jn.node;if(Ln&&se.current){se.current=!1;const oa=this.getApiHolder().get(q.f);if(oa){for(const Fa of this.featureFlags)oa.registerFlag({...Fa,pluginId:""});for(const Fa of this.plugins.values())if("getFeatureFlags"in Fa)for(const mr of Fa.getFeatureFlags())oa.registerFlag({name:mr.name,pluginId:Fa.getId()});else for(const mr of Fa.output())mr.type==="feature-flag"&&oa.registerFlag({name:mr.name,pluginId:Fa.getId()});const Da=oa.getRegisteredFlags(),Ua=new Set(Da.map(Fa=>Fa.name));for(const Fa of yt)Ua.has(Fa)||oa.registerFlag({name:Fa,pluginId:""})}}const{ThemeProvider:vn=to,Progress:ra}=this.components,ea=this.getApiHolder();if(jo()){const oa=ea.get(q.r),Da=ea.get(q.s),Ua=ea.get(q.q);if(!oa||!Da||!Ua)throw new Error("App is running in protected mode but missing required APIs");this.appIdentityProxy.enableCookieAuth({errorApi:oa,fetchApi:Da,discoveryApi:Ua})}return s.createElement(nt,{apis:ea},s.createElement(Wt,{appContext:a},s.createElement(vn,null,s.createElement($,{routePaths:Ue.paths,routeParents:Ue.parents,routeObjects:Ue.objects,routeBindings:kt,basePath:ar(jn.api)},s.createElement(ur.Provider,{value:{routeObjects:Ue.objects,appIdentityProxy:this.appIdentityProxy}},s.createElement(s.Suspense,{fallback:s.createElement(ra,null)},T))))))}}getRouter(){return lt}getApiHolder(){if(this.apiHolder){for(const a of this.plugins)for(const i of a.getApis())this.apiFactoryRegistry.get(i.api)||this.apiFactoryRegistry.register("default",i);return Ge.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:q.n,deps:{},factory:()=>ya.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:q.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:q.t,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:F.pl,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:F.Jm,deps:{languageApi:F.pl},factory:({languageApi:a})=>pi.create({languageApi:a,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:q.f,deps:{},factory:()=>new et});for(const a of this.defaultApis)this.apiFactoryRegistry.register("default",a);for(const a of this.plugins)for(const i of a.getApis())if(!this.apiFactoryRegistry.register("default",i))throw new Error(`Plugin ${a.getId()} tried to register duplicate or forbidden API factory for ${i.api}`);for(const a of this.apis)if(!this.apiFactoryRegistry.register("app",a))throw new Error(`Duplicate or forbidden API factory for ${a.api} in app`);return Ge.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Ge(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(a){const i=new Set;for(const p of a){const T=p.getId();if(i.has(T))throw new Error(`Duplicate plugin found '${T}'`);i.add(T)}}}vo=new WeakMap;function Qo(d){return new Jo(d)}let wo=!1;const yo=d=>{const a=(0,Q.nm)(),{NotFoundErrorPage:i}=a.getComponents(),p=(0,s.useMemo)(()=>Pa(),[]),se=[...(0,Q.OJ)(d.children,Me=>Me.getElements().flatMap(Ue=>{var yt;let kt=Ue.props.path;if(kt==="")return[];kt=(yt=kt==null?void 0:kt.replace(/\/\*$/,""))!=null?yt:"/";let jn=p?Ue:Ue.props.element;return!p&&!jn&&(jn=Ue,wo||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),wo=!0)),[{path:kt,element:jn,children:Ue.props.children?[{path:kt==="/"?"/":"*",element:Ue.props.children}]:void 0}]}).sort((Ue,yt)=>yt.path.localeCompare(Ue.path)).map(Ue=>({...Ue,path:Ue.path==="/"?"/":`${Ue.path}/*`}))),{path:"*",element:s.createElement(i,null)}];return(0,M.Ye)(se)};(0,Q.h3)(yo,"core.type","FlatRoutes")},22968:(Tn,_t,e)=>{"use strict";e.d(_t,{Db:()=>Lt,z9:()=>vr,eu:()=>pa,BI:()=>Oi,cy:()=>lc,fX:()=>ds,z7:()=>$e,UC:()=>Io,dv:()=>wi,lz:()=>ar,ly:()=>ce,wB:()=>Ar,DT:()=>lt,Vf:()=>ms,pp:()=>E,M:()=>Gs,bJ:()=>Tr,Hk:()=>ps,Y9:()=>Uo,Pu:()=>Cr,ST:()=>Ml,of:()=>yi,nO:()=>fa,s3:()=>$l,f1:()=>Vi,N_:()=>Pa,Su:()=>er,rW:()=>rt,h2:()=>Na,z3:()=>gn,Mm:()=>On,YW:()=>$o,dT:()=>Nl,ke:()=>zn,_1:()=>po,kE:()=>Ai,l6:()=>So,Bx:()=>sl,Mj:()=>_l,Cn:()=>ti,uk:()=>Hi,GE:()=>ol,tW:()=>Pl,Ds:()=>bl,O6:()=>ji,hl:()=>ul,q4:()=>ac,c_:()=>yt,Xs:()=>se,So:()=>p,Ek:()=>Me,W$:()=>Ue,EV:()=>T,tA:()=>ss,md:()=>Ss,Yl:()=>ys,xO:()=>ic,XI:()=>Ri,ny:()=>hs,Bp:()=>Or,hC:()=>kr,HZ:()=>ni,FS:()=>Mo,Ut:()=>xo});var s=e(5124),l=e(11638),b=e(59294),A=e(29365),W=e(38097),r=e(72501),q=e(32881),Q=e(74219),t=e(14041);const pe=(0,b.h2)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all"}},alertDisplay:{message_one:"({{ count }} older message)",message_other:"({{ count }} older messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}});var _=e(18846),de=e(64947),me=e(76891),H=e(93453),xe=e(46805),ve=e(61477),dt=e(19087),z=e(58837),ee=e(54917),D=e(268),w=e(7031),M=e(99703),y=e(60882),v=e(50868),F=e(53373),re=e.n(F),Ne=e(49203),ye=e(45250),X=e(18690),N=e(73657),V=e(21613),ie=e(77125),oe=e(20279),Ce=e(40697),nt=e(25577),He=e(71677),Xe=e(99594),at=e(36338),Ge=e(5893),Ye=e(25534),Re=e(1517),Le=e(67566),ct=e(41809),vt=e(67991),St=e.n(vt),Jt=e(12784),At=e.n(Jt),ue=e(22249),ft=e(1121),xt=e(24260),gt=e(20644),Nt=e.n(gt),S=e(11746),P=e(42899);const j=e.p+"static/missingAnnotation.67f79e98..svg",Z=e.p+"static/noInformation.4b426325..svg",Te=e.p+"static/createComponent.975d1e1e..svg",Ke=e.p+"static/noBuild.1715fa71..svg";var mt=e(58007),Je=e(8109),qe=e(5951),Ut=e(8973),nn=e(29655),It=e(91567),ht=e(9181),Zt=e(6924),ln=e(60767),on=e(28138),Qt=e(37197),Ae=e(43144),Ve=e(86613),jt=e(68887),zt=e(63798),Kt=e(91467),Et=e(3399),xn=e(62220),dn=e.n(xn),Xt=e(85058),yn=e(76842),Qe=e(88951),pt=e(40703),Dt=e(59469),it=e(48653),Ze=e(45685),Y=e(52235),he=e(90147),fe=e(69076),Ct=e(67720),Ft=e(95061),cn=e(41857),An=e(48543),In=e(26343),Bn=e(81215),Hn=e(10437),Cn=e(95479),Vn=e.n(Cn),ua=e(61009),ut=e(13677),m=e(54801),R=e(9719),K=e(46423),le=e(28233),I=e(55197),U=e(45810),J=e.n(U),we=e(27799),Oe=e(93285),st=e(38605),Rt=e(31653),qt=e(25301),en=e(83313),hn=e(89019),pn=e(62461),$t=e(64704),Pn=e(6774),un=e(75625),Un=e(65859),qn=e(5416),ta=e(33494),$n=e(80113),bn=e(26229),fn=e(46802),Vt=e(78467),En=e(16975);const Sn=e.p+"static/mic-drop.fe3ef4d0..svg";var ya=e(45634),Ra=e(1125),Oa=e(73845),G=e(27326),be=e(97388),We=e(13085),ot=e(79065),wt=e(55704),Ot=e(94509),rn=e(16249),te=e(62248),Ie=e(46195),ke=e(48472),ze=e(80824),et=e(51253),tt=e(3514),bt=e.n(tt);function Lt(n){const[o,u]=(0,t.useState)([]),h=(0,s.u)(s.l),{t:C}=(0,b.ie)(pe),{anchorOrigin:L={vertical:"top",horizontal:"center"},transientTimeoutMs:k}=n,ne=k!=null?k:5e3;(0,t.useEffect)(()=>{const Fe=h.alert$().subscribe(je=>u(Bt=>Bt.concat(je)));return()=>{Fe.unsubscribe()}},[h]);const[ge]=o;if((0,t.useEffect)(()=>{if(ge&&ge.display==="transient"){const Fe=setTimeout(()=>{u(je=>{const Bt=je.filter(Ht=>Ht!==ge);return Bt.length===je.length?je:Bt})},ne);return()=>clearTimeout(Fe)}},[ge,ne]),o.length===0)return null;const Ee=()=>{u(Fe=>Fe.filter(je=>je!==ge))};return t.createElement(W.A,{open:!0,anchorOrigin:L},t.createElement(Q.A,{action:t.createElement(A.A,{color:"inherit",size:"small",onClick:Ee,"data-testid":"error-button-close"},t.createElement(q.A,null)),severity:ge.severity},t.createElement(r.A,{component:"span"},String(ge.message),o.length>1&&t.createElement("em",null,C("alertDisplay.message",{count:o.length-1})))))}const Gt="@backstage/autologout:lastSeenOnline",mn=({enableEffect:n,autologoutIsEnabled:o,idleTimeoutSeconds:u,lastSeenOnlineStore:h,identityApi:C})=>{useEffect(()=>{if(o&&n){const L=h.get();if(L){const ne=Math.ceil(new Date().getTime()/1e3),ge=Math.ceil(L.getTime()/1e3);ne-ge>u&&C.signOut()}h.save(new Date)}else h.delete()},[o,n,C,u,h])},tn=n=>{const{idleTimer:o,setOpen:u,open:h,promptTimeoutMillis:C,remainingTime:L,setRemainingTime:k}=n,{t:ne}=useTranslationRef(coreComponentsTranslationRef);useEffect(()=>{const je=setInterval(()=>{k(Math.ceil(o.getRemainingTime()))},500);return()=>{clearInterval(je)}},[o,k]);const ge=()=>{u(!1),o.activate()},Fe=Math.max(L-C/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:h,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,ne("autoLogout.stillTherePrompt.title")),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(L/1e3)," ",Fe),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:ge,color:"secondary",variant:"contained",size:"small"},ne("autoLogout.stillTherePrompt.buttonText"))))};class ia{constructor(o){this.key=o}save(o){localStorage.setItem(this.key,o.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const o=localStorage.getItem(this.key);return o!==null?new Date(Date.parse(o)):null}}const Nn=({idleTimeoutMinutes:n,events:o,useWorkerTimers:u,logoutIfDisconnected:h,promptBeforeIdleSeconds:C,promptOpen:L,setPromptOpen:k,remainingTimeCountdown:ne,setRemainingTimeCountdown:ge,identityApi:Ee,lastSeenOnlineStore:Fe})=>{const je=C*1e3,Bt=je>0,Ht=async()=>{k(!0),ge(je)},Yt=()=>{k(!1),ge(0),Ee.signOut()},Qn=()=>{k(!1),ge(0)},Gn=(Xa,lr)=>{Fe.save(new Date)},ma=useIdleTimer({timeout:n*60*1e3,events:o,crossTab:!0,name:"autologout-timer",timers:u?workerTimers:void 0,onIdle:Yt,onActive:Bt?Qn:void 0,onAction:h?Gn:void 0,onPrompt:Bt?Ht:void 0,promptBeforeIdle:Bt?je:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,Bt&&React.createElement(tn,{idleTimer:ma,open:L,setOpen:k,remainingTime:ne,setRemainingTime:ge,promptTimeoutMillis:je}))},Dn={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},Fn=null,Yn=(n,o)=>{var u,h,C,L,k,ne,ge,Ee,Fe,je;return{enabled:(h=(u=n.getOptionalBoolean("auth.autologout.enabled"))!=null?u:o.enabled)!=null?h:Dn.enabled,idleTimeoutMinutes:(L=(C=n.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?C:o.idleTimeoutMinutes)!=null?L:Dn.idleTimeoutMinutes,promptBeforeIdleSeconds:(ne=(k=n.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?k:o.promptBeforeIdleSeconds)!=null?ne:Dn.promptBeforeIdleSeconds,useWorkerTimers:(Ee=(ge=n.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?ge:o.useWorkerTimers)!=null?Ee:Dn.useWorkerTimers,logoutIfDisconnected:(je=(Fe=n.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?Fe:o.logoutIfDisconnected)!=null?je:Dn.logoutIfDisconnected}},Wn=n=>{const o=useApi(identityApiRef),u=useApi(configApiRef),[h,C]=useState(!1);useEffect(()=>{async function Qn(Gn){(await Gn.getCredentials()).token?C(!0):C(!1)}Qn(o)},[o]);const{enabled:L,idleTimeoutMinutes:k,promptBeforeIdleSeconds:ne,logoutIfDisconnected:ge,useWorkerTimers:Ee}=useMemo(()=>Yn(u,n),[u,n]);useEffect(()=>{if(k<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(ne<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(k*60<=ne)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[k,ne]);const Fe=useMemo(()=>new ia(Gt),[]),[je,Bt]=useState(!1),[Ht,Yt]=useState(0);return mn({enableEffect:ge,autologoutIsEnabled:L&&h,idleTimeoutSeconds:k*60,lastSeenOnlineStore:Fe,identityApi:o}),!L||!h?null:React.createElement(Nn,{idleTimeoutMinutes:k,promptBeforeIdleSeconds:ne,useWorkerTimers:Ee,events:Fn,logoutIfDisconnected:ge,promptOpen:je,setPromptOpen:Bt,remainingTimeCountdown:Ht,setRemainingTimeCountdown:Yt,identityApi:o,lastSeenOnlineStore:Fe})};function la(n){let o=0;for(let h=0;h<n.length;h++)o=n.charCodeAt(h)+((o<<5)-o);let u="#";for(let h=0;h<3;h++){const C=o>>h*8&255;u+=`00${C.toString(16)}`.slice(-2)}return u}function sa(n){var o;const u=n.trim().split(" "),h=(o=u[0])!=null?o:"",C=u.length>1?u[u.length-1]:"";return h&&C?`${h.charAt(0)}${C.charAt(0)}`:h.charAt(0)}const Aa=(0,z.A)(n=>({avatar:{width:"4rem",height:"4rem",color:n.palette.common.white,backgroundColor:o=>o.backgroundColor},avatarText:{fontWeight:n.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function pa(n){var o,u;const{displayName:h,picture:C,customStyles:L}=n,k={...L},ne={fontFamily:k.fontFamily,fontSize:k.fontSize,fontWeight:k.fontWeight},ge=Aa(C?{}:{backgroundColor:la(h||"")}),Ee=re()((o=n.classes)==null?void 0:o.avatar,ge.avatar),Fe=re()((u=n.classes)==null?void 0:u.avatarText,ge.avatarText);return t.createElement(dt.A,{alt:h,src:C,className:Ee,style:k},h&&t.createElement(r.A,{variant:"h6",component:"span",className:Fe,style:ne},sa(h)))}function Sa(){const[n]=(0,X.AV)(t.createElement(X.qh,{index:!0,element:t.createElement("div",null)}));return!n.index}const xa=(0,z.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Ha=n=>/^([a-z+.-]+):/.test(n),Va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Ya=window.open;if(Ya&&!Ya.__backstage){const n=function(...u){const h=String(u[0]);if(Va.test(h))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Ya.apply(this,u)};n.__backstage=!0,window.open=n}const hr=()=>{try{return(0,s.u)(s.p).getOptionalString("app.baseUrl")}catch{return}},gr=()=>{var n;const o="http://sample.dev",u=(n=hr())!=null?n:"/",{pathname:h}=new URL(u,o);return(0,ye.trimEnd)(h,"/")},or=n=>{let o=String(n);const u=gr(),h=Ha(o),C=o.startsWith(u);return!h&&!C&&(o=u.concat(o)),o},ur=n=>{var o;return n instanceof Array?n.map(ur).join(" ").trim():typeof n=="object"&&n?ur((o=n==null?void 0:n.props)==null?void 0:o.children):["string","number"].includes(typeof n)?String(n):""},Pa=t.forwardRef(({onClick:n,noTrack:o,...u},h)=>{const C=xa(),L=(0,l.st)(),k=Sa()?or(u.to):u.to,ne=ur(u.children)||k,ge=Ha(k),Ee=ge&&!!/^https?:/.exec(k);if(Va.test(k))throw new Error("Link component rejected javascript: URL as a security precaution");const Fe=je=>{n==null||n(je),o||L.captureEvent("click",ne,{attributes:{to:k}})};return ge?t.createElement(Ne.A,{...Ee?{target:"_blank",rel:"noopener"}:{},...u,...u["aria-label"]?{"aria-label":`${u["aria-label"]}, Opens in a new window`}:{},ref:h,href:k,onClick:Fe,className:re()(C.externalLink,u.className)},u.children,t.createElement(r.A,{component:"span",className:C.visuallyHidden},", Opens in a new window")):t.createElement(Ne.A,{...u,ref:h,component:N.N_,to:k,onClick:Fe})}),qa=t.forwardRef((n,o)=>t.createElement(Pa,{ref:o,...n,color:"initial"})),er=t.forwardRef((n,o)=>t.createElement(de.A,{ref:o,component:qa,...n})),ir=null;function ar(n){const{t:o}=(0,b.ie)(pe),{text:u,tooltipDelay:h=1e3,tooltipText:C=o("copyTextButton.tooltipText"),"aria-label":L="Copy text"}=n,k=(0,s.u)(s.r),[ne,ge]=(0,t.useState)(!1),[{error:Ee},Fe]=(0,at.A)();(0,t.useEffect)(()=>{Ee&&k.post(Ee)},[Ee,k]);const je=Bt=>{Bt.stopPropagation(),ge(!0),Fe(u)};return t.createElement(t.Fragment,null,t.createElement(He.Ay,{id:"copy-test-tooltip",title:C,placement:"top",leaveDelay:h,onClose:()=>ge(!1),open:ne},t.createElement(A.A,{onClick:je,"aria-label":L},t.createElement(Xe.A,null))))}function $e(n){const{text:o,language:u,showLineNumbers:h=!1,highlightedNumbers:C,customStyle:L,showCopyCodeButton:k=!1}=n,ne=(0,ee.A)(),ge=ne.palette.type==="dark"?Ce.A:nt.A,Ee=ne.palette.type==="dark"?"#256bf3":"#e6ffed";return t.createElement(ie.A,{position:"relative"},t.createElement(oe.A,{customStyle:L,language:u,style:ge,showLineNumbers:h,wrapLines:!0,lineNumberStyle:{color:ne.palette.textVerySubtle},lineProps:Fe=>C!=null&&C.includes(Fe)?{style:{backgroundColor:Ee}}:{}},o),k&&t.createElement(ie.A,{position:"absolute",top:0,right:0},t.createElement(ar,{text:o})))}function ce(n){const{title:o,to:u}=n,h=(0,Ge.A)(C=>C.breakpoints.down("xs"));return u?h?t.createElement(A.A,{component:N.N_,color:"primary",title:o,size:"small",to:u},t.createElement(Ye.A,null)):t.createElement(de.A,{component:N.N_,variant:"contained",color:"primary",to:u},o):null}var lt;(n=>{(o=>{o.TOP_BOTTOM="TB",o.BOTTOM_TOP="BT",o.LEFT_RIGHT="LR",o.RIGHT_LEFT="RL"})(n.Direction||(n.Direction={})),(o=>{o.UP_LEFT="UL",o.UP_RIGHT="UR",o.DOWN_LEFT="DL",o.DOWN_RIGHT="DR"})(n.Alignment||(n.Alignment={})),(o=>{o.NETWORK_SIMPLEX="network-simplex",o.TIGHT_TREE="tight-tree",o.LONGEST_PATH="longest-path"})(n.Ranker||(n.Ranker={})),(o=>{o.LEFT="l",o.RIGHT="r",o.CENTER="c"})(n.LabelPosition||(n.LabelPosition={}))})(lt||(lt={}));const Rn=(0,z.A)(n=>({node:{fill:n.palette.primary.light,stroke:n.palette.primary.light},text:{fill:n.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Kn({node:{id:n}}){const o=Rn(),[u,h]=t.useState(0),[C,L]=t.useState(0),k=t.useRef(null);t.useLayoutEffect(()=>{if(k.current){let{height:Fe,width:je}=k.current.getBBox();Fe=Math.round(Fe),je=Math.round(je),(Fe!==C||je!==u)&&(h(je),L(Fe))}},[u,C]);const ne=10,ge=u+ne*2,Ee=C+ne*2;return t.createElement("g",null,t.createElement("rect",{className:o.node,width:ge,height:Ee,rx:10}),t.createElement("text",{ref:k,className:o.text,y:Ee/2,x:ge/2,textAnchor:"middle",alignmentBaseline:"middle"},n))}const na="arrow-marker",aa="node",Ea="edge",ba="label",wa=(0,ue.A)(n=>({node:{transition:`${n.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Ta=n=>t.createElement(Kn,{...n});function Ka({render:n=Ta,setNode:o,node:u}){const{width:h,height:C,x:L=0,y:k=0}=u,ne=u,ge=wa(),Ee=t.useRef(null);return t.useLayoutEffect(()=>{if(Ee.current){let{height:Fe,width:je}=Ee.current.getBBox();Fe=Math.round(Fe),je=Math.round(je),(Fe!==C||je!==h)&&o(u.id,{...u,height:Fe,width:je})}},[u,h,C,o]),t.createElement("g",{ref:Ee,"data-testid":aa,className:ge.node,transform:`translate(${L-h/2},${k-C/2})`},n({node:ne}))}const dr=(0,ue.A)(n=>({text:{fill:n.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function ha({edge:{label:n}}){const o=dr();return t.createElement("text",{className:o.text,textAnchor:"middle"},n)}const za=(0,ue.A)(n=>({path:{strokeWidth:1.3,stroke:n.palette.textSubtle,fill:"none",transition:`${n.transitions.duration.shortest}ms`},label:{transition:`${n.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Er=n=>t.createElement(ha,{...n});function sr({render:n=Er,setEdge:o,id:u,edge:h,curve:C,showArrowHeads:L}){const{x:k=0,y:ne=0,width:ge,height:Ee,points:Fe}=h,je=h,Bt=za(),Ht=t.useRef(null);t.useLayoutEffect(()=>{if(Ht.current){let{height:Gn,width:ma}=Ht.current.getBBox();Gn=Math.round(Gn),ma=Math.round(ma),(Gn!==Ee||ma!==ge)&&o(u,{...h,height:Gn,width:ma})}},[h,Ee,ge,o,u]);let Yt="";const Qn=t.useMemo(()=>ft.A().x(Gn=>Gn.x).y(Gn=>Gn.y).curve(xt[C]),[C]);if(Fe){const Gn=Fe.filter(ma=>Nt()(ma.x)&&Nt()(ma.y));Yt=Qn(Gn)||""}return t.createElement(t.Fragment,null,Yt&&t.createElement("path",{"data-testid":Ea,className:Bt.path,markerEnd:L?`url(#${na})`:void 0,d:Yt}),je.label?t.createElement("g",{ref:Ht,"data-testid":ba,className:Bt.label,transform:`translate(${k},${ne})`},n({edge:je})):null)}const $a="workspace";function Ar(n){var o,u;const{edges:h,nodes:C,renderNode:L,direction:k=lt.Direction.TOP_BOTTOM,align:ne,nodeMargin:ge=50,edgeMargin:Ee=10,rankMargin:Fe=50,paddingX:je=0,paddingY:Bt=0,acyclicer:Ht,ranker:Yt=lt.Ranker.NETWORK_SIMPLEX,labelPosition:Qn=lt.LabelPosition.RIGHT,labelOffset:Gn=10,edgeRanks:ma=1,edgeWeight:Xa=1,renderLabel:lr,defs:Zn,zoom:Wa="enabled",curve:Za="curveMonotoneX",showArrowHeads:cr=!1,fit:xr="grow",...so}=n,Nr=(0,ct.A)(),[Gr,ci]=t.useState(100),[Xr,Fo]=t.useState(100),Ma=t.useRef(new(St()).graphlib.Graph),[pr,Ao]=t.useState(((o=Ma.current.graph())==null?void 0:o.width)||0),[Fr,bo]=t.useState(((u=Ma.current.graph())==null?void 0:u.height)||0),[Hr,Vr]=t.useState([]),[ui,cc]=t.useState([]),_o=Math.max(pr,Gr),lo=Math.max(Fr,Xr),uc=Math.min(Fr,Xr),dc=xr==="grow"?lo:uc,mc=t.useMemo(()=>At()(Qa=>{if(!Qa)return;const rr=Le.A(Qa),Ga=Le.A(Qa.getElementById($a));function Pr(){rr.call(Re.s_().scaleExtent([1,1/0]).on("zoom",Wr=>{Wr.transform.x=Math.min(0,Math.max(Wr.transform.x,_o-_o*Wr.transform.k)),Wr.transform.y=Math.min(0,Math.max(Wr.transform.y,lo-lo*Wr.transform.k)),Ga.attr("transform",Wr.transform)}))}Wa==="enabled"?Pr():Wa==="enable-on-click"&&rr.on("click",()=>Pr());const{width:Sr,height:Wo}=Qa.getBoundingClientRect();Gr!==Sr&&ci(Sr),Xr!==Wo&&Fo(Wo)},100),[Xr,Gr,_o,lo,Wa]),qi=t.useCallback(()=>{const Qa=Ma.current.nodes(),rr=Ma.current.edges();Qa.forEach(Ga=>{C.some(Sr=>Sr.id===Ga)||Ma.current.removeNode(Ga)}),rr.forEach(Ga=>{h.some(Sr=>Sr.from===Ga.v&&Sr.to===Ga.w)||Ma.current.removeEdge(Ga.v,Ga.w)}),C.forEach(Ga=>{const Pr=Ma.current.nodes().find(Sr=>Ga.id===Sr);if(Pr&&Ma.current.node(Pr)){const{width:Sr,height:Wo,x:Wr,y:gc}=Ma.current.node(Pr);Ma.current.setNode(Pr,{...Ga,width:Sr,height:Wo,x:Wr,y:gc})}else Ma.current.setNode(Ga.id,{...Ga,width:0,height:0})}),h.forEach(Ga=>{Ma.current.setEdge(Ga.from,Ga.to,{...Ga,label:Ga.label,width:0,height:0,labelpos:Qn,labeloffset:Gn,weight:Xa,minlen:ma})})},[h,C,Qn,Gn,Xa,ma]),Co=t.useMemo(()=>At()(()=>{St().layout(Ma.current);const{height:Qa,width:rr}=Ma.current.graph(),Ga=Math.max(0,Qa||0),Pr=Math.max(0,rr||0);Ao(Pr),bo(Ga),Vr(Ma.current.nodes()),cc(Ma.current.edges())},250,{leading:!0}),[]);t.useEffect(()=>(Ma.current.setGraph({rankdir:k,align:ne,nodesep:ge,edgesep:Ee,ranksep:Fe,marginx:je,marginy:Bt,acyclicer:Ht,ranker:Yt}),qi(),Co(),Co.cancel),[Ht,ne,k,Ee,je,Bt,ge,Fe,Yt,qi,Co]);function pc(Qa,rr){return Ma.current.setNode(Qa,rr),Co(),Ma.current}function hc(Qa,rr){return Ma.current.setEdge(Qa,rr),Co(),Ma.current}return t.createElement("svg",{ref:mc,...so,width:"100%",height:dc,viewBox:`0 0 ${_o} ${lo}`},t.createElement("defs",null,t.createElement("marker",{id:na,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},t.createElement("path",{fill:Nr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Zn),t.createElement("g",{id:$a},t.createElement("svg",{width:pr,height:Fr,y:lo/2-Fr/2,x:_o/2-pr/2,viewBox:`0 0 ${pr} ${Fr}`},ui.map(Qa=>{const rr=Ma.current.edge(Qa);return rr?t.createElement(sr,{key:`${Qa.v}-${Qa.w}`,id:Qa,setEdge:hc,render:lr,edge:rr,curve:Za,showArrowHeads:cr}):null}),Hr.map(Qa=>{const rr=Ma.current.node(Qa);return rr?t.createElement(Ka,{key:Qa,setNode:pc,render:L,node:rr}):null}))))}const Zr=(0,z.A)(n=>{var o,u;return{root:{padding:n.spacing(0),marginBottom:n.spacing(0),marginTop:n.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:n.spacing(6),marginTop:-n.spacing(3),zIndex:"unset"},icon:{fontSize:n.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:n.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:n.palette.banner.link}},button:{color:(o=n.palette.banner.closeButtonColor)!=null?o:"inherit"},info:{backgroundColor:n.palette.banner.info},error:{backgroundColor:n.palette.banner.error},warning:{backgroundColor:(u=n.palette.banner.warning)!=null?u:n.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Lr=n=>{var o;const{variant:u,message:h,id:C,fixed:L=!1}=n,k=Zr(),ge=useApi(storageApiRef).forBucket("notifications"),Ee=(o=ge.snapshot("dismissedBanners").value)!=null?o:[],[Fe,je]=useState(new Set(Ee)),Bt=useObservable(ge.observe$("dismissedBanners"));useEffect(()=>{var Yt;if(Bt!=null&&Bt.value){const Qn=(Yt=Bt==null?void 0:Bt.value)!=null?Yt:[];je(new Set(Qn))}},[Bt==null?void 0:Bt.value]);const Ht=()=>{ge.set("dismissedBanners",[...Fe,C])};return React.createElement(Snackbar,{anchorOrigin:L?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!Fe.has(C),classes:{root:classNames(k.root,!L&&k.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(k.content,k[u]),message:k.message},message:h,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",className:k.button,onClick:Ht},React.createElement(CloseIcon,{className:k.icon}))]}))},Br=(0,z.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),g=({missing:n})=>{const o=Br();switch(n){case"field":return t.createElement("img",{src:j,className:o.generalImg,alt:"annotation is missing"});case"info":return t.createElement("img",{src:Z,alt:"no Information",className:o.generalImg});case"content":return t.createElement("img",{src:Te,alt:"create Component",className:o.generalImg});case"data":return t.createElement("img",{src:Ke,alt:"no Build",className:o.generalImg});default:return null}},c=(0,z.A)(n=>({root:{backgroundColor:n.palette.background.default,padding:n.spacing(2,0,0,0)},action:{marginTop:n.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function E(n){const{title:o,description:u,missing:h,action:C}=n,L=c();return t.createElement(P.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:L.root,spacing:2},t.createElement(P.A,{item:!0,xs:12,md:6},t.createElement(P.A,{container:!0,direction:"column"},t.createElement(P.A,{item:!0,xs:!0},t.createElement(r.A,{variant:"h5"},o)),t.createElement(P.A,{item:!0,xs:!0},t.createElement(r.A,{variant:"body1"},u)),t.createElement(P.A,{item:!0,xs:!0,className:L.action},C))),t.createElement(P.A,{item:!0,xs:12,md:6,className:L.imageContainer},typeof h=="string"?t.createElement(g,{missing:h}):h.customImage))}const $=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,Pe=/^.*ANNOTATION.*$/m,Be=$.match(Pe)[0],Pt=$.split(`
`).findIndex(n=>Pe.test(n)),Wt=(0,z.A)(n=>({code:{borderRadius:6,margin:n.spacing(2,0),background:n.palette.type==="dark"?"#444":n.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function wn(n){return Array.from(Array(n+1).keys(),o=>o+Pt)}function kn(n){const o=n.map(u=>Be.replace("ANNOTATION",u)).join(`
`);return $.replace(Be,o)}function La(n){const o=n.length<=1;return React.createElement(React.Fragment,null,"The ",o?"annotation":"annotations"," ",n.map(u=>React.createElement("code",null,u)).reduce((u,h)=>React.createElement(React.Fragment,null,u,", ",h))," ",o?"is":"are"," missing. You need to add the"," ",o?"annotation":"annotations"," to your component if you want to enable this tool.")}function ka(n){const{annotation:o,readMoreUrl:u}=n,h=Array.isArray(o)?o:[o],C=u||"https://backstage.io/docs/features/software-catalog/well-known-annotations",L=Wt(),{t:k}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(E,{missing:"field",title:k("emptyState.missingAnnotation.title"),description:La(h),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},k("emptyState.missingAnnotation.actionTitle")),React.createElement(Box,{className:L.code},React.createElement($e,{text:kn(h),language:"yaml",showLineNumbers:!0,highlightedNumbers:wn(h.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:Pa,to:C},k("emptyState.missingAnnotation.readMore")))})}const Ba=(0,z.A)(n=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${n.palette.border}`},"& th, & td":{border:`1px solid ${n.palette.border}`,padding:n.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:n.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:n.palette.background.paper},"& tr":{backgroundColor:n.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:n.palette.background.default},"& a":{color:n.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),_a=(n,o)=>o?typeof o=="string"?n+o:t.Children.toArray(o.props.children).reduce(_a,n):n,ja=({level:n,children:o})=>{const C=t.Children.toArray(o).reduce(_a,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return t.createElement(`h${n}`,{id:C},o)},tr={code:({inline:n,className:o,children:u,...h})=>{const C=String(u).replace(/\n+$/,""),L=/language-(\w+)/.exec(o||"");return!n&&L?t.createElement($e,{language:L[1],text:C}):t.createElement("code",{className:o,...h},u)},h1:ja,h2:ja,h3:ja,h4:ja,h5:ja,h6:ja};function Na(n){const{content:o,dialect:u="gfm",linkTarget:h,transformLinkUri:C,transformImageUri:L,className:k}=n,ne=Ba();return t.createElement(ln.$,{remarkPlugins:u==="gfm"?[on.A]:[],className:`${ne.markdown} ${k!=null?k:""}`.trim(),children:o,components:tr,linkTarget:h,transformLinkUri:C,transformImageUri:L})}const Ja=(n,o)=>(o.palette.type==="light"?D.e$:D.a)(o.palette[n].light,.6),wr=(n,o)=>(o.palette.type==="light"?D.a:D.e$)(o.palette[n].light,.9),Yr=(0,z.A)(n=>({root:{marginRight:n.spacing(1),fill:({severity:o})=>Ja(o,n)}})),Jr=({severity:n})=>{const o=Yr({severity:n});return t.createElement(ht.A,{classes:o})},qr=({severity:n})=>{const o=Yr({severity:n});return t.createElement(Zt.A,{classes:o})},Ur=(0,z.A)(n=>({panel:{backgroundColor:({severity:o})=>wr(o,n),color:({severity:o})=>Ja(o,n),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:o})=>Ja(o,n),fontWeight:n.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:o})=>Ja(o,n),backgroundColor:({severity:o})=>wr(o,n)},details:{width:"100%",display:"block",color:n.palette.textContrast,backgroundColor:n.palette.background.default,border:`1px solid ${n.palette.border}`,padding:n.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),eo=n=>n.charAt(0).toLocaleUpperCase("en-US")+n.slice(1);function Or(n){const{severity:o="warning",title:u,titleFormat:h,message:C,children:L,defaultExpanded:k}=n,ne=Ur({severity:o}),ge=eo(o)+(u?`: ${u}`:"");return t.createElement(Ut.A,{defaultExpanded:k!=null?k:!1,className:ne.panel,role:"alert"},t.createElement(nn.A,{expandIcon:t.createElement(qr,{severity:o}),className:ne.summary},t.createElement(Jr,{severity:o}),t.createElement(r.A,{className:ne.summaryText,variant:"subtitle1"},h==="markdown"?t.createElement(Na,{content:ge,className:ne.markdownContent}):ge)),(C||L)&&t.createElement(It.A,null,t.createElement(P.A,{container:!0},C&&t.createElement(P.A,{item:!0,xs:12},t.createElement(r.A,{className:ne.message,variant:"body1"},C)),L&&t.createElement(P.A,{item:!0,xs:12,className:ne.details},L))))}const uo=(0,z.A)(n=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:n.spacing(2)},divider:{margin:n.spacing(2)}}),{name:"BackstageErrorPanel"}),mo=({error:n,message:o,stack:u,children:h})=>{const C=uo();return t.createElement(mt.A,{dense:!0},t.createElement(Je.A,{alignItems:"flex-start"},t.createElement(qe.A,{classes:{secondary:C.text},primary:"Error",secondary:n}),t.createElement(ar,{text:n})),t.createElement(Je.A,{alignItems:"flex-start"},t.createElement(qe.A,{classes:{secondary:C.text},primary:"Message",secondary:o}),t.createElement(ar,{text:o})),u&&t.createElement(Je.A,{alignItems:"flex-start"},t.createElement(qe.A,{classes:{secondary:C.text},primary:"Stack Trace",secondary:u}),t.createElement(ar,{text:u})),h)};function Tr(n){const{title:o,error:u,defaultExpanded:h,titleFormat:C,children:L}=n;return t.createElement(Or,{severity:"error",title:o!=null?o:u.message,defaultExpanded:h,titleFormat:C},t.createElement(mo,{error:u.name,message:u.message,stack:u.stack,children:L}))}const to=(0,z.A)(n=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:n.spacing(2)},divider:{margin:n.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function po(n){var o;const{title:u,error:h,defaultExpanded:C}=n,L=to();if(h.name!=="ResponseError")return t.createElement(Tr,{title:u!=null?u:h.message,defaultExpanded:C,error:h});const{body:k,cause:ne}=h,{request:ge,response:Ee}=k,Fe=`${Ee.statusCode}: ${ne.name}`,je=ge&&`${ge.method} ${ge.url}`,Bt=ne.message.replace(/\\n/g,`
`),Ht=(o=ne.stack)==null?void 0:o.replace(/\\n/g,`
`),Yt=JSON.stringify(k,void 0,2);return t.createElement(Tr,{title:u!=null?u:h.message,defaultExpanded:C,error:{name:Fe,message:Bt,stack:Ht}},je&&t.createElement(Je.A,{alignItems:"flex-start"},t.createElement(qe.A,{classes:{secondary:L.text},primary:"Request",secondary:ge?`${je}`:void 0}),t.createElement(ar,{text:je})),t.createElement(t.Fragment,null,t.createElement(Qt.A,{component:"li",className:L.divider}),t.createElement(Je.A,{alignItems:"flex-start"},t.createElement(qe.A,{classes:{secondary:L.text},primary:"Full Error as JSON"})),t.createElement($e,{language:"json",text:Yt,showCopyCodeButton:!0})))}function ho(n){const o=document.createElement("div");return o.setAttribute("id",n),o}function go(n){document.body.insertBefore(n,document.body.lastElementChild.nextElementSibling)}function no(n){const o=useRef(null);useEffect(function(){const C=document.querySelector(`#${n}`),L=C||ho(n);return C||go(L),L.appendChild(o.current),function(){o.current.remove(),L.childNodes.length===-1&&L.remove()}},[n]);function u(){return o.current||(o.current=document.createElement("div")),o.current}return u()}const br="core.calloutSeen";function $r(){const[n,o]=useState(()=>{const h=localStorage.getItem(br);return h?JSON.parse(h):{}}),u=useCallback((h,C)=>{const L=localStorage.getItem(br),ne={...L?JSON.parse(L):{},[h]:C};o(ne),localStorage.setItem(br,JSON.stringify(ne))},[]);return{states:n,setState:u}}function Ir(n){const{states:o,setState:u}=$r(),h=useCallback(()=>{u(n,!0)},[u,n]);return{seen:o[n]===!0,markSeen:h}}function fo(n){const{seen:o,markSeen:u}=Ir(n);return{show:o===!1,hide:u}}const ao=(0,z.A)(n=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${n.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:n.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function _r(n){const{featureId:o,title:u,description:h,children:C}=n,{show:L,hide:k}=fo(o),ne=no("core.callout"),ge=useRef(null),[Ee,Fe]=useState(),je=ao(),Bt=useCallback(()=>{if(ge.current){const Ht=ge.current.getBoundingClientRect(),Yt=Math.max(Ht.width,Ht.height),Qn=800,Gn=Ht.x-(Yt-Ht.width)/2-Qn,ma=Ht.y-(Yt-Ht.height)/2-Qn,Xa=Yt+2*Qn,lr=450,Zn=Ht.x+Ht.width/2-lr,Wa=Ht.y-(Yt-Ht.height)/2+Yt+20;Fe({dotLeft:Gn,dotTop:ma,dotSize:Xa,borderWidth:Qn,textTop:Wa,textLeft:Zn,textWidth:lr})}},[]);return useEffect(()=>(window.addEventListener("resize",Bt),window.addEventListener("scroll",Bt),()=>{window.removeEventListener("resize",Bt),window.removeEventListener("scroll",Bt)}),[Bt]),useLayoutEffect(Bt,[ge.current,Bt]),L?React.createElement(React.Fragment,null,React.createElement(Box,{className:je.featureWrapper,ref:ge},C),createPortal(React.createElement(Box,{className:je.backdrop},React.createElement(ClickAwayListener,{onClickAway:k},React.createElement(React.Fragment,null,React.createElement(Box,{className:je.dot,"data-testid":"dot",style:{left:Ee==null?void 0:Ee.dotLeft,top:Ee==null?void 0:Ee.dotTop,width:Ee==null?void 0:Ee.dotSize,height:Ee==null?void 0:Ee.dotSize,borderWidth:Ee==null?void 0:Ee.borderWidth},onClick:k,onKeyDown:k,role:"button",tabIndex:0},React.createElement(Box,{className:je.pulseCircle})),React.createElement(Box,{className:je.text,"data-testid":"text",style:{left:Ee==null?void 0:Ee.textLeft,top:Ee==null?void 0:Ee.textTop,width:Ee==null?void 0:Ee.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},u),React.createElement(Typography,null,h))))),ne)):React.createElement(React.Fragment,null,C)}const Qr=(0,z.A)(n=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:n.palette.text.secondary,cursor:"default"},primary:{color:n.palette.primary.main},secondary:{color:n.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:n.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function zr({color:n="primary",disabled:o=!1,href:u="#",icon:h=t.createElement(Ve.A,null),label:C,onClick:L,title:k}){const ne=Qr();return o?t.createElement(ie.A,{title:k,className:re()(ne.link,ne.disabled)},h,t.createElement(r.A,{variant:"caption",component:"span",className:ne.label},C)):t.createElement(Pa,{title:k,className:re()(ne.link,ne[n]),to:u,onClick:L},h,t.createElement(r.A,{variant:"caption",component:"span",className:ne.label},C))}const Dr=(0,z.A)(n=>({links:{margin:n.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:n.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function Cr(n){const{links:o}=n,u=Dr();return t.createElement("nav",{className:u.links},o.map((h,C)=>t.createElement(zr,{key:C+1,...h})))}const Mr=n=>{const o=n==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${o}) 0%,
    hsla(0, 0%, ${o}, 0.987) 8.1%,
    hsla(0, 0%, ${o}, 0.951) 15.5%,
    hsla(0, 0%, ${o}, 0.896) 22.5%,
    hsla(0, 0%, ${o}, 0.825) 29%,
    hsla(0, 0%, ${o}, 0.741) 35.3%,
    hsla(0, 0%, ${o}, 0.648) 41.2%,
    hsla(0, 0%, ${o}, 0.55) 47.1%,
    hsla(0, 0%, ${o}, 0.45) 52.9%,
    hsla(0, 0%, ${o}, 0.352) 58.8%,
    hsla(0, 0%, ${o}, 0.259) 64.7%,
    hsla(0, 0%, ${o}, 0.175) 71%,
    hsla(0, 0%, ${o}, 0.104) 77.5%,
    hsla(0, 0%, ${o}, 0.049) 84.5%,
    hsla(0, 0%, ${o}, 0.013) 91.9%,
    hsla(0, 0%, ${o}, 0) 100%
  `},jr=100,f=10,O=(0,z.A)(n=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:jr,height:`calc(100% + ${f}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-f,background:`linear-gradient(90deg, ${Mr(n.palette.type)})`},fadeRight:{right:-f,background:`linear-gradient(270deg, ${Mr(n.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-n.spacing(2)},buttonRight:{right:-n.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function x(n){const[[o,u],h]=React.useState([0,0]);return React.useLayoutEffect(()=>{const C=n.current;if(!C){h([0,0]);return}const L=()=>{const k=C.scrollLeft,ne=C.scrollWidth-C.offsetWidth-C.scrollLeft;h([k,ne])};return L(),C.addEventListener("scroll",L),window.addEventListener("resize",L),()=>{C.removeEventListener("scroll",L),window.removeEventListener("resize",L)}},[n]),[o,u]}function B(n,o,u){const[h,C]=React.useState(0);return React.useLayoutEffect(()=>{if(h===0)return;const L=window.performance.now(),k=requestAnimationFrame(ne=>{if(!n.current)return;const ge=ne-L,Ee=Math.abs(h)*ge/o,je=Math.max(u,Ee)*Math.sign(h);n.current.scrollBy({left:je});const Bt=h-je;Math.sign(h)!==Math.sign(Bt)?C(0):C(Bt)});return()=>cancelAnimationFrame(k)},[n,h,o,u]),C}function ae(n){const{scrollStep:o=100,scrollSpeed:u=50,minScrollDistance:h=5,children:C,...L}=n,k=O(n),ne=React.useRef(),[ge,Ee]=x(ne),Fe=B(ne,u,h),je=Bt=>{ne.current&&Fe(Bt?o:-o)};return React.createElement(Box,{...L,className:k.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:k.container,ref:ne},C),React.createElement(Box,{className:classNames(k.fade,k.fadeLeft,{[k.fadeHidden]:ge===0})}),React.createElement(Box,{className:classNames(k.fade,k.fadeRight,{[k.fadeHidden]:Ee===0})}),ge>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>je(!1),className:classNames(k.button,k.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Ee>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>je(!0),className:classNames(k.button,k.buttonRight,{})},React.createElement(ChevronRight,null)))}const Se=(0,z.A)(n=>({alpha:{color:n.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function _e(n){const o=Se(n),{shorthand:u,alpha:h}=n;return u?React.createElement(Typography,{component:"span",className:o[h?"alpha":"beta"],style:{fontSize:"120%"}},h?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement(Typography,{component:"span",className:o[h?"alpha":"beta"]},h?"Alpha":"Beta")}const De=(0,t.lazy)(()=>e.e(6935).then(e.bind(e,36935)).then(n=>({default:n.RealLogViewer})));function rt(n){const{Progress:o}=(0,l.nm)().getComponents();return t.createElement(t.Suspense,{fallback:t.createElement(o,null)},t.createElement(De,{...n}))}const Mt=(0,z.A)(n=>({root:{paddingLeft:n.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Tt=({request:n,busy:o,setBusy:u})=>{const h=Mt(),[C,L]=(0,t.useState)(),{t:k}=(0,b.ie)(pe),ne=async()=>{u(!0);try{await n.trigger()}catch(Ee){L((0,Et.bJ)(Ee)?Ee.message:"An unspecified error occurred")}finally{u(!1)}},ge=n.provider.icon;return t.createElement(Je.A,{disabled:o,classes:{root:h.root}},t.createElement(Kt.A,null,t.createElement(ge,{fontSize:"large"})),t.createElement(qe.A,{primary:n.provider.title,secondary:C&&t.createElement(r.A,{color:"error"},C)}),t.createElement(de.A,{color:"primary",variant:"contained",onClick:ne},k("oauthRequestDialog.login")))},an=(0,z.A)(n=>({dialog:{paddingTop:n.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:n.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:n.spacing(2,0)}}),{name:"OAuthRequestDialog"});function gn(n){var o;const u=an(),[h,C]=(0,t.useState)(!1),L=(0,s.u)(s.x),k=(0,s.u)(s.p),{t:ne}=(0,b.ie)(pe),ge=(o=k.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?o:!1,Ee=(0,S.A)((0,t.useMemo)(()=>L.authRequest$(),[L]),[]),Fe=()=>{Ee.forEach(je=>je.reject())};return t.createElement(me.A,{open:!!Ee.length,fullWidth:!0,maxWidth:"xs",classes:{paper:u.dialog},"aria-labelledby":"oauth-req-dialog-title"},t.createElement("main",null,t.createElement(ve.A,{classes:{root:u.title},id:"oauth-req-dialog-title"},t.createElement(r.A,{className:u.titleHeading,variant:"h1",variantMapping:{h1:"span"}},ne("oauthRequestDialog.title")),ge?t.createElement(r.A,null,ne("oauthRequestDialog.authRedirectTitle")):null),t.createElement(xe.A,{dividers:!0,classes:{root:u.contentList}},t.createElement(mt.A,null,Ee.map(je=>t.createElement(Tt,{key:je.provider.title,request:je,busy:h,setBusy:C}))))),t.createElement(H.A,{classes:{root:u.actionButtons}},t.createElement(de.A,{onClick:Fe},ne("oauthRequestDialog.rejectAll"))))}const sn=(0,z.A)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function On(n){var o;const[u,h]=(0,t.useState)(!1),C=(0,Xt.a)(),L=sn(),k=ne=>{C()&&h(ne)};return t.createElement(He.Ay,{title:(o=n.title)!=null?o:n.text||"",placement:n.placement,disableHoverListener:!u},t.createElement(dn(),{text:n.text,line:n.line,onToggled:k,containerClassName:L.container}))}function zn(n){const o=(0,ee.A)(),[u,h]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const C=setTimeout(()=>h(!0),o.transitions.duration.short);return()=>clearTimeout(C)},[o.transitions.duration.short]),u?t.createElement(Qe.A,{...n,"data-testid":"progress"}):t.createElement(ie.A,{display:"none"})}const _n=(0,z.A)(n=>({root:{maxWidth:"fit-content",padding:n.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:n.palette.textSubtle},arrow:{color:n.palette.textSubtle}}),{name:"BackstageBottomLink"});function Xn(n){const{link:o,title:u,onClick:h}=n,C=_n();return t.createElement(ie.A,null,t.createElement(Qt.A,null),t.createElement(Pa,{to:o,onClick:h,underline:"none"},t.createElement(ie.A,{display:"flex",alignItems:"center",className:C.root},t.createElement(ie.A,{className:C.boxTitle,fontWeight:"fontWeightBold",m:1},t.createElement(r.A,null,t.createElement("strong",null,u))),t.createElement(Y.A,{className:C.arrow}))))}const ga=n=>{const{slackChannel:o}=n,{t:u}=(0,b.ie)(pe);if(o){if(typeof o=="string")return t.createElement(r.A,null,u("errorBoundary.title",{slackChannel:o}));if(!o.href)return t.createElement(r.A,null,u("errorBoundary.title",{slackChannel:o.name}))}else return null;return t.createElement(er,{to:o.href,variant:"contained"},o.name)},Mn=class extends t.Component{constructor(o){super(o),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(o,u){console.error(`ErrorBoundary, error: ${o}, info: ${u}`),this.setState({error:o,errorInfo:u})}render(){const{slackChannel:o,children:u}=this.props,{error:h}=this.state;return h?t.createElement(Tr,{title:"Something Went Wrong",error:h},t.createElement(ga,{slackChannel:o})):u}},Jn=(0,z.A)(n=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:n.spacing(2,2,2,2.5)},headerTitle:{fontWeight:n.typography.fontWeightBold},headerSubheader:{paddingTop:n.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),ca=(0,w.A)(n=>({root:{display:"inline-block",padding:n.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Dt.A),Ia={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function fa(n){const{title:o,subheader:u,divider:h=!0,deepLink:C,slackChannel:L,errorBoundaryProps:k,variant:ne,children:ge,headerStyle:Ee,headerProps:Fe,icon:je,action:Bt,actionsClassName:Ht,actions:Yt,cardClassName:Qn,actionsTopRight:Gn,className:ma,noPadding:Xa,titleTypographyProps:lr}=n,Zn=Jn();let Wa={},Za={};ne&&ne.split(/[\s]+/g).forEach(Nr=>{Wa={...Wa,...Ia.card[Nr]},Za={...Za,...Ia.cardContent[Nr]}});const cr=()=>!u&&!je?null:t.createElement("div",{className:Zn.headerSubheader,"data-testid":"info-card-subheader"},u&&t.createElement("div",{className:Zn.subheader},u),je),xr=k||(L?{slackChannel:L}:{});return t.createElement(pt.A,{style:Wa,className:ma},t.createElement(Mn,{...xr},o&&t.createElement(Ze.A,{classes:{root:Zn.header,title:Zn.headerTitle,subheader:Zn.headerSubheader,avatar:Zn.headerAvatar,action:Zn.headerAction,content:Zn.headerContent},title:o,subheader:cr(),action:Bt,style:{...Ee},titleTypographyProps:lr,...Fe}),Gn&&t.createElement(ca,null,Gn),h&&t.createElement(Qt.A,null),t.createElement(it.A,{className:re()(Qn,{[Zn.noPadding]:Xa}),style:Za},ge),Yt&&t.createElement(Dt.A,{className:Ht},Yt),C&&t.createElement(Xn,{...C})))}const da=(0,z.A)(n=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:n.typography.pxToRem(45),fontWeight:n.typography.fontWeightBold,color:n.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),va={fractional:!0,inverse:!1,unit:"%",max:100},Ca=({palette:n,value:o,inverse:u,max:h})=>{if(isNaN(o))return"#ddd";const C=h||va.max,L=u?C-o:o;return L<C/3?n.status.error:L<C*(2/3)?n.status.warning:n.status.ok};function fr(n){const[o,u]=useState(null),{getColor:h=Ca}=n,C=da(n),{palette:L}=useTheme(),{value:k,fractional:ne,inverse:ge,unit:Ee,max:Fe,description:je}={...va,...n},Bt=ne?Math.round(k*Fe):k,Ht=Fe!==100?Math.round(k):Bt,[Yt,Qn]=useState(!1);return useEffect(()=>{const Gn=o,ma=()=>Qn(!0),Xa=()=>Qn(!1);return Gn&&je?(Gn.addEventListener("mouseenter",ma),Gn.addEventListener("mouseleave",Xa),()=>{Gn.removeEventListener("mouseenter",ma),Gn.removeEventListener("mouseleave",Xa)}):()=>{Qn(!1)}},[je,o]),React.createElement(Box,{ref:u,className:C.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Bt,strokeWidth:12,trailWidth:12,strokeColor:h({palette:L,value:Ht,inverse:ge,max:Fe}),className:C.circle}),je&&Yt?React.createElement(Box,{className:C.description},je):React.createElement(Box,{className:C.overlay},isNaN(k)?"N/A":`${Ht}${Ee}`))}const ro=(0,z.A)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function pi(n){const o=ro(n),{title:u,subheader:h,progress:C,inverse:L,deepLink:k,description:ne,icon:ge,variant:Ee,getColor:Fe}=n,je={inverse:L,description:ne,getColor:Fe,value:C};return React.createElement(Box,{className:o.root},React.createElement(fa,{title:u,subheader:h,deepLink:k,variant:Ee,icon:ge},React.createElement(fr,{...je})))}function Ko(n){const{value:o,getColor:u=Ca,width:h="thick"}=n,{palette:C}=useTheme();if(isNaN(o))return null;let L=Math.round(o*100*100)/100;L>100&&(L=100);const k=h==="thick"?4:1,ne=u({palette:C,value:L,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${L}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:L,strokeWidth:k,trailWidth:k,strokeColor:ne})))}const zo=(0,z.A)(n=>(0,M.A)({icon:{position:"absolute",right:n.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageClosedDropdown"}),jo=()=>{const n=zo();return t.createElement(Hn.A,{className:n.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"currentColor"}))},Go=(0,z.A)(n=>(0,M.A)({icon:{position:"absolute",right:n.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageOpenedDropdown"}),Ho=()=>{const n=Go();return t.createElement(Hn.A,{className:n.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"currentColor"}))},nr=(0,w.A)(n=>(0,M.A)({root:{"label + &":{marginTop:n.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:n.palette.primary.main}},input:{borderRadius:n.shape.borderRadius,position:"relative",backgroundColor:n.palette.background.paper,border:"1px solid #ced4da",fontSize:n.typography.body1.fontSize,padding:n.spacing(1.25,3.25,1.25,1.5),transition:n.transitions.create(["border-color","box-shadow"]),"&:focus":{background:n.palette.background.paper,borderRadius:n.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(cn.A),Po=(0,z.A)(n=>(0,M.A)({formControl:{margin:n.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:n.typography.body2.fontSize,fontFamily:n.typography.fontFamily,color:n.palette.text.primary,"&.Mui-focused":{color:n.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:n.typography.body2.fontSize,fontFamily:n.typography.fontFamily,color:n.palette.text.primary,"&.Mui-focused":{color:n.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function So(n){const{multiple:o,items:u,label:h,placeholder:C,selected:L,onChange:k,triggerReset:ne,native:ge=!1,disabled:Ee=!1,margin:Fe}=n,je=Po(),[Bt,Ht]=(0,t.useState)(L||(o?[]:"")),[Yt,Qn]=(0,t.useState)(!1);(0,t.useEffect)(()=>{Ht(o?[]:"")},[ne,o]),(0,t.useEffect)(()=>{Ht(L||(o?[]:""))},[L,o]);const Gn=Zn=>{Ht(Zn.target.value),k(Zn.target.value)},ma=Zn=>{if(Ee){Zn.preventDefault();return}Qn(Wa=>o&&!(Zn.target instanceof HTMLElement)?!0:!Wa)},Xa=()=>{Qn(!1)},lr=Zn=>()=>{const Wa=Bt.filter(Za=>Za!==Zn);Ht(Wa),k(Wa)};return t.createElement(ie.A,{className:je.root},t.createElement(Ft.A,{className:je.formControl},t.createElement(An.A,{className:je.formLabel},h),t.createElement(Bn.A,{"aria-label":h,value:Bt,native:ge,disabled:Ee,"data-testid":"select",displayEmpty:!0,multiple:o,margin:Fe,onChange:Gn,open:Yt,onOpen:ma,onClose:Xa,input:t.createElement(nr,null),label:h,renderValue:Zn=>{var Wa;return o&&Bt.length!==0?t.createElement(ie.A,{className:je.chips},Zn.map(Za=>{const cr=u.find(xr=>xr.value===Za);return cr?t.createElement(Ct.A,{key:cr==null?void 0:cr.value,label:cr==null?void 0:cr.label,clickable:!0,onDelete:lr(Za),className:je.chip}):!1})):t.createElement(r.A,null,Bt.length===0?C||"":(Wa=u.find(Za=>Za.value===Zn))==null?void 0:Wa.label)},IconComponent:()=>Yt?t.createElement(Ho,null):t.createElement(jo,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},C&&!o&&t.createElement(In.A,{value:[]},C),ge?u&&u.map(Zn=>t.createElement("option",{value:Zn.value,key:Zn.value},Zn.label)):u&&u.map(Zn=>t.createElement(In.A,{key:Zn.value,value:Zn.value},o&&t.createElement(fe.A,{color:"primary",checked:Bt.includes(Zn.value)||!1,className:je.checkbox}),Zn.label)))))}const Eo=()=>{},Ro=t.createContext({stepperLength:0,stepIndex:0,setStepIndex:Eo,stepHistory:[],setStepHistory:Eo,onStepChange:Eo});function vo(n){const{children:o,elevated:u,onStepChange:h,activeStep:C=0}=n,[L,k]=useState(C),[ne,ge]=useState([0]);useEffect(()=>{k(C)},[C]);const Ee=[];let Fe;return Children.forEach(o,je=>{isValidElement(je)&&(je.props.end?Fe=je:Ee.push(je))}),React.createElement(React.Fragment,null,React.createElement(Ro.Provider,{value:{stepIndex:L,setStepIndex:k,stepHistory:ne,setStepHistory:ge,onStepChange:h,stepperLength:Children.count(o)}},React.createElement(MuiStepper,{activeStep:L,orientation:"vertical",elevation:u?2:0},Ee)),L>=Children.count(o)-1&&Fe)}const Vo=(0,z.A)(n=>({root:{marginTop:n.spacing(3),"& button":{marginRight:n.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),Yo=({text:n,handleClick:o})=>{const{t:u}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{onClick:o},n||u("simpleStepper.reset"))},Jo=({text:n,handleClick:o,disabled:u,last:h,stepIndex:C})=>{const{t:L}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{variant:"contained",color:"primary",disabled:u,"data-testid":`nextButton-${C}`,onClick:o},n||L(h?"simpleStepper.finish":"simpleStepper.next"))},Qo=({text:n,handleClick:o,disabled:u,stepIndex:h})=>{const{t:C}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:u,"data-testid":`skipButton-${h}`,onClick:o},n||C("simpleStepper.skip"))},wo=({text:n,handleClick:o,disabled:u,stepIndex:h})=>{const{t:C}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{onClick:o,"data-testid":`backButton-${h}`,disabled:u},n||C("simpleStepper.back"))},yo=({actions:n={},children:o})=>{const u=Vo(),{stepperLength:h,stepIndex:C,setStepIndex:L,stepHistory:k,setStepHistory:ne,onStepChange:ge}=useContext(Ro),Ee=(Ht,Yt)=>{Yt&&Yt(),ge&&ge(C,Ht),L(Ht)},Fe=()=>{const Ht=n.nextStep?n.nextStep(C,h-1):C+1;Ee(Ht,n.onNext),ne([...k,Ht])},je=()=>{k.pop(),Ee(k[k.length-1],n.onBack),ne([...k])},Bt=()=>{Ee(0,n.onRestart),ne([0])};return React.createElement(Box,{className:u.root},[void 0,!0].includes(n.showBack)&&C!==0&&React.createElement(wo,{text:n.backText,handleClick:je,disabled:C===0,stepIndex:C}),n.showSkip&&React.createElement(Qo,{text:n.skipText,handleClick:Fe,disabled:!!h&&C>=h||!!n.canSkip&&!n.canSkip(),stepIndex:C}),[void 0,!0].includes(n.showNext)&&React.createElement(Jo,{text:n.nextText,handleClick:Fe,disabled:!!h&&C>=h||!!n.canNext&&!n.canNext(),stepIndex:C}),n.showRestart&&C!==0&&React.createElement(Yo,{text:n.restartText,handleClick:Bt,stepIndex:C}),o)},d=(0,z.A)(n=>({end:{padding:n.spacing(3)}}),{name:"SimpleStepperStep"});function a(n){const{title:o,children:u,end:h,actions:C,...L}=n,k=d();return h?React.createElement(Box,{className:k.end},React.createElement(Typography,{variant:"h6"},o),u,React.createElement(yo,{actions:{...C||{},showNext:!1}})):React.createElement(MuiStep,{...L},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},o)),React.createElement(StepContent,null,u,React.createElement(yo,{actions:C})))}const i=(0,z.A)(n=>({status:{fontWeight:n.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:n.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:n.palette.status.ok}},warning:{"&::before":{backgroundColor:n.palette.status.warning}},error:{"&::before":{backgroundColor:n.palette.status.error}},pending:{"&::before":{backgroundColor:n.palette.status.pending}},running:{"&::before":{backgroundColor:n.palette.status.running}},aborted:{"&::before":{backgroundColor:n.palette.status.aborted}}}),{name:"BackstageStatus"});function p(n){const o=i(n);return t.createElement(r.A,{component:"span",className:re()(o.status,o.ok),"aria-label":"Status ok","aria-hidden":"true",...n})}function T(n){const o=i(n);return t.createElement(r.A,{component:"span",className:re()(o.status,o.warning),"aria-label":"Status warning","aria-hidden":"true",...n})}function se(n){const o=i(n);return t.createElement(r.A,{component:"span",className:re()(o.status,o.error),"aria-label":"Status error","aria-hidden":"true",...n})}function Me(n){const o=i(n);return t.createElement(r.A,{component:"span",className:re()(o.status,o.pending),"aria-label":"Status pending","aria-hidden":"true",...n})}function Ue(n){const o=i(n);return t.createElement(r.A,{component:"span",className:re()(o.status,o.running),"aria-label":"Status running","aria-hidden":"true",...n})}function yt(n){const o=i(n);return t.createElement(r.A,{component:"span",className:re()(o.status,o.aborted),"aria-label":"Status aborted","aria-hidden":"true",...n})}const kt=n=>(0,M.A)({root:{fontWeight:n.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:n.spacing(4),border:"0",verticalAlign:"top"}}),jn={root:{border:"0",verticalAlign:"top"}},Ln=n=>(0,M.A)({root:{margin:n.spacing(0,0,-1,0)}}),vn=n=>(0,M.A)({root:{padding:n.spacing(0,0,1,0)},random:{}}),ra=(0,w.A)(kt,{name:"BackstageMetadataTableTitleCell"})(m.A),ea=(0,w.A)(jn,{name:"BackstageMetadataTableCell"})(m.A),oa=({dense:n,children:o})=>t.createElement(ua.A,{size:n?"small":"medium"},t.createElement(ut.A,null,o)),Da=({title:n,children:o,...u})=>t.createElement(R.A,null,n&&t.createElement(ra,null,n),t.createElement(ea,{colSpan:n?1:2,...u},o)),Ua=(0,w.A)(Ln,{name:"BackstageMetadataTableList"})(({classes:n,children:o})=>t.createElement(mt.A,{disablePadding:!0,className:n.root},o)),Fa=(0,w.A)(vn,{name:"BackstageMetadataTableListItem"})(({classes:n,children:o})=>t.createElement(Je.A,{className:n.root},o)),mr=(0,M.A)({root:{margin:"0 0",listStyleType:"none"}}),Oo=n=>(0,M.A)({root:{...mr.root,paddingLeft:n.spacing(1)}}),hi=(0,w.A)(mr,{name:"BackstageStructuredMetadataTableList"})(({classes:n,children:o})=>t.createElement(Ua,{classes:n},o)),gi=(0,w.A)(Oo,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:n,children:o})=>t.createElement(Ua,{classes:n},o));function ns(n,o,u){const h=n.map((C,L)=>t.createElement(Fa,{key:L},Xo(C,o,u)));return u?t.createElement(gi,null,h):t.createElement(hi,null,h)}function as(n,o,u){const h=Object.keys(n).map(C=>{const L=Xo(n[C],o,!0);return t.createElement(Fa,{key:C},t.createElement(r.A,{variant:"body2",component:"span"},`${o.titleFormat(C)}: `),L)});return u?t.createElement(gi,null,h):t.createElement(hi,null,h)}function Xo(n,o,u){return t.isValidElement(n)?t.createElement(t.Fragment,null,n):n!==null&&typeof n=="object"&&!Array.isArray(n)?as(n,o,u):Array.isArray(n)?ns(n,o,u):typeof n=="boolean"?t.createElement(t.Fragment,null,n?"\u2705":"\u274C"):t.createElement(r.A,{variant:"body2",component:"span"},n)}const rs=({value:n,options:o})=>t.createElement(t.Fragment,null,Xo(n,o,!1)),os=({title:n,value:o,options:u})=>t.createElement(Da,{title:u.titleFormat(n)},t.createElement(rs,{value:o,options:u}));function is(n,o){return Object.keys(n).map(u=>t.createElement(os,{key:u,title:u,value:n[u],options:o}))}function ss(n){const{metadata:o,dense:u=!0,options:h={}}=n,C=is(o,{titleFormat:Vn(),...h});return t.createElement(oa,{dense:u},C)}function ls(n){return qs.stringify(n,{strictNullHandling:!0})}function fi(n){return qs.parse(n,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function Ei(n,o){return fi(n)[o]}function cs(n,o,u){const h={...fi(n),[o]:u};return ls(h)}function fc(n,o=250){const[u,h]=useSearchParams(),C=u.toString(),[L,k]=useState(Ei(C,n));return useEffect(()=>{const ne=Ei(C,n);k(ge=>isEqual(ne,ge)?ge:ne)},[C,k,n]),useDebouncedEffect(()=>{const ne=cs(C,n,L);C!==ne&&h(ne,{replace:!0})},[h,L,C,n],o),[L,k]}const us=()=>{const{t:n}=(0,b.ie)(pe);return{url:"https://github.com/backstage/backstage/issues",items:[{title:n("supportConfig.default.title"),icon:"warning",links:[{title:n("supportConfig.default.linkTitle"),url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]}};function vi(){const o=(0,s.b)().get(s.p),u=o==null?void 0:o.getOptionalConfig("app.support"),h=us();return u?{url:u.getString("url"),items:u.getConfigArray("items").flatMap(C=>{var L;return{title:C.getString("title"),icon:C.getOptionalString("icon"),links:((L=C.getOptionalConfigArray("links"))!=null?L:[]).flatMap(k=>({url:k.getString("url"),title:k.getString("title")}))}})}:h}function vr(n){var o;const{id:u,Fallback:h=we.A,...C}=n,k=(o=(0,l.nm)().getSystemIcon(u))!=null?o:h;return t.createElement(k,{...C})}function Ec(n){return React.createElement(vr,{id:"brokenImage",...n})}function ds(n){return t.createElement(vr,{id:"catalog",...n})}function vc(n){return React.createElement(vr,{id:"chat",...n})}function yc(n){return React.createElement(vr,{id:"dashboard",...n})}function ms(n){return t.createElement(vr,{id:"docs",...n})}function Ac(n){return React.createElement(vr,{id:"email",...n})}function ps(n){return t.createElement(vr,{id:"github",...n})}function bc(n){return React.createElement(vr,{id:"group",...n})}function To(n){return t.createElement(vr,{id:"help",...n})}function hs(n){return t.createElement(vr,{id:"user",...n})}function _c(n){return React.createElement(vr,{id:"warning",...n})}const gs=(0,z.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),fs=({icon:n})=>{var o;const u=(0,l.nm)(),h=n&&(o=u.getSystemIcon(n))!=null?o:To;return t.createElement(h,null)},Es=({link:n})=>{var o;return t.createElement(Pa,{to:n.url},(o=n.title)!=null?o:n.url)},vs=({item:n})=>{var o;return t.createElement(In.A,null,t.createElement(K.A,null,t.createElement(fs,{icon:n.icon})),t.createElement(qe.A,{primary:n.title,secondary:(o=n.links)==null?void 0:o.reduce((u,h,C)=>[...u,C>0&&t.createElement("br",{key:C}),t.createElement(Es,{link:h,key:h.url})],[])}))};function ys(n){const{t:o}=(0,b.ie)(pe),{title:u,items:h,children:C}=n,{items:L}=vi(),[k,ne]=(0,t.useState)(!1),[ge,Ee]=(0,t.useState)(null),Fe=gs(),je=(0,Ge.A)(Yt=>Yt.breakpoints.down("sm")),Bt=Yt=>{Ee(Yt.currentTarget),ne(!0)},Ht=()=>{ne(!1)};return t.createElement(t.Fragment,null,t.createElement(ie.A,{display:"flex",ml:1},je?t.createElement(A.A,{color:"primary",size:"small",onClick:Bt,"data-testid":"support-button","aria-label":"Support"},t.createElement(To,null)):t.createElement(de.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:Bt,startIcon:t.createElement(To,null)},o("supportButton.title"))),t.createElement(I.Ay,{"data-testid":"support-button-popover",open:k,anchorEl:ge,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Ht},t.createElement(le.A,{className:Fe.popoverList,autoFocusItem:!!ge},u&&t.createElement(In.A,{alignItems:"flex-start",className:Fe.menuItem},t.createElement(r.A,{variant:"subtitle1"},u)),t.Children.map(C,(Yt,Qn)=>t.createElement(In.A,{alignItems:"flex-start",key:`child-${Qn}`,className:Fe.menuItem},Yt)),(h!=null?h:L).map((Yt,Qn)=>t.createElement(vs,{item:Yt,key:`item-${Qn}`}))),t.createElement(H.A,null,t.createElement(de.A,{color:"primary",onClick:Ht,"aria-label":"Close"},o("supportButton.close")))))}const As=(0,z.A)(n=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:n.spacing(3),paddingBottom:n.spacing(3),paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Io(n){const{className:o,stretch:u,noPadding:h,children:C,...L}=n,k=As();return t.createElement("article",{...L,className:re()(k.root,o,{[k.stretch]:u,[k.noPadding]:h})},C)}const bs=(0,z.A)(n=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:n.palette.background.paper,paddingLeft:n.spacing(3),minWidth:0},defaultTab:{...n.typography.caption,padding:n.spacing(3,3),textTransform:"uppercase",fontWeight:n.typography.fontWeightBold,color:n.palette.text.secondary},selected:{color:n.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:n.palette.background.default,color:n.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function yi(n){const{tabs:o,onChange:u,selectedIndex:h}=n,[C,L]=(0,t.useState)(h!=null?h:0),k=bs(),ne=(0,t.useCallback)((Ee,Fe)=>{h===void 0&&L(Fe),u&&u(Fe)},[h,u]);(0,t.useEffect)(()=>{h!==void 0&&L(h)},[h]);function ge(Ee){return Ee.replace(/^\//,"")}return t.createElement(ie.A,{className:k.tabsWrapper},t.createElement(Rt.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:ne,value:C},o.map((Ee,Fe)=>t.createElement(st.A,{"data-testid":`header-tab-${Fe}`,label:Ee.label,key:Ee.id,component:Pa,to:ge(Ee.id),value:Fe,className:k.defaultTab,classes:{selected:k.selected,root:k.tabRoot},...Ee.tabProps}))))}function _s(n){var o,u,h,C,L;const k=(0,X.g)(),ge=n.map(({path:Ht,children:Yt})=>({caseSensitive:!1,path:`${Ht}/*`,element:Yt})).sort((Ht,Yt)=>Yt.path.replace(/\/\*$/,"").localeCompare(Ht.path.replace(/\/\*$/,""))),Ee=(u=(0,X.Ye)(ge))!=null?u:(o=n[0])==null?void 0:o.children;let Fe=(h=k["*"])!=null?h:"";Fe.startsWith("/")||(Fe=`/${Fe}`);const[je]=(C=(0,V.ue)(ge,Fe))!=null?C:[],Bt=je?n.findIndex(Ht=>`${Ht.path}/*`===je.route.path):0;return{index:Bt===-1?0:Bt,element:Ee,route:(L=n[Bt])!=null?L:n[0]}}function Ai(n){const{routes:o}=n,u=(0,X.Zp)(),{index:h,route:C,element:L}=_s(o),k=(0,t.useMemo)(()=>o.map(ge=>({id:ge.path,label:ge.title,tabProps:ge.tabProps})),[o]),ne=ge=>{let{path:Ee}=o[ge];Ee=Ee.replace(/\/\*$/,""),Ee=Ee.replace(/^\//,""),u(Ee)};return t.createElement(t.Fragment,null,t.createElement(yi,{tabs:k,selectedIndex:h,onChange:ne}),t.createElement(Io,null,t.createElement(Oe.m,{title:C==null?void 0:C.title}),L))}const Zo=()=>null;(0,l.h3)(Zo,"core.gatherMountPoints",!0);function bi(n){const o=t.createElement(Zo,{path:"",title:""},t.createElement("div",null)).type;return t.Children.toArray(n).flatMap(u=>{if(!(0,t.isValidElement)(u))return[];if(u.type===t.Fragment)return bi(u.props.children);if(u.type!==o)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:h,title:C,children:L,tabProps:k}=u.props;return[{path:h,title:C,children:L,tabProps:k}]})}function Cs(n){const o=bi(n.children);return t.createElement(Ai,{routes:o})}Cs.Route=Zo;const Ps=(0,z.A)(n=>({value:{marginBottom:n.spacing(.75)},subvalue:{color:n.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Ss(n){const{value:o,subvalue:u}=n,h=Ps();return t.createElement(t.Fragment,null,t.createElement(ie.A,{className:h.value},o),t.createElement(ie.A,{className:h.subvalue},u))}const Rs=(0,z.A)(n=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:n.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:n.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${n.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:n.spacing(2)}}}),{name:"BackstageTableFilters"}),ws=n=>{var o;const u=Rs(),{onChangeFilters:h}=n,{t:C}=(0,b.ie)(pe),[L,k]=(0,t.useState)({...n.selectedFilters}),[ne,ge]=(0,t.useState)(!1),Ee=()=>{k({}),ge(Fe=>!Fe)};return(0,t.useEffect)(()=>{h(L)},[L,h]),t.createElement(ie.A,{className:u.root},t.createElement(ie.A,{className:u.header},t.createElement(ie.A,{className:u.value},C("table.filter.title")),t.createElement(de.A,{color:"primary",onClick:Ee},C("table.filter.clearAll"))),t.createElement(ie.A,{className:u.filters},((o=n.filters)==null?void 0:o.length)&&n.filters.map(Fe=>t.createElement(So,{triggerReset:ne,key:Fe.element.label,...Fe.element,selected:L[Fe.element.label],onChange:je=>k({...L,[Fe.element.label]:je})}))))};function Os(n){return t.createElement("tbody",{"data-testid":"loading-indicator"},t.createElement("tr",null,t.createElement("td",{colSpan:n.colSpan},t.createElement(ie.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},t.createElement(Vt.A,{size:"5rem"})))))}const _i={Add:(0,t.forwardRef)((n,o)=>t.createElement(en.A,{...n,ref:o})),Check:(0,t.forwardRef)((n,o)=>t.createElement(pn.A,{...n,ref:o})),Clear:(0,t.forwardRef)((n,o)=>t.createElement($t.A,{...n,ref:o})),Delete:(0,t.forwardRef)((n,o)=>t.createElement(Pn.A,{...n,ref:o})),DetailPanel:(0,t.forwardRef)((n,o)=>t.createElement(zt.A,{...n,ref:o})),Edit:(0,t.forwardRef)((n,o)=>t.createElement(un.A,{...n,ref:o})),Export:(0,t.forwardRef)((n,o)=>t.createElement(bn.A,{...n,ref:o})),Filter:(0,t.forwardRef)((n,o)=>t.createElement(Un.A,{...n,ref:o})),FirstPage:(0,t.forwardRef)((n,o)=>t.createElement(qn.A,{...n,ref:o})),LastPage:(0,t.forwardRef)((n,o)=>t.createElement(ta.A,{...n,ref:o})),NextPage:(0,t.forwardRef)((n,o)=>t.createElement(zt.A,{...n,ref:o})),PreviousPage:(0,t.forwardRef)((n,o)=>t.createElement(jt.A,{...n,ref:o})),ResetSearch:(0,t.forwardRef)((n,o)=>t.createElement($t.A,{...n,ref:o})),Search:(0,t.forwardRef)((n,o)=>t.createElement(Un.A,{...n,ref:o})),SortArrow:(0,t.forwardRef)((n,o)=>t.createElement(hn.A,{...n,ref:o})),ThirdStateCheck:(0,t.forwardRef)((n,o)=>t.createElement($n.A,{...n,ref:o})),ViewColumn:(0,t.forwardRef)((n,o)=>t.createElement(fn.A,{...n,ref:o}))};function Ci(n,o){const u=o.split(".");let h=n[u[0]];for(let C=1;C<u.length;++C){if(h===void 0)return h;const L=u[C];h=h[L]}return h}const Ts=(0,w.A)(n=>({header:{padding:n.spacing(1,2,1,2.5),borderTop:`1px solid ${n.palette.grey.A100}`,borderBottom:`1px solid ${n.palette.grey.A100}`,fontWeight:n.typography.fontWeightBold,position:"static",wordBreak:"normal",textTransform:"uppercase"}}),{name:"BackstageTableHeader"})(qt.rV),Pi=(0,w.A)(n=>({root:{padding:n.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:n.typography.fontWeightBold}},searchField:{paddingRight:n.spacing(2)}}),{name:"BackstageTableToolbar"})(qt.Nb),Is=(0,z.A)(n=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:n.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ds=(0,z.A)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ms(n,o){return n.map(u=>{var h;const C=(h=u.headerStyle)!=null?h:{};let L=u.cellStyle||{};if(u.highlight)if(C.color=o.palette.textContrast,typeof L=="object")L.fontWeight=o.typography.fontWeightBold;else{const k=L;L=(ne,ge,Ee)=>({...k(ne,ge,Ee),fontWeight:o.typography.fontWeightBold})}return{...u,headerStyle:C,cellStyle:L}})}function xs(n,o){return(0,ye.transform)(n,(u,h,C)=>{(0,ye.isEqual)(h,o[C])||(u[C]=h)})}const Si={search:"",filtersOpen:!1,filters:{}};function Ls(n){const{toolbarRef:o,setSearch:u,hasFilters:h,selectedFiltersLength:C,toggleFilters:L}=n,k=Is(),ne=(0,t.useCallback)(ge=>{n.onSearchChanged(ge),u(ge)},[n,u]);return h?t.createElement(ie.A,{className:k.root},t.createElement(ie.A,{className:k.root},t.createElement(A.A,{onClick:L,"aria-label":"filter list"},t.createElement(Un.A,null)),t.createElement(r.A,{className:k.title},"Filters (",C,")")),t.createElement(Pi,{...n,ref:o,onSearchChanged:ne})):t.createElement(Pi,{...n,ref:o,onSearchChanged:ne})}function Ri(n){const{data:o,columns:u,emptyContent:h,options:C,title:L,subtitle:k,localization:ne,filters:ge,initialState:Ee,onStateChange:Fe,components:je,isLoading:Bt,...Ht}=n,Yt=Ds(),Qn=(0,ee.A)(),Gn={...Si,...Ee},[ma,Xa]=(0,t.useState)(Gn.filtersOpen),lr=(0,t.useCallback)(()=>Xa(pr=>!pr),[Xa]),[Zn,Wa]=(0,t.useState)(Gn.filters),[Za,cr]=(0,t.useState)(Gn.search);(0,t.useEffect)(()=>{if(Fe){const pr=xs({search:Za,filtersOpen:ma,filters:Zn},Si);Fe(pr)}},[Za,ma,Zn,Fe]);const xr=(0,t.useCallback)(pr=>{var Ao;return(Ao=u.find(Fr=>Fr.title===pr))==null?void 0:Ao.field},[u]),so=(0,t.useMemo)(()=>{if(typeof o=="function"||!Zn)return o;const pr=Object.values(Zn);return o&&pr.flat().length?o.filter(Fr=>!!Object.entries(Zn).filter(([,bo])=>!!bo.length).every(([bo,Hr])=>{const Vr=Ci(Fr,xr(bo));return Array.isArray(Vr)&&Array.isArray(Hr)?Vr.some(ui=>Hr.includes(ui)):Array.isArray(Vr)?Vr.includes(Hr):Array.isArray(Hr)?Hr.includes(Vr):Vr===Hr})):o},[o,Zn,xr]),Nr=Object.values(Zn).flat().length,Gr=!!(ge!=null&&ge.length),ci=(0,t.useCallback)(pr=>t.createElement(Ls,{setSearch:cr,hasFilters:Gr,selectedFiltersLength:Nr,toggleFilters:lr,...pr}),[lr,Gr,Nr,cr]),Xr=typeof o!="function"&&o.length===0,Fo=u.length,Ma=(0,t.useMemo)(()=>Bs({hasNoRows:Xr,emptyContent:h,columnCount:Fo,loading:Bt}),[Xr,h,Fo,Bt]);return t.createElement(ie.A,{className:Yt.root},ma&&o&&typeof o!="function"&&(ge==null?void 0:ge.length)&&t.createElement(ws,{filters:Us(ge,o,u),selectedFilters:Zn,onChangeFilters:Wa}),t.createElement(qt.Ay,{components:{Header:Ts,Body:Ma,Toolbar:ci,...je},options:C,columns:Ms(u,Qn),icons:_i,title:t.createElement(t.Fragment,null,t.createElement(r.A,{variant:"h5",component:"h2"},L),k&&t.createElement(r.A,{color:"textSecondary",variant:"body1"},k)),data:so,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...ne},...Ht}))}Ri.icons=Object.freeze(_i);function Bs({columnCount:n,emptyContent:o,hasNoRows:u,loading:h}){return C=>h?t.createElement(Os,{colSpan:n}):o&&u?t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{colSpan:n},o))):t.createElement(qt.C6,{...C})}function Us(n,o,u){const h=L=>{const k=new Set,ne=ge=>{ge!=null&&k.add(ge)};return o&&o.forEach(ge=>{var Ee;const Fe=Ci(ge,(Ee=u.find(je=>je.title===L))==null?void 0:Ee.field);Array.isArray(Fe)?Fe.forEach(ne):ne(Fe)}),k},C=L=>({placeholder:"All results",label:L.column,multiple:L.type==="multiple-select",items:[...h(L.column)].sort().map(k=>({label:k,value:k}))});return n.map(L=>({type:L.type,element:C(L)}))}function $s(n,o){const u=n[n.length-1];if(u)return u>=.9?o.palette.status.ok:u>=.5?o.palette.status.warning:o.palette.status.error}function Cc(n){var o;const u=useTheme();return n.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...n},n.title&&React.createElement("title",null,n.title),React.createElement(SparklinesLine,{color:(o=n.color)!=null?o:$s(n.data,u)})):null}const ks=n=>(0,z.A)(o=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:o.spacing(2),textAlign:n.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:o.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Ns=({title:n="Unknown page",className:o})=>t.createElement(r.A,{variant:"h4",component:"h2",className:o,"data-testid":"header-title"},n);function wi(n){const{description:o,title:u,titleComponent:h=void 0,children:C,textAlign:L="left"}=n,k=ks({textAlign:L})(),ne=h||t.createElement(Ns,{title:u,className:k.title});return t.createElement(t.Fragment,null,t.createElement(Oe.m,{title:u}),t.createElement(ie.A,{className:k.container},t.createElement(ie.A,{className:k.leftItemsBox},ne,o&&t.createElement(r.A,{className:k.description,variant:"body2"},o)),t.createElement(ie.A,{className:k.rightItemsBox},C)))}const Fs=(0,z.A)(n=>({micDrop:{maxWidth:"60%",bottom:n.spacing(2),right:n.spacing(2),[n.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:n.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Ws=()=>{const n=Fs();return t.createElement("img",{src:Sn,className:n.micDrop,alt:"Girl dropping mic from her hands"})},Ks=(0,z.A)(n=>({title:{paddingBottom:n.spacing(5),[n.breakpoints.down("xs")]:{paddingBottom:n.spacing(4),fontSize:n.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function zs(n){const{stack:o}=n,u=Ks(),{t:h}=(0,b.ie)(pe),[C,L]=(0,t.useState)(!1);return C?t.createElement(t.Fragment,null,t.createElement(r.A,{variant:"h6",className:u.title},t.createElement(Pa,{to:"#",onClick:()=>L(!1)},h("errorPage.showLessDetails"))),t.createElement($e,{text:o,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})):t.createElement(r.A,{variant:"h6",className:u.title},t.createElement(Pa,{to:"#",onClick:()=>L(!0)},h("errorPage.showMoreDetails")))}const js=(0,z.A)(n=>({container:{padding:n.spacing(8),[n.breakpoints.down("xs")]:{padding:n.spacing(2)}},title:{paddingBottom:n.spacing(5),[n.breakpoints.down("xs")]:{paddingBottom:n.spacing(4),fontSize:n.typography.h3.fontSize}},subtitle:{color:n.palette.textSubtle}}),{name:"BackstageErrorPage"});function Gs(n){const{status:o="",statusMessage:u,additionalInfo:h,supportUrl:C,stack:L}=n,k=js(),ne=(0,X.Zp)(),ge=vi(),{t:Ee}=(0,b.ie)(pe);return t.createElement(P.A,{container:!0,className:k.container},t.createElement(P.A,{item:!0,xs:12,sm:8,md:4},t.createElement(r.A,{"data-testid":"error",variant:"body1",className:k.subtitle},Ee("errorPage.subtitle",{status:o,statusMessage:u})),t.createElement(r.A,{variant:"body1",className:k.subtitle},h),t.createElement(r.A,{variant:"h2",className:k.title},Ee("errorPage.title")),t.createElement(r.A,{variant:"h6",className:k.title},t.createElement(Pa,{to:"#","data-testid":"go-back-link",onClick:()=>ne(-1)},Ee("errorPage.goBack")),"... or please"," ",t.createElement(Pa,{to:C||ge.url},"contact support")," if you think this is a bug."),L&&t.createElement(zs,{stack:L})),t.createElement(Ws,null))}const Hs=(0,w.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(r.A),qo=(0,w.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(ie.A),Vs=(0,w.A)({root:{fontStyle:"italic"}},{name:"BreadcrumbsCurrentPage"})(ie.A);function Oi(n){const{children:o,...u}=n,[h,C]=t.useState(null),L=t.Children.toArray(o),[k,ne,...ge]=L,Ee=ge.length?ge.pop():L[L.length-1],Fe=L.length>3,je=Yt=>{C(Yt.currentTarget)},Bt=()=>{C(null)},Ht=!!h;return t.createElement(t.Fragment,null,t.createElement(ya.A,{"aria-label":"breadcrumb",...u},L.length>1&&t.createElement(qo,{clone:!0},k),L.length>2&&t.createElement(qo,{clone:!0},ne),Fe&&t.createElement(Hs,{onClick:je},"..."),t.createElement(Vs,null,Ee)),t.createElement(I.Ay,{open:Ht,anchorEl:h,onClose:Bt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},t.createElement(mt.A,null,ge.map((Yt,Qn)=>t.createElement(Je.A,{key:Qn,button:!0},t.createElement(qo,{clone:!0},Yt))))))}const Do=72,Ti=24,Ii=18,kr={drawerWidthClosed:Do,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:Do,iconSize:Do-Ti*2,iconPadding:Ti,selectedIndicatorWidth:3,userBadgePadding:Ii,userBadgeDiameter:Do-Ii*2,mobileSidebarHeight:56},Ys=n=>({...kr,...n,iconContainerWidth:kr.drawerWidthClosed,iconSize:kr.drawerWidthClosed-kr.iconPadding*2,userBadgeDiameter:kr.drawerWidthClosed-kr.userBadgePadding*2}),Di={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:kr.defaultOpenDelayMs+200},Js=n=>({...Di,...n}),Pc="@backstage/core/sidebar-intro-dismissed",yr=(0,t.createContext)({sidebarConfig:kr,submenuConfig:Di}),ei=(0,t.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Mi={isOpen:!1,setOpen:()=>{}},xi=(0,t.createContext)(Mi),Li=(0,be.tK)("sidebar-open-state-context");function Bi(n){const{children:o,value:u}=n;return t.createElement(xi.Provider,{value:u},t.createElement(Li.Provider,{value:(0,be.Bl)({1:u})},o))}const Mo=()=>{const n=(0,t.useContext)(Li),o=(0,t.useContext)(xi);if(n===void 0)return o||Mi;const u=n.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Ui=(0,t.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),$i={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},ki=(0,t.createContext)($i),Ni=(0,be.tK)("sidebar-pin-state-context");function Qs(n){const{children:o,value:u}=n;return t.createElement(ki.Provider,{value:u},t.createElement(Ni.Provider,{value:(0,be.Bl)({1:u})},o))}const xo=()=>{const n=(0,t.useContext)(Ni),o=(0,t.useContext)(ki);if(n===void 0)return o||$i;const u=n.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Xs=(0,z.A)(n=>({root:{flexGrow:0,margin:n.spacing(0,2),color:n.palette.navigation.color},selected:o=>({color:`${n.palette.navigation.selectedColor}!important`,borderTop:`solid ${o.sidebarConfig.selectedIndicatorWidth}px ${n.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Zs=n=>{const{to:o,label:u,icon:h,value:C}=n,{sidebarConfig:L}=(0,t.useContext)(yr),k=Xs({sidebarConfig:L}),ne=(0,X.zy)(),{selectedMenuItemIndex:ge,setSelectedMenuItemIndex:Ee}=(0,t.useContext)(Ui),Fe=(Bt,Ht)=>{Ee(Ht===ge?-1:Ht)},je=C===ge&&ge>=0||C!==ge&&!(ge>=0)&&o===ne.pathname;return t.createElement(We.A,{"aria-label":u,label:u,icon:h,component:Pa,to:o||ne.pathname,onChange:Fe,value:C,selected:je,classes:k})},ti=n=>{const{children:o,to:u,label:h,icon:C,value:L}=n,{isMobile:k}=xo();return k?t.createElement(Zs,{to:u,label:h,icon:C,value:L}):t.createElement(t.Fragment,null,o)},Fi=(0,z.A)(n=>({root:{position:"fixed",backgroundColor:n.palette.navigation.background,color:n.palette.navigation.color,bottom:0,left:0,right:0,zIndex:n.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:o=>({background:n.palette.navigation.background,width:"100%",bottom:`${o.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${o.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:n.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:n.spacing(2,3)},overlayHeaderClose:{color:n.palette.navigation.color},marginMobileSidebar:o=>({marginBottom:`${o.sidebarConfig.mobileSidebarHeight}px`})})),el=n=>(0,ye.orderBy)(n,({props:{priority:o}})=>Number.isInteger(o)?o:-1,"desc"),tl=t.createElement(ti).type,nl=({children:n,label:o="Menu",open:u,onClose:h})=>{const{sidebarConfig:C}=(0,t.useContext)(yr),L=Fi({sidebarConfig:C});return t.createElement(Oa.Ay,{anchor:"bottom",open:u,onClose:h,ModalProps:{BackdropProps:{classes:{root:L.marginMobileSidebar}}},classes:{root:L.marginMobileSidebar,paperAnchorBottom:L.overlay}},t.createElement(ie.A,{className:L.overlayHeader},t.createElement(r.A,{variant:"h3"},o),t.createElement(A.A,{onClick:h,classes:{root:L.overlayHeaderClose}},t.createElement(q.A,null))),t.createElement(ie.A,{component:"nav"},n))},al=n=>{const{sidebarConfig:o}=(0,t.useContext)(yr),{children:u}=n,h=Fi({sidebarConfig:o}),C=(0,X.zy)(),[L,k]=(0,t.useState)(-1);(0,t.useEffect)(()=>{k(-1)},[C.pathname]);let ne=(0,l.OJ)(u,Ee=>Ee.getElements().filter(Fe=>Fe.type===tl));if(u)ne.length?ne=el(ne):ne.push(t.createElement(ti,{key:"default_menu",icon:t.createElement(G.A,null)},u));else return null;const ge=L>=0&&!ne[L].props.to;return t.createElement(Bi,{value:{isOpen:!0,setOpen:()=>{}}},t.createElement(Ui.Provider,{value:{selectedMenuItemIndex:L,setSelectedMenuItemIndex:k}},t.createElement(nl,{label:ne[L]&&ne[L].props.label,open:ge,onClose:()=>k(-1)},ne[L]&&ne[L].props.children),t.createElement(Ra.A,{className:h.root,"data-testid":"mobile-sidebar-root",component:"nav"},ne)))},Wi={getSidebarPinState(){let n;try{n=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!n},setSidebarPinState(n){return window.localStorage.setItem("sidebarPinState",JSON.stringify(n))}},rl=(0,z.A)(n=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[n.breakpoints.up("sm")]:{paddingLeft:o=>o.isPinned?o.sidebarConfig.drawerWidthOpen:o.sidebarConfig.drawerWidthClosed},[n.breakpoints.down("xs")]:{paddingBottom:o=>o.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Ki=(0,t.createContext)({content:{contentRef:void 0}});function ol(n){const[o,u]=(0,t.useState)(()=>Wi.getSidebarPinState()),{sidebarConfig:h}=(0,t.useContext)(yr),C=(0,t.useRef)(null),L=(0,t.useMemo)(()=>({content:{contentRef:C}}),[C]);(0,t.useEffect)(()=>{Wi.setSidebarPinState(o)},[o]);const k=(0,Ge.A)(Ee=>Ee.breakpoints.down("xs"),{noSsr:!0}),ne=()=>u(!o),ge=rl({isPinned:o,sidebarConfig:h});return t.createElement(Qs,{value:{isPinned:o,toggleSidebarPinState:ne,isMobile:k}},t.createElement(Ki.Provider,{value:L},t.createElement(ie.A,{className:ge.root},n.children)))}function ni(){const{content:n}=(0,t.useContext)(Ki);return{focusContent:(0,t.useCallback)(()=>{var u,h;(h=(u=n==null?void 0:n.contentRef)==null?void 0:u.current)==null||h.focus()},[n]),contentRef:n==null?void 0:n.contentRef}}const zi=(0,z.A)(n=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:n.zIndex.appBar,background:n.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:o=>({width:o.sidebarConfig.drawerWidthClosed}),drawerOpen:o=>({width:o.sidebarConfig.drawerWidthOpen,transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),il=n=>{const{sidebarConfig:o}=(0,t.useContext)(yr),{openDelayMs:u=o.defaultOpenDelayMs,closeDelayMs:h=o.defaultCloseDelayMs,disableExpandOnHover:C,children:L}=n,k=zi({sidebarConfig:o}),ne=(0,Ge.A)(ma=>ma.breakpoints.down("md"),{noSsr:!0}),[ge,Ee]=(0,t.useState)(0),Fe=(0,t.useRef)(),{isPinned:je,toggleSidebarPinState:Bt}=xo(),Ht=()=>{je||C||(Fe.current&&(clearTimeout(Fe.current),Fe.current=void 0),ge!==2&&!ne&&(Fe.current=window.setTimeout(()=>{Fe.current=void 0,Ee(2)},u),Ee(1)))},Yt=()=>{je||C||(Fe.current&&(clearTimeout(Fe.current),Fe.current=void 0),ge===1?Ee(0):ge===2&&(Fe.current=window.setTimeout(()=>{Fe.current=void 0,Ee(0)},h)))},Qn=ge===2&&!ne||je,Gn=ma=>{ma?(Ee(2),Bt()):(Ee(0),Bt())};return t.createElement("nav",{style:{},"aria-label":"sidebar nav"},t.createElement(ll,null),t.createElement(Bi,{value:{isOpen:Qn,setOpen:Gn}},t.createElement(ie.A,{className:k.root,"data-testid":"sidebar-root",onMouseEnter:C?()=>{}:Ht,onFocus:C?()=>{}:Ht,onMouseLeave:C?()=>{}:Yt,onBlur:C?()=>{}:Yt},t.createElement(ie.A,{className:re()(k.drawer,k.drawerWidth,{[k.drawerOpen]:Qn})},L))))},sl=n=>{var o,u;const h=Ys((o=n.sidebarOptions)!=null?o:{}),C=Js((u=n.submenuOptions)!=null?u:{}),{children:L,disableExpandOnHover:k,openDelayMs:ne,closeDelayMs:ge}=n,{isMobile:Ee}=xo();return Ee?t.createElement(al,null,L):t.createElement(yr.Provider,{value:{sidebarConfig:h,submenuConfig:C}},t.createElement(il,{openDelayMs:ne,closeDelayMs:ge,disableExpandOnHover:k},L))};function ll(){const{sidebarConfig:n}=(0,t.useContext)(yr),{focusContent:o,contentRef:u}=ni(),h=zi({sidebarConfig:n}),{t:C}=(0,b.ie)(pe);return u!=null&&u.current?t.createElement(de.A,{onClick:o,variant:"contained",className:re()(h.visuallyHidden)},C("skipToContent")):null}function Lo(n,o,u=!1){const h=new URLSearchParams(o.search).toString(),C=J().parse(h),L=new URLSearchParams(n.search).toString(),k=J().parse(L),ne=u?ye.isEqual:ye.isMatch;return(0,ye.isEqual)(o.pathname,n.pathname)&&ne(k,C)}const cl=(0,z.A)(n=>{var o,u;return{item:{height:48,width:"100%","&:hover":{background:((o=n.palette.navigation.navItem)==null?void 0:o.hoverBackground)||"#6f6f6f",color:n.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:n.palette.navigation.color,padding:n.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:n.palette.common.white},label:{margin:n.spacing(1.75),marginLeft:n.spacing(1),fontSize:n.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((u=n.palette.navigation.navItem)==null?void 0:u.hoverBackground)||"#6f6f6f",color:n.palette.navigation.selectedColor}},textContent:{color:n.palette.navigation.color,paddingLeft:n.spacing(4),paddingRight:n.spacing(1),fontSize:n.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),ul=n=>{const{title:o,subtitle:u,to:h,icon:C,dropdownItems:L,exact:k}=n,ne=cl(),{setIsHoveredOn:ge}=(0,t.useContext)(ei),Ee=()=>{ge(!1)},Fe=(0,X.x$)(h!=null?h:""),je=(0,X.zy)();let Bt=Lo(je,Fe,k);const[Ht,Yt]=(0,t.useState)(!1),Qn=()=>{Yt(!Ht)};return L!==void 0?(L.some(Gn=>{const ma=(0,V.o1)(Gn.to);return Bt=Lo(je,ma,k),Bt}),t.createElement(ie.A,{className:ne.itemContainer},t.createElement(He.Ay,{title:o,enterDelay:500,enterNextDelay:500},t.createElement(de.A,{role:"button",onClick:Qn,onTouchStart:Gn=>Gn.stopPropagation(),className:re()(ne.item,Bt?ne.selected:void 0)},C&&t.createElement(C,{fontSize:"small"}),t.createElement(r.A,{variant:"subtitle1",component:"span",className:ne.label},o,t.createElement("br",null),u&&t.createElement(r.A,{variant:"caption",component:"span",className:ne.subtitle},u)),Ht?t.createElement(wt.A,{className:ne.dropdownArrow}):t.createElement(ot.A,{className:ne.dropdownArrow}))),L&&Ht&&t.createElement(ie.A,{className:ne.dropdown},L.map((Gn,ma)=>t.createElement(He.Ay,{key:ma,title:Gn.title,enterDelay:500,enterNextDelay:500},t.createElement(Pa,{to:Gn.to,underline:"none",className:ne.dropdownItem,onClick:Ee,onTouchStart:Xa=>Xa.stopPropagation()},t.createElement(r.A,{component:"span",className:ne.textContent},Gn.title))))))):t.createElement(ie.A,{className:ne.itemContainer},t.createElement(He.Ay,{title:o,enterDelay:500,enterNextDelay:500},t.createElement(Pa,{to:h,underline:"none",className:re()(ne.item,Bt?ne.selected:void 0),onClick:Ee,onTouchStart:Gn=>Gn.stopPropagation()},C&&t.createElement(C,{fontSize:"small"}),t.createElement(r.A,{variant:"subtitle1",component:"span",className:ne.label},o,t.createElement("br",null),u&&t.createElement(r.A,{variant:"caption",component:"span",className:ne.subtitle},u)))))},dl=(0,z.A)(n=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:n.spacing(7)+1},drawer:o=>{var u,h;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[n.breakpoints.up("sm")]:{marginLeft:o.left,transition:n.transitions.create("margin-left",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(h=(u=n.palette.navigation.submenu)==null?void 0:u.background)!=null?h:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:o.submenuConfig.drawerWidthClosed,transitionDelay:`${o.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:o=>({width:o.submenuConfig.drawerWidthOpen,[n.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:n.spacing(3),left:0,top:0}}),title:{fontSize:n.typography.h5.fontSize,fontWeight:n.typography.fontWeightMedium,color:n.palette.common.white,padding:n.spacing(2.5),[n.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),ji=n=>{const{isOpen:o}=Mo(),{sidebarConfig:u,submenuConfig:h}=(0,t.useContext)(yr),C=o?u.drawerWidthOpen:u.drawerWidthClosed,L=dl({left:C,submenuConfig:h}),{isHoveredOn:k}=(0,t.useContext)(ei),[ne,ge]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{ge(k)},[k]),t.createElement(ie.A,{className:re()(L.drawer,{[L.drawerOpen]:ne})},t.createElement(r.A,{variant:"h5",component:"span",className:L.title},n.title),n.children)},ml=(0,z.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),pl=()=>{const n=ml();return React.createElement(Box,{className:n.iconContainer},React.createElement(Box,{className:n.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},hl=(0,z.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),gl=()=>{const n=hl();return React.createElement(Box,{className:n.iconContainer},React.createElement(Box,{className:n.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},fl=n=>(0,z.A)(o=>{var u,h,C,L;return{root:{color:o.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:n.drawerWidthClosed,justifyContent:"center"},open:{[o.breakpoints.up("sm")]:{width:n.drawerWidthOpen}},highlightable:{"&:hover":{background:(h=(u=o.palette.navigation.navItem)==null?void 0:u.hoverBackground)!=null?h:"#404040"}},highlighted:{background:(L=(C=o.palette.navigation.navItem)==null?void 0:C.hoverBackground)!=null?L:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:n.iconContainerWidth,marginRight:-o.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:o.typography.fontWeightBold,fontSize:o.typography.fontSize},searchFieldHTMLInput:{padding:o.spacing(2,0,2)},searchContainer:{width:n.drawerWidthOpen-n.iconContainerWidth},secondaryAction:{width:o.spacing(6),textAlign:"center",marginRight:o.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:o.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${n.selectedIndicatorWidth}px ${o.palette.navigation.indicator}`,color:o.palette.navigation.selectedColor},"&$closed":{width:n.drawerWidthClosed},"& $closedItemIcon":{paddingRight:n.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-n.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Bo(n){return(0,t.useMemo)(()=>fl(n),[n])()}const El=(n,o)=>(0,l.OJ)(n.props.children,u=>{let h=!1;return u.getElements().forEach(({props:{to:C,dropdownItems:L}})=>{if(!h){if(L!=null&&L.length){L.forEach(({to:k})=>h=h||Lo(o,(0,V.o1)(k)));return}C&&(h=Lo(o,(0,V.o1)(C)))}}),h},[o.pathname]);function ai(n){return n.to===void 0}const vl=t.createElement(ji).type,yl=t.forwardRef(function({to:o,end:u,style:h,className:C,activeStyle:L,caseSensitive:k,activeClassName:ne="active","aria-current":ge="page",...Ee},Fe){let{pathname:je}=(0,X.zy)(),{pathname:Bt}=(0,X.x$)(o);k||(je=je.toLocaleLowerCase("en-US"),Bt=Bt.toLocaleLowerCase("en-US"));let Ht=je===Bt;!Ht&&!u&&(Ht=je.startsWith(`${Bt}/`));const Yt=Ht?ge:void 0;return t.createElement(N.N_,{...Ee,to:o,ref:Fe,"aria-current":Yt,style:{...h,...Ht?L:void 0},className:re()([typeof C!="function"?C:void 0,Ht?ne:void 0])})}),Gi=(0,t.forwardRef)((n,o)=>{const{icon:u,text:h,hasNotifications:C=!1,hasSubmenu:L=!1,disableHighlight:k=!1,onClick:ne,noTrack:ge,children:Ee,className:Fe,...je}=n,{sidebarConfig:Bt}=(0,t.useContext)(yr),Ht=Bo(Bt),{isOpen:Yt}=Mo(),Qn=!Yt&&L?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Gn=t.createElement(ie.A,{style:Qn},t.createElement(u,{fontSize:"small"}),!Yt&&L?t.createElement(te.A,{fontSize:"small"}):t.createElement(t.Fragment,null)),ma=t.createElement(Ot.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!C,className:re()({[Ht.closedItemIcon]:!Yt})},Gn),Xa=t.createElement(t.Fragment,null,t.createElement(ie.A,{"data-testid":"login-button",className:Ht.iconContainer},ma),h&&t.createElement(r.A,{variant:"subtitle2",component:"span",className:Ht.label},h),t.createElement("div",{className:Ht.secondaryAction},Ee)),lr=Yt?Xa:ma,Zn={onClick:ne,className:re()(Fe,Ht.root,Yt?Ht.open:Ht.closed,ai(n)&&Ht.buttonItem,{[Ht.highlightable]:!k})},Wa=(0,l.st)(),{pathname:Za}=(0,X.x$)(!ai(n)&&n.to?n.to:""),cr=(0,t.useCallback)(xr=>{if(!ge){const so="click",Nr=h!=null?h:"Sidebar Item",Gr=Za?{attributes:{to:Za}}:void 0;Wa.captureEvent(so,Nr,Gr)}ne==null||ne(xr)},[Wa,h,Za,ge,ne]);return ai(n)?t.createElement(de.A,{role:"button","aria-label":h,...Zn,ref:o,onClick:cr},lr):t.createElement(yl,{...Zn,activeClassName:Ht.selected,to:n.to?n.to:"",ref:o,"aria-label":h||n.to,...je,onClick:cr},lr)}),Al=({children:n,...o})=>{const{sidebarConfig:u}=(0,t.useContext)(yr),h=Bo(u),[C,L]=(0,t.useState)(!1),k=(0,X.zy)(),ne=El(n,k),ge=(0,Ge.A)(Bt=>Bt.breakpoints.down("sm")),Ee=()=>{L(!0)},Fe=()=>{L(!1)},je=()=>ge?C?t.createElement(wt.A,{fontSize:"small",className:h.submenuArrow}):t.createElement(ot.A,{fontSize:"small",className:h.submenuArrow}):!C&&t.createElement(te.A,{fontSize:"small",className:h.submenuArrow});return t.createElement(ei.Provider,{value:{isHoveredOn:C,setIsHoveredOn:L}},t.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:Fe,onTouchStart:C?Fe:Ee,onMouseEnter:Ee,className:re()(C&&h.highlighted)},t.createElement(Gi,{hasSubmenu:!0,className:ne?h.selected:"",...o},je()),C&&n))},Hi=(0,t.forwardRef)((n,o)=>{const[u]=(0,l.OJ)(n.children,h=>h.getElements().filter(C=>C.type===vl));return u?t.createElement(Al,{...n},u):t.createElement(Gi,{...n,ref:o})});function Sc(n){const{sidebarConfig:o}=useContext(yr),[u,h]=useState(""),C=Bo(o),L=n.icon?n.icon:SearchIcon,k=()=>{n.onSearch(u),h("")},ne=je=>{je.key==="Enter"&&(je.preventDefault(),k())},ge=je=>{h(je.target.value)},Ee=je=>{je.preventDefault(),je.stopPropagation()},Fe=je=>{k(),je.preventDefault()};return React.createElement(Box,{className:C.searchRoot},React.createElement(Hi,{icon:L,to:n.to,onClick:Fe,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:u,onClick:Ee,onChange:ge,onKeyDown:ne,className:C.searchContainer,InputProps:{disableUnderline:!0,className:C.searchField},inputProps:{className:C.searchFieldHTMLInput}})))}const bl=(0,y.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),Rc=(0,y.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),_l=(0,y.A)("hr")(({theme:n})=>({height:1,width:"100%",background:"#383838",border:"none",margin:n.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),Cl=n=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:n.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:n.palette.text.secondary,borderRadius:"5px"}}),Pl=(0,y.A)("div")(({theme:n})=>{const o=Cl(n);return{flex:"0 1 auto",overflowX:"hidden",width:"100%",minHeight:"48px",overflowY:"hidden","@media (hover: none)":o,"&:hover":o}}),wc=()=>{const{sidebarConfig:n}=useContext(yr),o=Bo(n),{isOpen:u,setOpen:h}=Mo();if(useMediaQuery(k=>k.breakpoints.down("md"),{noSsr:!0}))return null;const L=()=>{h(!u)};return React.createElement(Button$1,{role:"button",onClick:L,className:o.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:o.arrows},u?React.createElement(pl,null):React.createElement(gl,null)))},Sl=(0,z.A)(n=>({header:{gridArea:"pageHeader",padding:n.spacing(3),width:"100%",boxShadow:n.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:n.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[n.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:n.page.fontColor,wordBreak:"break-word",fontSize:n.typography.h3.fontSize,marginBottom:0},subtitle:{color:n.page.fontColor,opacity:.8,display:"inline-block",marginTop:n.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:n.spacing(1),color:n.page.fontColor},breadcrumb:{color:n.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-n.spacing(.3),marginBottom:n.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-n.spacing(.3),marginBottom:n.spacing(.3)}}),{name:"BackstageHeader"}),Rl=({type:n,typeLink:o,classes:u,pageTitle:h})=>n?o?t.createElement(Oi,{className:u.breadcrumb},t.createElement(Pa,{to:o},n),t.createElement(r.A,null,h)):t.createElement(r.A,{className:u.type},n):null,wl=({pageTitle:n,classes:o,tooltip:u})=>{const{contentRef:h}=ni(),C=t.createElement(r.A,{ref:h,tabIndex:-1,className:o.title,variant:"h1"},n);return u?t.createElement(He.Ay,{title:u,placement:"top-start"},C):C},Ol=({classes:n,subtitle:o})=>o?typeof o!="string"?t.createElement(t.Fragment,null,o):t.createElement(r.A,{className:n.subtitle,variant:"subtitle2",component:"span"},o):null;function Uo(n){const{children:o,pageTitleOverride:u,style:h,subtitle:C,title:L,tooltip:k,type:ne,typeLink:ge}=n,Ee=Sl(),je=(0,s.u)(s.p).getOptionalString("app.title")||"Backstage",Bt=u||L,Ht=L||u,Yt=`${Bt} | %s | ${je}`,Qn=`${Bt} | ${je}`;return t.createElement(t.Fragment,null,t.createElement(Oe.m,{titleTemplate:Yt,defaultTitle:Qn}),t.createElement("header",{style:h,className:Ee.header},t.createElement(ie.A,{className:Ee.leftItemsBox},t.createElement(Rl,{classes:Ee,type:ne,typeLink:ge,pageTitle:Ht}),t.createElement(wl,{classes:Ee,pageTitle:Ht,tooltip:k}),t.createElement(Ol,{classes:Ee,subtitle:C})),t.createElement(P.A,{container:!0,className:Ee.rightItemsBox,spacing:4},o)))}const Tl=({label:n,secondaryLabel:o,icon:u,disabled:h=!1,onClick:C})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:h,button:!0,onClick:L=>{C&&C(L)}},u&&React.createElement(ListItemIcon,null,u),React.createElement(ListItemText,{primary:n,secondary:o})));function Oc(n){const{palette:{common:{white:o}}}=useTheme(),{actionItems:u}=n,[h,C]=React.useState(!1),L=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>C(!0),"data-testid":"header-action-menu",ref:L,style:{color:o,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:h,anchorEl:L.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>C(!1)},React.createElement(List,null,u.map((k,ne)=>React.createElement(Tl,{key:`header-action-menu-${ne}`,...k})))))}const Il=(0,z.A)(n=>({root:{textAlign:"left"},label:{color:n.page.fontColor,fontWeight:n.typography.fontWeightBold,letterSpacing:0,fontSize:n.typography.fontSize,marginBottom:n.spacing(1)/2,lineHeight:1},value:{color:(0,D.X4)(n.page.fontColor,.8),fontSize:n.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Dl=({value:n,className:o,typographyRootComponent:u})=>t.createElement(r.A,{component:u!=null?u:typeof n=="string"?"p":"span",className:o},n);function Ml(n){const{label:o,value:u,url:h,contentTypograpyRootComponent:C}=n,L=Il(),k=t.createElement(Dl,{className:L.value,value:u||"<Unknown>",typographyRootComponent:C});return t.createElement(P.A,{item:!0},t.createElement(r.A,{component:"span",className:L.root},t.createElement(r.A,{className:L.label},o),h?t.createElement(Pa,{to:h},k):k))}const xl=n=>(0,M.A)({root:{color:n.palette.common.white,padding:n.spacing(2,2,3),backgroundImage:n.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Ll=(0,z.A)(xl,{name:"BackstageItemCardHeader"});function Vi(n){const{title:o,subtitle:u,children:h}=n,C=Ll(n);return t.createElement(ie.A,{className:C.root},u&&t.createElement(r.A,{variant:"subtitle2",component:"h3"},u),o&&t.createElement(r.A,{variant:"h6",component:"h4"},o),h)}function Tc(n){const{description:o,tags:u,title:h,type:C,subtitle:L,label:k,onClick:ne,href:ge}=n;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Vi,{title:h,subtitle:L||C})),React.createElement(CardContent,null,u!=null&&u.length?React.createElement(Box,null,u.map((Ee,Fe)=>React.createElement(Chip,{size:"small",label:Ee,key:Fe}))):null,o),React.createElement(CardActions,null,!ge&&React.createElement(er,{to:"#",onClick:ne,color:"primary"},k),ge&&React.createElement(er,{to:ge,color:"primary"},k)))}const Bl=n=>(0,M.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:n.spacing(2)}}),Ul=(0,z.A)(Bl,{name:"BackstageItemCardGrid"});function $l(n){const{children:o,...u}=n,h=Ul(u);return t.createElement(ie.A,{className:h.root,...u},o)}const kl=(0,z.A)(n=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[n.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function $o(n){const{themeId:o,children:u}=n,h=kl();return t.createElement(v.A,{theme:C=>({...C,page:C.getPageTheme({themeId:o})})},t.createElement("main",{className:h.root},u))}function Nl(n){const{themeId:o,children:u,...h}=n;return t.createElement($o,{themeId:o},t.createElement(Uo,{...h}),u)}const Fl=Ie.z.object({providerInfo:Ie.z.object({}).catchall(Ie.z.unknown()).optional(),profile:Ie.z.object({email:Ie.z.string().optional(),displayName:Ie.z.string().optional(),picture:Ie.z.string().optional()}),backstageIdentity:Ie.z.object({token:Ie.z.string(),identity:Ie.z.object({type:Ie.z.literal("user"),userEntityRef:Ie.z.string(),ownershipEntityRefs:Ie.z.array(Ie.z.string())})})});var Wl=Object.defineProperty,Kl=(n,o,u)=>o in n?Wl(n,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[o]=u,ri=(n,o,u)=>(Kl(n,typeof o!="symbol"?o+"":o,u),u);const Yi={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function zl(n){const o=new Date(Date.now()+Yi.defaultTokenExpiryMillis);if(!n)return o;const[u,h,C]=n.split("."),L=JSON.parse(window.atob(h));return typeof L.exp!="number"?o:new Date(L.exp*1e3-Yi.tokenExpiryMarginMillis)}class oi{constructor(o){ri(this,"options"),ri(this,"abortController"),ri(this,"state"),this.options=o,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:o}=this.getSessionSync(),u=o.identity.userEntityRef,h=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(u);if(!h)throw new TypeError(`Invalid user entity reference "${u}"`);return h[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const o=this.state.type==="active"?this.state.session:void 0,u=this.fetchSession().then(h=>(this.state={type:"active",session:h,expiresAt:zl(h.backstageIdentity.token)},h),h=>{throw this.state={type:"failed",error:h},h});return this.state={type:"fetching",promise:u,previous:o},u}async fetchSession(){const o=await this.options.discoveryApi.getBaseUrl("auth"),u=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,h=new Headers(u);h.set("X-Requested-With","XMLHttpRequest");const C=await fetch(`${o}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:h,credentials:"include"});if(!C.ok)throw await Et.o3.fromResponse(C);return Fl.parse(await C.json())}}const Ic=n=>{const o=useApi(discoveryApiRef),{t:u}=useTranslationRef(coreComponentsTranslationRef),[{status:h,error:C},{execute:L}]=useAsync(async()=>{const k=new oi({provider:n.provider,discoveryApi:o,headers:n.headers});await k.start(),n.onSignInSuccess(k)});return useMountEffect(L),h==="loading"?React.createElement(zn,null):C?React.createElement(Tr,{title:u("proxiedSignInPage.title"),error:C}):null};class ko{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const o="user:default/guest";return{type:"user",userEntityRef:o,ownershipEntityRefs:[o]}}async getCredentials(){return{}}async signOut(){}}function jl(n){const[o,u,h]=n.split(".");return JSON.parse(window.atob(u))}class ii{constructor(o){this.result=o}getUserId(){return this.result.userId}static fromResult(o){return new ii(o)}async getIdToken(){var o,u;return(u=(o=this.result).getIdToken)==null?void 0:u.call(o)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const o=await this.getIdToken();if(!o){const C=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:C,ownershipEntityRefs:[C]}}const{sub:u,ent:h}=jl(o);return{type:"user",userEntityRef:u,ownershipEntityRefs:h!=null?h:[]}}async getCredentials(){var o,u;return{token:await((u=(o=this.result).getIdToken)==null?void 0:u.call(o))}}async signOut(){var o,u;return(u=(o=this.result).signOut)==null?void 0:u.call(o)}}var Gl=Object.defineProperty,Hl=(n,o,u)=>o in n?Gl(n,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[o]=u,Vl=(n,o,u)=>(Hl(n,typeof o!="symbol"?o+"":o,u),u);class oo{constructor(o,u,h){this.identity=o,this.authApi=u,this.profile=h,Vl(this,"profilePromise")}static createGuest(){return new ko}static fromLegacy(o){return ii.fromResult(o)}static create(o){return new oo(o.identity,o.authApi,o.profile)}getUserId(){const o=this.identity.userEntityRef,u=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(o);if(!u)throw new TypeError(`Invalid user entity reference "${o}"`);return u[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(o){throw this.profilePromise=void 0,o}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const si=(0,z.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),No=({children:n})=>{const o=si();return t.createElement(P.A,{component:"li",item:!0,classes:o},n)},Yl={Component:({config:n,onSignInStarted:o,onSignInSuccess:u,onSignInFailure:h})=>{const{apiRef:C,title:L,message:k}=n,ne=(0,s.u)(C),ge=(0,s.u)(s.r),{t:Ee}=(0,b.ie)(pe),Fe=async()=>{try{o();const je=await ne.getBackstageIdentity({instantPopup:!0});if(!je)throw h(),new Error(`The ${L} provider is not configured to support sign-in`);const Bt=await ne.getProfile();u(oo.create({identity:je.identity,profile:Bt,authApi:ne}))}catch(je){h(),ge.post(new Et.HK(Ee("signIn.loginFailed"),je))}};return t.createElement(No,null,t.createElement(fa,{variant:"fullHeight",title:L,actions:t.createElement(de.A,{color:"primary",variant:"outlined",onClick:Fe},Ee("signIn.title"))},t.createElement(r.A,{variant:"body1"},k)))},loader:async(n,o)=>{const u=n.get(o),h=await u.getBackstageIdentity({optional:!0});if(!h)return;const C=await u.getProfile();return oo.create({identity:h.identity,profile:C,authApi:u})}},Ji=async n=>{try{return await n.getBackstageIdentity()}catch(o){if(o.name==="ResponseError"&&o.cause.name==="NotFoundError")return;throw o}},Jl={Component:({onSignInStarted:n,onSignInSuccess:o,onSignInFailure:u})=>{const h=(0,s.u)(s.q),[C,L]=(0,ke.A)("enableLegacyGuestToken"),{t:k}=(0,b.ie)(pe),ne=async()=>{n();const ge=new oi({provider:"guest",discoveryApi:h});if(!await Ji(ge).catch(Fe=>{console.warn(`Failed to sign in as a guest, ${Fe}`)})){if(confirm("Failed to sign in as a guest using the auth backend. Do you want to fallback to the legacy guest token?")){L(!0),o(new ko);return}throw u(),new Error("You cannot sign in as a guest, you must either enable the legacy guest token or configure the auth backend to support guest sign in.")}o(ge)};return t.createElement(No,null,t.createElement(fa,{title:"Guest",variant:"fullHeight",actions:t.createElement(de.A,{color:"primary",variant:"outlined",onClick:ne},k("signIn.guestProvider.enter"))},t.createElement(r.A,{variant:"body1",style:{whiteSpace:"pre-line"}},k("signIn.guestProvider.subtitle"))))},loader:async n=>{const o=localStorage.getItem("enableLegacyGuestToken")==="true",u=new oi({provider:"guest",discoveryApi:n.get(s.q)}),h=await Ji(u).catch(C=>{console.warn(`Failed to sign in as a guest, ${C}`)});if(!(!h&&!o)){if(h&&o)if(confirm("You are currently using the legacy guest token, but you have the new guest backend module installed. Do you want to use the new module?"))localStorage.removeItem("enableLegacyGuestToken");else return new ko;else if(o)return new ko;return u}}},Ql=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Xl=(0,z.A)(n=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:n.spacing(2)},subTitle:{whiteSpace:"pre-line"}}),{name:"BackstageCustomProvider"}),Qi=n=>{const{ref:o,...u}=n;return{inputRef:o,...u}},Zl={Component:({onSignInStarted:n,onSignInSuccess:o})=>{const u=Xl(),{t:h}=(0,b.ie)(pe),{register:C,handleSubmit:L,formState:k}=(0,ze.mN)({mode:"onChange"}),{errors:ne}=k,ge=({userId:Ee,idToken:Fe})=>{n(),o(oo.fromLegacy({userId:Ee,getIdToken:Fe!==void 0?async()=>Fe:void 0,profile:{email:`${Ee}@example.com`}}))};return t.createElement(No,null,t.createElement(fa,{title:h("signIn.customProvider.title"),variant:"fullHeight"},t.createElement(r.A,{variant:"body1",className:u.subTitle},h("signIn.customProvider.subtitle")),t.createElement("form",{className:u.form,onSubmit:L(ge)},t.createElement(Ft.A,null,t.createElement(rn.A,{...Qi(C("userId",{required:!0})),label:h("signIn.customProvider.userId"),margin:"normal",error:!!ne.userId}),ne.userId&&t.createElement(et.A,{error:!0},ne.userId.message)),t.createElement(Ft.A,null,t.createElement(rn.A,{...Qi(C("idToken",{required:!1,validate:Ee=>!Ee||Ql.test(Ee)||h("signIn.customProvider.tokenInvalid")})),label:h("signIn.customProvider.idToken"),margin:"normal",autoComplete:"off",error:!!ne.idToken}),ne.idToken&&t.createElement(et.A,{error:!0},ne.idToken.message)),t.createElement(de.A,{type:"submit",color:"primary",variant:"outlined",className:u.button,disabled:!(k!=null&&k.isDirty)||!bt()(ne)},h("signIn.customProvider.continue")))))},loader:async()=>{}};class li{constructor(o){this.config=o}static from(o){return new li(o)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const io="@backstage/core:SignInPage:provider",Xi={guest:Jl,custom:Zl,common:Yl};function Zi(n,o){if(n in o)throw new Error(`"${n}" ID is duplicated. IDs of identity providers have to be unique.`)}function ql(n){return n.reduce((u,h)=>{if(typeof h=="string")return Zi(h,u),u[h]={components:Xi[h],id:h},u;const{id:C}=h;return Zi(C,u),u[C]={components:Xi.common,id:C,config:h},u},{})}const ec=(n,o)=>{const u=(0,s.u)(s.r),h=(0,s.b)(),[C,L]=(0,t.useState)(!0),k=(0,t.useCallback)(ge=>{o(li.from({identityApi:ge,signOut:async()=>{var Ee;localStorage.removeItem(io),await((Ee=ge.signOut)==null?void 0:Ee.call(ge))}}))},[o]);(0,t.useLayoutEffect)(()=>{var ge;if(!C)return;const Ee=localStorage.getItem(io);if(Ee===null){L(!1);return}const Fe=n[Ee];if(!Fe){L(!1);return}let je=!1;return Fe.components.loader(h,(ge=Fe.config)==null?void 0:ge.apiRef).then(Bt=>{if(je){localStorage.removeItem(io);return}Bt?k(Bt):L(!1)}).catch(Bt=>{localStorage.removeItem(io),!je&&(u.post(Bt),L(!1))}),()=>{je=!0}},[C,u,o,h,n,k]);const ne=(0,t.useMemo)(()=>Object.keys(n).map(ge=>{const Ee=n[ge],{Component:Fe}=Ee.components,je=Yt=>{k(Yt)},Bt=()=>{var Yt;localStorage.setItem(io,((Yt=Ee==null?void 0:Ee.config)==null?void 0:Yt.id)||Ee.id)},Ht=()=>{localStorage.removeItem(io)};return t.createElement(Fe,{key:Ee.id,config:Ee.config,onSignInStarted:Bt,onSignInSuccess:je,onSignInFailure:Ht})}),[n,k]);return[C,ne]},tc=({onSignInSuccess:n,providers:o=[],title:u,align:h="left"})=>{const C=(0,s.u)(s.p),L=si(),k=ql(o),[ne,ge]=ec(k,n);return ne?t.createElement(zn,null):t.createElement($o,{themeId:"home"},t.createElement(Uo,{title:C.getString("app.title")}),t.createElement(Io,null,u&&t.createElement(wi,{title:u,textAlign:h}),t.createElement(P.A,{container:!0,justifyContent:h==="center"?h:"flex-start",spacing:2,component:"ul",classes:L},ge)))},nc=({provider:n,auto:o,onSignInSuccess:u})=>{const h=si(),C=(0,s.u)(n.apiRef),L=(0,s.u)(s.p),{t:k}=(0,b.ie)(pe),[ne,ge]=(0,t.useState)(),[Ee,Fe]=(0,t.useState)(!1),je=async({checkExisting:Bt,showPopup:Ht})=>{try{let Yt;if(Bt&&(Yt=await C.getBackstageIdentity({optional:!0})),!Yt&&(Ht||o)&&(Fe(!0),Yt=await C.getBackstageIdentity({instantPopup:!0}),!Yt))throw new Error(`The ${n.title} provider is not configured to support sign-in`);if(!Yt){Fe(!0);return}const Qn=await C.getProfile();u(oo.create({identity:Yt.identity,authApi:C,profile:Qn}))}catch(Yt){ge(Yt),Fe(!0)}};return(0,yn.u)(()=>je({checkExisting:!0})),Ee?t.createElement($o,{themeId:"home"},t.createElement(Uo,{title:L.getString("app.title")}),t.createElement(Io,null,t.createElement(P.A,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:h},t.createElement(No,null,t.createElement(fa,{variant:"fullHeight",title:n.title,actions:t.createElement(de.A,{color:"primary",variant:"outlined",onClick:()=>{je({showPopup:!0})}},k("signIn.title"))},t.createElement(r.A,{variant:"body1"},n.message),ne&&ne.name!=="PopupRejectedError"&&t.createElement(r.A,{variant:"body1",color:"error"},ne.message)))))):t.createElement(zn,null)};function ac(n){return"provider"in n?t.createElement(nc,{...n}):t.createElement(tc,{...n})}const rc=(0,z.A)(n=>({root:{padding:n.spacing(0,2,0,2.5),minHeight:n.spacing(3)},indicator:{backgroundColor:n.palette.info.main,height:n.spacing(.3)}}),{name:"BackstageTabbedCard"}),oc=(0,w.A)(n=>({root:{padding:n.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:n.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(Ze.A);function ic(n){const{slackChannel:o,errorBoundaryProps:u,children:h,title:C,deepLink:L,value:k,onChange:ne}=n,ge=rc(),[Ee,Fe]=(0,t.useState)(0),je=ne||((Yt,Qn)=>Fe(Qn));let Bt;k?t.Children.map(h,Yt=>{t.isValidElement(Yt)&&(Yt==null?void 0:Yt.props.value)===k&&(Bt=Yt==null?void 0:Yt.props.children)}):t.Children.map(h,(Yt,Qn)=>{t.isValidElement(Yt)&&Qn===Ee&&(Bt=Yt==null?void 0:Yt.props.children)});const Ht=u||(o?{slackChannel:o}:{});return t.createElement(pt.A,null,t.createElement(Mn,{...Ht},C&&t.createElement(oc,{title:C}),t.createElement(Rt.A,{classes:ge,value:k||Ee,onChange:je},h),t.createElement(Qt.A,null),t.createElement(it.A,null,Bt),L&&t.createElement(Xn,{...L})))}const sc=(0,z.A)(n=>({root:{minWidth:n.spacing(6),minHeight:n.spacing(3),margin:n.spacing(0,2,0,0),padding:n.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:n.palette.text.primary}},selected:{fontWeight:n.typography.fontWeightBold}}),{name:"BackstageCardTab"});function lc(n){const{children:o,...u}=n,h=sc();return t.createElement(st.A,{disableRipple:!0,classes:h,...u})}},59294:(Tn,_t,e)=>{"use strict";e.d(_t,{Jm:()=>z,h2:()=>dt,ie:()=>w,pl:()=>ee});var s=e(14041),l=e(5124);function b(M){return{$$type:"@backstage/TranslationMessages",id:M.ref.id,full:!!M.full,messages:M.messages}}function A(M){return{$$type:"@backstage/TranslationResource",version:"v1",id:M.ref.id,resources:Object.entries(M.translations).map(([y,v])=>({language:y,loader:()=>v().then(F=>{const re=F.default;return{messages:(re==null?void 0:re.$$type)==="@backstage/TranslationMessages"?re.messages:re}})}))}}var W=Object.defineProperty,r=(M,y,v)=>y in M?W(M,y,{enumerable:!0,configurable:!0,writable:!0,value:v}):M[y]=v,q=(M,y,v)=>(r(M,typeof y!="symbol"?y+"":y,v),v),Q=(M,y,v)=>{if(!y.has(M))throw TypeError("Cannot "+v)},t=(M,y,v)=>(Q(M,y,"read from private field"),v?v.call(M):y.get(M)),pe=(M,y,v)=>{if(y.has(M))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(M):y.set(M,v)},_=(M,y,v,F)=>(Q(M,y,"write to private field"),F?F.call(M,v):y.set(M,v),v),de,me,H;function xe(M){const y=new Array;function v(F,re){for(const[Ne,ye]of Object.entries(F))typeof ye=="string"?y.push([re+Ne,ye]):v(ye,`${re}${Ne}.`)}return v(M,""),Object.fromEntries(y)}class ve{constructor(y){pe(this,de,void 0),pe(this,me,void 0),pe(this,H,void 0),q(this,"$$type","@backstage/TranslationRef"),q(this,"version","v1"),_(this,de,y.id),_(this,me,xe(y.messages))}get id(){return t(this,de)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return t(this,me)}setDefaultResource(y){_(this,H,y)}getDefaultResource(){return t(this,H)}toString(){return`TranslationRef{id=${this.id}}`}}de=new WeakMap,me=new WeakMap,H=new WeakMap;function dt(M){const y=new ve(M);return M.translations&&y.setDefaultResource(A({ref:y,translations:M.translations})),y}const z=(0,l.c)({id:"core.translation"}),ee=(0,l.c)({id:"core.applanguage"}),D=new WeakSet,w=M=>{const y=(0,l.u)(l.r),v=(0,l.u)(z),[F,re]=(0,s.useState)(()=>v.getTranslation(M)),Ne=(0,s.useMemo)(()=>v.translation$(M),[v,M]),ye=(0,s.useCallback)(N=>{if(!D.has(M)){const V=`Failed to load translation resource '${M.id}'; caused by ${N}`;console.error(V),y.post(new Error(V)),D.add(M)}},[y,M]);(0,s.useEffect)(()=>{const N=Ne.subscribe({next(V){V.ready&&re(V)},error(V){ye(V)}});return()=>{N.unsubscribe()}},[Ne,ye]);const X=(0,s.useRef)(!0);if((0,s.useEffect)(()=>{X.current?X.current=!1:re(v.getTranslation(M))},[v,M]),!F.ready)throw new Promise(N=>{const V=Ne.subscribe({next(ie){ie.ready&&(V.unsubscribe(),N())},error(ie){V.unsubscribe(),ye(ie),N()}})});return{t:F.t}}},5124:(Tn,_t,e)=>{"use strict";e.d(_t,{F:()=>re,S:()=>t,a:()=>w,b:()=>A,c:()=>Q,d:()=>_,e:()=>me,f:()=>Ne,g:()=>pe,h:()=>xe,i:()=>ve,j:()=>dt,k:()=>z,l:()=>D,m:()=>H,n:()=>M,o:()=>de,p:()=>y,q:()=>v,r:()=>F,s:()=>ye,t:()=>X,u:()=>W,v:()=>ee,x:()=>N,y:()=>V});var s=e(14041),l=e(97388),b=e(3399);function A(){const ie=(0,l.qO)("api-context");if(!ie)throw new b.EH("API context is not available");const oe=ie.atVersion(1);if(!oe)throw new b.EH("ApiContext v1 not available");return oe}function W(ie){const Ce=A().get(ie);if(!Ce)throw new b.EH(`No implementation available for ${ie}`);return Ce}function r(ie){return function(Ce){const nt=Xe=>{const at=A(),Ge={};for(const Ye in ie)if(ie.hasOwnProperty(Ye)){const Re=ie[Ye],Le=at.get(Re);if(!Le)throw new NotImplementedError(`No implementation available for ${Re}`);Ge[Ye]=Le}return React.createElement(Ce,{...Xe,...Ge})},He=Ce.displayName||Ce.name||"Component";return nt.displayName=`withApis(${He})`,nt}}class q{constructor(oe){if(this.config=oe,!oe.id.split(".").flatMap(nt=>nt.split("-")).every(nt=>nt.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${oe.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function Q(ie){return new q(ie)}var t=(ie=>(ie.SignedIn="SignedIn",ie.SignedOut="SignedOut",ie))(t||{});const pe=Q({id:"core.auth.google"}),_=Q({id:"core.auth.github"}),de=Q({id:"core.auth.okta"}),me=Q({id:"core.auth.gitlab"}),H=Q({id:"core.auth.microsoft"}),xe=Q({id:"core.auth.onelogin"}),ve=Q({id:"core.auth.bitbucket"}),dt=Q({id:"core.auth.bitbucket-server"}),z=Q({id:"core.auth.atlassian"}),ee=Q({id:"core.auth.vmware-cloud"}),D=Q({id:"core.alert"}),w=Q({id:"core.analytics"}),M=Q({id:"core.apptheme"}),y=Q({id:"core.config"}),v=Q({id:"core.discovery"}),F=Q({id:"core.error"});var re=(ie=>(ie[ie.None=0]="None",ie[ie.Active=1]="Active",ie))(re||{});const Ne=Q({id:"core.featureflags"}),ye=Q({id:"core.fetch"}),X=Q({id:"core.identity"}),N=Q({id:"core.oauthrequest"}),V=Q({id:"core.storage"})},11638:(Tn,_t,e)=>{"use strict";e.d(_t,{E0:()=>z,HM:()=>F,Ig:()=>q,Il:()=>at,KS:()=>Ye,NC:()=>Jt,OJ:()=>xt,QJ:()=>St,Sf:()=>Ge,Vb:()=>ie,bW:()=>Q,h3:()=>dt,i1:()=>Nt,nm:()=>H,st:()=>me,zZ:()=>At});var s=e(97388),l=e(14041),b=e(5124),A=e(18690);const W=(0,s.tK)("analytics-context"),r=()=>{const S=(0,l.useContext)(W);if(S===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const P=S.atVersion(1);if(P===void 0)throw new Error("No context found for version 1.");return P},q=S=>{const{attributes:P,children:j}=S,Te={...r(),...P},Ke=(0,s.Bl)({1:Te});return l.createElement(W.Provider,{value:Ke},j)};function Q(S,P){return"id"in S?{api:S,deps:{},factory:()=>P}:S}const t=(0,s.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),pe="_ROUTABLE-EXTENSION-RENDERED";class _{constructor(P,j={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=P,this.context=j,t.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{t.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...t.mostRecentGatheredNavigation,...t.mostRecentRoutableExtensionRender}),t.mostRecentGatheredNavigation=void 0,t.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),t.beforeUnloadRegistered=!0)}setContext(P){this.context=P}captureEvent(P,j,{value:Z,attributes:Te}={}){const{_routeNodeType:Ke,...mt}=this.context;if(P===pe){t.mostRecentGatheredNavigation&&(t.mostRecentRoutableExtensionRender={context:{...mt,extension:"App"}});return}if(t.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...t.mostRecentGatheredNavigation,...t.mostRecentRoutableExtensionRender})}catch(Je){console.warn("Error during analytics event capture. %o",Je)}t.mostRecentGatheredNavigation=void 0,t.mostRecentRoutableExtensionRender=void 0}if(P==="navigate"&&Ke==="gathered"&&mt.pluginId==="root"){t.mostRecentGatheredNavigation={action:P,subject:j,value:Z,attributes:Te,context:mt};return}try{this.analyticsApi.captureEvent({action:P,subject:j,value:Z,attributes:Te,context:mt})}catch(Je){console.warn("Error during analytics event capture. %o",Je)}}}function de(){try{return(0,b.u)(b.a)}catch{return{captureEvent:()=>{}}}}function me(){const S=(0,l.useRef)(null),P=r(),j=de();function Z(){return S.current===null&&(S.current=new _(j)),S.current}const Te=Z();return Te.setContext(P),Te}const H=()=>{const S=(0,s.qO)("app-context");if(!S)throw new Error("App context is not available");const P=S.atVersion(1);if(!P)throw new Error("AppContext v1 not available");return P},xe=(0,s.Q6)("component-data-store",()=>new WeakMap),ve="__backstage_data";function dt(S,P,j){var Z;const Te=S;let Ke=(Z=Te[ve])!=null?Z:xe.get(S);if(Ke||(Ke={map:new Map},Object.defineProperty(Te,ve,{enumerable:!1,configurable:!0,writable:!1,value:Ke}),xe.set(S,Ke)),Ke.map.has(P)){const mt=S.displayName||S.name;throw new Error(`Attempted to attach duplicate data "${P}" to component "${mt}"`)}Ke.map.set(P,j)}function z(S,P){var j;if(!S)return;const Z=S.type;if(!Z)return;const Te=(j=Z[ve])!=null?j:xe.get(Z);if(Te)return Te.map.get(P)}const ee=(0,s.Q6)("route-ref-type",()=>Symbol("route-ref-type"));var D=Object.defineProperty,w=(S,P,j)=>P in S?D(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,M=(S,P,j)=>(w(S,typeof P!="symbol"?P+"":P,j),j),y;class v{constructor(P,j){this.id=P,this.params=j,M(this,y,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}y=ee;function F(S){var P;return new v(S.id,(P=S.params)!=null?P:[])}var re=Object.defineProperty,Ne=(S,P,j)=>P in S?re(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,ye=(S,P,j)=>(Ne(S,typeof P!="symbol"?P+"":P,j),j),X;const N=/^\w+$/;class V{constructor(P,j,Z,Te){this.id=P,this.path=j,this.parent=Z,this.params=Te,ye(this,X,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}X=ee;function ie(S){const{id:P,path:j,parent:Z}=S,Te=j.split("/").filter(Je=>Je.startsWith(":")).map(Je=>Je.substring(1)),Ke=[...Z.params,...Te];if(Z.params.some(Je=>Te.includes(Je)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!j.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${j}'`);if(j.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${j}'`);for(const Je of Te)if(!N.test(Je))throw new Error(`SubRouteRef path has invalid param, got '${Je}'`);return new V(P,j,Z,Ke)}var oe=Object.defineProperty,Ce=(S,P,j)=>P in S?oe(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,nt=(S,P,j)=>(Ce(S,typeof P!="symbol"?P+"":P,j),j),He;class Xe{constructor(P,j,Z){this.id=P,this.params=j,this.optional=Z,nt(this,He,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}He=ee;function at(S){var P;return new Xe(S.id,(P=S.params)!=null?P:[],!!S.optional)}function Ge(S){const{pathname:P}=(0,A.zy)(),j=(0,s.qO)("routing-context");if(!j)throw new Error("Routing context is not available");const Z=j.atVersion(1),Te=(0,l.useMemo)(()=>Z&&Z.resolve(S,{pathname:P}),[Z,S,P]);if(!j)throw new Error("useRouteRef used outside of routing context");if(!Z)throw new Error("RoutingContext v1 not available");const Ke="optional"in S&&S.optional;if(!Te&&!Ke)throw new Error(`No path for ${S}`);return Te}function Ye(S){return(0,A.g)()}var Re=Object.defineProperty,Le=(S,P,j)=>P in S?Re(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,ct=(S,P,j)=>(Le(S,typeof P!="symbol"?P+"":P,j),j);class vt extends l.Component{constructor(){super(...arguments),ct(this,"state",{error:void 0}),ct(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(P){return{error:P}}render(){const{error:P}=this.state,{app:j,plugin:Z}=this.props,{ErrorBoundaryFallback:Te}=j.getComponents();return P?l.createElement(Te,{error:P,resetError:this.handleErrorReset,plugin:Z}):this.props.children}}function St(S){const{component:P,mountPoint:j,name:Z}=S;return At({component:{lazy:()=>P().then(Te=>{const Ke=Je=>{const qe=me();try{Ge(j)}catch(Ut){if(typeof Ut=="object"&&Ut!==null){const{message:nn}=Ut;if(typeof nn=="string"&&nn.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${j} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Ut}return(0,l.useEffect)(()=>{qe.captureEvent(pe,"")},[qe]),l.createElement(Te,{...Je})},mt=Z||Te.displayName||Te.name||"LazyComponent";return Ke.displayName=`RoutableExtension(${mt})`,Ke},Te=>mt=>{const Je=H(),{BootErrorPage:qe}=Je.getComponents();return l.createElement(qe,{step:"load-chunk",error:Te})})},data:{"core.mountPoint":j},name:Z})}function Jt(S){const{component:P,name:j}=S;return At({component:P,name:j})}function At(S){const{data:P={},name:j}=S;j||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let Z;if("lazy"in S.component){const Ke=S.component.lazy;Z=(0,l.lazy)(()=>Ke().then(mt=>({default:mt})))}else Z=S.component.sync;const Te=j||Z.displayName||Z.name||"Component";return{expose(Ke){const mt=Je=>{const qe=H(),{Progress:Ut}=qe.getComponents(),nn=P==null?void 0:P["core.mountPoint"];return l.createElement(l.Suspense,{fallback:l.createElement(Ut,null)},l.createElement(vt,{app:qe,plugin:Ke},l.createElement(q,{attributes:{pluginId:Ke.getId(),...j&&{extension:j},...nn&&{routeRef:nn.id}}},l.createElement(Z,{...Je}))))};dt(mt,"core.plugin",Ke),dt(mt,"core.extensionName",j);for(const[Je,qe]of Object.entries(P))dt(mt,Je,qe);return mt.displayName=`Extension(${Te})`,mt}}}function ue(S,P,j,Z){return l.Children.toArray(S).flatMap(Te=>{if(!(0,l.isValidElement)(Te))return[];if(Te.type===l.Fragment)return ue(Te.props.children,P,j,Z);if(z(Te,"core.featureFlagged")){const Ke=Te.props;return("with"in Ke?P.isActive(Ke.with):!P.isActive(Ke.without))?ue(Te.props.children,P,j,Z):[]}if(j===void 0||j(Te))return[Te];if(Z)throw new Error(Z);return ue(Te.props.children,P,j,Z)})}class ft{constructor(P,j){this.node=P,this.featureFlagsApi=j}selectByComponentData(P){const j=ue(this.node,this.featureFlagsApi,Z=>z(Z,P.key)!==void 0,P.withStrictError);return new ft(j,this.featureFlagsApi)}findComponentData(P){return ue(this.node,this.featureFlagsApi,Z=>z(Z,P.key)!==void 0).map(Z=>z(Z,P.key)).filter(Z=>Z!==void 0)}getElements(){return ue(this.node,this.featureFlagsApi)}}function xt(S,P,j=[]){const Z=(0,b.u)(b.f),Te=new ft(S,Z);return(0,l.useMemo)(()=>P(Te),[S,...j])}class gt{constructor(P){this.config=P}getId(){return this.config.id}getApis(){var P;return(P=this.config.apis)!=null?P:[]}getFeatureFlags(){var P,j;return(j=(P=this.config.featureFlags)==null?void 0:P.slice())!=null?j:[]}get routes(){var P;return(P=this.config.routes)!=null?P:{}}get externalRoutes(){var P;return(P=this.config.externalRoutes)!=null?P:{}}provide(P){return P.expose(this)}toString(){return`plugin{${this.config.id}}`}}function Nt(S){return new gt(S)}},3399:(Tn,_t,e)=>{"use strict";e.d(_t,{EH:()=>w,HK:()=>y,bJ:()=>b,m_:()=>z,o3:()=>ye,tX:()=>A});var s=e(69655),l=e.n(s);function b(X){if(typeof X!="object"||X===null||Array.isArray(X))return!1;const N=X;return!(typeof N.name!="string"||N.name===""||typeof N.message!="string")}function A(X){if(typeof X!="object"||X===null||Array.isArray(X))throw new Error(`Encountered invalid error, not an object, got '${X}'`);const N=X;if(typeof N.name!="string"||N.name==="")throw new Error(`Encountered error object without a name, got '${X}'`);if(typeof N.message!="string")throw new Error(`Encountered error object without a message, got '${X}'`)}function W(X,N){const ie={name:"Unknown",message:"<no reason given>",...serializeError$1(X)};return N!=null&&N.includeStack||delete ie.stack,ie}function r(X){const N=(0,s.deserializeError)(X);return X.stack||(N.stack=void 0),N}function q(X){if(b(X)){const N=String(X);return N!=="[object Object]"?N:`${X.name}: ${X.message}`}return`unknown error '${X}'`}var Q=Object.defineProperty,t=(X,N,V)=>N in X?Q(X,N,{enumerable:!0,configurable:!0,writable:!0,value:V}):X[N]=V,pe=(X,N,V)=>(t(X,typeof N!="symbol"?N+"":N,V),V);class _ extends Error{constructor(N,V){var ie;let oe=N;if(V!==void 0){const Ce=q(V);oe?oe+=`; caused by ${Ce}`:oe=`caused by ${Ce}`}super(oe),pe(this,"cause"),(ie=Error.captureStackTrace)==null||ie.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=b(V)?V:void 0}}var de=Object.defineProperty,me=(X,N,V)=>N in X?de(X,N,{enumerable:!0,configurable:!0,writable:!0,value:V}):X[N]=V,H=(X,N,V)=>(me(X,typeof N!="symbol"?N+"":N,V),V);class xe extends _{constructor(){super(...arguments),H(this,"name","InputError")}}class ve extends _{constructor(){super(...arguments),H(this,"name","AuthenticationError")}}class dt extends _{constructor(){super(...arguments),H(this,"name","NotAllowedError")}}class z extends _{constructor(){super(...arguments),H(this,"name","NotFoundError")}}class ee extends _{constructor(){super(...arguments),H(this,"name","ConflictError")}}class D extends _{constructor(){super(...arguments),H(this,"name","NotModifiedError")}}class w extends _{constructor(){super(...arguments),H(this,"name","NotImplementedError")}}class M extends null{}class y extends _{constructor(N,V){super(N,V),this.name=b(V)?V.name:"Error"}}async function v(X){var N;try{const V=await X.text();if(V){if((N=X.headers.get("content-type"))!=null&&N.startsWith("application/json"))try{const ie=JSON.parse(V);if(ie.error&&ie.response)return ie}catch{}return{error:{name:"Error",message:`Request failed with status ${X.status} ${X.statusText}, ${V}`},response:{statusCode:X.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${X.status} ${X.statusText}`},response:{statusCode:X.status}}}var F=Object.defineProperty,re=(X,N,V)=>N in X?F(X,N,{enumerable:!0,configurable:!0,writable:!0,value:V}):X[N]=V,Ne=(X,N,V)=>(re(X,typeof N!="symbol"?N+"":N,V),V);class ye extends Error{constructor(N){super(N.message),Ne(this,"response"),Ne(this,"body"),Ne(this,"cause"),Ne(this,"statusCode"),Ne(this,"statusText"),this.name="ResponseError",this.response=N.response,this.body=N.data,this.cause=N.cause,this.statusCode=N.statusCode,this.statusText=N.statusText}static async fromResponse(N){const V=await v(N),ie=V.response.statusCode||N.status,oe=N.statusText,Ce=`Request failed with ${ie} ${oe}`,nt=r(V.error);return new ye({message:Ce,response:N,data:V,cause:nt,statusCode:ie,statusText:oe})}}},33478:(Tn,_t,e)=>{"use strict";e.d(_t,{$J:()=>r,L7:()=>w,LS:()=>ee,YT:()=>D,gh:()=>z});var s=e(5124),l=e(11638),b=e(63188),A=e(13660),W=e(14041);const r=(0,s.c)({id:"core.scmauth"});var q=(M,y,v)=>{if(!y.has(M))throw TypeError("Cannot "+v)},Q=(M,y,v)=>(q(M,y,"read from private field"),v?v.call(M):y.get(M)),t=(M,y,v)=>{if(y.has(M))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(M):y.set(M,v)},pe=(M,y,v,F)=>(q(M,y,"write to private field"),F?F.call(M,v):y.set(M,v),v),_,de,me,H,xe;class ve{constructor(y){t(this,_,void 0),pe(this,_,y)}async getCredentials(y){const v=new URL(y.url),F=Q(this,_).find(re=>re.isUrlSupported(v));if(!F)throw new Error(`No auth provider available for '${y.url}', see https://backstage.io/link?scm-auth`);return F.getCredentials(y)}}_=new WeakMap;const dt=class Rr{constructor(y,v,F,re){t(this,de,void 0),t(this,me,void 0),t(this,H,void 0),t(this,xe,void 0),pe(this,de,v),pe(this,me,F),pe(this,H,re),pe(this,xe,y)}static createDefaultApiFactory(){return(0,l.bW)({api:r,deps:{github:s.d,gitlab:s.e,azure:s.m,bitbucket:s.i},factory:({github:y,gitlab:v,azure:F,bitbucket:re})=>Rr.merge(Rr.forGithub(y),Rr.forGitlab(v),Rr.forAzure(F),Rr.forBitbucket(re))})}static forAuthApi(y,v){return new Rr("generic",y,v.host,v.scopeMapping)}static forGithub(y,v){var F;const re=(F=v==null?void 0:v.host)!=null?F:"github.com";return new Rr("github",y,re,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(y,v){var F;const re=(F=v==null?void 0:v.host)!=null?F:"gitlab.com";return new Rr("gitlab",y,re,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(y,v){var F;const re=(F=v==null?void 0:v.host)!=null?F:"dev.azure.com";return new Rr("azure",y,re,{default:["499b84ac-1321-427f-aa17-267ca6975798/vso.build","499b84ac-1321-427f-aa17-267ca6975798/vso.code","499b84ac-1321-427f-aa17-267ca6975798/vso.graph","499b84ac-1321-427f-aa17-267ca6975798/vso.project","499b84ac-1321-427f-aa17-267ca6975798/vso.profile"],repoWrite:["499b84ac-1321-427f-aa17-267ca6975798/vso.code_manage"]})}static forBitbucket(y,v){var F;const re=(F=v==null?void 0:v.host)!=null?F:"bitbucket.org";return new Rr("bitbucket",y,re,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...y){return new ve(y)}isUrlSupported(y){return y.host===Q(this,me)}getAdditionalScopesForProvider(y){var v,F;return!(y!=null&&y.customScopes)||Q(this,xe)==="generic"?[]:(F=(v=y.customScopes)==null?void 0:v[Q(this,xe)])!=null?F:[]}async getCredentials(y){const{url:v,additionalScope:F,...re}=y,Ne=Q(this,H).default.slice();F!=null&&F.repoWrite&&Ne.push(...Q(this,H).repoWrite);const ye=this.getAdditionalScopesForProvider(F);ye.length&&Ne.push(...ye);const X=[...new Set(Ne)],N=await Q(this,de).getAccessToken(X,re);return{token:N,headers:{Authorization:`Bearer ${N}`}}}};de=new WeakMap,me=new WeakMap,H=new WeakMap,xe=new WeakMap;let z=dt;class ee{static fromConfig(y){return b.b5.fromConfig(y)}}const D=(0,s.c)({id:"integration.scmintegrations"}),w=M=>{var y;const{type:v}=M,F=(0,l.nm)(),re=A.A,Ne=v&&(y=F.getSystemIcon(v))!=null?y:re;return W.createElement(Ne,null)}},63188:(Tn,_t,e)=>{"use strict";e.d(_t,{B:()=>Ta,Fw:()=>xa,b5:()=>Br,bm:()=>ze});var s=e(52536),l=e.n(s),b=e(45250),A=e.n(b),W=e(10288),r=e.n(W),q=e(36142),Q=e(49863),t=e(52950),pe=e(1048).Buffer;function _(g){const c=new URL("http://example.com");return c.host=g,c.host===g}function de(g){try{return new URL(g),!0}catch{return!1}}function me(g,c){return{list(){return g},byUrl(E){try{const $=typeof E=="string"?new URL(E):E;return g.find(Pe=>c(Pe)===$.host)}catch{return}},byHost(E){return g.find($=>c($)===E)}}}function H(g){const{url:c,base:E,lineNumber:$}=g;try{return new URL(c),c}catch{}let Pe;if(c.startsWith("/")){const{href:Be,filepath:Pt}=l()(E);Pe=new URL(Be);const Wt=(0,b.trimEnd)(Pe.pathname.substring(0,Pe.pathname.length-Pt.length),"/");Pe.pathname=`${Wt}${c}`}else Pe=new URL(c,E);return Pe.search=new URL(E).search,$&&(Pe.hash=`L${$}`),Pe.toString()}const xe="amazonaws.com";function ve(g){var c,E;const $=g.getOptionalString("endpoint"),Pe=(c=g.getOptionalBoolean("s3ForcePathStyle"))!=null?c:!1;let Be,Pt;if($){try{const ka=new URL($);Be=ka.host,Pt=ka.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${$}' is not a valid URL`)}if(Pt!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${$}'`)}else Be=xe;const Wt=g.getOptionalString("accessKeyId"),wn=(E=g.getOptionalString("secretAccessKey"))==null?void 0:E.trim(),kn=g.getOptionalString("roleArn"),La=g.getOptionalString("externalId");return{host:Be,endpoint:$,s3ForcePathStyle:Pe,accessKeyId:Wt,secretAccessKey:wn,roleArn:kn,externalId:La}}function dt(g){const c=g.map(ve);return c.some(E=>E.host===xe)||c.push({host:xe}),c}var z=Object.defineProperty,ee=(g,c,E)=>c in g?z(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,D=(g,c,E)=>(ee(g,typeof c!="symbol"?c+"":c,E),E);const w=class{constructor(c){this.integrationConfig=c}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return H(c)}resolveEditUrl(c){return c}};D(w,"factory",({config:g})=>{var c;const E=dt((c=g.getOptionalConfigArray("integrations.awsS3"))!=null?c:[]);return me(E.map($=>new w($)),$=>$.config.host)});let M=w;const y="console.aws.amazon.com";function v(g){var c;const E=g.getOptionalString("accessKeyId"),$=(c=g.getOptionalString("secretAccessKey"))==null?void 0:c.trim(),Pe=g.getOptionalString("roleArn"),Be=g.getOptionalString("externalId");return{host:y,accessKeyId:E,secretAccessKey:$,roleArn:Pe,externalId:Be}}function F(g){const c=g.map(v);return c.some(E=>E.host===y)||c.push({host:y}),c}var re=Object.defineProperty,Ne=(g,c,E)=>c in g?re(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,ye=(g,c,E)=>(Ne(g,typeof c!="symbol"?c+"":c,E),E);const X=class{constructor(c){this.integrationConfig=c}get type(){return"awsCodeCommit"}get config(){return this.integrationConfig}get title(){return this.integrationConfig.host}resolveUrl(c){return H(c)}resolveEditUrl(c){const $=new URL(c).pathname.match(/^\/codesuite\/codecommit\/repositories\/([^\/]+)\//);if(!$)throw new Error("");const[,Pe]=$;return V(c,Pe,"edit")}};ye(X,"factory",({config:g})=>{var c;const E=F((c=g.getOptionalConfigArray("integrations.awsCodeCommit"))!=null?c:[]);return me(E.map($=>new X($)),$=>$.config.host)});let N=X;function V(g,c,E){const $=E==="edit"?"files/edit":E;return g.replace(new RegExp(`/codesuite/codecommit/repositories/${c}/(browse|files/edit)/`),`/codesuite/codecommit/repositories/${c}/${$}/`)}var ie=(g,c,E)=>{if(!c.has(g))throw TypeError("Cannot "+E)},oe=(g,c,E)=>(ie(g,c,"read from private field"),E?E.call(g):c.get(g)),Ce=(g,c,E)=>{if(c.has(g))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(g):c.set(g,E)},nt=(g,c,E,$)=>(ie(g,c,"write to private field"),$?$.call(g,E):c.set(g,E),E),He,Xe,at,Ge,Ye,Re,Le;const ct="GB",vt=class ts{constructor(c,E,$,Pe,Be,Pt){Ce(this,He,void 0),Ce(this,Xe,void 0),Ce(this,at,void 0),Ce(this,Ge,void 0),Ce(this,Ye,void 0),Ce(this,Re,void 0),Ce(this,Le,(...Wt)=>{const wn=new URL(oe(this,He));return wn.pathname=Wt.map(kn=>encodeURIComponent(kn)).join("/"),wn}),nt(this,He,c),nt(this,Xe,E),nt(this,at,$),nt(this,Ge,Pe),nt(this,Ye,Be),nt(this,Re,Pt)}static fromRepoUrl(c){var E;const $=new URL(c);let Pe,Be,Pt;const Wt=$.pathname.split("/").map(ka=>decodeURIComponent(ka));if(Wt[2]==="_git"?(Pe=Wt[1],Be=Pt=Wt[3]):Wt[3]==="_git"?(Pe=Wt[1],Be=Wt[2],Pt=Wt[4]):Wt[4]==="_git"&&(Pe=`${Wt[1]}/${Wt[2]}`,Be=Wt[3],Pt=Wt[5]),!Pe||!Be||!Pt)throw new Error("Azure URL must point to a git repository");const wn=(E=$.searchParams.get("path"))!=null?E:void 0;let kn;const La=$.searchParams.get("version");if(La){if(La.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");kn=La.slice(2)}return new ts($.origin,Pe,Be,Pt,wn,kn)}toRepoUrl(){let c;return oe(this,at)===oe(this,Ge)?c=oe(this,Le).call(this,oe(this,Xe),"_git",oe(this,Ge)):c=oe(this,Le).call(this,oe(this,Xe),oe(this,at),"_git",oe(this,Ge)),oe(this,Ye)&&c.searchParams.set("path",oe(this,Ye)),oe(this,Re)&&c.searchParams.set("version",ct+oe(this,Re)),c.toString()}toFileUrl(){if(!oe(this,Ye))throw new Error("Azure URL must point to a specific path to be able to download a file");const c=oe(this,Le).call(this,oe(this,Xe),oe(this,at),"_apis","git","repositories",oe(this,Ge),"items");return c.searchParams.set("api-version","6.0"),c.searchParams.set("path",oe(this,Ye)),oe(this,Re)&&c.searchParams.set("version",oe(this,Re)),c.toString()}toArchiveUrl(){const c=oe(this,Le).call(this,oe(this,Xe),oe(this,at),"_apis","git","repositories",oe(this,Ge),"items");return c.searchParams.set("recursionLevel","full"),c.searchParams.set("download","true"),c.searchParams.set("api-version","6.0"),oe(this,Ye)&&c.searchParams.set("scopePath",oe(this,Ye)),oe(this,Re)&&c.searchParams.set("version",oe(this,Re)),c.toString()}toCommitsUrl(){const c=oe(this,Le).call(this,oe(this,Xe),oe(this,at),"_apis","git","repositories",oe(this,Ge),"commits");return c.searchParams.set("api-version","6.0"),oe(this,Re)&&c.searchParams.set("searchCriteria.itemVersion.version",oe(this,Re)),c.toString()}getOwner(){return oe(this,Xe)}getProject(){return oe(this,at)}getRepo(){return oe(this,Ge)}getPath(){return oe(this,Ye)}getRef(){return oe(this,Re)}};He=new WeakMap,Xe=new WeakMap,at=new WeakMap,Ge=new WeakMap,Ye=new WeakMap,Re=new WeakMap,Le=new WeakMap;let St=vt;const Jt="dev.azure.com",At=["clientId","clientSecret","tenantId","personalAccessToken"],ue=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function ft(g){for(const c of ue.entries()){const[E,$]=c,Pe=At.filter(Be=>!$.includes(Be));if($.every(Be=>g[Be]!==void 0)&&Pe.every(Be=>g[Be]===void 0))return{kind:E,organizations:g.organizations,...$.reduce((Be,Pt)=>(Be[Pt]=g[Pt],Be),{})}}throw new Error("is not a valid credential")}function xt(g){var c,E,$,Pe,Be,Pt,Wt;const wn=(c=g.getOptionalString("host"))!=null?c:Jt;let kn=(E=g.getOptionalConfigArray("credentials"))==null?void 0:E.map(Ba=>{var _a,ja;return{organizations:Ba.getOptionalStringArray("organizations"),personalAccessToken:(_a=Ba.getOptionalString("personalAccessToken"))==null?void 0:_a.trim(),tenantId:Ba.getOptionalString("tenantId"),clientId:Ba.getOptionalString("clientId"),clientSecret:(ja=Ba.getOptionalString("clientSecret"))==null?void 0:ja.trim()}});const La=($=g.getOptionalString("token"))==null?void 0:$.trim();if(g.getOptional("credential")!==void 0&&g.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(g.getOptional("token")!==void 0&&g.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(La!==void 0){const Ba=[{personalAccessToken:La}];kn=(Pe=kn==null?void 0:kn.concat(Ba))!=null?Pe:Ba}if(g.getOptional("credential")!==void 0){const Ba=[{organizations:g.getOptionalStringArray("credential.organizations"),token:(Be=g.getOptionalString("credential.token"))==null?void 0:Be.trim(),tenantId:g.getOptionalString("credential.tenantId"),clientId:g.getOptionalString("credential.clientId"),clientSecret:(Pt=g.getOptionalString("credential.clientSecret"))==null?void 0:Pt.trim()}];kn=(Wt=kn==null?void 0:kn.concat(Ba))!=null?Wt:Ba}if(!_(wn))throw new Error(`Invalid Azure integration config, '${wn}' is not a valid host`);let ka;if(kn!==void 0){const Ba=kn==null?void 0:kn.reduce((_a,ja,tr)=>{let Na;try{ft(ja)}catch(Ja){Na=Ja.message}return Na!==void 0&&_a.push(`credential at position ${tr+1} ${Na}`),_a},Array.of()).concat(Object.entries(kn.filter(_a=>_a.organizations!==void 0&&_a.organizations.length>0).reduce((_a,ja,tr)=>{var Na;return(Na=ja.organizations)==null||Na.forEach(Ja=>{_a[Ja]||(_a[Ja]=[]),_a[Ja].push(tr+1)}),_a},{})).filter(([_a,ja])=>ja.length>1).reduce((_a,[ja,tr])=>(_a.push(`organization ${ja} is specified multiple times in credentials at positions ${tr.slice(0,tr.length-1).join(", ")} and ${tr[tr.length-1]}`),_a),Array.of()));if((Ba==null?void 0:Ba.length)>0)throw new Error(`Invalid Azure integration config for ${wn}: ${Ba.join("; ")}`);if(ka=kn.map(_a=>ft(_a)),ka.some(_a=>_a.kind!=="PersonalAccessToken")&&wn!==Jt)throw new Error(`Invalid Azure integration config for ${wn}, only personal access tokens can be used with hosts other than ${Jt}`);if(ka.filter(_a=>_a.organizations===void 0||_a.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${wn}, you cannot specify multiple credentials without organizations`)}return{host:wn,credentials:ka}}function gt(g){const c=g.map(xt);return c.some(E=>E.host===Jt)||c.push({host:Jt}),c}var Nt=Object.defineProperty,S=(g,c,E)=>c in g?Nt(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,P=(g,c,E)=>(S(g,typeof c!="symbol"?c+"":c,E),E);const j=class{constructor(c){this.integrationConfig=c}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){var E;const{url:$,base:Pe}=c;if(de($))return $;try{const Be=St.fromRepoUrl(Pe),Pt=new URL(Pe),Wt=new URL(`https://a.com${(E=Be.getPath())!=null?E:""}`),wn=new URL($,Wt).pathname;return Pt.searchParams.set("path",wn),c.lineNumber&&(Pt.searchParams.set("line",String(c.lineNumber)),Pt.searchParams.set("lineEnd",String(c.lineNumber+1)),Pt.searchParams.set("lineStartColumn","1"),Pt.searchParams.set("lineEndColumn","1")),Pt.toString()}catch{return new URL($,Pe).toString()}}resolveEditUrl(c){return c}};P(j,"factory",({config:g})=>{var c;const E=gt((c=g.getOptionalConfigArray("integrations.azure"))!=null?c:[]);return me(E.map($=>new j($)),$=>$.config.host)});let Z=j;function Te(g){return St.fromRepoUrl(g).toFileUrl()}function Ke(g){return St.fromRepoUrl(g).toArchiveUrl()}function mt(g){return St.fromRepoUrl(g).toCommitsUrl()}var Je=Object.defineProperty,qe=(g,c,E)=>c in g?Je(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,Ut=(g,c,E)=>(qe(g,typeof c!="symbol"?c+"":c,E),E);const nn=null;class It{constructor(c){this.credential=c,Ut(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),Ut(this,"cached")}static fromAzureDevOpsCredential(c){switch(c.kind){case"PersonalAccessToken":return It.fromPersonalAccessTokenCredential(c);case"ClientSecret":return It.fromTokenCredential(new ClientSecretCredential(c.tenantId,c.clientId,c.clientSecret));case"ManagedIdentity":return It.fromTokenCredential(new ManagedIdentityCredential(c.clientId));default:throw new Error(`Credential kind '${c.kind}' not supported`)}}static fromTokenCredential(c){return new It(c)}static fromPersonalAccessTokenCredential(c){return new It(c.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const c=await this.credential.getToken(this.azureDevOpsScope);if(!c)throw new Error("Failed to retrieve access token");this.cached={expiresAt:c.expiresOnTimestamp-nn,headers:{Authorization:`Bearer ${c.token}`},type:"bearer",token:c.token}}return this.cached}}class ht{constructor(c){this.providers=c}static fromIntegrations(c){const E=c.azure.list().reduce(($,Pe)=>{var Be;return(Be=Pe.config.credentials)==null||Be.forEach(Pt=>{var Wt;if(Pt.organizations===void 0||Pt.organizations.length===0)$.get(Pe.config.host)===void 0&&$.set(Pe.config.host,It.fromAzureDevOpsCredential(Pt));else{const wn=It.fromAzureDevOpsCredential(Pt);(Wt=Pt.organizations)==null||Wt.forEach(kn=>{$.set(`${Pe.config.host}/${kn}`,wn)})}}),Pe.config.host==="dev.azure.com"&&$.get(Pe.config.host)===void 0&&$.set(Pe.config.host,It.fromTokenCredential(new DefaultAzureCredential)),$},new Map);return new ht(E)}forAzureDevOpsServerOrganization(c){const E=c.pathname.split("/").filter($=>$!=="");if(c.host!=="dev.azure.com"&&E.length>0){if(E[0]!=="tfs")return this.providers.get(`${c.host}/${E[0]}`);if(E[0]==="tfs"&&E.length>1)return this.providers.get(`${c.host}/${E[1]}`)}}forAzureDevOpsOrganization(c){const E=c.pathname.split("/").filter($=>$!=="");if(c.host==="dev.azure.com"&&E.length>0)return this.providers.get(`${c.host}/${E[0]}`)}forHost(c){return this.providers.get(c.host)}async getCredentials(c){var E,$;const Pe=new URL(c.url),Be=($=(E=this.forAzureDevOpsOrganization(Pe))!=null?E:this.forAzureDevOpsServerOrganization(Pe))!=null?$:this.forHost(Pe);if(Be!==void 0)return Be.getCredentials(c)}}async function Zt(g,c){var E;const $=c?{...c}:{},Pe=(E=g.credentials)==null?void 0:E.filter(Be=>Be.organizations===void 0||Be.organizations.length===0)[0];if(Pe){const Pt=await It.fromAzureDevOpsCredential(Pe).getCredentials();return{headers:{...Pt==null?void 0:Pt.headers,...$}}}return{headers:$}}const ln="bitbucket.org",on="https://api.bitbucket.org/2.0";function Qt(g){var c,E,$;const Pe=(c=g.getOptionalString("host"))!=null?c:ln;let Be=g.getOptionalString("apiBaseUrl");const Pt=(E=g.getOptionalString("token"))==null?void 0:E.trim(),Wt=g.getOptionalString("username"),wn=($=g.getOptionalString("appPassword"))==null?void 0:$.trim();if(!_(Pe))throw new Error(`Invalid Bitbucket integration config, '${Pe}' is not a valid host`);return Be?Be=(0,b.trimEnd)(Be,"/"):Pe===ln?Be=on:Be=`https://${Pe}/rest/api/1.0`,{host:Pe,apiBaseUrl:Be,token:Pt,username:Wt,appPassword:wn}}function Ae(g){const c=g.map(Qt);return c.some(E=>E.host===ln)||c.push({host:ln,apiBaseUrl:on}),c}var Ve=Object.defineProperty,jt=(g,c,E)=>c in g?Ve(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,zt=(g,c,E)=>(jt(g,typeof c!="symbol"?c+"":c,E),E);const Kt=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const E=H(c);if(!c.lineNumber)return E;const $=new URL(E);return this.integrationConfig.host==="bitbucket.org"?$.hash=`lines-${c.lineNumber}`:$.hash=`${c.lineNumber}`,$.toString()}resolveEditUrl(c){const E=l()(c),$=new URL(c);return $.searchParams.set("mode","edit"),$.searchParams.set("spa","0"),$.searchParams.set("at",E.ref),$.toString()}};zt(Kt,"factory",({config:g})=>{var c,E,$;const Pe=Ae(($=g.getOptionalConfigArray("integrations.bitbucket"))!=null?$:[...(c=g.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[],...(E=g.getOptionalConfigArray("integrations.bitbucketServer"))!=null?E:[]]);return me(Pe.map(Be=>new Kt(Be)),Be=>Be.config.host)});let Et=Kt;async function xn(g,c){const{name:E,owner:$,resource:Pe}=parseGitUrl(g),Be=Pe==="bitbucket.org";let Pt=Be?`${c.apiBaseUrl}/repositories/${$}/${E}`:`${c.apiBaseUrl}/projects/${$}/repos/${E}/default-branch`,Wt=await fetch(Pt,yn(c));if(Wt.status===404&&!Be&&(Pt=`${c.apiBaseUrl}/projects/${$}/repos/${E}/branches/default`,Wt=await fetch(Pt,yn(c))),!Wt.ok){const kn=`Failed to retrieve default branch from ${Pt}, ${Wt.status} ${Wt.statusText}`;throw new Error(kn)}let wn;if(Be)wn=(await Wt.json()).mainbranch.name;else{const{displayId:kn}=await Wt.json();wn=kn}if(!wn)throw new Error(`Failed to read default branch from ${Pt}. Response ${Wt.status} ${Wt.json()}`);return wn}async function dn(g,c){const{name:E,owner:$,ref:Pe,protocol:Be,resource:Pt,filepath:Wt}=parseGitUrl(g),wn=Pt==="bitbucket.org";let kn=Pe;kn||(kn=await xn(g,c));const La=Wt?`&path=${encodeURIComponent(decodeURIComponent(Wt))}`:"";return wn?`${Be}://${Pt}/${$}/${E}/get/${kn}.tar.gz`:`${c.apiBaseUrl}/projects/${$}/repos/${E}/archive?format=tgz&at=${kn}&prefix=${$}-${E}${La}`}function Xt(g,c){try{const{owner:E,name:$,ref:Pe,filepathtype:Be,filepath:Pt}=parseGitUrl(g);if(!E||!$||Be!=="browse"&&Be!=="raw"&&Be!=="src")throw new Error("Invalid Bitbucket URL or file path");const Wt=Pt.replace(/^\//,"");if(c.host==="bitbucket.org"){if(!Pe)throw new Error("Invalid Bitbucket URL or file path");return`${c.apiBaseUrl}/repositories/${E}/${$}/src/${Pe}/${Wt}`}return`${c.apiBaseUrl}/projects/${E}/repos/${$}/raw/${Wt}?at=${Pe}`}catch(E){throw new Error(`Incorrect URL: ${g}, ${E}`)}}function yn(g){const c={};if(g.token)c.Authorization=`Bearer ${g.token}`;else if(g.username&&g.appPassword){const E=pe.from(`${g.username}:${g.appPassword}`,"utf8");c.Authorization=`Basic ${E.toString("base64")}`}return{headers:c}}const Qe="bitbucket.org",pt="https://api.bitbucket.org/2.0";function Dt(g){var c;const E=Qe,$=pt,Pe=g.getString("username"),Be=(c=g.getString("appPassword"))==null?void 0:c.trim();return{host:E,apiBaseUrl:$,username:Pe,appPassword:Be}}function it(g){const c=g.map(Dt);return c.length===0&&c.push({host:Qe,apiBaseUrl:pt}),c}var Ze=Object.defineProperty,Y=(g,c,E)=>c in g?Ze(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,he=(g,c,E)=>(Y(g,typeof c!="symbol"?c+"":c,E),E);const fe=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const E=H(c);if(c.lineNumber){const $=new URL(E);return $.hash=`lines-${c.lineNumber}`,$.toString()}return E}resolveEditUrl(c){const E=l()(c),$=new URL(c);return $.searchParams.set("mode","edit"),$.searchParams.set("at",E.ref),$.toString()}};he(fe,"factory",({config:g})=>{var c;const E=it((c=g.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[]);return me(E.map($=>new fe($)),$=>$.config.host)});let Ct=fe;async function Ft(g,c){const{name:E,owner:$}=parseGitUrl(g),Pe=`${c.apiBaseUrl}/repositories/${$}/${E}`,Be=await fetch(Pe,In(c));if(!Be.ok){const wn=`Failed to retrieve default branch from ${Pe}, ${Be.status} ${Be.statusText}`;throw new Error(wn)}const Wt=(await Be.json()).mainbranch.name;if(!Wt)throw new Error(`Failed to read default branch from ${Pe}. Response ${Be.status} ${Be.json()}`);return Wt}async function cn(g,c){const{name:E,owner:$,ref:Pe,protocol:Be,resource:Pt}=parseGitUrl(g);let Wt=Pe;return Wt||(Wt=await Ft(g,c)),`${Be}://${Pt}/${$}/${E}/get/${Wt}.tar.gz`}function An(g,c){try{const{owner:E,name:$,ref:Pe,filepathtype:Be,filepath:Pt}=parseGitUrl(g);if(!E||!$||Be!=="src"&&Be!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const Wt=Pt.replace(/^\//,"");if(!Pe)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${c.apiBaseUrl}/repositories/${E}/${$}/src/${Pe}/${Wt}`}catch(E){throw new Error(`Incorrect URL: ${g}, ${E}`)}}function In(g){const c={};if(g.username&&g.appPassword){const E=pe.from(`${g.username}:${g.appPassword}`,"utf8");c.Authorization=`Basic ${E.toString("base64")}`}return{headers:c}}function Bn(g){var c;const E=g.getString("host");let $=g.getOptionalString("apiBaseUrl");const Pe=(c=g.getOptionalString("token"))==null?void 0:c.trim(),Be=g.getOptionalString("username"),Pt=g.getOptionalString("password");if(!_(E))throw new Error(`Invalid Bitbucket Server integration config, '${E}' is not a valid host`);return $?$=(0,b.trimEnd)($,"/"):$=`https://${E}/rest/api/1.0`,{host:E,apiBaseUrl:$,token:Pe,username:Be,password:Pt}}function Hn(g){return g.map(Bn)}var Cn=Object.defineProperty,Vn=(g,c,E)=>c in g?Cn(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,ua=(g,c,E)=>(Vn(g,typeof c!="symbol"?c+"":c,E),E);const ut=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const E=H(c);if(c.lineNumber){const $=new URL(E);return $.hash=c.lineNumber.toString(),$.toString()}return E}resolveEditUrl(c){return c.includes("?")?c.substring(0,c.indexOf("?")):c}};ua(ut,"factory",({config:g})=>{var c;const E=Hn((c=g.getOptionalConfigArray("integrations.bitbucketServer"))!=null?c:[]);return me(E.map($=>new ut($)),$=>$.config.host)});let m=ut;async function R(g,c){const{name:E,owner:$}=parseGitUrl(g);let Pe=`${c.apiBaseUrl}/projects/${$}/repos/${E}/default-branch`,Be=await fetch(Pe,I(c));if(Be.status===404&&(Pe=`${c.apiBaseUrl}/projects/${$}/repos/${E}/branches/default`,Be=await fetch(Pe,I(c))),!Be.ok){const wn=`Failed to retrieve default branch from ${Pe}, ${Be.status} ${Be.statusText}`;throw new Error(wn)}const{displayId:Pt}=await Be.json(),Wt=Pt;if(!Wt)throw new Error(`Failed to read default branch from ${Pe}. Response ${Be.status} ${Be.json()}`);return Wt}async function K(g,c){const{name:E,owner:$,ref:Pe,filepath:Be}=parseGitUrl(g);let Pt=Pe;Pt||(Pt=await R(g,c));const Wt=Be?`&path=${encodeURIComponent(decodeURIComponent(Be))}`:"";return`${c.apiBaseUrl}/projects/${$}/repos/${E}/archive?format=tgz&at=${Pt}&prefix=${$}-${E}${Wt}`}function le(g,c){try{const{owner:E,name:$,ref:Pe,filepathtype:Be,filepath:Pt}=parseGitUrl(g);if(!E||!$||Be!=="browse"&&Be!=="raw"&&Be!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const Wt=Pt.replace(/^\//,"");return`${c.apiBaseUrl}/projects/${E}/repos/${$}/raw/${Wt}?at=${Pe}`}catch(E){throw new Error(`Incorrect URL: ${g}, ${E}`)}}function I(g){const c={};if(g.token)c.Authorization=`Bearer ${g.token}`;else if(g.username&&g.password){const E=pe.from(`${g.username}:${g.password}`,"utf8");c.Authorization=`Basic ${E.toString("base64")}`}return{headers:c}}function U(g){var c;const E=g.getString("host");let $=g.getOptionalString("baseUrl"),Pe=g.getOptionalString("cloneUrl"),Be=g.getOptionalString("gitilesBaseUrl");const Pt=g.getOptionalString("username"),Wt=(c=g.getOptionalString("password"))==null?void 0:c.trim();if(_(E)){if($&&!de($))throw new Error(`Invalid Gerrit integration config, '${$}' is not a valid baseUrl`);if(Pe&&!de(Pe))throw new Error(`Invalid Gerrit integration config, '${Pe}' is not a valid cloneUrl`);if(Be&&!de(Be))throw new Error(`Invalid Gerrit integration config, '${Be}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${E}' is not a valid host`);return $?$=(0,b.trimEnd)($,"/"):$=`https://${E}`,Be?Be=(0,b.trimEnd)(Be,"/"):Be=`https://${E}`,Pe?Pe=(0,b.trimEnd)(Pe,"/"):Pe=$,{host:E,baseUrl:$,cloneUrl:Pe,gitilesBaseUrl:Be,username:Pt,password:Wt}}function J(g){return g.map(U)}const we=")]}'";function Oe(g,c){const E=new URL(g.gitilesBaseUrl),$=new URL(c),Be=$.pathname.substring($.pathname.startsWith("/a/")?2:0).replace(E.pathname,"").split("/").filter(ka=>!!ka),Pt=Be.indexOf("+");if(Pt<=0)throw new Error(`Unable to parse project from url: ${c}`);const Wt=(0,b.trimStart)(Be.slice(0,Pt).join("/"),"/"),wn=Be.indexOf("heads");if(wn<=0)throw new Error(`Unable to parse branch from url: ${c}`);const kn=Be[wn+1],La=Be.slice(wn+2).join("/");return{branch:kn,filePath:La===""?"/":La,project:Wt}}function st(g,c,E,$){return`${g.gitilesBaseUrl}/${c}/+/refs/heads/${E}/${(0,b.trimStart)($,"/")}`}function Rt(g,c,E,$){const Pe=$==="/"||$===""?".tar.gz":`/${$}.tar.gz`;return`${en(g)}/${c}/+archive/refs/heads/${E}${Pe}`}function qt(g){return g.password?"/a/":"/"}function en(g){if(!g.baseUrl||!g.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(g.gitilesBaseUrl.startsWith(g.baseUrl))return g.gitilesBaseUrl.replace(g.baseUrl.concat("/"),g.baseUrl.concat(qt(g)));if(g.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return g.gitilesBaseUrl}function hn(g,c){const{branch:E,project:$}=Oe(g,c);return`${g.baseUrl}${qt(g)}projects/${encodeURIComponent($)}/branches/${E}`}function pn(g,c){const{project:E}=Oe(g,c);return`${g.cloneUrl}${qt(g)}${E}`}function $t(g,c){const{branch:E,filePath:$,project:Pe}=Oe(g,c);return`${g.baseUrl}${qt(g)}projects/${encodeURIComponent(Pe)}/branches/${E}/files/${encodeURIComponent($)}/content`}function Pn(g){return`${g.baseUrl}${qt(g)}projects/`}function un(g){const c={};if(!g.password)return c;const E=pe.from(`${g.username}:${g.password}`,"utf8");return c.Authorization=`Basic ${E.toString("base64")}`,{headers:c}}async function Un(g){const c=await g.text();if(c.startsWith(we))try{return JSON.parse(c.slice(we.length))}catch(E){throw new Error(`Invalid response from Gerrit: ${c.slice(0,10)} - ${E}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${c.slice(0,10)}`)}var qn=Object.defineProperty,ta=(g,c,E)=>c in g?qn(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,$n=(g,c,E)=>(ta(g,typeof c!="symbol"?c+"":c,E),E);const bn=class{constructor(c){this.integrationConfig=c}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const{url:E,base:$,lineNumber:Pe}=c;let Be;if(E.startsWith("/")){const{branch:Pt,project:Wt}=Oe(this.config,$);return st(this.config,Wt,Pt,E)}return E?Be=new URL(E,$):Be=new URL($),Pe&&(Be.hash=Pe.toString()),Be.toString()}resolveEditUrl(c){return c}};$n(bn,"factory",({config:g})=>{var c;const E=J((c=g.getOptionalConfigArray("integrations.gerrit"))!=null?c:[]);return me(E.map($=>new bn($)),$=>$.config.host)});let fn=bn;function Vt(g){var c;const E=g.getString("host");let $=g.getOptionalString("baseUrl");const Pe=g.getOptionalString("username"),Be=(c=g.getOptionalString("password"))==null?void 0:c.trim();if(_(E)){if($&&!de($))throw new Error(`Invalid Gitea integration config, '${$}' is not a valid baseUrl`)}else throw new Error(`Invalid Gitea integration config, '${E}' is not a valid host`);return $?$=(0,b.trimEnd)($,"/"):$=`https://${E}`,{host:E,baseUrl:$,username:Pe,password:Be}}function En(g,c){const E=G(g,c);return`${E.url}/${E.owner}/${E.name}/_edit/${E.ref}/${E.path}`}function Sn(g,c){const E=G(g,c);return`${E.url}/api/v1/repos/${E.owner}/${E.name}/contents/${E.path}?ref=${E.ref}`}function ya(g,c){const E=G(g,c);return`${E.url}/api/v1/repos/${E.owner}/${E.name}/archive/${E.ref}.tar.gz`}function Ra(g,c){const E=G(g,c);return`${E.url}/api/v1/repos/${E.owner}/${E.name}/git/commits/${E.ref}`}function Oa(g){const c={},{username:E,password:$}=g;return $?(E?c.Authorization=`basic ${pe.from(`${E}:${$}`).toString("base64")}`:c.Authorization=`token ${$}`,{headers:c}):c}function G(g,c){var E;const $=(E=g.baseUrl)!=null?E:`https://${g.host}`;try{const[Pe,Be,Pt,Wt,wn,kn,...La]=c.replace($,"").split("/"),ka=La.join("/").replace(/^\//,"");return{url:$,owner:Be,name:Pt,ref:kn,path:ka}}catch(Pe){throw new Error(`Incorrect URL: ${c}, ${Pe}`)}}var be=Object.defineProperty,We=(g,c,E)=>c in g?be(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,ot=(g,c,E)=>(We(g,typeof c!="symbol"?c+"":c,E),E);const wt=class{constructor(c){this.config=c}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(c){return H(c)}resolveEditUrl(c){return En(this.config,c)}};ot(wt,"factory",({config:g})=>{var c;const $=((c=g.getOptionalConfigArray("integrations.gitea"))!=null?c:[]).map(Pe=>Vt(Pe));return me($.map(Pe=>new wt(Pe)),Pe=>Pe.config.host)});let Ot=wt;const rn="github.com",te="https://api.github.com",Ie="https://raw.githubusercontent.com";function ke(g){var c,E,$;const Pe=(c=g.getOptionalString("host"))!=null?c:rn;let Be=g.getOptionalString("apiBaseUrl"),Pt=g.getOptionalString("rawBaseUrl");const Wt=(E=g.getOptionalString("token"))==null?void 0:E.trim(),wn=($=g.getOptionalConfigArray("apps"))==null?void 0:$.map(kn=>({appId:kn.getNumber("appId"),clientId:kn.getString("clientId"),clientSecret:kn.getString("clientSecret"),webhookSecret:kn.getString("webhookSecret"),privateKey:kn.getString("privateKey"),allowedInstallationOwners:kn.getOptionalStringArray("allowedInstallationOwners")}));if(!_(Pe))throw new Error(`Invalid GitHub integration config, '${Pe}' is not a valid host`);return Be?Be=(0,b.trimEnd)(Be,"/"):Pe===rn&&(Be=te),Pt?Pt=(0,b.trimEnd)(Pt,"/"):Pe===rn&&(Pt=Ie),{host:Pe,apiBaseUrl:Be,rawBaseUrl:Pt,token:Wt,apps:wn}}function ze(g){const c=g.map(ke);return c.some(E=>E.host===rn)||c.push({host:rn,apiBaseUrl:te,rawBaseUrl:Ie}),c}function et(g,c,E){try{const{owner:$,name:Pe,ref:Be,filepathtype:Pt,filepath:Wt}=parseGitUrl(g);if(!$||!Pe||!Be||Pt!=="blob"&&Pt!=="raw"&&Pt!=="tree")throw new Error("Invalid GitHub URL or file path");const wn=Wt.replace(/^\//,"");return bt(c,E)==="api"?`${c.apiBaseUrl}/repos/${$}/${Pe}/contents/${wn}?ref=${Be}`:`${c.rawBaseUrl}/${$}/${Pe}/${Be}/${wn}`}catch($){throw new Error(`Incorrect URL: ${g}, ${$}`)}}function tt(g,c){const E={};return bt(g,c)==="api"&&(E.Accept="application/vnd.github.v3.raw"),c.token&&(E.Authorization=`token ${c.token}`),{headers:E}}function bt(g,c){return g.apiBaseUrl&&(c.token||!g.rawBaseUrl)?"api":"raw"}var Lt=Object.defineProperty,Gt=(g,c,E)=>c in g?Lt(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,mn=(g,c,E)=>(Gt(g,typeof c!="symbol"?c+"":c,E),E);class tn{constructor(){mn(this,"tokenCache",new Map),mn(this,"isExpired",c=>t.c9.local()>c)}async getOrCreateToken(c,E,$){let Pe=this.tokenCache.get(c);if((!Pe||this.isExpired(Pe.expiresAt))&&(Pe=await $(),Pe.expiresAt=Pe.expiresAt.minus({minutes:10}),this.tokenCache.set(c,Pe)),!this.appliesToRepo(Pe,E))throw new Error(`The Backstage GitHub application used in the ${c} organization does not have access to a repository with the name ${E}`);return{accessToken:Pe.token}}appliesToRepo(c,E){return E===void 0?!0:c.repositories!==void 0?c.repositories.includes(E):!0}}const ia={Accept:"application/vnd.github.machine-man-preview+json"};class Nn{constructor(c,E){mn(this,"appClient"),mn(this,"baseUrl"),mn(this,"baseAuthConfig"),mn(this,"cache",new tn),mn(this,"allowedInstallationOwners"),this.allowedInstallationOwners=c.allowedInstallationOwners,this.baseUrl=E,this.baseAuthConfig={appId:c.appId,privateKey:c.privateKey.replace(/\\n/gm,`
`)},this.appClient=new Q.E({baseUrl:E,headers:ia,authStrategy:q.K,auth:this.baseAuthConfig})}async getInstallationCredentials(c,E){var $;return this.allowedInstallationOwners&&!(($=this.allowedInstallationOwners)!=null&&$.includes(c))?{accessToken:void 0}:this.cache.getOrCreateToken(c,E,async()=>{var Pe;const{installationId:Be,suspended:Pt}=await this.getInstallationData(c);if(Pt)throw new Error(`The GitHub application for ${c} is suspended`);const Wt=await this.appClient.apps.createInstallationAccessToken({installation_id:Be,headers:ia});let wn;if(Wt.data.repository_selection==="selected"){const kn=new Q.E({baseUrl:this.baseUrl,auth:Wt.data.token}),La=await kn.paginate(kn.apps.listReposAccessibleToInstallation);wn=((Pe=La.repositories)!=null?Pe:La).map(Ba=>Ba.name)}return{token:Wt.data.token,expiresAt:t.c9.fromISO(Wt.data.expires_at),repositories:wn}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(c){const $=(await this.getInstallations()).find(Be=>{var Pt;return Be.account&&"login"in Be.account&&((Pt=Be.account.login)==null?void 0:Pt.toLocaleLowerCase("en-US"))===c.toLocaleLowerCase("en-US")});if($)return{installationId:$.id,suspended:!!$.suspended_by};const Pe=new Error(`No app installation found for ${c} in ${this.baseAuthConfig.appId}`);throw Pe.name="NotFoundError",Pe}}class Dn{constructor(c){mn(this,"apps");var E,$;this.apps=($=(E=c.apps)==null?void 0:E.map(Pe=>new Nn(Pe,c.apiBaseUrl)))!=null?$:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(E=>E.getInstallations()))).flat():[]}async getAppToken(c,E){if(this.apps.length===0)return;const $=await Promise.all(this.apps.map(Wt=>Wt.getInstallationCredentials(c,E).then(wn=>({credentials:wn,error:void 0}),wn=>({credentials:void 0,error:wn})))),Pe=$.find(Wt=>{var wn;return(wn=Wt.credentials)==null?void 0:wn.accessToken});if(Pe)return Pe.credentials.accessToken;const Pt=$.map(Wt=>Wt.error).find(Wt=>(Wt==null?void 0:Wt.name)!=="NotFoundError");if(Pt)throw Pt}}const Fn=class{constructor(c,E){this.githubAppCredentialsMux=c,this.token=E}async getCredentials(c){const E=l()(c.url),$=E.owner||E.name,Pe=E.owner?E.name:void 0;let Be="app",Pt=await this.githubAppCredentialsMux.getAppToken($,Pe);return Pt||(Be="token",Pt=this.token),{headers:Pt?{Authorization:`Bearer ${Pt}`}:void 0,token:Pt,type:Be}}};mn(Fn,"create",g=>new Fn(new Dn(g),g.token));let Yn=null;class Wn{constructor(c){this.providers=c}static fromIntegrations(c){const E=new Map;return c.github.list().forEach($=>{const Pe=Yn.create($.config);E.set($.config.host,Pe)}),new Wn(E)}async getCredentials(c){const E=new URL(c.url),$=this.providers.get(E.host);if(!$)throw new Error(`There is no GitHub integration that matches ${c.url}. Please add a configuration for an integration.`);return $.getCredentials(c)}}var la=Object.defineProperty,sa=(g,c,E)=>c in g?la(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,Aa=(g,c,E)=>(sa(g,typeof c!="symbol"?c+"":c,E),E);const pa=class{constructor(c){this.integrationConfig=c}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return xa(H(c),"tree")}resolveEditUrl(c){return xa(c,"edit")}parseRateLimitInfo(c){return{isRateLimited:c.status===429||c.status===403&&c.headers.get("x-ratelimit-remaining")==="0"}}};Aa(pa,"factory",({config:g})=>{var c;const E=ze((c=g.getOptionalConfigArray("integrations.github"))!=null?c:[]);return me(E.map($=>new pa($)),$=>$.config.host)});let Sa=pa;function xa(g,c){return g.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(E,$,Pe,Be)=>`//${$}/${Pe}/${Be}/${c}/`)}var Ha=Object.defineProperty,Va=(g,c,E)=>c in g?Ha(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,Ya=(g,c,E)=>(Va(g,typeof c!="symbol"?c+"":c,E),E);const hr=null;class gr extends Sa{constructor(c){super(c)}get config(){return super.config}}Ya(gr,"factory",Sa.factory);const or=null,ur=null,Pa=null,qa="gitlab.com",er="https://gitlab.com/api/v4";function ir(g){var c;const E=g.getString("host");let $=g.getOptionalString("apiBaseUrl");const Pe=(c=g.getOptionalString("token"))==null?void 0:c.trim();let Be=g.getOptionalString("baseUrl");if($?$=(0,b.trimEnd)($,"/"):E===qa&&($=er),Be?Be=(0,b.trimEnd)(Be,"/"):Be=`https://${E}`,_(E)){if(!$||!de($))throw new Error(`Invalid GitLab integration config, '${$}' is not a valid apiBaseUrl`);if(!de(Be))throw new Error(`Invalid GitLab integration config, '${Be}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${E}' is not a valid host`);return{host:E,token:Pe,apiBaseUrl:$,baseUrl:Be}}function ar(g){const c=g.map(ir);return c.some(E=>E.host===qa)||c.push({host:qa,apiBaseUrl:er,baseUrl:`https://${qa}`}),c}function $e(g){let c="";return g.host!==qa&&(c=new URL(g.baseUrl).pathname),trimEnd(c,"/")}async function ce(g,c){const E=await Kn(g,c);return Rn(g,E,c).toString()}function lt(g){const{token:c=""}=g;return{headers:{"PRIVATE-TOKEN":c}}}function Rn(g,c,E){try{const $=new URL(g),Pe=$.pathname.split("/blob/").slice(1).join("/blob/"),[Be,...Pt]=Pe.split("/"),Wt=$e(E);return $.pathname=[...Wt?[Wt]:[],"api/v4/projects",c,"repository/files",encodeURIComponent(decodeURIComponent(Pt.join("/"))),"raw"].join("/"),$.search=`?ref=${Be}`,$}catch($){throw new Error(`Incorrect url: ${g}, ${$}`)}}async function Kn(g,c){const E=new URL(g);if(!E.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let $=E.pathname.split("/-/blob/")[0].split("/blob/")[0];const Pe=$e(c);Pe&&($=$.replace(Pe,""));const Be=new URL(`${E.origin}${Pe}/api/v4/projects/${encodeURIComponent($.replace(/^\//,""))}`),Pt=await fetch(Be.toString(),lt(c)),Wt=await Pt.json();if(!Pt.ok)throw new Error(`GitLab Error '${Wt.error}', ${Wt.error_description}`);return Number(Wt.id)}catch($){throw new Error(`Could not get GitLab project ID for: ${g}, ${$}`)}}var na=Object.defineProperty,aa=(g,c,E)=>c in g?na(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,Ea=(g,c,E)=>(aa(g,typeof c!="symbol"?c+"":c,E),E);const ba=class{constructor(c){this.integrationConfig=c}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return H(c)}resolveEditUrl(c){return Ta(c,"edit")}};Ea(ba,"factory",({config:g})=>{var c;const E=ar((c=g.getOptionalConfigArray("integrations.gitlab"))!=null?c:[]);return me(E.map($=>new ba($)),$=>$.config.host)});let wa=ba;function Ta(g,c){return g.replace(/\/\-\/(blob|tree|edit)\//,`/-/${c}/`)}var Ka=Object.defineProperty,dr=(g,c,E)=>c in g?Ka(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,ha=(g,c,E)=>(dr(g,typeof c!="symbol"?c+"":c,E),E);const za=class{constructor(c){this.token=c}async getCredentials(c){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};ha(za,"create",g=>new za(g.token));let Er=null;class sr{constructor(c){this.providers=c}static fromIntegrations(c){const E=new Map;return c.gitlab.list().forEach($=>{const Pe=Er.create($.config);E.set($.config.host,Pe)}),new sr(E)}async getCredentials(c){const E=new URL(c.url),$=this.providers.get(E.host);if(!$)throw new Error(`There is no GitLab integration that matches ${c.url}. Please add a configuration for an integration.`);return $.getCredentials(c)}}function $a(g){if(!g)return{};if(!g.has("clientEmail")&&!g.has("privateKey"))return{};const c=g.getString("privateKey").split("\\n").join(`
`);return{clientEmail:g.getString("clientEmail"),privateKey:c}}var Ar=Object.defineProperty,Zr=(g,c,E)=>c in g?Ar(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,Lr=(g,c,E)=>(Zr(g,typeof c!="symbol"?c+"":c,E),E);class Br{constructor(c){Lr(this,"byType"),this.byType=c}static fromConfig(c){return new Br({awsS3:M.factory({config:c}),awsCodeCommit:N.factory({config:c}),azure:Z.factory({config:c}),bitbucket:Et.factory({config:c}),bitbucketCloud:Ct.factory({config:c}),bitbucketServer:m.factory({config:c}),gerrit:fn.factory({config:c}),github:Sa.factory({config:c}),gitlab:wa.factory({config:c}),gitea:Ot.factory({config:c})})}get awsS3(){return this.byType.awsS3}get awsCodeCommit(){return this.byType.awsCodeCommit}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(c=>c.list())}byUrl(c){let E=Object.values(this.byType).map($=>$.byUrl(c)).filter(Boolean);if(E.length>1){const $=E.filter(Pe=>!(Pe instanceof Et));$.length!==0&&(E=$)}return E[0]}byHost(c){return Object.values(this.byType).map(E=>E.byHost(c)).find(Boolean)}resolveUrl(c){const E=this.byUrl(c.base);return E?E.resolveUrl(c):H(c)}resolveEditUrl(c){const E=this.byUrl(c);return E?E.resolveEditUrl(c):c}}},33861:(Tn,_t,e)=>{"use strict";e.d(_t,{a:()=>Q,b:()=>q,d:()=>dt,r:()=>r});var s=e(11638),l=e(5124),b=e(14041),A=e(22968),W=e(54917);const r=(0,s.HM)({id:"api-docs"}),q=(0,s.Il)({id:"register-component",optional:!0}),Q=(0,l.c)({id:"plugin.api-docs.config"}),t=b.lazy(()=>Promise.all([e.e(1072),e.e(2216),e.e(2589),e.e(4266)]).then(e.bind(e,84266)).then(z=>({default:z.AsyncApiDefinition}))),pe=z=>b.createElement(b.Suspense,{fallback:b.createElement(A.ke,null)},b.createElement(t,{...z})),_=b.lazy(()=>e.e(1346).then(e.bind(e,71346)).then(z=>({default:z.GraphQlDefinition}))),de=z=>b.createElement(b.Suspense,{fallback:b.createElement(A.ke,null)},b.createElement(_,{...z})),me=b.lazy(()=>Promise.all([e.e(1072),e.e(2216),e.e(4150)]).then(e.bind(e,64150)).then(z=>({default:z.OpenApiDefinition}))),H=z=>{var ee;const D=(ee=z.supportedSubmitMethods)==null?void 0:ee.map(w=>w.toLocaleLowerCase());return b.createElement(b.Suspense,{fallback:b.createElement(A.ke,null)},b.createElement(me,{...z,supportedSubmitMethods:D}))},xe=z=>{const ee=(0,W.A)();return b.createElement(A.z7,{customStyle:{backgroundColor:ee.palette.background.default},text:z.definition,language:"protobuf",showCopyCodeButton:!0})},ve=z=>{const{definition:ee}=z,D=(0,W.A)();return b.createElement(A.z7,{customStyle:{backgroundColor:D.palette.background.default},text:ee,language:"typescript",showCopyCodeButton:!0})};function dt(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:z=>b.createElement(H,{definition:z})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:z=>b.createElement(pe,{definition:z})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:z=>b.createElement(de,{definition:z})},{type:"grpc",title:"gRPC",component:z=>b.createElement(xe,{definition:z})},{type:"trpc",title:"tRPC",component:z=>b.createElement(ve,{definition:z})}]}},20440:(Tn,_t,e)=>{"use strict";e.d(_t,{Br:()=>q,Io:()=>pe,Rf:()=>W,Vw:()=>r,aR:()=>t,hR:()=>A,l:()=>_,pW:()=>Q});var s=e(33861),l=e(14041),b=e(11638);const A=(0,b.i1)({id:"api-docs",routes:{root:s.r},apis:[(0,b.bW)({api:s.a,deps:{},factory:()=>{const de=(0,s.d)();return{getApiDefinitionWidget:me=>de.find(H=>H.type===me.spec.type)}}})],externalRoutes:{registerApi:s.b}}),W=A.provide((0,b.QJ)({name:"ApiExplorerPage",component:()=>e.e(6017).then(e.bind(e,16017)).then(de=>de.ApiExplorerIndexPage),mountPoint:s.r})),r=A.provide((0,b.NC)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(8108).then(e.bind(e,98108)).then(de=>de.ApiDefinitionCard)}})),q=A.provide((0,b.NC)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(9721).then(e.bind(e,29721)).then(de=>de.ConsumedApisCard)}})),Q=A.provide((0,b.NC)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(8589).then(e.bind(e,8589)).then(de=>de.ConsumingComponentsCard)}})),t=A.provide((0,b.NC)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(9721).then(e.bind(e,29721)).then(de=>de.ProvidedApisCard)}})),pe=A.provide((0,b.NC)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(8589).then(e.bind(e,8589)).then(de=>de.ProvidingComponentsCard)}})),_=A.provide((0,b.NC)({name:"EntityHasApisCard",component:{lazy:()=>e.e(9721).then(e.bind(e,29721)).then(de=>de.HasApisCard)}}))},99993:(Tn,_t,e)=>{"use strict";e.d(_t,{C4:()=>A,Nf:()=>W,tS:()=>r});var s=e(50585);const l="catalog-entity",b=(0,s.iP)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:l}),A=(0,s.iP)({name:"catalog.entity.create",attributes:{action:"create"}}),W=(0,s.iP)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:l}),r=(0,s.iP)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:l}),q=(0,s.iP)({name:"catalog.location.read",attributes:{action:"read"}}),Q=(0,s.iP)({name:"catalog.location.create",attributes:{action:"create"}}),t=(0,s.iP)({name:"catalog.location.delete",attributes:{action:"delete"}}),pe=[b,A,W,r,q,Q,t]},6906:(Tn,_t,e)=>{"use strict";e.d(_t,{A:()=>w,D:()=>M,E:()=>Ne,a:()=>X,c:()=>ye});var s=e(29835),l=e(22968),b=e(11638),A=e(5124),W=e(78467),r=e(58837),q=e(54917),Q=e(53373),t=e.n(Q),pe=e(14041),_=e(22249),de=e(92651),me=e(10437),H=e(22771),xe=e(87290);const ve=(0,_.A)(N=>({text:{fill:N.palette.textContrast},secondary:{fill:N.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function dt({edge:{relations:N}}){const V=ve();return pe.createElement("text",{className:V.text,textAnchor:"middle"},N.map((ie,oe)=>pe.createElement("tspan",{key:ie,className:t()(oe>0&&V.secondary)},oe>0&&pe.createElement("tspan",null," / "),ie)))}function z({kind:N,...V}){var ie;const Ce=(ie=(0,b.nm)().getSystemIcon(`kind:${N.toLocaleLowerCase("en-US")}`))!=null?ie:me.A;return pe.createElement(Ce,{...V})}const ee=(0,r.A)(N=>({node:{fill:N.palette.grey[300],stroke:N.palette.grey[300],"&.primary":{fill:N.palette.primary.light,stroke:N.palette.primary.light},"&.secondary":{fill:N.palette.secondary.light,stroke:N.palette.secondary.light}},text:{fill:N.palette.getContrastText(N.palette.grey[300]),"&.primary":{fill:N.palette.primary.contrastText},"&.secondary":{fill:N.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function D({node:{id:N,entity:V,color:ie="default",focused:oe,onClick:Ce}}){const nt=ee(),[He,Xe]=(0,pe.useState)(0),[at,Ge]=(0,pe.useState)(0),Ye=(0,b.nm)(),Re=(0,pe.useRef)(null);(0,pe.useLayoutEffect)(()=>{if(Re.current){let{height:S,width:P}=Re.current.getBBox();S=Math.round(S),P=Math.round(P),(S!==at||P!==He)&&(Xe(P),Ge(S))}},[He,at]);const{kind:Le,metadata:{name:ct,namespace:vt=s.oQ,title:St}}=V,Jt=Ye.getSystemIcon(`kind:${Le.toLocaleLowerCase("en-US")}`),At=10,ue=at,ft=Jt?ue+At:0,xt=ft+He+At*2,gt=at+At*2,Nt=St!=null?St:Le&&ct&&vt?(0,de.SE)({kind:Le,name:ct,namespace:vt}):N;return pe.createElement("g",{onClick:Ce,className:t()(Ce&&nt.clickable)},pe.createElement("rect",{className:t()(nt.node,ie==="primary"&&"primary",ie==="secondary"&&"secondary"),width:xt,height:gt,rx:10}),Jt&&pe.createElement(z,{kind:Le,y:At,x:At,width:ue,height:ue,className:t()(nt.text,oe&&"focused",ie==="primary"&&"primary",ie==="secondary"&&"secondary")}),pe.createElement("text",{ref:Re,className:t()(nt.text,oe&&"focused",ie==="primary"&&"primary",ie==="secondary"&&"secondary"),y:gt/2,x:ft+(He+At*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Nt))}const w=[[s.L8,s.vv],[s.Ey,s.fO],[s.IB,s.ZD],[s.sA,s.jn],[s.Kx,s.Qz],[s.zj,s.u0],[s.nC,s.fT]];var M=(N=>(N.TOP_BOTTOM="TB",N.BOTTOM_TOP="BT",N.LEFT_RIGHT="LR",N.RIGHT_LEFT="RL",N))(M||{});function y(){const N=(0,A.u)(de.vp),V=(0,pe.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[ie,oe]=(0,pe.useState)({}),Ce=(0,pe.useCallback)(()=>{const{cachedEntities:Ye,requestedEntities:Re}=V.current,Le={};Re.forEach(ct=>{const vt=Ye.get(ct);vt&&(Le[ct]=vt)}),oe(Le)},[V,oe]),[nt,He]=(0,xe.A)(async()=>{const{requestedEntities:Ye,cachedEntities:Re}=V.current,Le=Array.from(Ye).filter(vt=>!Re.has(vt));if(Le.length===0){Ce();return}const{items:ct}=await N.getEntitiesByRefs({entityRefs:Le});ct.forEach(vt=>{if(vt){const St=(0,s.U2)(vt);Re.set(St,vt)}}),Ce()},[V,Ce]),{loading:Xe,error:at}=nt,Ge=(0,pe.useCallback)(Ye=>{const Re=new Set(Ye),{requestedEntities:Le}=V.current;(Re.size!==Le.size||Array.from(Re).some(ct=>!Le.has(ct)))&&(V.current.requestedEntities=Re,He(),Ce())},[V,He,Ce]);return{entities:ie,loading:Xe,error:at,requestEntities:Ge}}function v({rootEntityRefs:N,filter:{maxDepth:V=Number.POSITIVE_INFINITY,relations:ie,kinds:oe}={}}){const{entities:Ce,loading:nt,error:He,requestEntities:Xe}=y();return(0,pe.useEffect)(()=>{const at=new Set([...N]),Ge=new Set;let Ye=[...N],Re=0;for(;Ye.length>0&&(!isFinite(V)||Re<V);){const Le=Ye;for(Ye=[];Le.length>0;){const ct=Le.shift(),vt=Ce[ct];if(Ge.add(ct),vt&&vt.relations)for(const St of vt.relations)(!ie||ie.includes(St.type))&&(!oe||oe.some(Jt=>St.targetRef.startsWith(`${Jt.toLocaleLowerCase("en-US")}:`)))&&(Ge.has(St.targetRef)||(Ye.push(St.targetRef),at.add(St.targetRef)))}++Re}Xe([...at])},[Ce,N,V,ie,oe,Xe]),{entities:Ce,loading:nt,error:He}}function F({rootEntityRefs:N,maxDepth:V=Number.POSITIVE_INFINITY,unidirectional:ie=!0,mergeRelations:oe=!0,kinds:Ce,relations:nt,onNodeClick:He,relationPairs:Xe=w}){const[at,Ge]=(0,pe.useState)({}),{entities:Ye,loading:Re,error:Le}=v({rootEntityRefs:N,filter:{maxDepth:V,kinds:Ce,relations:nt}});return(0,H.A)(()=>{var ct;if(!Ye||Object.keys(Ye).length===0){Ge({});return}const vt=Object.entries(Ye).map(([ue,ft])=>{const xt=N.includes(ue),gt={id:ue,entity:ft,focused:xt,color:xt?"secondary":"primary",kind:ft.kind,name:ft.metadata.name,namespace:ft.metadata.namespace||s.oQ,title:ft.metadata.title,spec:ft.spec};return He&&(gt.onClick=Nt=>He(gt,Nt)),gt}),St=[],Jt=new Set,At=[...N];for(;At.length>0;){const ue=At.pop(),ft=Ye[ue];Jt.add(ue),ft&&((ct=ft==null?void 0:ft.relations)==null||ct.forEach(xt=>{var gt;if(Ye[xt.targetRef]&&!(nt&&!nt.includes(xt.type))&&!(Ce&&!Ce.some(Nt=>xt.targetRef.startsWith(`${Nt.toLocaleLowerCase("en-US")}:`)))){if(!ie||!Jt.has(xt.targetRef))if(oe){const Nt=(gt=Xe.find(([P,j])=>P===xt.type||j===xt.type))!=null?gt:[xt.type],[S]=Nt;St.push({from:S===xt.type?ue:xt.targetRef,to:S===xt.type?xt.targetRef:ue,relations:Nt,label:"visible"})}else St.push({from:ue,to:xt.targetRef,relations:[xt.type],label:"visible"});Jt.has(xt.targetRef)||(At.push(xt.targetRef),Jt.add(xt.targetRef))}}))}Ge({nodes:vt,edges:St})},100,[Ye,N,Ce,nt,ie,oe,He,Xe]),{loading:Re,error:Le,...at}}const re=(0,r.A)(N=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${N.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),Ne=N=>{const{rootEntityNames:V,maxDepth:ie=2,unidirectional:oe=!0,mergeRelations:Ce=!0,kinds:nt,relations:He,direction:Xe=M.LEFT_RIGHT,onNodeClick:at,relationPairs:Ge=w,className:Ye,zoom:Re="enabled",renderNode:Le,renderLabel:ct,curve:vt,showArrowHeads:St}=N,Jt=(0,q.A)(),At=re(),ue=(0,pe.useMemo)(()=>(Array.isArray(V)?V:[V]).map(P=>(0,s.U2)(P)),[V]),ft=(0,A.u)(A.r),{loading:xt,error:gt,nodes:Nt,edges:S}=F({rootEntityRefs:ue,maxDepth:ie,unidirectional:oe,mergeRelations:Ce,kinds:nt,relations:He,onNodeClick:at,relationPairs:Ge});return(0,pe.useEffect)(()=>{gt&&ft.post(gt)},[ft,gt]),pe.createElement("div",{className:t()(At.container,Ye)},xt&&pe.createElement(W.A,{className:At.progress}),Nt&&S&&pe.createElement(l.wB,{nodes:Nt,edges:S,renderNode:Le||D,renderLabel:ct||dt,direction:Xe,className:At.graph,paddingX:Jt.spacing(4),paddingY:Jt.spacing(4),labelPosition:l.DT.LabelPosition.RIGHT,labelOffset:Jt.spacing(1),zoom:Re,curve:vt,showArrowHeads:St}))},ye=(0,b.HM)({id:"catalog-graph"}),X=(0,b.Il)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0})},18638:(Tn,_t,e)=>{"use strict";e.d(_t,{N9:()=>Q,NW:()=>q});var s=e(6906),l=e(11638),b=e(53373),A=e.n(b),W=e(14041);const r=(0,l.i1)({id:"catalog-graph",routes:{catalogGraph:s.c},externalRoutes:{catalogEntity:s.a}}),q=r.provide((0,l.NC)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9957).then(e.bind(e,49957)).then(t=>t.CatalogGraphCard)}})),Q=r.provide((0,l.QJ)({name:"CatalogGraphPage",component:()=>e.e(6605).then(e.bind(e,6605)).then(t=>t.CatalogGraphPage),mountPoint:s.c}))},39327:(Tn,_t,e)=>{"use strict";e.d(_t,{C:()=>M,a:()=>pe,c:()=>w,d:()=>de,g:()=>me});var s=e(5124),l=e(11638),b=e(33478),A=e(92651),W=e(49863),r=e(93584),q=e(51419),Q=e(52536),t=e.n(Q);const pe=(0,s.c)({id:"plugin.catalog-import.service"}),_=(y,v)=>{const F=y.github.byUrl(v);if(!F)return;const{name:re,owner:Ne}=t()(v);return{repo:re,owner:Ne,githubIntegrationConfig:F.config}};function de(y){const{ref:v,...F}=y;return{inputRef:v,...F}}function me(y){var v;return(v=y.getOptionalString("catalog.import.entityFilename"))!=null?v:"catalog-info.yaml"}function H(y){var v;return(v=y.getOptionalString("catalog.import.pullRequestBranchName"))!=null?v:"backstage-integration"}var xe=Object.defineProperty,ve=(y,v,F)=>v in y?xe(y,v,{enumerable:!0,configurable:!0,writable:!0,value:F}):y[v]=F,dt=(y,v,F)=>(ve(y,typeof v!="symbol"?v+"":v,F),F);class z{constructor(v){dt(this,"discoveryApi"),dt(this,"identityApi"),dt(this,"scmAuthApi"),dt(this,"scmIntegrationsApi"),dt(this,"catalogApi"),dt(this,"configApi"),this.discoveryApi=v.discoveryApi,this.scmAuthApi=v.scmAuthApi,this.identityApi=v.identityApi,this.scmIntegrationsApi=v.scmIntegrationsApi,this.catalogApi=v.catalogApi,this.configApi=v.configApi}async analyzeUrl(v){var F;if(new URL(v).pathname.match(/\.ya?ml$/)||(F=new URL(v).searchParams.get("path"))!=null&&F.match(/.ya?ml$/)){const ye=await this.catalogApi.addLocation({type:"url",target:v,dryRun:!0});return{type:"locations",locations:[{exists:ye.exists,target:ye.location.target,entities:ye.entities.map(X=>{var N;return{kind:X.kind,namespace:(N=X.metadata.namespace)!=null?N:"default",name:X.metadata.name}})}]}}if(!_(this.scmIntegrationsApi,v)){const ye=this.scmIntegrationsApi.byUrl(v),X=me(this.configApi);throw ye?new Error(`The ${ye.title} integration only supports full URLs to ${X} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${X} file instead.`)}const Ne=await this.analyzeLocation({repo:v});if(Ne.existingEntityFiles.length>0){const ye=Ne.existingEntityFiles.reduce((X,N)=>{var V;return X[N.location.target]={target:N.location.target,exists:N.isRegistered,entities:[...N.location.target in X?X[N.location.target].entities:[],{name:N.entity.metadata.name,namespace:(V=N.entity.metadata.namespace)!=null?V:"default",kind:N.entity.kind}]},X},{});return{type:"locations",locations:Object.values(ye)}}return{type:"repository",integrationType:"github",url:v,generatedEntities:Ne.generateEntities.map(ye=>ye.entity)}}async preparePullRequest(){var v;const F=(v=this.configApi.getOptionalString("app.title"))!=null?v:"Backstage",re=this.configApi.getString("app.baseUrl");return{title:`Add ${me(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${F} software catalog](${re}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(v){const{repositoryUrl:F,fileContent:re,title:Ne,body:ye}=v,X=q.Ay.parse(re),N=await this.catalogApi.validateEntity(X,`url:${F}`);if(!N.valid)throw new Error(N.errors[0].message);const V=_(this.scmIntegrationsApi,F);if(V)return await this.submitGitHubPrToRepo({...V,repositoryUrl:F,fileContent:re,title:Ne,body:ye});throw new Error("unimplemented!")}async analyzeLocation(v){const{token:F}=await this.identityApi.getCredentials(),re=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...F&&{Authorization:`Bearer ${F}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:v.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(ye=>{throw new Error(`Failed to generate entity definitions, ${ye.message}`)});if(!re.ok)throw new Error(`Failed to generate entity definitions. Received http response ${re.status}: ${re.statusText}`);return await re.json()}async submitGitHubPrToRepo(v){const{owner:F,repo:re,title:Ne,body:ye,fileContent:X,repositoryUrl:N,githubIntegrationConfig:V}=v,{token:ie}=await this.scmAuthApi.getCredentials({url:N,additionalScope:{repoWrite:!0}}),oe=new W.E({auth:ie,baseUrl:V.apiBaseUrl}),Ce=H(this.configApi),nt=me(this.configApi),He=await oe.repos.get({owner:F,repo:re}).catch(Ge=>{throw new Error(ee("Couldn't fetch repo data",Ge))}),Xe=await oe.git.getRef({owner:F,repo:re,ref:`heads/${He.data.default_branch}`}).catch(Ge=>{throw new Error(ee("Couldn't fetch default branch data",Ge))});return await oe.git.createRef({owner:F,repo:re,ref:`refs/heads/${Ce}`,sha:Xe.data.object.sha}).catch(Ge=>{throw new Error(ee(`Couldn't create a new branch with name '${Ce}'`,Ge))}),await oe.repos.createOrUpdateFileContents({owner:F,repo:re,path:nt,message:Ne,content:r.o4.encode(X),branch:Ce}).catch(Ge=>{throw new Error(ee(`Couldn't create a commit with ${nt} file added`,Ge))}),{link:(await oe.pulls.create({owner:F,repo:re,title:Ne,head:Ce,body:ye,base:He.data.default_branch}).catch(Ge=>{throw new Error(ee(`Couldn't create a pull request for ${Ce} branch`,Ge))})).data.html_url,location:`https://${V.host}/${F}/${re}/blob/${He.data.default_branch}/${nt}`}}}function ee(y,v){return`${y}, received http response status code ${v.status}: ${v.message}`}const D=(0,l.HM)({id:"catalog-import"}),w=(0,l.i1)({id:"catalog-import",apis:[(0,l.bW)({api:pe,deps:{discoveryApi:s.q,scmAuthApi:b.$J,identityApi:s.t,scmIntegrationsApi:b.YT,catalogApi:A.vp,configApi:s.p},factory:({discoveryApi:y,scmAuthApi:v,identityApi:F,scmIntegrationsApi:re,catalogApi:Ne,configApi:ye})=>new z({discoveryApi:y,scmAuthApi:v,scmIntegrationsApi:re,identityApi:F,catalogApi:Ne,configApi:ye})})],routes:{importPage:D}}),M=w.provide((0,l.QJ)({name:"CatalogImportPage",component:()=>e.e(5383).then(e.bind(e,35383)).then(y=>y.ImportPage),mountPoint:D}))},90749:(Tn,_t,e)=>{"use strict";e.d(_t,{Az:()=>Hn});var s=e(97388),l=e(14041),b=e(5124),A=e(11638),W=e(46195),r=e(63177);const q=(0,s.tK)("analytics-context"),Q=()=>{const m=useContext(q);if(m===void 0)return{pluginId:"app",extensionId:"app"};const R=m.atVersion(1);if(R===void 0)throw new Error("No context found for version 1.");return R},t=m=>{const{attributes:R,children:K}=m,I={...Q(),...R},U=createVersionedValueMap({1:I});return React.createElement(q.Provider,{value:U},K)},pe=(0,b.c)({id:"core.app-tree"}),_=(0,b.c)({id:"core.components"});function de(m){return(0,b.u)(_).getComponent(m)}const me=(0,b.c)({id:"core.icons"}),H=(0,b.c)({id:"core.route-resolution"}),xe=(0,b.c)({id:"core.analytics"}),ve=(0,s.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),dt="_ROUTABLE-EXTENSION-RENDERED";class z{constructor(R,K={pluginId:"root",extensionId:"App"}){this.analyticsApi=R,this.context=K,ve.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{ve.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...ve.mostRecentGatheredNavigation,...ve.mostRecentRoutableExtensionRender}),ve.mostRecentGatheredNavigation=void 0,ve.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),ve.beforeUnloadRegistered=!0)}setContext(R){this.context=R}captureEvent(R,K,{value:le,attributes:I}={}){const U=this.context;if(R===dt){ve.mostRecentGatheredNavigation&&(ve.mostRecentRoutableExtensionRender={context:{...U,extensionId:"App"}});return}if(ve.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...ve.mostRecentGatheredNavigation,...ve.mostRecentRoutableExtensionRender})}catch(J){console.warn("Error during analytics event capture. %o",J)}ve.mostRecentGatheredNavigation=void 0,ve.mostRecentRoutableExtensionRender=void 0}if(R==="navigate"&&U.pluginId==="root"){ve.mostRecentGatheredNavigation={action:R,subject:K,value:le,attributes:I,context:U};return}try{this.analyticsApi.captureEvent({action:R,subject:K,value:le,attributes:I,context:U})}catch(J){console.warn("Error during analytics event capture. %o",J)}}}function ee(){try{return useApi(xe)}catch(m){if(m.name==="NotImplementedError")return{captureEvent:()=>{}};throw m}}function D(){const m=useRef(null),R=Q(),K=ee();function le(){return m.current===null&&(m.current=new z(K)),m.current}const I=le();return I.setContext(R),I}var w=Object.defineProperty,M=(m,R,K)=>R in m?w(m,R,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[R]=K,y=(m,R,K)=>(M(m,typeof R!="symbol"?R+"":R,K),K);class v extends l.Component{constructor(){super(...arguments),y(this,"state",{error:void 0}),y(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(R){return{error:R}}render(){const{error:R}=this.state,{plugin:K,children:le,Fallback:I}=this.props;return R?l.createElement(I,{plugin:K,error:R,resetError:this.handleErrorReset}):le}}(0,s.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const F="_ROUTABLE-EXTENSION-RENDERED";function re(m){const{id:R}=m;return{id:R,toString(){return`ComponentRef{id=${R}}`}}}const Ne=re({id:"core.components.progress"}),ye=re({id:"core.components.notFoundErrorPage"}),X=re({id:"core.components.errorBoundaryFallback"}),N={progress:Ne,notFoundErrorPage:ye,errorBoundaryFallback:X},V=m=>{const{disableTracking:R,children:K}=m,le=(0,A.st)();return(0,l.useEffect)(()=>{R||le.captureEvent(F,"")},[le,R]),l.createElement(l.Fragment,null,K)};function ie(m){var R,K;const{node:le,routable:I,children:U}=m,J=le.spec.source,we=de(N.progress),Oe=de(N.errorBoundaryFallback),st={extensionId:le.spec.id,pluginId:(K=(R=le.spec.source)==null?void 0:R.id)!=null?K:"app"};return l.createElement(l.Suspense,{fallback:l.createElement(we,null)},l.createElement(v,{plugin:J,Fallback:Oe},l.createElement(A.Ig,{attributes:st},l.createElement(V,{disableTracking:!I},U))))}function oe(m){return{id:m,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}},toString(){const R=!!this.config.optional;return`ExtensionDataRef{id=${m},optional=${R}}`}}}const Ce={reactElement:oe("core.reactElement"),routePath:oe("core.routing.path"),routeRef:oe("core.routing.ref")};function nt(m){const R=m;if(R.$$type!=="@backstage/ExtensionDefinition")throw new Error(`Invalid extension definition instance, bad type '${R.$$type}'`);if(R.version!=="v1")throw new Error(`Invalid extension definition instance, bad version '${R.version}'`);return R}function He(m){var R,K;return{$$type:"@backstage/ExtensionDefinition",version:"v1",kind:m.kind,namespace:m.namespace,name:m.name,attachTo:m.attachTo,disabled:(R=m.disabled)!=null?R:!1,inputs:(K=m.inputs)!=null?K:{},output:m.output,configSchema:m.configSchema,factory({inputs:le,...I}){return m.factory({inputs:le,...I})},toString(){const le=[];return m.kind&&le.push(`kind=${m.kind}`),m.namespace&&le.push(`namespace=${m.namespace}`),m.name&&le.push(`name=${m.name}`),le.push(`attachTo=${m.attachTo.id}@${m.attachTo.input}`),`ExtensionDefinition{${le.join(",")}}`}}}function Xe(m,R){return{$$type:"@backstage/ExtensionInput",extensionData:m,config:{singleton:!!(R!=null&&R.singleton),optional:!!(R!=null&&R.optional)}}}function at(m,R){var K;const le=nt(m),{name:I,kind:U,namespace:J,...we}=le,Oe=(K=le.namespace)!=null?K:R==null?void 0:R.namespace,st=I&&Oe?`${Oe}/${I}`:Oe||I;if(!st)throw new Error(`Extension must declare an explicit namespace or name as it could not be resolved from context, kind=${U} namespace=${Oe} name=${I}`);const Rt=U?`${U}:${st}`:st;return{...we,$$type:"@backstage/Extension",version:"v1",id:Rt,toString(){return`Extension{id=${Rt}}`}}}function Ge(m){var R,K,le,I;const U=((R=m.extensions)!=null?R:[]).map(we=>at(we,{namespace:m.id})),J=U.map(we=>we.id);if(J.length!==new Set(J).size){const we=Array.from(new Set(J.filter((Oe,st)=>J.indexOf(Oe)!==st)));throw new Error(`Plugin '${m.id}' provided duplicate extensions: ${we.join(", ")}`)}return{$$type:"@backstage/BackstagePlugin",version:"v1",id:m.id,routes:(K=m.routes)!=null?K:{},externalRoutes:(le=m.externalRoutes)!=null?le:{},featureFlags:(I=m.featureFlags)!=null?I:[],extensions:U,toString(){return`Plugin{id=${m.id}}`}}}function Ye(m){var R;const K=m.extensions.map(I=>at(I)),le=(R=m.featureFlags)!=null?R:[];return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:K,featureFlags:le,toString(){const I=K.map(String).join(","),U=le.map(J=>J.name).join(",");return`ExtensionOverrides{extensions=[${I}],featureFlags=[${U}]}`}}}function Re(m){const{factory:R,configSchema:K,inputs:le}=m,I="api"in m?m.api:R.api;return He({kind:"api",namespace:I.id,attachTo:{id:"app",input:"apis"},inputs:le,configSchema:K,output:{api:Re.factoryDataRef},factory({config:U,inputs:J}){return typeof R=="function"?{api:R({config:U,inputs:J})}:{api:R}}})}(m=>{m.factoryDataRef=oe("core.api.factory")})(Re||(Re={}));function Le(m){var R;return He({kind:"app-root-element",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/root",input:"elements"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{element:Ce.reactElement},factory({inputs:K,config:le}){return{element:typeof m.element=="function"?m.element({inputs:K,config:le}):m.element}}})}function ct(m){var R;return He({kind:"app-root-wrapper",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/root",input:"wrappers"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{component:ct.componentDataRef},factory({inputs:K,config:le}){return{component:U=>l.createElement(m.Component,{inputs:K,config:le},U.children)}}})}(m=>{m.componentDataRef=oe("app.root.wrapper")})(ct||(ct={}));function vt(m){var R;return He({kind:"app-router-component",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/root",input:"router"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{component:vt.componentDataRef},factory({inputs:K,config:le}){return{component:U=>l.createElement(m.Component,{inputs:K,config:le},U.children)}}})}(m=>{m.componentDataRef=oe("app.router.wrapper")})(vt||(vt={}));function St(m){const R=m(W.z);return{parse:K=>{const le=R.safeParse(K);if(le.success)return le.data;throw new Error(le.error.issues.map(Jt).join("; "))},schema:(0,r.Ay)(R)}}function Jt(m){if(m.code==="invalid_union")return Jt(m.unionErrors[0].issues[0]);let R=m.message;return R==="Required"&&(R="Missing required value"),m.path.length&&(R+=` at '${m.path.join(".")}'`),R}function At(m){var R;const K="configSchema"in m?m.configSchema:St(le=>le.object({path:le.string().default(m.defaultPath)}));return He({kind:"page",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/routes",input:"routes"},configSchema:K,inputs:m.inputs,disabled:m.disabled,output:{element:Ce.reactElement,path:Ce.routePath,routeRef:Ce.routeRef.optional()},factory({config:le,inputs:I,node:U}){const J=lazy(()=>m.loader({config:le,inputs:I}).then(we=>({default:()=>we})));return{path:le.path,routeRef:m.routeRef,element:React.createElement(ie,{node:U,routable:!0},React.createElement(J,null))}}})}function ue(m){const{routeRef:R,title:K,icon:le,namespace:I,name:U}=m;return He({namespace:I,name:U,kind:"nav-item",attachTo:{id:"app/nav",input:"items"},configSchema:St(J=>J.object({title:J.string().default(K)})),output:{navTarget:ue.targetDataRef},factory:({config:J})=>({navTarget:{title:J.title,icon:le,routeRef:R}})})}(m=>{m.targetDataRef=oe("core.nav-item.target")})(ue||(ue={}));function ft(m){const{logoIcon:R,logoFull:K}=m;return He({kind:"nav-logo",name:m==null?void 0:m.name,namespace:m==null?void 0:m.namespace,attachTo:{id:"app/nav",input:"logos"},output:{logos:ft.logoElementsDataRef},factory:()=>({logos:{logoIcon:R,logoFull:K}})})}(m=>{m.logoElementsDataRef=oe("core.nav-logo.logo-elements")})(ft||(ft={}));function xt(m){var R;return He({kind:"sign-in-page",namespace:m==null?void 0:m.namespace,name:m==null?void 0:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/root",input:"signInPage"},configSchema:m.configSchema,inputs:m.inputs,disabled:m.disabled,output:{component:xt.componentDataRef},factory({config:K,inputs:le,node:I}){const U=(0,l.lazy)(()=>m.loader({config:K,inputs:le}).then(J=>({default:J})));return{component:J=>l.createElement(ie,{node:I,routable:!0},l.createElement(U,{...J}))}}})}(m=>{m.componentDataRef=oe("core.sign-in-page.component")})(xt||(xt={}));function gt(m){return He({kind:"theme",namespace:"app",name:m.id,attachTo:{id:"app",input:"themes"},output:{theme:gt.themeDataRef},factory:()=>({theme:m})})}(m=>{m.themeDataRef=oe("core.theme.theme")})(gt||(gt={}));function Nt(m){return He({kind:"component",namespace:m.ref.id,name:m.name,attachTo:{id:"app",input:"components"},inputs:m.inputs,disabled:m.disabled,configSchema:m.configSchema,output:{component:Nt.componentDataRef},factory({config:R,inputs:K}){if("sync"in m.loader)return{component:{ref:m.ref,impl:m.loader.sync({config:R,inputs:K})}};const le=m.loader.lazy,I=(0,l.lazy)(()=>le({config:R,inputs:K}).then(U=>({default:U})));return{component:{ref:m.ref,impl:I}}}})}(m=>{m.componentDataRef=oe("core.component.component")})(Nt||(Nt={}));function S(m){return He({kind:"translation",namespace:m.resource.id,name:m.name,attachTo:{id:"app",input:"translations"},output:{resource:S.translationDataRef},factory:()=>({resource:m.resource})})}(m=>{m.translationDataRef=oe("core.translation.translation")})(S||(S={}));const P="eHgtF5hmbrXyiEvo";function j(m=Error){const{stack:R}=new m(P);if(!R)return"<unknown>";const K=R.includes(P)?R.indexOf(`
`)+1:0,le=R.indexOf(`
`,R.indexOf(`
`,K)+1)+1,I=R.indexOf(`
`,le),U=R.substring(le,I).trim();return U?U.includes("(")?U.substring(U.indexOf("(")+1,U.indexOf(")")):U.includes("@")?U.substring(U.indexOf("@")+1):U:"unknown"}var Z=Object.defineProperty,Te=(m,R,K)=>R in m?Z(m,R,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[R]=K,Ke=(m,R,K)=>(Te(m,typeof R!="symbol"?R+"":R,K),K),mt=(m,R,K)=>{if(!R.has(m))throw TypeError("Cannot "+K)},Je=(m,R,K)=>(mt(m,R,"read from private field"),K?K.call(m):R.get(m)),qe=(m,R,K)=>{if(R.has(m))throw TypeError("Cannot add the same private member more than once");R instanceof WeakSet?R.add(m):R.set(m,K)},Ut=(m,R,K,le)=>(mt(m,R,"write to private field"),le?le.call(m,K):R.set(m,K),K),nn,It,ht,Zt,ln;function on(m){const R=m;if(R.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${R.$$type}'`);return R}class Qt{constructor(R=[],K){this.params=R,qe(this,Zt),Ke(this,"$$type","@backstage/RouteRef"),Ke(this,"version","v1"),qe(this,nn,void 0),qe(this,It,void 0),qe(this,ht,void 0),Ut(this,It,R),Ut(this,ht,K)}getParams(){return Je(this,It)}getDescription(){return Je(this,nn)?Je(this,nn):`created at '${Je(this,ht)}'`}setId(R){if(!R)throw new Error(`${Je(this,Zt,ln)} id must be a non-empty string`);if(Je(this,nn))throw new Error(`${Je(this,Zt,ln)} was referenced twice as both '${Je(this,nn)}' and '${R}'`);Ut(this,nn,R)}toString(){return`${Je(this,Zt,ln)}{${this.getDescription()}}`}}nn=new WeakMap,It=new WeakMap,ht=new WeakMap,Zt=new WeakSet,ln=function(){return this.$$type.slice(11)};function Ae(m){return new Qt(m==null?void 0:m.params,j())}var Ve=Object.defineProperty,jt=(m,R,K)=>R in m?Ve(m,R,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[R]=K,zt=(m,R,K)=>(jt(m,typeof R!="symbol"?R+"":R,K),K),Kt=(m,R,K)=>{if(!R.has(m))throw TypeError("Cannot "+K)},Et=(m,R,K)=>(Kt(m,R,"read from private field"),K?K.call(m):R.get(m)),xn=(m,R,K)=>{if(R.has(m))throw TypeError("Cannot add the same private member more than once");R instanceof WeakSet?R.add(m):R.set(m,K)},dn=(m,R,K,le)=>(Kt(m,R,"write to private field"),le?le.call(m,K):R.set(m,K),K),Xt,yn;const Qe=/^\w+$/;class pt{constructor(R,K,le){this.path=R,zt(this,"$$type","@backstage/SubRouteRef"),zt(this,"version","v1"),xn(this,Xt,void 0),xn(this,yn,void 0),dn(this,Xt,K),dn(this,yn,le)}getParams(){return Et(this,Xt)}getParent(){return Et(this,yn)}getDescription(){const R=on(Et(this,yn));return`at ${this.path} with parent ${R.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}Xt=new WeakMap,yn=new WeakMap;function Dt(m){const{path:R,parent:K}=m,I=on(K).getParams(),U=R.split("/").filter(Oe=>Oe.startsWith(":")).map(Oe=>Oe.substring(1)),J=[...I,...U];if(I.some(Oe=>U.includes(Oe)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!R.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${R}'`);if(R.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${R}'`);for(const Oe of U)if(!Qe.test(Oe))throw new Error(`SubRouteRef path has invalid param, got '${Oe}'`);return new pt(R,J,K)}var it=Object.defineProperty,Ze=(m,R,K)=>R in m?it(m,R,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[R]=K,Y=(m,R,K)=>(Ze(m,typeof R!="symbol"?R+"":R,K),K);class he extends Qt{constructor(R,K=[],le,I){super(K,I),this.optional=R,this.params=K,this.defaultTarget=le,Y(this,"$$type","@backstage/ExternalRouteRef")}getDefaultTarget(){return this.defaultTarget}}function fe(m){return new he(!!(m!=null&&m.optional),m==null?void 0:m.params,m==null?void 0:m.defaultTarget,j())}function Ct(m){const{pathname:R}=useLocation(),K=useApi(H),le=useMemo(()=>K.resolve(m,{sourcePath:R}),[K,m,R]),I="optional"in m&&m.optional;if(!le&&!I)throw new Error(`No path for ${m}`);return le}function Ft(m){return useParams()}var cn=e(29835),An=e(17899),In=e(2069);function Bn(m,R){const K=new Set([...getEntityRelations(m,RELATION_MEMBER_OF,{kind:"group"}),...m?[getCompoundEntityRef(m)]:[]].map(stringifyEntityRef)),le=getEntityRelations(R,RELATION_OWNED_BY).map(stringifyEntityRef);for(const I of le)if(K.has(I))return!0;return!1}function Hn(m){const{entity:R,loading:K,error:le}=(0,In.a)(),{allowed:I,loading:U,error:J}=(0,An.JT)({permission:m,resourceRef:R?(0,cn.U2)(R):void 0});return K||U?{loading:!0,allowed:!1}:le?{loading:!1,allowed:!1,error:le}:{loading:!1,allowed:I,error:J}}const Cn={entityContentTitle:oe("catalog.entity-content-title"),entityFilterFunction:oe("catalog.entity-filter-function"),entityFilterExpression:oe("catalog.entity-filter-expression")};function Vn(m){var R,K;const le="configSchema"in m?m.configSchema:createSchemaFromZod(I=>I.object({filter:I.string().optional()}));return createExtension({kind:"entity-card",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"entity-content:catalog/overview",input:"cards"},disabled:(K=m.disabled)!=null?K:!0,output:{element:coreExtensionData.reactElement,filterFunction:Cn.entityFilterFunction.optional(),filterExpression:Cn.entityFilterExpression.optional()},inputs:m.inputs,configSchema:le,factory({config:I,inputs:U,node:J}){const we=lazy(()=>m.loader({inputs:U,config:I}).then(Oe=>({default:()=>Oe})));return{element:React.createElement(ExtensionBoundary,{node:J},React.createElement(we,null)),...ut({config:I,options:m})}}})}function ua(m){var R,K;return createExtension({kind:"entity-content",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"page:catalog/entity",input:"contents"},disabled:(K=m.disabled)!=null?K:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:Cn.entityContentTitle,filterFunction:Cn.entityFilterFunction.optional(),filterExpression:Cn.entityFilterExpression.optional()},inputs:m.inputs,configSchema:createSchemaFromZod(le=>le.object({path:le.string().default(m.defaultPath),title:le.string().default(m.defaultTitle),filter:le.string().optional()})),factory({config:le,inputs:I,node:U}){const J=lazy(()=>m.loader({inputs:I}).then(we=>({default:()=>we})));return{path:le.path,title:le.title,routeRef:m.routeRef,element:React.createElement(ExtensionBoundary,{node:U,routable:!0},React.createElement(J,null)),...ut({config:le,options:m})}}})}function ut(m){const{options:R,config:K}=m;return K.filter?{filterExpression:K.filter}:typeof R.filter=="string"?{filterExpression:R.filter}:typeof R.filter=="function"?{filterFunction:R.filter}:{}}},2069:(Tn,_t,e)=>{"use strict";e.d(_t,{A:()=>q,a:()=>pe,g:()=>W,u:()=>t});var s=e(29835),l=e(11638),b=e(97388),A=e(14041);function W(_,de,me){var H;let xe=((H=_==null?void 0:_.relations)==null?void 0:H.filter(ve=>ve.type===de).map(ve=>(0,s.KU)(ve.targetRef)))||[];return me!=null&&me.kind&&(xe=xe.filter(ve=>ve.kind.toLocaleLowerCase("en-US")===me.kind.toLocaleLowerCase("en-US"))),xe}const r=(0,b.tK)("entity-context"),q=_=>{const{children:de,entity:me,loading:H,error:xe,refresh:ve}=_,dt={entity:me,loading:H,error:xe,refresh:ve};return A.createElement(r.Provider,{value:(0,b.Bl)({1:dt})},A.createElement(l.Ig,{attributes:{...me?{entityRef:(0,s.U2)(me)}:void 0}},de))},Q=_=>React.createElement(q,{entity:_.entity,loading:!_.entity,error:void 0,refresh:void 0,children:_.children});function t(){const _=(0,b.qO)("entity-context");if(!_)throw new Error("Entity context is not available");const de=_.atVersion(1);if(!de)throw new Error("EntityContext v1 not available");if(!de.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:de.entity}}function pe(){const _=(0,b.qO)("entity-context");if(!_)throw new Error("Entity context is not available");const de=_.atVersion(1);if(!de)throw new Error("EntityContext v1 not available");const{entity:me,loading:H,error:xe,refresh:ve}=de;return{entity:me,loading:H,error:xe,refresh:ve}}},92651:(Tn,_t,e)=>{"use strict";e.d(_t,{B9:()=>bn,Cr:()=>J,EH:()=>En,GI:()=>R,IT:()=>ya,Id:()=>Qr,QD:()=>er,SE:()=>tn,Tj:()=>Ct,WI:()=>Lt,ah:()=>Bn,d5:()=>Ea,iI:()=>dr,jF:()=>Vt,lD:()=>Br,mM:()=>G,mb:()=>wt,mo:()=>qa,nK:()=>fn,nQ:()=>fe,o9:()=>Mr,qq:()=>Ir,rd:()=>na,s8:()=>Pe,sF:()=>ba,t3:()=>Ya,uR:()=>Pt,vp:()=>he,y2:()=>Kn,zI:()=>Ta});var s=e(5124),l=e(11638),b=e(29835),A=e(46123),W=e.n(A),r=e(14041),q=e(96403),Q=e.n(q),t=e(77125),pe=e(64947),_=e(73845),de=e(42899),me=e(72501),H=e(5893),xe=e(54917),ve=e(58837),dt=e(7031),z=e(65859),ee=e(22968),D=e(2069),w=e(45250),M=e.n(w),y=e(45810),v=e.n(y),F=e(18690),re=e(87290),Ne=e(22771),ye=e(71581),X=e(73466),N=e(46343),V=e.n(N),ie=e(40074),oe=e.n(ie),Ce=e(11746),nt=e(6924),He=e(20577),Xe=e(69076),at=e(86901),Ge=e(44148),Ye=e(41260),Re=e(16249),Le=e(53373),ct=e.n(Le),vt=e(71677),St=e(76842),Jt=e(92367),At=e(48108),ue=e(47966),ft=e(40703),xt=e(58007),gt=e(46423),Nt=e(65569),S=e(5951),P=e(26343),j=e(9684),Z=e(80109),Te=e(48899),Ke=e(97388),mt=e(48653),Je=e(29365),qe=e(95061),Ut=e(63301),nn=e(34839),It=e(75173),ht=e(64704),Zt=e(45917),ln=e(16983),on=e(15303),Qt=e(76891),Ae=e(93453),Ve=e(46805),jt=e(61477),zt=e(38605),Kt=e(31653),Et=e(59461),xn=e(10437),dn=e(8109),Xt=e(74219),yn=e(62261),Qe=e(97262),pt=e(87809),Dt=e.n(pt),it=e(51419),Ze=e(37197),Y=e(3399);const he=(0,s.c)({id:"plugin.catalog.service"}),fe=(0,s.c)({id:"plugin.catalog.entity-presentation"});function Ct(f,O){const{kind:x,namespace:B,name:ae,title:Se,description:_e,displayName:De,type:rt}=Ft(f),Mt=(0,b.U2)({kind:x||"unknown",namespace:B||b.oQ,name:ae||"unknown"}),Tt=cn({kind:x,namespace:B,name:ae,context:O}),an=[De,Se,Tt].find(sn=>sn&&typeof sn=="string"),gn=[an!==Mt?Mt:void 0,rt,_e].filter(sn=>sn&&typeof sn=="string").join(" | ");return{entityRef:Mt,primaryTitle:an,secondaryTitle:gn||void 0,Icon:void 0}}function Ft(f){if(typeof f=="string"){let O=f.indexOf(":");const x=f.indexOf("/");x!==-1&&x<O&&(O=-1);const B=O===-1?void 0:f.slice(0,O),ae=x===-1?void 0:f.slice(O+1,x),Se=f.slice(Math.max(O+1,x+1));return{kind:B,namespace:ae,name:Se}}if(typeof f=="object"&&f!==null){const O=[W()(f,"kind")].find(rt=>rt&&typeof rt=="string"),x=[W()(f,"metadata.namespace"),W()(f,"namespace")].find(rt=>rt&&typeof rt=="string"),B=[W()(f,"metadata.name"),W()(f,"name")].find(rt=>rt&&typeof rt=="string"),ae=[W()(f,"metadata.title")].find(rt=>rt&&typeof rt=="string"),Se=[W()(f,"metadata.description")].find(rt=>rt&&typeof rt=="string"),_e=[W()(f,"spec.profile.displayName")].find(rt=>rt&&typeof rt=="string"),De=[W()(f,"spec.type")].find(rt=>rt&&typeof rt=="string");return{kind:O,namespace:x,name:B,title:ae,description:Se,displayName:_e,type:De}}return{}}function cn(f){var O,x,B,ae,Se;const _e=((O=f.kind)==null?void 0:O.toLocaleLowerCase("en-US"))||"unknown",De=f.namespace||b.oQ,rt=f.name||"unknown",Mt=(B=(x=f.context)==null?void 0:x.defaultKind)==null?void 0:B.toLocaleLowerCase("en-US"),Tt=(Se=(ae=f.context)==null?void 0:ae.defaultNamespace)==null?void 0:Se.toLocaleLowerCase("en-US");let an=rt;return(Tt&&De.toLocaleLowerCase("en-US")!==Tt||De!==b.oQ)&&(an=`${De}/${an}`),Mt&&_e.toLocaleLowerCase("en-US")!==Mt&&(an=`${_e}:${an}`),an}function An(f,O,x){const[B,ae]=(0,r.useState)(f);return(0,r.useEffect)(()=>{ae(f);const Se=O==null?void 0:O.subscribe({next:_e=>{ae(_e)},complete:()=>{Se==null||Se.unsubscribe()}});return()=>{Se==null||Se.unsubscribe()}},x),B}function In(f,O){const B=(0,s.b)().get(fe),ae=[B,JSON.stringify(f),JSON.stringify(O||null)],Se=(0,r.useMemo)(()=>B?B.forEntity(typeof f=="string"||"metadata"in f?f:(0,b.U2)(f),O):{snapshot:Ct(f,O)},ae);return An(Se.snapshot,Se.update$,[Se])}const Bn=(0,s.c)({id:"catalog-react.starred-entities"});var Hn=Object.defineProperty,Cn=(f,O,x)=>O in f?Hn(f,O,{enumerable:!0,configurable:!0,writable:!0,value:x}):f[O]=x,Vn=(f,O,x)=>(Cn(f,typeof O!="symbol"?O+"":O,x),x);class ua{constructor(){Vn(this,"starredEntities",new Set),Vn(this,"subscribers",new Set),Vn(this,"observable",new ObservableImpl(O=>(O.next(new Set(this.starredEntities)),this.subscribers.add(O),()=>{this.subscribers.delete(O)})))}async toggleStarred(O){this.starredEntities.delete(O)||this.starredEntities.add(O);for(const x of this.subscribers)x.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const ut=f=>{var O,x;const B=(0,H.A)(De=>{var rt,Mt;return De.breakpoints.down((Mt=(rt=f.options)==null?void 0:rt.drawerBreakpoint)!=null?Mt:"md")}),ae=(0,xe.A)(),[Se,_e]=(0,r.useState)(!1);return B?r.createElement(r.Fragment,null,r.createElement(pe.A,{style:{marginTop:ae.spacing(1),marginLeft:ae.spacing(1)},onClick:()=>_e(!0),startIcon:r.createElement(z.A,null)},"Filters"),r.createElement(_.Ay,{open:Se,onClose:()=>_e(!1),anchor:(x=(O=f.options)==null?void 0:O.drawerAnchor)!=null?x:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},r.createElement(t.A,{m:2},r.createElement(me.A,{variant:"h6",component:"h2",style:{marginBottom:ae.spacing(1)}},"Filters"),f.children))):r.createElement(de.A,{item:!0,lg:2},f.children)},m=f=>r.createElement(de.A,{item:!0,xs:12,lg:10},f.children),R=f=>r.createElement(de.A,{container:!0,style:{position:"relative"}},f.children);R.Filters=ut,R.Content=m;function K(f){return!!f.getFullTextFilters}function le(f){var O;const x=f.reduce((ae,Se)=>({...ae,...Se.getCatalogFilters?Se.getCatalogFilters():{}}),{}),B=(O=f.find(K))==null?void 0:O.getFullTextFilters();return{filter:x,fullTextFilter:B}}function I(f){const O={};return f.forEach(x=>{var B;x instanceof en||x instanceof pn||x instanceof $t||x instanceof Pn||x instanceof un||x instanceof qn||x instanceof hn||x instanceof Un||Object.assign(O,((B=x.getCatalogFilters)==null?void 0:B.call(x))||{})}),O}function U(f){return O=>f.every(x=>!x.filterEntity||x.filterEntity(O))}function J(f,O){var x;const B=(x=f.metadata.annotations)==null?void 0:x[b.I4];if(B)try{const ae=(0,b.aY)(B),Se=O.byUrl(ae.target);return{locationTargetUrl:ae.target,integrationType:Se==null?void 0:Se.type}}catch{return}}var we=Object.defineProperty,Oe=(f,O,x)=>O in f?we(f,O,{enumerable:!0,configurable:!0,writable:!0,value:x}):f[O]=x,st=(f,O,x)=>(Oe(f,typeof O!="symbol"?O+"":O,x),x);class Rt{constructor(O){this.value=O}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class qt{constructor(O){this.value=O}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class en{constructor(O){this.values=O}filterEntity(O){return this.values.every(x=>{var B;return((B=O.metadata.tags)!=null?B:[]).includes(x)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class hn{constructor(O){this.value=O}filterEntity(O){const x=this.toUpperArray(this.value.split(/\s/)),B=this.toUpperArray([O.metadata.tags]),ae=this.toUpperArray([O.metadata.name,O.metadata.title]);for(const Se of x)if(B.every(_e=>_e!==Se)&&ae.every(_e=>!_e.includes(Se)))return!1;return!0}getFullTextFilters(){return{term:this.value,fields:["metadata.name","metadata.title","spec.profile.displayName"]}}toQueryValue(){return this.value}toUpperArray(O){return O.flat().filter(x=>!!x).map(x=>x.toLocaleUpperCase("en-US"))}}class pn{constructor(O){st(this,"values"),this.values=O.reduce((x,B)=>{try{return x.push((0,b.U2)((0,b.KU)(B,{defaultKind:"Group"}))),x}catch{return x}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(O){return this.values.some(x=>(0,D.g)(O,b.vv).some(B=>(0,b.U2)(B)===x))}toQueryValue(){return this.values}}class $t{constructor(O){this.values=O}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(O){return this.values.some(x=>{var B;return((B=O.spec)==null?void 0:B.lifecycle)===x})}toQueryValue(){return this.values}}class Pn{constructor(O){this.values=O}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(O){return this.values.some(x=>O.metadata.namespace===x)}toQueryValue(){return this.values}}class un{constructor(O,x){this.value=O,this.refs=x}static owned(O){return new un("owned",O)}static all(){return new un("all")}static starred(O){return new un("starred",O)}getCatalogFilters(){var O,x,B;return this.value==="owned"?{"relations.ownedBy":(O=this.refs)!=null?O:[]}:this.value==="starred"?{"metadata.name":(B=(x=this.refs)==null?void 0:x.map(ae=>(0,b.KU)(ae).name))!=null?B:[]}:{}}filterEntity(O){var x,B,ae,Se;if(this.value==="starred")return(B=(x=this.refs)==null?void 0:x.includes((0,b.U2)(O)))!=null?B:!0;if(this.value==="owned"){const _e=(0,D.g)(O,b.vv);return(Se=(ae=this.refs)==null?void 0:ae.some(De=>_e.some(rt=>(0,b.U2)(rt)===De)))!=null?Se:!1}return!0}toQueryValue(){return this.value}}class Un{constructor(O,x,B){this.value=O,this.isOwnedEntity=x,this.isStarredEntity=B}filterEntity(O){switch(this.value){case"owned":return this.isOwnedEntity(O);case"starred":return this.isStarredEntity(O);default:return!0}}toQueryValue(){return this.value}}class qn{constructor(O){this.value=O}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(O){var x;const B=(x=O.metadata.annotations)==null?void 0:x["backstage.io/orphan"];return B!==void 0&&this.value.toString()===B}}class ta{constructor(O){this.value=O}filterEntity(O){var x,B;const ae=((B=(x=O==null?void 0:O.status)==null?void 0:x.items)==null?void 0:B.length)>0;return ae!==void 0&&this.value===ae}}const $n=(0,r.createContext)(void 0),bn=f=>{const O=(0,ye.A)(),x=(0,s.u)(he),[B,ae]=(0,r.useState)({}),Se=(0,F.zy)(),_e=f.pagination===!0||typeof f.pagination=="object",De=f.pagination&&typeof f.pagination=="object"&&typeof f.pagination.limit=="number"?f.pagination.limit:20,{queryParameters:rt,cursor:Mt}=(0,r.useMemo)(()=>{var Jn;const ca=v().parse(Se.search,{ignoreQueryPrefix:!0});return{queryParameters:(Jn=ca.filters)!=null?Jn:{},cursor:typeof ca.cursor=="string"?ca.cursor:void 0}},[Se]),[Tt,an]=(0,r.useState)(Mt),[gn,sn]=(0,r.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[],pageInfo:_e?{}:void 0})),[{loading:On,error:zn},_n]=(0,re.A)(async()=>{var Jn;const ca=(0,w.compact)(Object.values(B)),Ia=Object.keys(B).reduce((fa,da)=>{const va=B[da];return va!=null&&va.toQueryValue&&(fa[da]=va.toQueryValue()),fa},{});if(_e)if(Tt){if(Tt!==gn.appliedCursor){const fa=U(ca),da=await x.queryEntities({cursor:Tt,limit:De});sn({appliedFilters:B,appliedCursor:Tt,backendEntities:da.items,entities:da.items.filter(fa),pageInfo:da.pageInfo,totalItems:da.totalItems})}}else{const fa=U(ca),da=le(ca),va=le((0,w.compact)(Object.values(gn.appliedFilters)));if(!(0,w.isEqual)(va,da)){const Ca=await x.queryEntities({...da,limit:De,orderFields:[{field:"metadata.name",order:"asc"}]});sn({appliedFilters:B,backendEntities:Ca.items,entities:Ca.items.filter(fa),pageInfo:Ca.pageInfo,totalItems:Ca.totalItems})}}else{const fa=U(ca),da=I(ca),va=I((0,w.compact)(Object.values(gn.appliedFilters)));if((0,w.isEqual)(va,da)){const Ca=gn.backendEntities.filter(fa);sn({appliedFilters:B,backendEntities:gn.backendEntities,entities:Ca,totalItems:Ca.length})}else{const Ca=await x.getEntities({filter:da}),fr=Ca.items.filter(fa);sn({appliedFilters:B,backendEntities:Ca.items,entities:fr,totalItems:fr.length})}}if(O()){const fa=v().parse(Se.search,{ignoreQueryPrefix:!0}),da=v().stringify({...fa,filters:Ia,cursor:Tt},{addQueryPrefix:!0,arrayFormat:"repeat"}),va=`${window.location.pathname}${da}`;(Jn=window.history)==null||Jn.replaceState(null,document.title,va)}},[x,rt,B,gn,Tt,_e],{loading:!0});(0,Ne.A)(_n,10,[B,Tt]);const Xn=(0,r.useCallback)(Jn=>{an(void 0),ae(ca=>{const Ia=typeof Jn=="function"?Jn(ca):Jn;return{...ca,...Ia}})},[]),ga=(0,r.useMemo)(()=>{var Jn,ca;if(!_e)return;const Ia=(Jn=gn.pageInfo)==null?void 0:Jn.prevCursor,fa=(ca=gn.pageInfo)==null?void 0:ca.nextCursor;return{prev:Ia?()=>an(Ia):void 0,next:fa?()=>an(fa):void 0}},[_e,gn.pageInfo]),Mn=(0,r.useMemo)(()=>({filters:gn.appliedFilters,entities:gn.entities,backendEntities:gn.backendEntities,updateFilters:Xn,queryParameters:rt,loading:On,error:zn,pageInfo:ga,totalItems:gn.totalItems}),[gn,Xn,rt,On,zn,ga]);return r.createElement($n.Provider,{value:Mn},f.children)};function fn(){const f=(0,r.useContext)($n);if(!f)throw new Error("useEntityList must be used within EntityListProvider");return f}function Vt(){var f;const O=(0,s.u)(he),{filters:{kind:x,type:B},queryParameters:{type:ae},updateFilters:Se}=fn(),_e=(0,r.useMemo)(()=>[ae].flat().filter(Boolean),[ae]),[De,rt]=(0,r.useState)(_e.length?_e:(f=B==null?void 0:B.getTypes())!=null?f:[]);(0,r.useEffect)(()=>{_e.length&&rt(_e)},[_e]);const[Mt,Tt]=(0,r.useState)([]),an=(0,r.useMemo)(()=>x==null?void 0:x.value,[x]),{error:gn,loading:sn,value:On}=(0,X.A)(async()=>an?await O.getEntityFacets({filter:{kind:an},facets:["spec.type"]}).then(Xn=>Xn.facets["spec.type"]||[]):[],[an,O]),zn=(0,r.useRef)(On);return(0,r.useEffect)(()=>{const _n=zn.current;if(zn.current=On,sn||!an||_n===On||!On)return;const Xn=[...new Set(oe()(On,Mn=>-Mn.count).map(Mn=>Mn.value.toLocaleLowerCase("en-US")))];Tt(Xn);const ga=De.filter(Mn=>Xn.includes(Mn));V()(De,ga)||rt(ga)},[sn,an,De,rt,On]),(0,r.useEffect)(()=>{Se({type:De.length?new qt(De):void 0})},[De,Se]),{loading:sn,error:gn,availableTypes:Mt,selectedTypes:De,setSelectedTypes:rt}}function En(f,O){var x,B;const ae=(x=O==null?void 0:O.type)==null?void 0:x.toLocaleLowerCase("en-US"),Se=(B=O==null?void 0:O.kind)==null?void 0:B.toLocaleLowerCase("en-US"),_e=(0,s.u)(he),{loading:De,value:rt,error:Mt}=(0,X.A)(async()=>{var Tt;const an=(Tt=f.relations)==null?void 0:Tt.filter(sn=>(!ae||sn.type.toLocaleLowerCase("en-US")===ae)&&(!Se||(0,b.KU)(sn.targetRef).kind===Se));if(!(an!=null&&an.length))return[];const{items:gn}=await _e.getEntitiesByRefs({entityRefs:an.map(sn=>sn.targetRef)});return gn.filter(sn=>!!sn)},[f,ae,Se]);return{entities:rt,loading:De,error:Mt}}function Sn(f){return typeof f=="string"?f:(0,b.U2)(f)}function ya(){const f=(0,s.u)(Bn),O=(0,Ce.A)((0,r.useMemo)(()=>f.starredEntitie$(),[f]),new Set),x=(0,r.useCallback)(ae=>O.has(Sn(ae)),[O]),B=(0,r.useCallback)(ae=>f.toggleStarred(Sn(ae)).then(),[f]);return{starredEntities:O,toggleStarredEntity:B,isStarredEntity:x}}function Ra(f){return typeof f=="string"?f:(0,b.U2)(f)}function Oa(f){const O=(0,s.u)(Bn),[x,B]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const Se=O.starredEntitie$().subscribe({next(_e){B(_e.has(Ra(f)))}});return()=>{Se.unsubscribe()}},[f,O]),{toggleStarredEntity:(0,r.useCallback)(()=>O.toggleStarred(Ra(f)).then(),[f,O]),isStarredEntity:x}}function G(){const f=(0,s.u)(s.t),{loading:O,value:x}=(0,X.A)(async()=>{const{ownershipEntityRefs:ae}=await f.getBackstageIdentity();return ae},[]),B=(0,r.useMemo)(()=>{const ae=new Set(x!=null?x:[]);return Se=>{const _e=(0,D.g)(Se,b.vv).map(b.U2);for(const De of _e)if(ae.has(De))return!0;return!1}},[x]);return{loading:O,isOwnedEntity:B}}function be(){const f=(0,s.u)(he),{error:O,loading:x,value:B}=(0,X.A)(async()=>await f.getEntityFacets({facets:["kind"]}).then(Se=>{var _e;return((_e=Se.facets.kind)==null?void 0:_e.map(De=>De.value).sort())||[]}),[f]);return{loading:x,error:O,allKinds:B!=null?B:[]}}function We(f,O,x){let B=f;return O&&(B=B.filter(Se=>O.some(_e=>_e.toLocaleLowerCase("en-US")===Se.toLocaleLowerCase("en-US")))),x&&!f.some(Se=>Se.toLocaleLowerCase("en-US")===x.toLocaleLowerCase("en-US"))&&(B=B.concat([x])),B.sort().reduce((Se,_e)=>(Se[_e.toLocaleLowerCase("en-US")]=_e,Se),{})}function ot(f){var O,x;const{filters:B,queryParameters:{kind:ae},updateFilters:Se}=fn(),_e=(0,r.useMemo)(()=>[ae].flat()[0],[ae]),[De,rt]=(0,r.useState)((x=_e!=null?_e:(O=B.kind)==null?void 0:O.value)!=null?x:f.initialFilter);(0,r.useEffect)(()=>{_e&&rt(_e)},[_e]),(0,r.useEffect)(()=>{var gn,sn;(gn=B.kind)!=null&&gn.value&&rt((sn=B.kind)==null?void 0:sn.value)},[B.kind]),(0,r.useEffect)(()=>{Se({kind:De?new Rt(De):void 0})},[De,Se]);const{allKinds:Mt,loading:Tt,error:an}=be();return{loading:Tt,error:an,allKinds:Mt!=null?Mt:[],selectedKind:De,setSelectedKind:rt}}const wt=f=>{const{allowedKinds:O,hidden:x,initialFilter:B="component"}=f,ae=(0,s.u)(s.l),{error:Se,allKinds:_e,selectedKind:De,setSelectedKind:rt}=ot({initialFilter:B});if((0,r.useEffect)(()=>{Se&&ae.post({message:"Failed to load entity kinds",severity:"error"})},[Se,ae]),Se)return null;const Mt=We(_e,O,De),Tt=Object.keys(Mt).map(an=>({value:an,label:Mt[an]}));return x?null:r.createElement(t.A,{pb:1,pt:1},r.createElement(ee.l6,{label:"Kind",items:Tt,selected:De.toLocaleLowerCase("en-US"),onChange:an=>rt(String(an))}))},Ot=r.createElement(Ye.A,{fontSize:"small"}),rn=r.createElement(Ge.A,{fontSize:"small"});function te({selected:f}){return r.createElement(Xe.A,{icon:Ot,checkedIcon:rn,checked:f})}const Ie=(0,r.memo)(f=>{const{selected:O,value:x,availableOptions:B,showCounts:ae}=f,Se=ae?`${x} (${B==null?void 0:B[x]})`:x;return r.createElement(at.A,{control:r.createElement(te,{selected:O}),label:Se,onClick:_e=>_e.preventDefault()})}),ke=(0,ve.A)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function ze(f){const O=ke();return r.createElement(Re.A,{variant:"outlined",...f,className:ct()(O.input,f.className)})}const et=(0,ve.A)({root:{},label:{}},{name:"CatalogReactEntityAutocompletePicker"});function tt(f){var O,x;const{label:B,name:ae,path:Se,showCounts:_e,Filter:De,InputProps:rt,initialSelectedOptions:Mt=[],filtersForAvailableValues:Tt=["kind"]}=f,an=et(),{updateFilters:gn,filters:sn,queryParameters:{[ae]:On}}=fn(),zn=(0,s.u)(he),_n=Tt.map(da=>sn[da]),{value:Xn}=(0,X.A)(async()=>{const da=Se,{facets:va}=await zn.getEntityFacets({facets:[da],filter:I(_n.filter(Boolean))});return Object.fromEntries(va[da].map(({value:Ca,count:fr})=>[Ca,fr]))},[..._n]),ga=(0,r.useMemo)(()=>[On].flat().filter(Boolean),[On]),[Mn,Jn]=(0,r.useState)(ga.length?ga:(x=(O=sn[ae])==null?void 0:O.values)!=null?x:Mt);(0,r.useEffect)(()=>{ga.length&&Jn(ga)},[ga]);const ca=Object.keys(Xn!=null?Xn:{}),Ia=Mn.length&&ca.length;(0,r.useEffect)(()=>{gn({[ae]:Ia?new De(Mn):void 0})},[ae,Ia,Mn,De,gn]);const fa=sn[ae];return fa&&typeof fa=="object"&&!("values"in fa)||!ca.length?null:r.createElement(t.A,{className:an.root,pb:1,pt:1},r.createElement(me.A,{className:an.label,variant:"button",component:"label"},B,r.createElement(He.Ay,{multiple:!0,disableCloseOnSelect:!0,options:ca,value:Mn,onChange:(da,va)=>Jn(va),renderOption:(da,{selected:va})=>r.createElement(Ie,{selected:va,value:da,availableOptions:Xn,showCounts:!!_e}),size:"small",popupIcon:r.createElement(nt.A,{"data-testid":`${String(ae)}-picker-expand`}),renderInput:da=>r.createElement(ze,{...da,...rt})})))}const bt=(0,ve.A)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),Lt=f=>{const{initialFilter:O=[]}=f,x=bt();return r.createElement(tt,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:$t,InputProps:{className:x.input},initialSelectedOptions:O})},Gt=(0,ve.A)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),mn=f=>{const{initiallySelectedNamespaces:O}=f,x=Gt();return r.createElement(tt,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:Pn,InputProps:{className:x.input},initialSelectedOptions:O})};function tn(f,O){const x=O==null?void 0:O.defaultKind;let B,ae,Se;return"metadata"in f?(B=f.kind,ae=f.metadata.namespace,Se=f.metadata.name):(B=f.kind,ae=f.namespace,Se=f.name),(ae===void 0||ae==="")&&(ae=b.oQ),(O==null?void 0:O.defaultNamespace)!==void 0?(O==null?void 0:O.defaultNamespace)===ae&&(ae=void 0):ae===b.oQ&&(ae=void 0),B=B.toLocaleLowerCase("en-US"),B=x&&x.toLocaleLowerCase("en-US")===B?void 0:B,`${B?`${B}:`:""}${ae?`${ae}/`:""}${Se}`}function ia(f,O){for(const x of["spec.profile.displayName","metadata.title"]){const B=W()(f,x);if(B&&typeof B=="string")return B}return O}function Nn({enabled:f}){const O=(0,s.u)(he),[x]=(0,r.useState)(async()=>{if(!f)return[];const B="relations.ownedBy";return O.getEntityFacets({facets:[B]}).then(ae=>ae.facets[B].map(Se=>Se.value).map(Se=>{const{kind:_e,name:De,namespace:rt}=(0,b.KU)(Se);return{apiVersion:"backstage.io/v1beta1",kind:_e,metadata:{name:De,namespace:rt}}}).sort((Se,_e)=>(Se.metadata.namespace||"").localeCompare(_e.metadata.namespace||"","en-US")||Se.metadata.name.localeCompare(_e.metadata.name,"en-US")||Se.kind.localeCompare(_e.kind,"en-US"))).catch(()=>[])});return(0,re.A)(async(B,ae)=>{var Se;const _e=await x;if(!_e)return{items:[]};const De=(Se=ae==null?void 0:ae.limit)!=null?Se:20,{text:rt,start:Mt}=Dn(B),Tt=_e.filter(gn=>Wn(rt,gn)),an=Mt+De;return{items:Tt.slice(0,an),...Yn({entities:Tt,limit:an,payload:{text:rt,start:an}})}},[x],{loading:!0,value:{items:[]}})}function Dn(f){return Fn(f)&&f.cursor?JSON.parse(atob(f.cursor)):{text:f.text||"",start:0}}function Fn(f){return!!f.cursor}function Yn({entities:f,limit:O,payload:x}){return f.length>O?{cursor:btoa(JSON.stringify(x))}:{}}function Wn(f,O){var x;const B=f.trim();return O.kind.includes(B)||((x=O.metadata.namespace)==null?void 0:x.includes(B))||O.metadata.name.includes(B)}function la(){const f=(0,s.u)(he);return(0,re.A)(async(O,x)=>{var B;const ae=O,Se=O,_e=(B=x==null?void 0:x.limit)!=null?B:20;if(Se.cursor){const rt=await f.queryEntities({cursor:Se.cursor,limit:_e});return{cursor:rt.pageInfo.nextCursor,items:[...Se.items,...rt.items]}}const De=await f.queryEntities({fullTextFilter:{term:ae.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:_e});return{cursor:De.pageInfo.nextCursor,items:De.items}},[],{loading:!0})}function sa({mode:f,initialSelectedOwnersRefs:O}){const x=f==="owners-only",B=la(),ae=Nn({enabled:x}),[Se,_e]=x?ae:B;return[Se,_e,Aa({enabled:!x,initialSelectedOwnersRefs:O})]}function Aa({enabled:f,initialSelectedOwnersRefs:O}){const x=(0,r.useRef)({}),B=(0,s.u)(he),[,ae]=(0,re.A)(async()=>{(await B.getEntitiesByRefs({entityRefs:O})).items.forEach(_e=>{_e&&(x.current[(0,b.U2)(_e)]=_e)})},[]);return(0,St.u)(()=>{f&&O.length>0&&ae()}),{getEntity:Se=>x.current[Se],setEntity:Se=>{x.current[(0,b.U2)(Se)]=Se}}}const pa=(0,ve.A)({root:{},label:{},input:{},fullWidth:{width:"100%"},boxLabel:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"}},{name:"CatalogReactEntityOwnerPicker"}),Sa=(0,dt.A)(f=>({label:{width:"100%"},root:{width:"90%"}}),{name:"FixedWidthFormControlLabel"})(at.A),xa=r.createElement(Ye.A,{fontSize:"small"}),Ha=r.createElement(Ge.A,{fontSize:"small"});function Va(f){const O=pa(),x=f.entity.kind.toLocaleLowerCase("en-US")==="group",{primaryTitle:B}=In(f.entity);return r.createElement(t.A,{className:O.fullWidth},r.createElement(Sa,{className:O.fullWidth,control:r.createElement(Xe.A,{icon:xa,checkedIcon:Ha,checked:f.isSelected}),onClick:ae=>ae.preventDefault(),label:r.createElement(vt.Ay,{title:B},r.createElement(t.A,{display:"flex",alignItems:"center"},x?r.createElement(ue.A,{fontSize:"small"}):r.createElement(At.A,{fontSize:"small"}),"\xA0",r.createElement(t.A,{className:O.boxLabel},r.createElement(me.A,{noWrap:!0},B))))}))}const Ya=f=>{var O,x,B;const ae=pa(),{mode:Se="owners-only"}=f||{},{updateFilters:_e,filters:De,queryParameters:{owners:rt}}=fn(),[Mt,Tt]=(0,r.useState)(""),an=(0,r.useMemo)(()=>[rt].flat().filter(Boolean),[rt]),[gn,sn]=(0,r.useState)(an.length?an:(x=(O=De.owners)==null?void 0:O.values)!=null?x:[]),[{value:On,loading:zn},_n,Xn]=sa({mode:Se,initialSelectedOwnersRefs:gn});(0,Jt.s)(()=>_n({text:Mt}),[Mt,_n],250);const ga=(On==null?void 0:On.items)||[];return(0,r.useEffect)(()=>{if(an.length){const Mn=new pn(an);sn(Mn.values)}},[an]),(0,r.useEffect)(()=>{_e({owners:gn.length?new pn(gn):void 0})},[gn,_e]),["user","group"].includes(((B=De.kind)==null?void 0:B.value.toLocaleLowerCase("en-US"))||"")?null:r.createElement(t.A,{className:ae.root,pb:1,pt:1},r.createElement(me.A,{className:ae.label,variant:"button",component:"label"},"Owner",r.createElement(He.Ay,{multiple:!0,disableCloseOnSelect:!0,loading:zn,options:ga,value:gn,getOptionSelected:(Mn,Jn)=>typeof Jn=="string"?(0,b.U2)(Mn)===Jn:Mn===Jn,getOptionLabel:Mn=>{const Jn=typeof Mn=="string"?Xn.getEntity(Mn)||(0,b.KU)(Mn,{defaultKind:"group",defaultNamespace:"default"}):Mn;return ia(Jn,tn(Jn))},onChange:(Mn,Jn)=>{Tt(""),sn(Jn.map(ca=>{const Ia=typeof ca=="string"?ca:(0,b.U2)(ca);return typeof ca!="string"&&Xn.setEntity(ca),Ia}))},filterOptions:Mn=>Mn,renderOption:(Mn,{selected:Jn})=>r.createElement(Va,{entity:Mn,isSelected:Jn}),size:"small",popupIcon:r.createElement(nt.A,{"data-testid":"owner-picker-expand"}),renderInput:Mn=>r.createElement(Re.A,{...Mn,className:ae.input,onChange:Jn=>{Tt(Jn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:Mn=>{const Jn=Mn.currentTarget;Math.abs(Jn.scrollHeight-Jn.clientHeight-Jn.scrollTop)<1&&(On!=null&&On.cursor)&&_n({items:On.items,cursor:On.cursor})},"data-testid":"owner-picker-listbox"}})))},hr=(0,ve.A)({root:{},input:{},label:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),gr=r.createElement(Ye.A,{fontSize:"small"}),or=r.createElement(Ge.A,{fontSize:"small"}),ur=()=>{const f=hr(),{updateFilters:O}=fn(),[x,B]=(0,r.useState)([]);function ae(De){O({orphan:De?new qn(De):void 0})}function Se(De){O({error:De?new ta(De):void 0})}const _e=["Is Orphan","Has Error"];return r.createElement(t.A,{className:f.root,pb:1,pt:1},r.createElement(me.A,{className:f.label,variant:"button",component:"label"},"Processing Status",r.createElement(He.Ay,{multiple:!0,disableCloseOnSelect:!0,options:_e,value:x,onChange:(De,rt)=>{B(rt),ae(rt.includes("Is Orphan")),Se(rt.includes("Has Error"))},renderOption:(De,{selected:rt})=>r.createElement(at.A,{control:r.createElement(Xe.A,{icon:gr,checkedIcon:or,checked:rt}),onClick:Mt=>Mt.preventDefault(),label:De}),size:"small",popupIcon:r.createElement(nt.A,{"data-testid":"processing-status-picker-expand"}),renderInput:De=>r.createElement(Re.A,{...De,className:f.input,variant:"outlined"})})))},Pa=(0,ve.A)({input:{}},{name:"CatalogReactEntityTagPicker"}),qa=f=>{const O=Pa();return r.createElement(tt,{label:"Tags",name:"tags",path:"metadata.tags",Filter:en,showCounts:f.showCounts,InputProps:{className:O.input}})},er=f=>{var O;const{hidden:x,initialFilter:B}=f,ae=(0,s.u)(s.l),{error:Se,availableTypes:_e,selectedTypes:De,setSelectedTypes:rt}=Vt();if((0,r.useEffect)(()=>{Se&&ae.post({message:"Failed to load entity types",severity:"error"}),B&&rt([B])},[Se,ae,B,rt]),_e.length===0||Se)return null;const Mt=[{value:"all",label:"all"},..._e.map(Tt=>({value:Tt,label:Tt}))];return x?null:r.createElement(t.A,{pb:1,pt:1},r.createElement(ee.l6,{label:"Type",items:Mt,selected:(O=Mt.length>1?De[0]:void 0)!=null?O:"all",onChange:Tt=>rt(Tt==="all"?[]:[String(Tt)])}))};function ir(){const f=(0,s.u)(s.t),O=(0,s.u)(he),{filters:x}=fn(),{value:B,loading:ae}=(0,X.A)(async()=>(await f.getBackstageIdentity()).ownershipEntityRefs,[]),{user:Se,owners:_e,...De}=x,rt=le((0,w.compact)(Object.values(De))),[{value:Mt,loading:Tt},an]=(0,re.A)(async sn=>{const On=ar(sn.owners,sn.ownershipEntityRefs);if(On===void 0)return 0;const{["metadata.name"]:zn,..._n}=sn.filter.filter,{totalItems:Xn}=await O.queryEntities({...sn.filter,filter:{..._n,"relations.ownedBy":On},limit:0});return Xn},[],{loading:!0});return(0,Te.A)(()=>{Object.keys(rt.filter).length!==0&&B!==void 0&&an({ownershipEntityRefs:B,owners:_e,filter:rt})},[B,_e,rt]),{count:Mt,loading:ae||Tt,filter:(0,r.useMemo)(()=>un.owned(B!=null?B:[]),[B]),ownershipEntityRefs:B}}function ar(f,O){var x;if(O===void 0)return;const B=(x=f==null?void 0:f.values)!=null?x:[];if(B.length){const ae=(0,w.intersection)(B,O);return ae.length===0?void 0:ae}return O}function $e(){const f=(0,s.u)(he),{filters:O}=fn(),x=(0,r.useRef)(),B=(0,r.useMemo)(()=>{const{user:_e,...De}=O,rt=(0,w.compact)(Object.values(De)),Mt=le(rt),Tt={...Mt,limit:0};return Object.keys(Mt.filter).length===0?(x.current=void 0,x.current):(0,w.isEqual)(Tt,x.current)?x.current:(x.current=Tt,Tt)},[O]),{value:ae,loading:Se}=(0,X.A)(async()=>{if(B===void 0)return 0;const{totalItems:_e}=await f.queryEntities(B);return _e},[B]);return{count:ae,loading:Se}}function ce(){const f=(0,s.u)(he),{filters:O}=fn(),{starredEntities:x}=ya(),B=(0,r.useRef)(),ae=(0,r.useMemo)(()=>{const{user:rt,...Mt}=O,Tt=(0,w.compact)(Object.values(Mt)),an=le(Tt),sn={...an,filter:{...an.filter,["metadata.name"]:Array.from(x).map(On=>(0,b.KU)(On).name)},limit:1e3};return(0,w.isEqual)(sn,B.current)?B.current:(B.current=sn,sn)},[O,x]),{value:Se,loading:_e}=(0,X.A)(async()=>x.size?(await f.queryEntities(ae)).items.map(Mt=>(0,b.U2)({kind:Mt.kind,namespace:Mt.metadata.namespace,name:Mt.metadata.name})).filter(Mt=>x.has(Mt)).length:0,[ae,x]),De=(0,r.useMemo)(()=>un.starred(Array.from(x)),[x]);return{count:Se,loading:_e,filter:De}}const lt=(0,ve.A)(f=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:f.spacing(1,0,1,0)},title:{margin:f.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:f.palette.text.primary},menuItem:{minHeight:f.spacing(6)},groupWrapper:{margin:f.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Rn(f){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:j.A},{id:"starred",label:"Starred",icon:Z.A}]},{name:f!=null?f:"Company",items:[{id:"all",label:"All"}]}]}const Kn=f=>{var O;const{initialFilter:x,availableFilters:B}=f,ae=lt(),_e=(O=(0,s.u)(s.p).getOptionalString("organization.name"))!=null?O:"Company",{filters:De,updateFilters:rt,queryParameters:{kind:Mt,user:Tt}}=fn(),an=["starred","all"],gn=Rn(_e).map(va=>({...va,items:va.items.filter(({id:Ca})=>["group","user"].some(fr=>fr===Mt)?an.includes(Ca):!B||B.includes(Ca))})).filter(({items:va})=>!!va.length),{count:sn,loading:On,filter:zn}=ir(),{count:_n}=$e(),{count:Xn,filter:ga,loading:Mn}=ce(),Jn=(0,r.useMemo)(()=>[Tt].flat()[0],[Tt]),[ca,Ia]=(0,r.useState)(Jn!=null?Jn:x),fa=(0,r.useMemo)(()=>({all:_n,starred:Xn,owned:sn}),[Xn,sn,_n]);(0,r.useEffect)(()=>{Jn&&Ia(Jn)},[Jn]);const da=On||Mn;return(0,r.useEffect)(()=>{!da&&ca&&ca!=="all"&&fa[ca]===0&&Ia("all")},[da,fa,ca,Ia]),(0,r.useEffect)(()=>{if(!ca||da)return;rt({user:ca==="owned"?zn:ca==="starred"?ga:un.all()})},[ca,ga,zn,rt,da]),r.createElement(ft.A,{className:ae.root},gn.map(va=>r.createElement(r.Fragment,{key:va.name},r.createElement(me.A,{variant:"subtitle2",component:"span",className:ae.title},va.name),r.createElement(ft.A,{className:ae.groupWrapper},r.createElement(xt.A,{disablePadding:!0,dense:!0,role:"menu","aria-label":va.name},va.items.map(Ca=>{var fr,ro;return r.createElement(P.A,{role:"none presentation",key:Ca.id,divider:!0,onClick:()=>Ia(Ca.id),selected:Ca.id===((fr=De.user)==null?void 0:fr.value),className:ae.menuItem,disabled:fa[Ca.id]===0,"data-testid":`user-picker-${Ca.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Ca.icon&&r.createElement(gt.A,{className:ae.listIcon},r.createElement(Ca.icon,{fontSize:"small"})),r.createElement(S.A,null,r.createElement(me.A,{variant:"body1"},Ca.label," ")),r.createElement(Nt.A,null,(ro=fa[Ca.id])!=null?ro:"-"))}))))))},na=f=>{const{initialKind:O,initiallySelectedFilter:x,ownerPickerMode:B,initiallySelectedNamespaces:ae}=f;return r.createElement(r.Fragment,null,r.createElement(wt,{initialFilter:O}),r.createElement(er,null),r.createElement(Kn,{initialFilter:x}),r.createElement(Ya,{mode:B}),r.createElement(Lt,null),r.createElement(qa,null),r.createElement(ur,null),r.createElement(mn,{initiallySelectedNamespaces:ae}))},aa=(0,ve.A)(f=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:f.spacing(.5),color:f.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),Ea=f=>{const{entityRef:O,hideIcon:x,disableTooltip:B,defaultKind:ae,defaultNamespace:Se}=f,_e=aa(),{primaryTitle:De,secondaryTitle:rt,Icon:Mt}=In(O,{defaultKind:ae,defaultNamespace:Se});let Tt=r.createElement(r.Fragment,null,De);return Tt=r.createElement(t.A,{component:"span",className:_e.root},Mt&&!x?r.createElement(t.A,{component:"span",className:_e.icon},r.createElement(Mt,{fontSize:"inherit"})):null,Tt),rt&&!B&&(Tt=r.createElement(vt.Ay,{enterDelay:1500,title:rt},Tt)),Tt},ba=(0,Ke.Q6)("catalog:entity-route-ref",()=>(0,l.HM)({id:"catalog:entity",params:["namespace","kind","name"]}));function wa(f){var O,x;return{kind:f.kind.toLocaleLowerCase("en-US"),namespace:(x=(O=f.metadata.namespace)==null?void 0:O.toLocaleLowerCase("en-US"))!=null?x:DEFAULT_NAMESPACE,name:f.metadata.name}}const Ta=(0,r.forwardRef)((f,O)=>{var x;const{entityRef:B,defaultKind:ae,defaultNamespace:Se,title:_e,children:De,hideIcon:rt,...Mt}=f,Tt=Ka(f.entityRef),an=(x=De!=null?De:_e)!=null?x:r.createElement(Ea,{entityRef:B,defaultKind:ae,defaultNamespace:Se,hideIcon:rt});return r.createElement(ee.N_,{...Mt,ref:O,to:Tt},an)});function Ka(f){var O;const x=(0,l.Sf)(ba);let B,ae,Se;if(typeof f=="string"){const De=(0,b.KU)(f);B=De.kind,ae=De.namespace,Se=De.name}else"metadata"in f?(B=f.kind,ae=f.metadata.namespace,Se=f.metadata.name):(B=f.kind,ae=f.namespace,Se=f.name);B=B.toLocaleLowerCase("en-US"),ae=(O=ae==null?void 0:ae.toLocaleLowerCase("en-US"))!=null?O:b.oQ;const _e={kind:encodeURIComponent(B),namespace:encodeURIComponent(ae),name:encodeURIComponent(Se)};return x(_e)}function dr(f){const{entityRefs:O,hideIcons:x,...B}=f;return r.createElement(r.Fragment,null,O.map((ae,Se)=>{const _e=typeof ae=="string"?ae:(0,b.U2)(ae);return r.createElement(r.Fragment,{key:`${Se}.${_e}`},Se>0&&", ",r.createElement(Ta,{...B,entityRef:ae,hideIcon:x}))}))}const ha=f=>{const O=useRouteRef(ba);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:O(getCompoundEntityRef(f.entity))},React.createElement(InfoIcon,null))},za=f=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${f.email}`,to:`mailto:${f.email}`},React.createElement(EmailIcon,null)),Er=f=>{var O;const x=(O=f.entity.spec.profile)==null?void 0:O.email;return x?React.createElement(za,{email:x}):null},sr=f=>{var O;const x=(O=f.entity.spec.profile)==null?void 0:O.email;return x?React.createElement(za,{email:x}):null},$a=(0,ve.A)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),Ar=4,Zr=f=>{var O,x,B,ae;const{entityRef:Se,children:_e,delayTime:De=500}=f,rt=$a(),Mt=useApiHolder(),Tt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[an,gn]=useState(!1),sn=useMemo(()=>debounce(()=>gn(!0),De),[De]),[{loading:On,error:zn,value:_n},Xn]=useAsyncFn(async()=>{const Mn=Mt.get(he);if(Mn){const Jn=await Mn.getEntityByRef(Se);if(!Jn)throw new Error(`${Se} not found`);return Jn}},[Mt,Se]),ga=()=>{gn(!1),sn.cancel()};return useEffect(()=>{Tt.isOpen&&!_n&&!zn&&!On&&Xn()},[Tt.isOpen,Xn,_n,zn,On]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:sn},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(Tt)},_e)),an&&React.createElement(HoverPopover,{PaperProps:{className:rt.popoverPaper},...bindPopover(Tt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:ga},React.createElement(Card,null,React.createElement(CardContent,null,zn&&React.createElement(ResponseErrorPanel,{error:zn}),On&&React.createElement(Progress,null),_n&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},_n.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},_n.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},_n.kind),_n.metadata.description&&React.createElement(Typography,{className:rt.descriptionTypography,paragraph:!0},_n.metadata.description),React.createElement(Typography,null,(x=(O=_n.spec)==null?void 0:O.type)==null?void 0:x.toString()),React.createElement(Box,{marginTop:"0.5em"},(_n.metadata.tags||[]).slice(0,Ar).map(Mn=>React.createElement(Chip,{key:Mn,size:"small",label:Mn})),((B=_n.metadata.tags)==null?void 0:B.length)&&((ae=_n.metadata.tags)==null?void 0:ae.length)>Ar&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!zn&&_n&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(_n)&&React.createElement(sr,{entity:_n}),isGroupEntity(_n)&&React.createElement(Er,{entity:_n}),React.createElement(ha,{entity:_n}))))))},Lr=(0,ve.A)(f=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),Br=()=>{const f=Lr(),{updateFilters:O,queryParameters:{text:x}}=fn(),B=(0,r.useMemo)(()=>[x].flat()[0],[x]),[ae,Se]=(0,r.useState)(B!=null?B:"");return(0,ln.A)(()=>{O({text:ae.length?new hn(ae):void 0})},250,[ae,O]),(0,r.useEffect)(()=>{B&&Se(B)},[B]),r.createElement(It.A,{className:f.searchToolbar},r.createElement(qe.A,null,r.createElement(Ut.A,{"aria-label":"search",id:"input-with-icon-adornment",className:f.input,placeholder:"Search",autoComplete:"off",onChange:_e=>Se(_e.target.value),value:ae,startAdornment:r.createElement(nn.A,{position:"start"},r.createElement(Zt.A,null)),endAdornment:r.createElement(nn.A,{position:"end"},r.createElement(Je.A,{"aria-label":"clear search",onClick:()=>Se(""),edge:"end",disabled:ae.length===0},r.createElement(ht.A,null)))})))},g=Object.freeze({createEntityRefColumn(f){const{defaultKind:O}=f;function x(B){var ae;return((ae=B.metadata)==null?void 0:ae.title)||tn(B,{defaultKind:O})}return{title:"Name",highlight:!0,customFilterAndSearch(B,ae){return x(ae).includes(B)},customSort(B,ae){return x(B).localeCompare(x(ae))},render:B=>{var ae;return r.createElement(Ta,{entityRef:B,defaultKind:O,title:(ae=B.metadata)==null?void 0:ae.title})}}},createEntityRelationColumn(f){const{title:O,relation:x,defaultKind:B,filter:ae}=f;function Se(De){return(0,D.g)(De,x,ae)}function _e(De){return Se(De).map(rt=>tn(rt,{defaultKind:B})).join(", ")}return{title:O,customFilterAndSearch(De,rt){return _e(rt).includes(De)},customSort(De,rt){return _e(De).localeCompare(_e(rt))},render:De=>r.createElement(dr,{entityRefs:Se(De),defaultKind:B})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:b.vv,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:b.jn,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:b.jn,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:f=>r.createElement(ee.Mm,{text:f.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),c=[g.createEntityRefColumn({defaultKind:"system"}),g.createDomainColumn(),g.createOwnerColumn(),g.createMetadataDescriptionColumn()],E=[g.createEntityRefColumn({defaultKind:"component"}),g.createSystemColumn(),g.createOwnerColumn(),g.createSpecTypeColumn(),g.createSpecLifecycleColumn(),g.createMetadataDescriptionColumn()],$=(0,ve.A)(f=>({empty:{padding:f.spacing(2),display:"flex",justifyContent:"center"}})),Pe=f=>{const{entities:O,title:x,emptyContent:B,variant:ae="gridItem",columns:Se,tableOptions:_e={}}=f,De=$(),rt={minWidth:"0",width:"100%"};return ae==="gridItem"&&(rt.height="calc(100% - 10px)"),r.createElement(ee.XI,{columns:Se,title:x,style:rt,emptyContent:B&&r.createElement("div",{className:De.empty},B),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,..._e},data:O})};Pe.columns=g,Pe.systemEntityColumns=c,Pe.componentEntityColumns=E;const Be=(0,dt.A)({root:{color:"#f3ba37"}})(Z.A),Pt=f=>{const{toggleStarredEntity:O,isStarredEntity:x}=Oa(f.entity);return r.createElement(Je.A,{"aria-label":"favorite",color:"inherit",...f,onClick:()=>O()},r.createElement(vt.Ay,{title:x?"Remove from favorites":"Add to favorites"},x?r.createElement(Be,null):r.createElement(on.A,null)))},Wt=xn.A;function wn(f,O){if(f)return f.toLocaleLowerCase("en-US");if(O)try{return(0,b.KU)(O).kind.toLocaleLowerCase("en-US")}catch{return}}function kn(f,O){const x=(0,l.nm)(),B=wn(f,O);return B&&x.getSystemIcon(`kind:${B}`)||Wt}function La(f){const{kind:O,entityRef:x,...B}=f,ae=kn(O,x);return r.createElement(ae,{...B})}const ka=(0,ve.A)(f=>({node:{fill:f.palette.grey[300],stroke:f.palette.grey[300],"&.primary":{fill:f.palette.primary.light,stroke:f.palette.primary.light},"&.secondary":{fill:f.palette.secondary.light,stroke:f.palette.secondary.light}},text:{fill:f.palette.getContrastText(f.palette.grey[300]),"&.primary":{fill:f.palette.primary.contrastText},"&.secondary":{fill:f.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Ba(f){const O=(0,s.u)(he),x=(0,b.U2)(f),{loading:B,error:ae,value:Se}=(0,X.A)(async()=>{const _e=await O.getEntityAncestors({entityRef:x}),De=new Array,rt=new Array;for(const Mt of _e.items){const Tt=(0,b.U2)(Mt.entity),an=Tt===_e.rootEntityRef;De.push({id:Tt,root:an,...Mt.entity});for(const gn of Mt.parentEntityRefs)rt.push({from:Tt,to:gn})}return{nodes:De,edges:rt}},[x]);return{loading:B,error:ae,nodes:(Se==null?void 0:Se.nodes)||[],edges:(Se==null?void 0:Se.edges)||[]}}function _a({node:f}){const O=ka(),x=(0,F.Zp)(),B=(0,l.Sf)(ba),[ae,Se]=(0,r.useState)(0),[_e,De]=(0,r.useState)(0),rt=(0,l.nm)(),Mt=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(Mt.current){let{height:ga,width:Mn}=Mt.current.getBBox();ga=Math.round(ga),Mn=Math.round(Mn),(ga!==_e||Mn!==ae)&&(Se(Mn),De(ga))}},[ae,_e]);const Tt=rt.getSystemIcon(`kind:${f.kind.toLocaleLowerCase("en-US")}`),an=10,gn=_e,sn=Tt?gn+an:0,On=sn+ae+an*2,zn=_e+an*2,_n=f.metadata.title||(f.kind&&f.metadata.name&&f.metadata.namespace?tn({kind:f.kind,name:f.metadata.name,namespace:f.metadata.namespace||""}):f.id),Xn=()=>{x(B({kind:f.kind,namespace:f.metadata.namespace||b.oQ,name:f.metadata.name}))};return r.createElement("g",{onClick:Xn,className:O.clickable},r.createElement("rect",{className:ct()(O.node,f.root?"secondary":"primary"),width:On,height:zn,rx:10}),Tt&&r.createElement(La,{kind:f.kind,y:an,x:an,width:gn,height:gn,className:ct()(O.text,f.root?"secondary":"primary")}),r.createElement("text",{ref:Mt,className:ct()(O.text,f.root?"secondary":"primary"),y:zn/2,x:sn+(ae+an*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},_n))}function ja(f){const{loading:O,error:x,nodes:B,edges:ae}=Ba(f.entity);return O?r.createElement(ee.ke,null):x?r.createElement(ee._1,{error:x}):r.createElement(r.Fragment,null,r.createElement(Et.A,{variant:"h2"},"Ancestry"),r.createElement(Et.A,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",r.createElement(ee.N_,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),r.createElement(t.A,{mt:4},r.createElement(ee.wB,{nodes:B,edges:ae,renderNode:_a,direction:ee.DT.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const tr=(0,ve.A)(f=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:f.spacing(2)},helpIcon:{marginLeft:f.spacing(1),color:f.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Na(f){const O=tr();return r.createElement(S.A,{...f,primaryTypographyProps:{className:O.monospace},secondaryTypographyProps:{className:O.monospace}})}function Ja(f){const O=tr();return r.createElement(yn.A,{className:O.monospace},f.children)}function wr(f){return r.createElement(t.A,{mt:2},r.createElement(ft.A,{variant:"outlined"},r.createElement(mt.A,null,r.createElement(me.A,{variant:"h6",gutterBottom:!0},f.title,f.helpLink&&r.createElement(qr,{to:f.helpLink})),f.children)))}function Yr(f){if(f.match(/^url:https?:\/\//))return f.slice(4);if(f.match(/^https?:\/\//))return f}function Jr(f){const[O,x]=f.entry,B=Yr(x);return r.createElement(dn.A,null,f.indent&&r.createElement(gt.A,null),r.createElement(Na,{primary:O,secondary:B?r.createElement(ee.N_,{to:B},x):x}))}function qr(f){const O=tr();return r.createElement(ee.N_,{to:f.to,className:O.helpIcon},r.createElement(Qe.A,{fontSize:"inherit"}))}const Ur=(0,ve.A)({root:{display:"flex",flexDirection:"column"}});function eo(f){var O,x;const B=(0,s.u)(he),ae=(0,b.U2)(f),Se=(O=f.metadata.annotations)==null?void 0:O[b.Eo],_e=(x=f.metadata.annotations)==null?void 0:x[b.r2],{loading:De,error:rt,value:Mt}=(0,X.A)(async()=>!Se&&!_e?[]:(await B.getEntities({filter:[...Se?[{[`metadata.annotations.${b.Eo}`]:Se}]:[],..._e?[{[`metadata.annotations.${b.r2}`]:_e}]:[]]})).items,[Se,_e]);return{loading:De,error:rt,location:Se,originLocation:_e,colocatedEntities:Mt==null?void 0:Mt.filter(Tt=>(0,b.U2)(Tt)!==ae)}}function Or(f){return r.createElement(xt.A,{dense:!0},f.header&&r.createElement(Jr,{key:"header",entry:f.header}),f.entities.map(O=>r.createElement(dn.A,{key:(0,b.U2)(O)},r.createElement(Na,{primary:r.createElement(Ta,{entityRef:O})}))))}function uo(f){const{entity:O}=f,{loading:x,error:B,location:ae,originLocation:Se,colocatedEntities:_e}=eo(O);if(x)return r.createElement(ee.ke,null);if(B)return r.createElement(ee._1,{error:B});if(!ae&&!Se)return r.createElement(Xt.A,{severity:"warning"},"Entity had no location information.");if(!(_e!=null&&_e.length))return r.createElement(Xt.A,{severity:"info"},"There were no other entities on this location.");if(ae===Se)return r.createElement(Or,{entities:_e});const De=_e.filter(Mt=>{var Tt;return((Tt=Mt.metadata.annotations)==null?void 0:Tt[b.Eo])===ae}),rt=_e.filter(Mt=>{var Tt;return((Tt=Mt.metadata.annotations)==null?void 0:Tt[b.r2])===Se});return r.createElement(r.Fragment,null,De.length>0&&r.createElement(Or,{entities:De,header:["At the same location",ae]}),rt.length>0&&r.createElement(Or,{entities:rt,header:["At the same origin",Se]}))}function mo(f){const O=Ur();return r.createElement(r.Fragment,null,r.createElement(Et.A,{variant:"h2"},"Colocated"),r.createElement(Et.A,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),r.createElement("div",{className:O.root},r.createElement(uo,{entity:f.entity})))}function Tr(f){return Object.fromEntries([...Object.entries(f)].sort((O,x)=>O[0]<x[0]?-1:1))}function to(f){return r.createElement(r.Fragment,null,r.createElement(Et.A,{variant:"h2"},"Entity as JSON"),r.createElement(Et.A,null,"This is the raw entity data as received from the catalog, on JSON form."),r.createElement(Et.A,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ee.z7,{text:JSON.stringify(Tr(f.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const po=(0,ve.A)({root:{display:"flex",flexDirection:"column"}});function ho(f){var O,x,B;const ae=po(),{apiVersion:Se,kind:_e,metadata:De,spec:rt,relations:Mt=[],status:Tt={}}=f.entity,an=Dt()(oe()(Mt,sn=>sn.targetRef),"type"),gn=(0,b.U2)(f.entity);return r.createElement(r.Fragment,null,r.createElement(Et.A,{variant:"h2"},"Overview"),r.createElement("div",{className:ae.root},r.createElement(wr,{title:"Identity"},r.createElement(xt.A,{dense:!0},r.createElement(dn.A,null,r.createElement(Na,{primary:"apiVersion",secondary:Se})),r.createElement(dn.A,null,r.createElement(Na,{primary:"kind",secondary:_e})),(rt==null?void 0:rt.type)&&r.createElement(dn.A,null,r.createElement(Na,{primary:"spec.type",secondary:(O=rt.type)==null?void 0:O.toString()})),De.uid&&r.createElement(dn.A,null,r.createElement(Na,{primary:"uid",secondary:De.uid}),r.createElement(Nt.A,null,r.createElement(ee.lz,{text:De.uid}))),De.etag&&r.createElement(dn.A,null,r.createElement(Na,{primary:"etag",secondary:De.etag}),r.createElement(Nt.A,null,r.createElement(ee.lz,{text:De.etag}))),r.createElement(dn.A,null,r.createElement(Na,{primary:"entityRef",secondary:gn}),r.createElement(Nt.A,null,r.createElement(ee.lz,{text:gn}))))),r.createElement(wr,{title:"Metadata"},!!Object.keys(De.annotations||{}).length&&r.createElement(xt.A,{dense:!0,subheader:r.createElement(Ja,null,"Annotations",r.createElement(qr,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(De.annotations).map(sn=>r.createElement(Jr,{key:sn[0],indent:!0,entry:sn}))),!!Object.keys(De.labels||{}).length&&r.createElement(xt.A,{dense:!0,subheader:r.createElement(Ja,null,"Labels")},Object.entries(De.labels).map(sn=>r.createElement(Jr,{key:sn[0],indent:!0,entry:sn}))),!!((x=De.tags)!=null&&x.length)&&r.createElement(xt.A,{dense:!0,subheader:r.createElement(Ja,null,"Tags")},De.tags.map((sn,On)=>r.createElement(dn.A,{key:`${sn}-${On}`},r.createElement(gt.A,null),r.createElement(Na,{primary:sn}))))),!!Mt.length&&r.createElement(wr,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(an).map(([sn,On],zn)=>r.createElement("div",{key:zn},r.createElement(xt.A,{dense:!0,subheader:r.createElement(Ja,null,sn)},On.map(_n=>r.createElement(dn.A,{key:_n.targetRef},r.createElement(Na,{primary:r.createElement(Ta,{entityRef:_n.targetRef})}))))))),!!((B=Tt.items)!=null&&B.length)&&r.createElement(wr,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Tt.items.map((sn,On)=>r.createElement("div",{key:On},r.createElement(me.A,null,sn.level,": ",sn.type),r.createElement(t.A,{ml:2},sn.message))))))}function go(f){return r.createElement(r.Fragment,null,r.createElement(Et.A,{variant:"h2"},"Entity as YAML"),r.createElement(Et.A,null,"This is the raw entity data as received from the catalog, on YAML form."),r.createElement(Et.A,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ee.z7,{text:it.Ay.stringify(Tr(f.entity)),language:"yaml",showCopyCodeButton:!0}))))}const no=(0,ve.A)(f=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:f.palette.background.paper},tabs:{borderRight:`1px solid ${f.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function br(f){const{children:O,value:x,index:B,...ae}=f,Se=no();return r.createElement("div",{role:"tabpanel",hidden:x!==B,id:`vertical-tabpanel-${B}`,"aria-labelledby":`vertical-tab-${B}`,className:Se.tabContents,...ae},x===B&&r.createElement(t.A,{pl:3,pr:3},O))}function $r(f){return{id:`vertical-tab-${f}`,"aria-controls":`vertical-tabpanel-${f}`}}function Ir(f){const O=no(),[x,B]=r.useState(0);return(0,r.useEffect)(()=>{B(0)},[f.open]),f.entity?r.createElement(Qt.A,{fullWidth:!0,maxWidth:"xl",open:f.open,onClose:f.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:O.fullHeightDialog}},r.createElement(jt.A,{id:"entity-inspector-dialog-title"},"Entity Inspector"),r.createElement(Ve.A,{dividers:!0},r.createElement("div",{className:O.root},r.createElement(Kt.A,{orientation:"vertical",variant:"scrollable",value:x,onChange:(ae,Se)=>B(Se),"aria-label":"Inspector options",className:O.tabs},r.createElement(zt.A,{label:"Overview",...$r(0)}),r.createElement(zt.A,{label:"Ancestry",...$r(1)}),r.createElement(zt.A,{label:"Colocated",...$r(2)}),r.createElement(zt.A,{label:"Raw JSON",...$r(3)}),r.createElement(zt.A,{label:"Raw YAML",...$r(4)})),r.createElement(br,{value:x,index:0},r.createElement(ho,{entity:f.entity})),r.createElement(br,{value:x,index:1},r.createElement(ja,{entity:f.entity})),r.createElement(br,{value:x,index:2},r.createElement(mo,{entity:f.entity})),r.createElement(br,{value:x,index:3},r.createElement(to,{entity:f.entity})),r.createElement(br,{value:x,index:4},r.createElement(go,{entity:f.entity})))),r.createElement(Ae.A,null,r.createElement(pe.A,{onClick:f.onClose,color:"primary"},"Close"))):null}function fo(f){var O;const x=(0,s.u)(he),B=(O=f.metadata.annotations)==null?void 0:O[b.r2],ae=f.metadata.uid,Se=B==="bootstrap:bootstrap",_e=(0,X.A)(async()=>{const On=x.getLocationByRef(B);let zn;if(!B)zn=Promise.resolve([]);else{const _n=`metadata.annotations.${b.r2}`;zn=x.getEntities({filter:{[_n]:B},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(Xn=>Xn.items)}return Promise.all([On,zn]).then(([_n,Xn])=>({location:_n,colocatedEntities:Xn}))},[x,f]),De=(0,r.useCallback)(async function(){const{location:zn}=_e.value;await x.removeLocationById(zn.id)},[x,_e]),rt=(0,r.useCallback)(async function(){await x.removeEntityByUid(ae)},[x,ae]);if(Se)return{type:"bootstrap",location:B,deleteEntity:rt};const{loading:Mt,error:Tt,value:an}=_e;if(Mt)return{type:"loading"};if(Tt)return{type:"error",error:Tt};const{location:gn,colocatedEntities:sn}=an;return gn?{type:"unregister",location:B,colocatedEntities:sn.map(b.sM),unregisterLocation:De,deleteEntity:rt}:{type:"only-delete",deleteEntity:rt}}const ao=(0,ve.A)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),_r=({entity:f,onConfirm:O,onClose:x})=>{var B;const ae=(0,s.u)(s.l),Se=(0,s.u)(s.p),_e=ao(),De=fo(f),[rt,Mt]=(0,r.useState)(!1),[Tt,an]=(0,r.useState)(!1),gn=(B=Se.getOptionalString("app.title"))!=null?B:"Backstage",sn=(0,r.useCallback)(async function(){if("unregisterLocation"in De){an(!0);try{await De.unregisterLocation(),O()}catch(Xn){(0,Y.tX)(Xn),ae.post({message:Xn.message})}finally{an(!1)}}},[ae,O,De]),On=(0,r.useCallback)(async function(){var Xn;if("deleteEntity"in De){an(!0);try{await De.deleteEntity();const ga=(Xn=f.metadata.title)!=null?Xn:f.metadata.name;O(),ae.post({message:`Removed entity ${ga}`,severity:"success",display:"transient"})}catch(ga){(0,Y.tX)(ga),ae.post({message:ga.message})}finally{an(!1)}}},[ae,O,De,f]),zn=()=>r.createElement(Ae.A,{className:_e.dialogActions},r.createElement(pe.A,{onClick:x,color:"primary"},"Cancel"));return De.type==="loading"?r.createElement(ee.ke,null):De.type==="error"?r.createElement(ee._1,{error:De.error}):De.type==="bootstrap"?r.createElement(r.Fragment,null,r.createElement(Xt.A,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',De.location,'"). If you believe this is in error, please contact the ',gn," ","integrator."),r.createElement(t.A,{marginTop:2},!rt&&r.createElement(r.Fragment,null,r.createElement(pe.A,{variant:"text",size:"small",color:"primary",className:_e.advancedButton,onClick:()=>Mt(!0)},"Advanced Options"),r.createElement(zn,null)),rt&&r.createElement(r.Fragment,null,r.createElement(Et.A,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(pe.A,{variant:"contained",color:"secondary",disabled:Tt,onClick:On},"Delete Entity"),r.createElement(zn,null)))):De.type==="only-delete"?r.createElement(r.Fragment,null,r.createElement(Et.A,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),r.createElement(pe.A,{variant:"contained",color:"secondary",disabled:Tt,onClick:On},"Delete Entity"),r.createElement(zn,null)):De.type==="unregister"?r.createElement(r.Fragment,null,r.createElement(Et.A,null,"This action will unregister the following entities:"),r.createElement(Et.A,{component:"ul"},De.colocatedEntities.map(_n=>r.createElement("li",{key:`${_n.kind}:${_n.namespace}/${_n.name}`},r.createElement(Ta,{entityRef:_n})))),r.createElement(Et.A,null,"Located at the following location:"),r.createElement(Et.A,{component:"ul"},r.createElement("li",null,De.location)),r.createElement(Et.A,null,"To undo, just re-register the entity in ",gn,"."),r.createElement(t.A,{marginTop:2},r.createElement(pe.A,{variant:"contained",color:"secondary",disabled:Tt,onClick:sn},"Unregister Location"),!rt&&r.createElement(t.A,{component:"span",marginLeft:2},r.createElement(pe.A,{variant:"text",size:"small",color:"primary",className:_e.advancedButton,onClick:()=>Mt(!0)},"Advanced Options"))),rt&&r.createElement(r.Fragment,null,r.createElement(t.A,{paddingTop:4,paddingBottom:4},r.createElement(Ze.A,null)),r.createElement(Et.A,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(pe.A,{variant:"contained",color:"secondary",disabled:Tt,onClick:On},"Delete Entity"))):r.createElement(Xt.A,{severity:"error"},"Internal error: Unknown state")},Qr=f=>{const{open:O,onConfirm:x,onClose:B,entity:ae}=f;return r.createElement(Qt.A,{open:O,onClose:B},r.createElement(jt.A,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),r.createElement(Ve.A,null,r.createElement(_r,{entity:ae,onConfirm:x,onClose:B})))},zr=(0,ve.A)(f=>({code:{borderRadius:6,margin:f.spacing(2,0),background:f.palette.type==="dark"?"#444":f.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Dr(f,O){var x,B;const ae=(O==null?void 0:O.kind)||"Component",Se=(O==null?void 0:O.metadata.name)||"example",_e=((x=O==null?void 0:O.spec)==null?void 0:x.type)||"website",De=((B=O==null?void 0:O.spec)==null?void 0:B.owner)||"user:default/guest",rt=`apiVersion: backstage.io/v1alpha1
kind: ${ae}
metadata:
  name: ${Se}
  annotations:${f.map(an=>`
    ${an}: value`).join("")}
spec:
  type: ${_e}
  owner: ${De}`;let Mt=6;const Tt=[];return f.forEach(()=>{Tt.push(Mt),Mt++}),{yamlText:rt,lineNumbers:Tt}}function Cr(f,O="Component"){const x=f.length<=1;return r.createElement(r.Fragment,null,"The ",x?"annotation":"annotations"," ",f.map(B=>r.createElement("code",null,B)).reduce((B,ae)=>r.createElement(r.Fragment,null,B,", ",ae))," ",x?"is":"are"," missing. You need to add the"," ",x?"annotation":"annotations"," to your ",O," if you want to enable this tool.")}function Mr(f){let O;try{O=(0,D.u)().entity}catch{}const{annotation:x,readMoreUrl:B}=f,ae=Array.isArray(x)?x:[x],Se=B||"https://backstage.io/docs/features/software-catalog/well-known-annotations",_e=zr(),De=(O==null?void 0:O.kind)||"Component",{yamlText:rt,lineNumbers:Mt}=Dr(ae,O);return r.createElement(ee.pp,{missing:"field",title:"Missing Annotation",description:Cr(ae,De),action:r.createElement(r.Fragment,null,r.createElement(me.A,{variant:"body1"},"Add the annotation to your ",De," YAML as shown in the highlighted example below:"),r.createElement(t.A,{className:_e.code},r.createElement(ee.z7,{text:rt,language:"yaml",showLineNumbers:!0,highlightedNumbers:Mt,customStyle:{background:"inherit",fontSize:"115%"}})),r.createElement(pe.A,{color:"primary",component:ee.N_,to:Se},"Read more"))})}function jr(f){var O;const{children:x,value:B}=f,[ae,Se]=useState((O=B==null?void 0:B.filters)!=null?O:{}),_e=useCallback(Mt=>{Se(Tt=>{const an=typeof Mt=="function"?Mt(Tt):Mt;return{...Tt,...an}})},[]),De=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),rt=useMemo(()=>{var Mt,Tt,an,gn,sn,On,zn;return{entities:(Mt=B==null?void 0:B.entities)!=null?Mt:De.entities,backendEntities:(Tt=B==null?void 0:B.backendEntities)!=null?Tt:De.backendEntities,updateFilters:(an=B==null?void 0:B.updateFilters)!=null?an:_e,filters:ae,loading:(gn=B==null?void 0:B.loading)!=null?gn:!1,queryParameters:(sn=B==null?void 0:B.queryParameters)!=null?sn:De.queryParameters,error:B==null?void 0:B.error,totalItems:(zn=B==null?void 0:B.totalItems)!=null?zn:((On=B==null?void 0:B.entities)!=null?On:De.entities).length}},[B,De,ae,_e]);return React.createElement($n.Provider,{value:rt},x)}},98881:(Tn,_t,e)=>{"use strict";e.d(_t,{E:()=>He});var s=e(29835),l=e(22968),b=e(5124),A=e(11638),W=e(92651),r=e(2069),q=e(77125),Q=e(74219),t=e(14041),pe=e(18690),_=e(37197),de=e(29365),me=e(46423),H=e(5951),xe=e(26343),ve=e(28233),dt=e(55197),z=e(71677),ee=e(58837),D=e(85005),w=e(71407),M=e(26314),y=e(90749),v=e(99993),F=e(92399),re=e(36338),Ne=e(21319);function ye(Xe){var at;const{unregisterEntityOptions:Ge,isUnregisterAllowed:Ye,onUnregisterEntity:Re,onClose:Le}=Xe,ct=typeof(Ge==null?void 0:Ge.disableUnregister)=="boolean",vt=(at=!Ye||(ct?!!(Ge!=null&&Ge.disableUnregister):(Ge==null?void 0:Ge.disableUnregister)==="disable"))!=null?at:!1;let St=t.createElement(t.Fragment,null);return(Ge==null?void 0:Ge.disableUnregister)!=="hidden"&&(St=t.createElement(xe.A,{onClick:()=>{Le(),Re()},disabled:vt},t.createElement(me.A,null,t.createElement(F.A,{fontSize:"small"})),t.createElement(H.A,{primary:"Unregister entity"}))),t.createElement(t.Fragment,null,St)}const X=(0,ee.A)(Xe=>({button:{color:Xe.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function N(Xe){const{UNSTABLE_extraContextMenuItems:at,UNSTABLE_contextMenuOptions:Ge,onUnregisterEntity:Ye,onInspectEntity:Re}=Xe,[Le,ct]=(0,t.useState)(),vt=X(),Jt=(0,y.Az)(v.Nf).allowed,At=S=>{ct(S.currentTarget)},ue=()=>{ct(void 0)},ft=(0,b.u)(b.l),[xt,gt]=(0,re.A)();(0,t.useEffect)(()=>{!xt.error&&xt.value&&ft.post({message:"Copied!",severity:"info",display:"transient"})},[xt,ft]);const Nt=at&&[...at.map(S=>t.createElement(xe.A,{key:S.title,onClick:()=>{ue(),S.onClick()}},t.createElement(me.A,null,t.createElement(S.Icon,{fontSize:"small"})),t.createElement(H.A,{primary:S.title}))),t.createElement(_.A,{key:"the divider is here!"})];return t.createElement(t.Fragment,null,t.createElement(z.Ay,{title:"More",arrow:!0},t.createElement(de.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Le,role:"button",onClick:At,"data-testid":"menu-button",className:vt.button,id:"long-menu"},t.createElement(w.A,null))),t.createElement(dt.Ay,{open:!!Le,onClose:ue,anchorEl:Le,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},t.createElement(ve.A,{autoFocusItem:!!Le},Nt,t.createElement(ye,{unregisterEntityOptions:Ge,isUnregisterAllowed:Jt,onUnregisterEntity:Ye,onClose:ue}),t.createElement(xe.A,{onClick:()=>{ue(),Re()}},t.createElement(me.A,null,t.createElement(D.A,{fontSize:"small"})),t.createElement(H.A,{primary:"Inspect entity"})),t.createElement(xe.A,{onClick:()=>{ue(),gt(window.location.toString())}},t.createElement(me.A,null,t.createElement(M.A,{fontSize:"small"})),t.createElement(H.A,{primary:"Copy entity URL"})))))}const V="plugin.catalog.entityLayoutRoute",ie=()=>null;(0,A.h3)(ie,V,!0),(0,A.h3)(ie,"core.gatherMountPoints",!0);function oe(Xe){const{entity:at,title:Ge}=Xe;return t.createElement(q.A,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},t.createElement(q.A,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},at?t.createElement(W.d5,{entityRef:at,hideIcon:!0}):Ge),at&&t.createElement(W.uR,{entity:at}))}function Ce(Xe,at,Ge,Ye){var Re,Le,ct,vt,St;const Jt=(Re=Xe!=null?Xe:Ye==null?void 0:Ye.kind)!=null?Re:"",At=(Le=at!=null?at:Ye==null?void 0:Ye.metadata.namespace)!=null?Le:"";return{headerTitle:`${(St=(vt=(ct=Ye==null?void 0:Ye.metadata.title)!=null?ct:Ge)!=null?vt:Ye==null?void 0:Ye.metadata.name)!=null?St:""}${At&&At!==s.oQ?` in ${At}`:""}`,headerType:(()=>{let ft=Jt.toLocaleLowerCase("en-US");return Ye&&Ye.spec&&"type"in Ye.spec&&(ft+=" \u2014 ",ft+=Ye.spec.type.toLocaleLowerCase("en-US")),ft})()}}function nt(Xe){var at,Ge;const{entity:Ye}=Xe,Re=(0,r.g)(Ye,s.vv);return t.createElement(t.Fragment,null,Re.length>0&&t.createElement(l.ST,{label:"Owner",contentTypograpyRootComponent:"p",value:t.createElement(W.iI,{entityRefs:Re,defaultKind:"Group",color:"inherit"})}),((at=Ye.spec)==null?void 0:at.lifecycle)&&t.createElement(l.ST,{label:"Lifecycle",value:(Ge=Ye.spec.lifecycle)==null?void 0:Ge.toString()}))}const He=Xe=>{var at,Ge,Ye;const{UNSTABLE_extraContextMenuItems:Re,UNSTABLE_contextMenuOptions:Le,children:ct,NotFoundComponent:vt}=Xe,{kind:St,namespace:Jt,name:At}=(0,A.KS)(W.sF),{entity:ue,loading:ft,error:xt}=(0,r.a)(),gt=(0,pe.zy)(),Nt=(0,A.OJ)(ct,nn=>nn.selectByComponentData({key:V,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:It})=>{if(ue){if(It.if&&!It.if(ue))return[]}else return[];return[{path:It.path,title:It.title,children:It.children,tabProps:It.tabProps}]}),[ue]),{headerTitle:S,headerType:P}=Ce(St,Jt,At,ue),[j,Z]=(0,t.useState)(!1),[Te,Ke]=(0,t.useState)(!1),mt=(0,pe.Zp)(),Je=(0,A.Sf)(Ne.r),qe=(0,A.Sf)(Ne.u),Ut=async()=>{Z(!1),Ke(!1),mt(qe?qe():Je())};return(0,t.useEffect)(()=>{Z(!1),Ke(!1)},[gt.pathname]),t.createElement(l.YW,{themeId:(Ye=(Ge=(at=ue==null?void 0:ue.spec)==null?void 0:at.type)==null?void 0:Ge.toString())!=null?Ye:"home"},t.createElement(l.Y9,{title:t.createElement(oe,{title:S,entity:ue}),pageTitleOverride:S,type:P},ue&&t.createElement(t.Fragment,null,t.createElement(nt,{entity:ue}),t.createElement(N,{UNSTABLE_extraContextMenuItems:Re,UNSTABLE_contextMenuOptions:Le,onUnregisterEntity:()=>Z(!0),onInspectEntity:()=>Ke(!0)}))),ft&&t.createElement(l.ke,null),ue&&t.createElement(l.kE,{routes:Nt}),xt&&t.createElement(l.UC,null,t.createElement(Q.A,{severity:"error"},xt.toString())),!ft&&!xt&&!ue&&t.createElement(l.UC,null,vt||t.createElement(l.Bp,{title:"Entity not found"},"There is no ",St," with the requested"," ",t.createElement(l.N_,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),t.createElement(W.Id,{open:j,entity:ue,onConfirm:Ut,onClose:()=>Z(!1)}),t.createElement(W.qq,{open:Te,entity:ue,onClose:()=>Ke(!1)}))};He.Route=ie},54067:(Tn,_t,e)=>{"use strict";e.d(_t,{E:()=>V,a:()=>w,b:()=>v,c:()=>Ne,d:()=>ye,h:()=>y,i:()=>D});var s=e(92651),l=e(2069),b=e(74219),A=e(14041),W=e(18690),r=e(64947),q=e(76891),Q=e(93453),t=e(61477),pe=e(5124),_=e(11638),de=e(3399),me=e(21319),H=e(73466),xe=e(77125),ve=e(22968),dt=e(29835),z=e(75757);function ee(Ce){const{open:nt,onClose:He,onConfirm:Xe,entity:at}=Ce,[Ge,Ye]=(0,A.useState)(!1),Re=(0,pe.u)(s.vp),Le=(0,pe.u)(pe.l),ct=async()=>{Ye(!0);try{const vt=at.metadata.uid;await Re.removeEntityByUid(vt),Xe()}catch(vt){(0,de.tX)(vt),Le.post({message:vt.message})}finally{Ye(!1)}};return A.createElement(q.A,{open:nt,onClose:He},A.createElement(t.A,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),A.createElement(Q.A,null,A.createElement(r.A,{variant:"contained",color:"secondary",disabled:Ge,onClick:ct},"Delete"),A.createElement(r.A,{onClick:He,color:"primary"},"Cancel")))}function D(Ce){var nt,He;return((He=(nt=Ce==null?void 0:Ce.metadata)==null?void 0:nt.annotations)==null?void 0:He["backstage.io/orphan"])==="true"}function w(){const Ce=(0,W.Zp)(),nt=(0,_.Sf)(me.r),[He,Xe]=(0,A.useState)(!1),{entity:at}=(0,l.u)(),Ge=async()=>{Xe(!1),Ce(nt())};return A.createElement(A.Fragment,null,A.createElement(b.A,{severity:"warning",onClick:()=>Xe(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),A.createElement(ee,{open:He,entity:at,onConfirm:Ge,onClose:()=>Xe(!1)}))}async function M(Ce,nt){var He;const Xe=(He=Ce.relations)==null?void 0:He.map(Ge=>Ge.targetRef);if(!Xe||(Xe==null?void 0:Xe.length)<1||Xe.length>1e3)return[];const at=await nt.getEntitiesByRefs({entityRefs:Xe,fields:["kind","metadata.name","metadata.namespace"]});return Xe.filter((Ge,Ye)=>at.items[Ye]===void 0)}async function y(Ce,nt){const He=nt.apis.get(s.vp);if(!He)throw new Error(`No implementation available for ${s.vp}`);return(await M(Ce,He)).length>0}function v(){const{entity:Ce}=(0,l.u)(),nt=(0,pe.u)(s.vp),{loading:He,error:Xe,value:at}=(0,H.A)(async()=>M(Ce,nt),[Ce,nt]);return Xe?A.createElement(xe.A,{mb:1},A.createElement(ve._1,{error:Xe})):He||!at||at.length===0?null:A.createElement(A.Fragment,null,A.createElement(b.A,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",A.createElement("br",null),"Entities not found are: ",at.join(", ")))}const F=Ce=>Ce.error&&Ce.level==="error"&&Ce.type===z.K3;async function re(Ce,nt){return{items:(await nt.getEntityAncestors({entityRef:Ce})).items.map(at=>{var Ge,Ye;return{errors:((Ye=(Ge=at.entity.status)==null?void 0:Ge.items)!=null?Ye:[]).filter(F).map(ct=>ct.error).filter(ct=>!!ct),entity:at.entity}}).filter(at=>at.errors.length>0)}}async function Ne(Ce,nt){const He=nt.apis.get(s.vp);if(!He)throw new Error(`No implementation available for ${s.vp}`);return(await re((0,dt.U2)(Ce),He)).items.length>0}function ye(){const{entity:Ce}=(0,l.u)(),nt=(0,dt.U2)(Ce),He=(0,pe.u)(s.vp),{loading:Xe,error:at,value:Ge}=(0,H.A)(async()=>re(nt,He),[nt,He]);return at?A.createElement(xe.A,{mb:1},A.createElement(ve._1,{error:at})):Xe||!Ge?null:A.createElement(A.Fragment,null,Ge.items.map((Ye,Re)=>A.createElement(xe.A,{key:Re,mb:1},(0,dt.U2)(Ce)!==(0,dt.U2)(Ye.entity)&&A.createElement(xe.A,{p:1},"The error below originates from"," ",A.createElement(s.zI,{entityRef:Ye.entity})),Ye.errors.map((Le,ct)=>A.createElement(ve._1,{key:ct,error:Le})))))}const X="core.backstage.entitySwitch",N=Ce=>null;(0,_.h3)(N,X,!0);const V=Ce=>{var nt,He;const{entity:Xe,loading:at}=(0,l.a)(),Ge=(0,pe.b)(),Ye=(0,_.OJ)(Ce.children,Le=>Le.selectByComponentData({key:X,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(ct=>{if(at&&!Xe)return[];const{if:vt,children:St}=ct.props;return Xe?[{if:vt==null?void 0:vt(Xe,{apis:Ge}),children:St}]:[{if:vt===void 0,children:St}]}),[Ge,Xe,at]);if(Ye.some(Le=>typeof Le.if=="object"&&"then"in Le.if))return A.createElement(ie,{results:Ye,renderMultipleMatches:Ce.renderMultipleMatches});if(Ce.renderMultipleMatches==="all"){const Le=Ye.filter(ct=>ct.if).map(ct=>ct.children);return Le.length===0?oe(Ye):A.createElement(A.Fragment,null,Le)}return(He=(nt=Ye.find(Le=>Le.if))==null?void 0:nt.children)!=null?He:oe(Ye)};function ie({results:Ce,renderMultipleMatches:nt}){const{loading:He,value:Xe}=(0,H.A)(async()=>{var at;const Ge=Ce.map(async({if:Ye,children:Re})=>{try{if(await Ye)return Re}catch{}return null});if(nt==="all"){const Ye=(await Promise.all(Ge)).filter(Boolean);return Ye.length===0?oe(Ce):A.createElement(A.Fragment,null,Ye)}return(at=(await Promise.all(Ge)).find(Boolean))!=null?at:oe(Ce)},[Ce]);return He||!Xe?null:Xe}function oe(Ce){var nt,He;return(He=(nt=Ce.filter(Xe=>Xe.if===void 0)[0])==null?void 0:nt.children)!=null?He:null}V.Case=N},21319:(Tn,_t,e)=>{"use strict";e.d(_t,{D:()=>At,a:()=>xt,b:()=>Le,c:()=>ue,r:()=>Nt,u:()=>gt,v:()=>ft});var s=e(29835);function l(S){const{years:P=0,months:j=0,weeks:Z=0,days:Te=0,hours:Ke=0,minutes:mt=0,seconds:Je=0,milliseconds:qe=0}=S;return((((P*365+j*30+Z*7+Te)*24+Ke)*60+mt)*60+Je)*1e3+qe}var b=e(25033),A=e.n(b),W=e(25295),r=e.n(W),q=e(96403),Q=e.n(q),t=e(92651),pe=e(14451),_=e(94389),de=e(17400),me=e(71865),H=e(52755),xe=e(89350),ve=e(33602),dt=e(48108),z=e(55700),ee=e(45250),D=e(11638);const w={seconds:10},M={milliseconds:50},y={api:de.A,component:xe.A,system:_.A,resource:z.A,domain:pe.A,location:H.A,user:dt.A,group:ve.A,template:me.A};function v(S){return{async:S.async,render:({entityRef:P,entity:j,context:Z})=>({snapshot:(0,t.Tj)(j||P,Z),loadEntity:S.async})}}var F=(S,P,j)=>{if(!P.has(S))throw TypeError("Cannot "+j)},re=(S,P,j)=>(F(S,P,"read from private field"),j?j.call(S):P.get(S)),Ne=(S,P,j)=>{if(P.has(S))throw TypeError("Cannot add the same private member more than once");P instanceof WeakSet?P.add(S):P.set(S,j)},ye=(S,P,j,Z)=>(F(S,P,"write to private field"),Z?Z.call(S,j):P.set(S,j),j),X=(S,P,j)=>(F(S,P,"access private method"),j),N,V,ie,oe,Ce,nt,He,Xe,at,Ge,Ye;const Re=class mi{constructor(P){Ne(this,nt),Ne(this,Xe),Ne(this,Ge),Ne(this,N,void 0),Ne(this,V,void 0),Ne(this,ie,void 0),Ne(this,oe,void 0),Ne(this,Ce,void 0);var j,Z,Te,Ke;const mt=(j=P.cacheTtl)!=null?j:w,Je=(Z=P.batchDelay)!=null?Z:M,qe=(Te=P.renderer)!=null?Te:v({async:!0}),Ut={};if(Object.entries(y).forEach(([nn,It])=>{Ut[nn.toLocaleLowerCase("en-US")]=It}),Object.entries((Ke=P.kindIcons)!=null?Ke:{}).forEach(([nn,It])=>{Ut[nn.toLocaleLowerCase("en-US")]=It}),qe.async){if(!P.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");ye(this,ie,X(this,Xe,at).call(this,{cacheTtl:mt,batchDelay:Je,renderer:qe,catalogApi:P.catalogApi}))}ye(this,V,l(mt)),ye(this,N,new Map),ye(this,oe,Ut),ye(this,Ce,qe)}static createLocal(){return new mi({renderer:v({async:!1})})}static create(P){return new mi(P)}forEntity(P,j){const{entityRef:Z,kind:Te,entity:Ke,needsLoad:mt}=X(this,nt,He).call(this,P),Je=nn=>{const{snapshot:It}=re(this,Ce).render({entityRef:Z,loading:nn.loading,entity:nn.entity,context:j||{}});return{...It,entityRef:Z,Icon:X(this,Ge,Ye).call(this,It.Icon,Te)}};let qe;try{qe=Je({loading:mt,entity:Ke})}catch{qe={primaryTitle:Z,entityRef:Z}}const Ut=mt?new(Q())(nn=>{let It=!1;return Promise.resolve().then(()=>{var ht;return(ht=re(this,ie))==null?void 0:ht.load(Z)}).then(ht=>{if(!It&&ht&&ht.metadata.etag!==(Ke==null?void 0:Ke.metadata.etag)){const Zt=Je({loading:!1,entity:ht});nn.next(Zt)}}).catch(()=>{}).finally(()=>{It||nn.complete()}),()=>{It=!0}}):void 0;return{snapshot:qe,update$:Ut}}};N=new WeakMap,V=new WeakMap,ie=new WeakMap,oe=new WeakMap,Ce=new WeakMap,nt=new WeakSet,He=function(S){if(typeof S!="string")return{entity:S,kind:S.kind,entityRef:(0,s.U2)(S),needsLoad:!1};const P=re(this,N).get(S),j=P==null?void 0:P.entity,Te=(!P||Date.now()-P.updatedAt>re(this,V))&&re(this,Ce).async!==!1&&re(this,ie)!==void 0;return{entity:j,kind:(0,s.KU)(S).kind,entityRef:S,needsLoad:Te}},Xe=new WeakSet,at=function(S){const P=l(S.cacheTtl),j=l(S.batchDelay);return new(A())(async Z=>{const{items:Te}=await S.catalogApi.getEntitiesByRefs({entityRefs:Z}),Ke=Date.now();return Z.forEach((mt,Je)=>{re(this,N).set(mt,{updatedAt:Ke,entity:Te[Je]})}),Te},{name:"DefaultEntityPresentationApi",cacheMap:new(r())(P),maxBatchSize:100,batchScheduleFn:j?Z=>setTimeout(Z,j):void 0})},Ge=new WeakSet,Ye=function(S,P){return S||(S===!1?!1:re(this,oe)[P.toLocaleLowerCase("en-US")])};let Le=Re;async function ct({storageApi:S}){var P;const j=S.forBucket("settings"),Z=S.forBucket("starredEntities"),Te=j.snapshot("starredEntities").value;if(!(0,ee.isArray)(Te))return;const Ke=new Set((P=Z.snapshot("entityRefs").value)!=null?P:[]);Te.filter(ee.isString).map(mt=>mt.split(":")).filter(mt=>mt.length===4&&mt[0]==="entity").map(([mt,Je,qe,Ut])=>(0,s.U2)({kind:Je,namespace:qe,name:Ut})).forEach(mt=>Ke.add(mt)),await Z.set("entityRefs",Array.from(Ke)),await j.remove("starredEntities")}var vt=Object.defineProperty,St=(S,P,j)=>P in S?vt(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,Jt=(S,P,j)=>(St(S,typeof P!="symbol"?P+"":P,j),j);class At{constructor(P){Jt(this,"settingsStore"),Jt(this,"starredEntities"),Jt(this,"subscribers",new Set),Jt(this,"observable",new(Q())(Z=>(Z.next(new Set(this.starredEntities)),this.subscribers.add(Z),()=>{this.subscribers.delete(Z)})));var j;ct(P).then(),this.settingsStore=P.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((j=this.settingsStore.snapshot("entityRefs").value)!=null?j:[]),this.settingsStore.observe$("entityRefs").subscribe({next:Z=>{var Te;this.starredEntities=new Set((Te=Z.value)!=null?Te:[]),this.notifyChanges()}})}async toggleStarred(P){this.starredEntities.has(P)?this.starredEntities.delete(P):this.starredEntities.add(P),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const P of this.subscribers)P.next(new Set(this.starredEntities))}}const ue=(0,D.Il)({id:"create-component",optional:!0}),ft=(0,D.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),xt=(0,D.Il)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),gt=(0,D.Il)({id:"catalog:unregister-redirect",optional:!0}),Nt=(0,D.HM)({id:"catalog"})},22073:(Tn,_t,e)=>{"use strict";e.d(_t,{E:()=>ct,JF:()=>St,N8:()=>Xe,Sz:()=>Ge,TZ:()=>He,VF:()=>v,Wm:()=>F,XQ:()=>Ce,Z9:()=>oe,bb:()=>Le,sU:()=>At,yE:()=>Ye,yP:()=>Re,yW:()=>nt});var s=e(21319),l=e(14041),b=e(58837),A=e(99703),W=e(92651),r=e(65398),q=e.n(r),Q=e(11638),t=e(5124),pe=e(75757),_=e(22299),de=e(25033),me=e.n(de),H=e(96403),xe=e.n(H),ve=e(45250),dt=e.n(ve);function z(){const ue=useApi(catalogApiRef),{error:ft,loading:xt,value:gt}=useAsync(async()=>await ue.getEntityFacets({facets:["kind"]}).then(S=>{var P;return((P=S.facets.kind)==null?void 0:P.map(j=>j.value).sort())||[]}),[ue]);return{loading:xt,error:ft,allKinds:gt!=null?gt:[]}}function ee(ue,ft,xt){let gt=ue;return ft&&(gt=gt.filter(S=>ft.some(P=>P.toLocaleLowerCase("en-US")===S.toLocaleLowerCase("en-US")))),xt&&!ue.some(S=>S.toLocaleLowerCase("en-US")===xt.toLocaleLowerCase("en-US"))&&(gt=gt.concat([xt])),gt.sort().reduce((S,P)=>(S[P.toLocaleLowerCase("en-US")]=P,S),{})}const D=(0,b.A)(ue=>(0,A.A)({root:{...ue.typography.h4}}));function w(ue){var ft,xt;const{initialFilter:gt="component",allowedKinds:Nt}=ue,S=D(),{allKinds:P}=z(),{filters:j,updateFilters:Z,queryParameters:{kind:Te}}=useEntityList(),Ke=useMemo(()=>[Te].flat()[0],[Te]),[mt,Je]=useState((xt=Ke!=null?Ke:(ft=j.kind)==null?void 0:ft.value)!=null?xt:gt);useEffect(()=>{Ke&&Je(Ke)},[Ke]),useEffect(()=>{var Ut,nn;(Ut=j.kind)!=null&&Ut.value&&Je((nn=j.kind)==null?void 0:nn.value)},[j.kind]),useEffect(()=>{Z({kind:mt?new EntityKindFilter(mt):void 0})},[mt,Z]);const qe=ee(P,Nt,mt);return React.createElement(Select,{input:React.createElement(InputBase,null),value:mt.toLocaleLowerCase("en-US"),onChange:Ut=>Je(Ut.target.value),classes:S},Object.keys(qe).map(Ut=>React.createElement(MenuItem,{value:Ut,key:Ut},`${pluralize(qe[Ut])}`)))}function M(ue,ft){return!!(ue&&typeof ue=="string"&&(ue==null?void 0:ue.toLocaleLowerCase("en-US"))===(ft==null?void 0:ft.toLocaleLowerCase("en-US")))}function y(ue,ft){return typeof ft=="string"?M(ue,ft):ft.length===0||ft.some(xt=>M(ue,xt))}function v(ue){return ye({kind:ue})}function F(ue){return ye({kind:"component",type:ue})}function re(ue){return ye({kind:"resource",type:ue})}function Ne(ue){return ye({kind:"api",type:ue})}function ye(ue){return ft=>{var xt;return!(ue.kind&&!y(ft.kind,ue.kind)||ue.type&&!y((xt=ft.spec)==null?void 0:xt.type,ue.type))}}function X(ue){return ft=>{var xt;return y((xt=ft.metadata)==null?void 0:xt.namespace,ue)}}const N=null,V=W.GI.Filters,ie=W.GI.Content,oe=(0,Q.i1)({id:"catalog",apis:[(0,Q.bW)({api:W.vp,deps:{discoveryApi:t.q,fetchApi:t.s},factory:({discoveryApi:ue,fetchApi:ft})=>new pe.dJ({discoveryApi:ue,fetchApi:ft})}),(0,Q.bW)({api:W.ah,deps:{storageApi:t.y},factory:({storageApi:ue})=>new s.D({storageApi:ue})}),(0,Q.bW)({api:W.nQ,deps:{catalogApi:W.vp},factory:({catalogApi:ue})=>s.b.create({catalogApi:ue})})],routes:{catalogIndex:s.r,catalogEntity:W.sF},externalRoutes:{createComponent:s.c,viewTechDoc:s.v,createFromTemplate:s.a,unregisterRedirect:s.u}}),Ce=oe.provide((0,Q.QJ)({name:"CatalogIndexPage",component:()=>e.e(7614).then(e.bind(e,97614)).then(ue=>ue.CatalogPage),mountPoint:s.r})),nt=oe.provide((0,Q.QJ)({name:"CatalogEntityPage",component:()=>e.e(2059).then(e.bind(e,32059)).then(ue=>ue.CatalogEntityPage),mountPoint:W.sF})),He=oe.provide((0,Q.NC)({name:"EntityAboutCard",component:{lazy:()=>e.e(6037).then(e.bind(e,16037)).then(ue=>ue.AboutCard)}})),Xe=oe.provide((0,Q.NC)({name:"EntityLinksCard",component:{lazy:()=>e.e(3532).then(e.bind(e,73532)).then(ue=>ue.EntityLinksCard)}})),at=oe.provide((0,Q.NC)({name:"EntityLabelsCard",component:{lazy:()=>e.e(8878).then(e.bind(e,8878)).then(ue=>ue.EntityLabelsCard)}})),Ge=oe.provide((0,Q.NC)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(2611).then(e.bind(e,72611)).then(ue=>ue.HasSystemsCard)}})),Ye=oe.provide((0,Q.NC)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(5511).then(e.bind(e,55511)).then(ue=>ue.HasComponentsCard)}})),Re=oe.provide((0,Q.NC)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(6518).then(e.bind(e,16518)).then(ue=>ue.HasSubcomponentsCard)}})),Le=oe.provide((0,Q.NC)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(7471).then(e.bind(e,27471)).then(ue=>ue.HasResourcesCard)}})),ct=oe.provide((0,Q.NC)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(971).then(e.bind(e,20971)).then(ue=>ue.DependsOnComponentsCard)}})),vt=oe.provide((0,Q.NC)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(7120).then(e.bind(e,67120)).then(ue=>ue.DependencyOfComponentsCard)}})),St=oe.provide((0,Q.NC)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(4271).then(e.bind(e,44271)).then(ue=>ue.DependsOnResourcesCard)}})),Jt=oe.provide((0,Q.NC)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(8484).then(e.bind(e,88484)).then(ue=>ue.RelatedEntitiesCard)}})),At=oe.provide((0,_.c)({name:"CatalogSearchResultListItem",component:()=>e.e(9575).then(e.bind(e,39575)).then(ue=>ue.CatalogSearchResultListItem),predicate:ue=>ue.type==="software-catalog"}))},79367:(Tn,_t,e)=>{"use strict";e.d(_t,{MM:()=>m,P4:()=>le,XT:()=>nn,Zg:()=>R,ee:()=>Hn});var s=e(5124),l=e(11638),b=e(63188),A=e(49863),W=e(33478),r=e(14041),q=e(2069),Q=e(92651),t=e(73657),pe=e(18690),_=e(8973),de=e(91567),me=e(29655),H=e(77125),xe=e(78467),ve=e(88951),dt=e(5951),z=e(4321),ee=e(61009),D=e(13677),w=e(54801),M=e(10985),y=e(9719),v=e(72501),F=e(58837),re=e(99703),Ne=e(6924),ye=e(21718),X=e(52950),N=e(22968),V=e(73466),ie=e(18171),oe=e(4313),Ce=e(71677),nt=e(43669),He=e(4832),Xe=e(29835),at=e(52536),Ge=e.n(at),Ye=e(29365),Re=e(64947),Le=e(67720),ct=e(91413),vt=e(42899),St=e(60083),Jt=e(81215),At=e(26343),ue=e(16249),ft=e(42226),xt=e(64118),gt=e(77714),Nt=e(28966),S=e(74219);const P=(0,s.c)({id:"plugin.githubactions.service"});var j=Object.defineProperty,Z=(I,U,J)=>U in I?j(I,U,{enumerable:!0,configurable:!0,writable:!0,value:J}):I[U]=J,Te=(I,U,J)=>(Z(I,typeof U!="symbol"?U+"":U,J),J);class Ke{constructor(U){Te(this,"configApi"),Te(this,"scmAuthApi"),this.configApi=U.configApi,this.scmAuthApi=U.scmAuthApi}async getOctokit(U="github.com"){var J;const{token:we}=await this.scmAuthApi.getCredentials({url:`https://${U}/`,additionalScope:{customScopes:{github:["repo"]}}}),st=(0,b.bm)((J=this.configApi.getOptionalConfigArray("integrations.github"))!=null?J:[]).find(qt=>qt.host===U),Rt=st==null?void 0:st.apiBaseUrl;return new A.E({auth:we,baseUrl:Rt})}async reRunWorkflow(U){const{hostname:J,owner:we,repo:Oe,runId:st}=U;return(await this.getOctokit(J)).actions.reRunWorkflow({owner:we,repo:Oe,run_id:st})}async listWorkflowRuns(U){const{hostname:J,owner:we,repo:Oe,pageSize:st=100,page:Rt=0,branch:qt}=U;return(await(await this.getOctokit(J)).actions.listWorkflowRunsForRepo({owner:we,repo:Oe,per_page:st,page:Rt,...qt?{branch:qt}:{}})).data}async getWorkflow(U){const{hostname:J,owner:we,repo:Oe,id:st}=U;return(await(await this.getOctokit(J)).actions.getWorkflow({owner:we,repo:Oe,workflow_id:st})).data}async getWorkflowRun(U){const{hostname:J,owner:we,repo:Oe,id:st}=U;return(await(await this.getOctokit(J)).actions.getWorkflowRun({owner:we,repo:Oe,run_id:st})).data}async listJobsForWorkflowRun(U){const{hostname:J,owner:we,repo:Oe,id:st,pageSize:Rt=100,page:qt=0}=U;return(await(await this.getOctokit(J)).actions.listJobsForWorkflowRun({owner:we,repo:Oe,run_id:st,per_page:Rt,page:qt})).data}async downloadJobLogsForWorkflowRun(U){const{hostname:J,owner:we,repo:Oe,runId:st}=U;return(await(await this.getOctokit(J)).actions.downloadJobLogsForWorkflowRun({owner:we,repo:Oe,job_id:st})).data}async listBranches(U){const{hostname:J,owner:we,repo:Oe,page:st=0}=U;return(await(await this.getOctokit(J)).rest.repos.listBranches({owner:we,repo:Oe,per_page:100,page:st})).data}async getDefaultBranch(U){const{hostname:J,owner:we,repo:Oe}=U;return(await(await this.getOctokit(J)).rest.repos.get({owner:we,repo:Oe})).data.default_branch}}var mt=(I=>(I[I.success=0]="success",I[I.failure=1]="failure",I[I.pending=2]="pending",I[I.running=3]="running",I))(mt||{});const Je=(0,l.HM)({id:"github-actions"}),qe=(0,l.Vb)({id:"github-actions/build",path:"/:id",parent:Je}),Ut=(0,l.i1)({id:"github-actions",apis:[(0,l.bW)({api:P,deps:{configApi:s.p,scmAuthApi:W.$J},factory:({configApi:I,scmAuthApi:U})=>new Ke({configApi:I,scmAuthApi:U})})],routes:{entityContent:Je}}),nn=Ut.provide((0,l.QJ)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return Vn}).then(I=>I.Router),mountPoint:Je})),It=Ut.provide((0,l.NC)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(3616).then(e.bind(e,93616)).then(I=>I.LatestWorkflowRunCard)}})),ht=Ut.provide((0,l.NC)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(3616).then(e.bind(e,93616)).then(I=>I.LatestWorkflowsForBranchCard)}})),Zt=Ut.provide((0,l.NC)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(3616).then(e.bind(e,93616)).then(I=>I.RecentWorkflowRunsCard)}})),ln="github.com/project-slug",on=I=>{var U,J;return(J=(U=I==null?void 0:I.metadata.annotations)==null?void 0:U[ln])!=null?J:""},Qt=I=>r.createElement(r.Fragment,null,r.createElement(Ae,{...I}),Ve(I));function Ae({status:I,conclusion:U}){if(I===void 0)return null;switch(I.toLocaleLowerCase("en-US")){case"queued":return r.createElement(N.Ek,null);case"in_progress":return r.createElement(N.W$,null);case"completed":switch(U==null?void 0:U.toLocaleLowerCase("en-US")){case"skipped":case"cancelled":return r.createElement(N.c_,null);case"timed_out":return r.createElement(N.EV,null);case"failure":return r.createElement(N.Xs,null);default:return r.createElement(N.So,null)}default:return r.createElement(N.Ek,null)}}function Ve({status:I,conclusion:U}){if(I===void 0)return"";switch(I.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch(U==null?void 0:U.toLocaleLowerCase("en-US")){case"skipped":case"cancelled":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const jt=({hostname:I,owner:U,repo:J})=>{const we=(0,s.u)(P),{id:Oe}=(0,l.KS)(qe);return(0,V.A)(async()=>{if(!J||!U)throw new Error("No repo/owner provided");const st=await we.listJobsForWorkflowRun({hostname:I,owner:U,repo:J,id:parseInt(Oe,10)});return{total_count:st.total_count,jobs:st.jobs.map(Rt=>{var qt,en,hn,pn;return{html_url:(qt=Rt.html_url)!=null?qt:void 0,status:Rt.status,conclusion:(en=Rt.conclusion)!=null?en:void 0,started_at:Rt.started_at,completed_at:(hn=Rt.completed_at)!=null?hn:void 0,id:Rt.id,name:Rt.name,steps:(pn=Rt.steps)==null?void 0:pn.map($t=>{var Pn,un,Un;return{name:$t.name,status:$t.status,conclusion:(Pn=$t.conclusion)!=null?Pn:void 0,number:$t.number,started_at:(un=$t.started_at)!=null?un:void 0,completed_at:(Un=$t.completed_at)!=null?Un:void 0}})}})}},[J,U,Oe])},zt=({hostname:I,owner:U,repo:J})=>{const we=(0,s.u)(P),{id:Oe}=(0,l.KS)(qe);return(0,V.A)(async()=>J&&U?we.getWorkflowRun({hostname:I,owner:U,repo:J,id:parseInt(Oe,10)}):Promise.reject(new Error("No repo/owner provided")),[J,U,Oe])},Kt=({hostname:I,owner:U,repo:J,id:we})=>{const Oe=(0,s.u)(P);return(0,V.A)(async()=>J&&U?Oe.downloadJobLogsForWorkflowRun({hostname:I,owner:U,repo:J,runId:we}):Promise.reject("No repo/owner provided"),[J,U,we])},Et=I=>{var U,J,we;const Oe=(we=(U=I==null?void 0:I.metadata.annotations)==null?void 0:U[Xe.I4])!=null?we:(J=I==null?void 0:I.metadata.annotations)==null?void 0:J[Xe.Eo];return Oe!=null&&Oe.startsWith("url:")?Ge()(Oe.slice(4)).resource:void 0},xn=(0,F.A)(I=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:I.palette.background.default}})),dn=({entity:I,runId:U,inProgress:J})=>{const we=xn(),Oe=on(I),st=Et(I),[Rt,qt]=Oe&&Oe.split("/")||[],en=Kt({hostname:st,owner:Rt,repo:qt,id:U}),hn=en.value?String(en.value):void 0,[pn,$t]=r.useState(!1),Pn=()=>{$t(!0)},un=()=>{$t(!1)};return r.createElement(_.A,{TransitionProps:{unmountOnExit:!0},disabled:J},r.createElement(me.A,{expandIcon:r.createElement(Ne.A,null),IconButtonProps:{className:we.button}},r.createElement(v.A,{variant:"button"},en.loading?r.createElement(xe.A,null):"Job Log"),r.createElement(Ce.Ay,{title:"Open Log",TransitionComponent:nt.A,arrow:!0},r.createElement(He.A,{onClick:Un=>{Un.stopPropagation(),Pn()},style:{marginLeft:"auto"}})),r.createElement(oe.A,{className:we.modal,onClick:Un=>Un.stopPropagation(),open:pn,onClose:un},r.createElement(ie.A,{in:pn},r.createElement("div",{className:we.modalLogContainer},r.createElement(N.rW,{text:hn!=null?hn:"No Values Found",classes:{root:we.log}}))))),hn&&r.createElement("div",{className:we.normalLogContainer},r.createElement(N.rW,{text:hn,classes:{root:we.log}})))},Xt=(0,F.A)(I=>({root:{maxWidth:720,margin:I.spacing(2)},title:{padding:I.spacing(1,0,2,0)},table:{padding:I.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),yn=(I,U)=>{if(!I||!U)return"";const J=X.c9.fromISO(I);return(U?X.c9.fromISO(U):X.c9.now()).diff(J).toFormat("m 'minutes' s 'seconds'")},Qe=({step:I})=>{var U;return r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(dt.A,{primary:I.name,secondary:yn(I.started_at,I.completed_at)})),r.createElement(w.A,null,r.createElement(Qt,{status:I.status.toLocaleUpperCase("en-US"),conclusion:(U=I.conclusion)==null?void 0:U.toLocaleUpperCase("en-US")})))},pt=({job:I,className:U,entity:J})=>{var we;const Oe=Xt();return r.createElement(_.A,{TransitionProps:{unmountOnExit:!0},className:U},r.createElement(me.A,{expandIcon:r.createElement(Ne.A,null),IconButtonProps:{className:Oe.button}},r.createElement(v.A,{variant:"button"},I.name," (",yn(I.started_at,I.completed_at),")")),r.createElement(de.A,{className:Oe.accordionDetails},r.createElement(M.A,null,r.createElement(ee.A,null,(we=I.steps)==null?void 0:we.map(st=>r.createElement(Qe,{key:st.number,step:st}))))),I.status==="queued"||I.status==="in_progress"?r.createElement(dn,{runId:I.id,inProgress:!0,entity:J}):r.createElement(dn,{runId:I.id,inProgress:!1,entity:J}))},Dt=({jobs:I,entity:U})=>{const J=Xt();return r.createElement(H.A,null,I&&I.total_count>0&&I.jobs.map(we=>r.createElement(pt,{key:we.id,job:we,className:we.status!=="success"?J.failed:J.success,entity:U})))},it=({entity:I})=>{var U,J,we,Oe,st,Rt,qt,en,hn,pn,$t,Pn,un,Un,qn;const ta=on(I),$n=Et(I),[bn,fn]=ta&&ta.split("/")||[],Vt=zt({hostname:$n,owner:bn,repo:fn}),En=jt({hostname:$n,owner:bn,repo:fn}),Sn=Xt();return Vt.error&&Vt.error.message?r.createElement(v.A,{variant:"h6",color:"error"},"Failed to load build, ",Vt.error.message):Vt.loading?r.createElement(ve.A,null):r.createElement("div",{className:Sn.root},r.createElement(H.A,{mb:3},r.createElement(N.BI,{"aria-label":"breadcrumb"},r.createElement(N.N_,{to:".."},"Workflow runs"),r.createElement(v.A,null,"Workflow run details"))),r.createElement(M.A,{component:z.A,className:Sn.table},r.createElement(ee.A,null,r.createElement(D.A,null,r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Branch")),r.createElement(w.A,null,(U=Vt.value)==null?void 0:U.head_branch)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Message")),r.createElement(w.A,null,(we=(J=Vt.value)==null?void 0:J.head_commit)==null?void 0:we.message)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Commit ID")),r.createElement(w.A,null,(st=(Oe=Vt.value)==null?void 0:Oe.head_commit)==null?void 0:st.id)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Workflow")),r.createElement(w.A,null,(Rt=Vt.value)==null?void 0:Rt.name)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Status")),r.createElement(w.A,null,r.createElement(Qt,{status:((qt=Vt.value)==null?void 0:qt.status)||void 0,conclusion:((en=Vt.value)==null?void 0:en.conclusion)||void 0}))),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Author")),r.createElement(w.A,null,`${($t=(pn=(hn=Vt.value)==null?void 0:hn.head_commit)==null?void 0:pn.author)==null?void 0:$t.name} (${(Un=(un=(Pn=Vt.value)==null?void 0:Pn.head_commit)==null?void 0:un.author)==null?void 0:Un.email})`)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Links")),r.createElement(w.A,null,((qn=Vt.value)==null?void 0:qn.html_url)&&r.createElement(N.N_,{to:Vt.value.html_url},"Workflow runs on GitHub"," ",r.createElement(ye.A,{className:Sn.externalLinkIcon})))),r.createElement(y.A,null,r.createElement(w.A,{colSpan:2},r.createElement(v.A,{noWrap:!0},"Jobs"),En.loading?r.createElement(xe.A,null):r.createElement(Dt,{jobs:En.value,entity:I})))))))};function Ze({hostname:I,owner:U,repo:J,branch:we,initialPageSize:Oe=6}){const st=(0,s.u)(P),Rt=(0,s.u)(s.r),[qt,en]=(0,r.useState)(0),[hn,pn]=(0,r.useState)(0),[$t,Pn]=(0,r.useState)(Oe),[un,Un]=(0,r.useState)([]),[qn,ta]=(0,r.useState)(""),{loading:$n,value:bn,retry:fn,error:Vt}=(0,Nt.A)(async()=>{const En=await st.getDefaultBranch({hostname:I,owner:U,repo:J});ta(En);let Sn=we;we==="default"&&(Sn=En);const Ra=await(async()=>{let G=!0,be=0;const We=[];for(;G;){const ot=await st.listBranches({hostname:I,owner:U,repo:J,page:be});ot.length===0&&(G=!1),be++,We.push(...ot)}return We})();Un(Ra);const Oa=await st.listWorkflowRuns({hostname:I,owner:U,repo:J,pageSize:$t,page:hn+1,branch:Sn});return en(Oa.total_count),Oa.workflow_runs.map(G=>{var be,We,ot,wt,Ot,rn,te,Ie,ke;return{workflowName:(be=G.name)!=null?be:void 0,message:(We=G.head_commit)==null?void 0:We.message,id:`${G.id}`,onReRunClick:async()=>{try{await st.reRunWorkflow({hostname:I,owner:U,repo:J,runId:G.id})}catch(ze){Rt.post(new Error(`Failed to rerun the workflow: ${ze.message}`))}},source:{branchName:(ot=G.head_branch)!=null?ot:void 0,commit:{hash:(wt=G.head_commit)==null?void 0:wt.id,url:(te=(Ot=G.head_repository)==null?void 0:Ot.branches_url)==null?void 0:te.replace("{/branch}",(rn=G.head_branch)!=null?rn:"")}},status:(Ie=G.status)!=null?Ie:void 0,conclusion:(ke=G.conclusion)!=null?ke:void 0,url:G.url,githubUrl:G.html_url}})},[hn,$t,J,U]);return[{page:hn,pageSize:$t,loading:$n,runs:bn,branches:un,defaultBranch:qn,projectName:`${U}/${J}`,total:qt,error:Vt},{runs:bn,setPage:pn,setPageSize:Pn,retry:fn}]}const Y=(0,F.A)(I=>(0,re.A)({card:{border:`1px solid ${I.palette.divider}`,boxShadow:I.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:I.spacing(4,1,1),flex:"1",minWidth:"0px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"middle"},bottomline:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-5px"},pagination:{width:"100%"}})),he={skipped:"warning",canceled:"info",timed_out:"error",failure:"error",success:"success"},fe=(I,U)=>{var J,we,Oe,st;const Rt=U.toLocaleLowerCase();return((J=I.workflowName)==null?void 0:J.toLocaleLowerCase().includes(Rt))||((we=I.source.branchName)==null?void 0:we.toLocaleLowerCase().includes(Rt))||((Oe=I.status)==null?void 0:Oe.toLocaleLowerCase().includes(Rt))||((st=I.id)==null?void 0:st.toLocaleLowerCase().includes(Rt))},Ct=({runs:I,searchTerm:U,loading:J,onChangePageSize:we,onChangePage:Oe,page:st,total:Rt,pageSize:qt})=>{const en=Y(),hn=(0,l.Sf)(qe),pn=I==null?void 0:I.filter($t=>fe($t,U));return r.createElement(vt.A,{container:!0,spacing:3},pn&&(I==null?void 0:I.length)!==0?pn.map($t=>{var Pn,un;return r.createElement(vt.A,{key:$t.id,item:!0,container:!0,xs:12,sm:4,md:4,xl:4},r.createElement(H.A,{className:en.card},r.createElement(H.A,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},r.createElement(H.A,{pt:2,sx:{width:"100%"},textAlign:"center"},r.createElement(Ce.Ay,{title:(Pn=$t.status)!=null?Pn:"No Status",placement:"top-start"},r.createElement(S.A,{variant:"outlined",severity:he[$t.conclusion],style:{alignItems:"center"}},r.createElement(v.A,{variant:"h6"},r.createElement(N.N_,{to:hn({id:$t.id})},r.createElement(v.A,{color:"primary",variant:"h6"},$t.workflowName))))),r.createElement(Ce.Ay,{title:(un=$t.message)!=null?un:"No run message"},r.createElement(v.A,{variant:"body2",component:"span",style:{fontSize:"smaller"}},r.createElement(N.h2,{content:`Commit ID : ${$t.source.commit.hash}`}))),$t.source.branchName&&r.createElement(N.h2,{content:`Branch : ${$t.source.branchName}`}),r.createElement(Le.A,{key:$t.id,size:"small",label:`Workflow ID : ${$t.id}`}),r.createElement(Le.A,{size:"small",label:r.createElement(H.A,{display:"flex",alignItems:"center"},r.createElement(Qt,{status:$t.status,conclusion:$t.conclusion}))}),r.createElement("div",{className:en.bottomline},$t.githubUrl&&r.createElement(N.N_,{to:$t.githubUrl},"Workflow runs on GitHub"," ",r.createElement(ye.A,{className:en.externalLinkIcon})),r.createElement(ct.A,null,r.createElement(Ce.Ay,{title:"Rerun workflow"},r.createElement(Ye.A,{onClick:$t.onReRunClick,style:{fontSize:"12px"}},r.createElement(xt.A,null)))))))))}):r.createElement(H.A,{p:2},J?r.createElement(xe.A,null):"No matching runs found."),r.createElement("div",{className:en.pagination},r.createElement(St.A,{component:"div",count:Rt,page:st,rowsPerPage:qt,onPageChange:($t,Pn)=>Oe(Pn),onRowsPerPageChange:$t=>we(parseInt($t.target.value,6)),labelRowsPerPage:"Workflows per page",rowsPerPageOptions:[6,12,18,{label:"All",value:-1}]})))},Ft=({searchTerm:I,handleSearch:U,retry:J})=>r.createElement(r.Fragment,null,r.createElement(H.A,{flexGrow:1}),r.createElement(ue.A,{type:"search",label:"Search",value:I,onChange:U,"data-testid":"search-control",style:{marginRight:"20px"}}),r.createElement(ct.A,null,r.createElement(Ce.Ay,{title:"Reload workflow runs"},r.createElement(Ye.A,{onClick:J},r.createElement(gt.A,null))))),cn=({entity:I})=>{const U=on(I),J=Et(I),[we,Oe]=(U!=null?U:"/").split("/"),[st,Rt]=(0,r.useState)("default"),[qt,en]=(0,r.useState)([]),[hn,pn]=(0,r.useState)(""),$t=Sn=>{pn(Sn.target.value)},[{runs:Pn,branches:un,defaultBranch:Un,...qn},{retry:ta,setPage:$n,setPageSize:bn}]=Ze({hostname:J,owner:we,repo:Oe,branch:st==="all"?void 0:st}),fn=J||"github.com",Vt=!qn.loading&&!Pn,En=Sn=>{const ya=Sn.target.value;Rt(ya),$n(0),ta()};return(0,r.useEffect)(()=>{en(Pn)},[Pn,st]),(0,r.useEffect)(()=>{Rt(Un)},[Un]),r.createElement(vt.A,{item:!0},Vt?r.createElement(N.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:r.createElement(Re.A,{variant:"contained",color:"primary",href:`https://${fn}/${U}/actions/new`},"Create new Workflow")}):r.createElement(N.nO,{title:r.createElement(H.A,{display:"flex",alignItems:"center"},r.createElement(ft.A,null),r.createElement(H.A,{mr:1}),r.createElement(v.A,{variant:"h6"},U),r.createElement(Jt.A,{value:st,key:st,label:"Branch",onChange:En,"data-testid":"menu-control",style:{marginLeft:"30px",marginRight:"20px",width:"230px"}},un.map(Sn=>r.createElement(At.A,{key:Sn.name,value:Sn.name},Sn.name===Un?r.createElement(v.A,{variant:"body2",component:"span"},Sn.name," ",r.createElement(v.A,{variant:"body2",component:"span",style:{color:"lightgray",fontSize:"x-small"}},"(default)")):Sn.name)),r.createElement(At.A,{value:"all",key:"all",style:{color:"lightGrey",fontSize:"small"}},"select all branches")),r.createElement(Ft,{searchTerm:hn,handleSearch:$t,retry:ta}))},r.createElement(Ct,{runs:qt,loading:qn.loading,onChangePageSize:bn,onChangePage:$n,page:qn.page,total:qn.total,pageSize:qn.pageSize,searchTerm:hn,projectName:U})))},An=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:I=>{const U=()=>{const J=(0,l.Sf)(qe);return r.createElement(N.N_,{component:t.N_,to:J({id:I.id})},I.message)};return r.createElement(U,null)}},{title:"Source",render:I=>{var U,J;return r.createElement(v.A,{variant:"body2",noWrap:!0},r.createElement(v.A,{paragraph:!0,variant:"body2"},(U=I.source)==null?void 0:U.branchName),r.createElement(v.A,{paragraph:!0,variant:"body2"},(J=I.source)==null?void 0:J.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(I,U)=>Ve(I).localeCompare(Ve(U)),render:I=>r.createElement(H.A,{display:"flex",alignItems:"center"},r.createElement(Qt,{status:I.status,conclusion:I.conclusion}))},{title:"Actions",render:I=>r.createElement(Ce.Ay,{title:"Rerun workflow"},r.createElement(Ye.A,{onClick:I.onReRunClick},r.createElement(xt.A,null))),width:"10%"}],In=({projectName:I,loading:U,pageSize:J,page:we,retry:Oe,runs:st,onChangePage:Rt,onChangePageSize:qt,total:en})=>r.createElement(N.XI,{isLoading:U,options:{paging:!0,pageSize:J,padding:"dense"},totalCount:en,page:we,actions:[{icon:()=>r.createElement(gt.A,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Oe()}],data:st!=null?st:[],onPageChange:Rt,onRowsPerPageChange:qt,style:{width:"100%"},title:r.createElement(H.A,{display:"flex",alignItems:"center"},r.createElement(ft.A,null),r.createElement(H.A,{mr:1}),r.createElement(v.A,{variant:"h6"},I)),columns:An}),Bn=({entity:I,branch:U})=>{const J=on(I),we=Et(I),[Oe,st]=(J!=null?J:"/").split("/"),[{runs:Rt,...qt},{retry:en,setPage:hn,setPageSize:pn}]=Ze({hostname:we,owner:Oe,repo:st,branch:U}),$t=we||"github.com";return!qt.loading&&!Rt?r.createElement(N.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:r.createElement(Re.A,{variant:"contained",color:"primary",href:`https://${$t}/${J}/actions/new`},"Create new Workflow")}):r.createElement(In,{...qt,runs:Rt,loading:qt.loading,retry:en,onChangePageSize:pn,onChangePage:hn})},Hn=I=>{var U;return!!((U=I.metadata.annotations)!=null&&U[ln])};var Vn=Object.freeze({__proto__:null,Router:I=>{const{view:U="table"}=I,{entity:J}=(0,q.u)();if(!Hn(J))return r.createElement(Q.o9,{annotation:ln});const we=U==="cards"?r.createElement(cn,{entity:J}):r.createElement(Bn,{entity:J});return r.createElement(pe.BV,null,r.createElement(pe.qh,{path:"/",element:we}),r.createElement(pe.qh,{path:`${qe.path}`,element:r.createElement(it,{entity:J})}))},isGithubActionsAvailable:Hn});const ua=(0,F.A)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),ut=I=>{var U;const{error:J,loading:we,lastRun:Oe,branch:st}=I,Rt=ua();return J?r.createElement(v.A,null,"Couldn't fetch latest ",st," run"):we?r.createElement(ve.A,null):r.createElement(N.tA,{metadata:{status:r.createElement(r.Fragment,null,r.createElement(Qt,{status:Oe.status,conclusion:Oe.conclusion})),message:Oe.message,url:r.createElement(N.N_,{to:(U=Oe.githubUrl)!=null?U:""},"See more on GitHub"," ",r.createElement(ye.A,{className:Rt.externalLinkIcon}))}})},m=I=>{var U,J,we;const{branch:Oe="master",variant:st}=I,{entity:Rt}=(0,q.u)(),qt=(0,s.u)(s.r),en=Et(Rt),[hn,pn]=((J=(U=Rt==null?void 0:Rt.metadata.annotations)==null?void 0:U[ln])!=null?J:"/").split("/"),[{runs:$t,loading:Pn,error:un}]=Ze({hostname:en,owner:hn,repo:pn,branch:Oe}),Un=(we=$t==null?void 0:$t[0])!=null?we:{};return(0,r.useEffect)(()=>{un&&qt.post(un)},[un,qt]),r.createElement(N.nO,{title:`Last ${Oe} build`,variant:st},r.createElement(ut,{error:un,loading:Pn,branch:Oe,lastRun:Un}))},R=I=>{const{branch:U="master",variant:J}=I,{entity:we}=(0,q.u)();return r.createElement(N.nO,{title:`Last ${U} build`,variant:J},r.createElement(Bn,{branch:U,entity:we}))},K=I=>I.split(`
`)[0],le=I=>{var U,J;const{branch:we,dense:Oe=!1,limit:st=5,variant:Rt}=I,{entity:qt}=(0,q.u)(),en=(0,s.u)(s.r),hn=Et(qt),[pn,$t]=((J=(U=qt==null?void 0:qt.metadata.annotations)==null?void 0:U[ln])!=null?J:"/").split("/"),[{runs:Pn=[],loading:un,error:Un}]=Ze({hostname:hn,owner:pn,repo:$t,branch:we,initialPageSize:st});(0,r.useEffect)(()=>{Un&&en.post(Un)},[Un,en]);const qn=hn||"github.com",ta=(0,l.Sf)(qe);return Un?r.createElement(N.bJ,{title:Un.message,error:Un}):r.createElement(N.nO,{title:"Recent Workflow Runs",subheader:we?`Branch: ${we}`:"All Branches",noPadding:!0,variant:Rt},Pn.length?r.createElement(N.XI,{isLoading:un,options:{search:!1,paging:!1,padding:Oe?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:$n=>{var bn;return r.createElement(N.N_,{component:t.N_,to:ta({id:$n.id})},K((bn=$n.message)!=null?bn:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:Qt}],data:Pn}):r.createElement("div",{style:{textAlign:"center"}},r.createElement(v.A,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),r.createElement(v.A,{variant:"body2"},r.createElement(N.N_,{to:`https://${qn}/${pn}/${$t}/actions/new`},"Create a new workflow"))))}},12670:(Tn,_t,e)=>{"use strict";e.d(_t,{c:()=>l});var s=e(11638);const l=(0,s.Il)({id:"catalog-index"})},78190:(Tn,_t,e)=>{"use strict";e.d(_t,{O2:()=>ee,VA:()=>z,iU:()=>ve,k8:()=>D,lD:()=>dt,yJ:()=>xe});var s=e(11638),l=e(5124),b=e(12670),A=e(14041),W=e(29835),r=e(22968),q=e(73466),Q=e(92651),t=e(65398),pe=e.n(t),_=e(50308),de=e.n(_),me=e(45250),H=e.n(me);const xe=(0,s.i1)({id:"org",externalRoutes:{catalogIndex:b.c}}),ve=xe.provide((0,s.NC)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(w=>w.GroupProfileCard)}})),dt=xe.provide((0,s.NC)({name:"EntityMembersListCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(w=>w.MembersListCard)}})),z=xe.provide((0,s.NC)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(w=>w.OwnershipCard)}})),ee=xe.provide((0,s.NC)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(w=>w.UserProfileCard)}})),D=w=>{const{singularTitle:M,pluralTitle:y,icon:v,filter:F}=w,re=(0,l.u)(l.t),Ne=(0,l.u)(Q.vp),ye=(0,s.Sf)(Q.sF),{value:X}=(0,q.A)(async()=>{const N=await re.getBackstageIdentity();return(await Ne.getEntities({filter:[{kind:"group","relations.hasMember":N.userEntityRef,...F!=null?F:{}}],fields:["metadata","kind"]})).items},[]);if(!(X!=null&&X.length))return null;if(X.length===1){const N=X[0];return A.createElement(r.uk,{text:M,to:ye((0,W.sM)(N)),icon:v})}return A.createElement(r.uk,{icon:v,text:y},A.createElement(r.O6,{title:y},X==null?void 0:X.map(function(V){return A.createElement(r.hl,{title:V.metadata.title||V.metadata.name,subtitle:V.metadata.namespace!==W.oQ?V.metadata.namespace:void 0,to:ye((0,W.sM)(V)),icon:v,key:(0,W.U2)(V)})})))}},50585:(Tn,_t,e)=>{"use strict";e.d(_t,{$D:()=>M,OL:()=>Q,bh:()=>r,iP:()=>H});var s=e(3399),l=e(10288),b=e.n(l),A=e(52964),W=e(46195),r=(y=>(y.DENY="DENY",y.ALLOW="ALLOW",y.CONDITIONAL="CONDITIONAL",y))(r||{});function q(y,v){return y.name===v.name}function Q(y,v){return"resourceType"in y?!v||y.resourceType===v:!1}function t(y){return y.attributes.action==="create"}function pe(y){return y.attributes.action==="read"}function _(y){return y.attributes.action==="update"}function de(y){return y.attributes.action==="delete"}function me(y){return{authorize:async(v,F)=>await y.authorize(v,F),authorizeConditional(v,F){const re=v;return y.authorize(re,F)}}}function H({name:y,attributes:v,resourceType:F}){return F?{type:"resource",name:y,attributes:v,resourceType:F}:{type:"basic",name:y,attributes:v}}var xe=Object.defineProperty,ve=(y,v,F)=>v in y?xe(y,v,{enumerable:!0,configurable:!0,writable:!0,value:F}):y[v]=F,dt=(y,v,F)=>(ve(y,typeof v!="symbol"?v+"":v,F),F);const z=W.z.lazy(()=>W.z.object({rule:W.z.string(),resourceType:W.z.string(),params:W.z.record(W.z.any()).optional()}).or(W.z.object({anyOf:W.z.array(z).nonempty()})).or(W.z.object({allOf:W.z.array(z).nonempty()})).or(W.z.object({not:z}))),ee=W.z.object({result:W.z.literal(r.ALLOW).or(W.z.literal(r.DENY))}),D=W.z.union([W.z.object({result:W.z.literal(r.ALLOW).or(W.z.literal(r.DENY))}),W.z.object({result:W.z.literal(r.CONDITIONAL),pluginId:W.z.string(),resourceType:W.z.string(),conditions:z})]),w=(y,v)=>W.z.object({items:W.z.array(W.z.intersection(W.z.object({id:W.z.string()}),y)).refine(F=>F.length===v.size&&F.every(({id:re})=>v.has(re)),{message:"Items in response do not match request"})});class M{constructor(v){dt(this,"enabled"),dt(this,"discovery");var F;this.discovery=v.discovery,this.enabled=(F=v.config.getOptionalBoolean("permission.enabled"))!=null?F:!1}async authorize(v,F){return this.makeRequest(v,ee,F)}async authorizeConditional(v,F){return this.makeRequest(v,D,F)}async makeRequest(v,F,re){if(!this.enabled)return v.map(oe=>({result:r.ALLOW}));const Ne={items:v.map(oe=>({id:A.A(),...oe}))},ye=await this.discovery.getBaseUrl("permission"),X=await b()(`${ye}/authorize`,{method:"POST",body:JSON.stringify(Ne),headers:{...this.getAuthorizationHeader(re==null?void 0:re.token),"content-type":"application/json"}});if(!X.ok)throw await s.o3.fromResponse(X);const N=await X.json(),ie=w(F,new Set(Ne.items.map(({id:oe})=>oe))).parse(N).items.reduce((oe,Ce)=>(oe[Ce.id]=Ce,oe),{});return Ne.items.map(oe=>ie[oe.id])}getAuthorizationHeader(v){return v?{Authorization:`Bearer ${v}`}:{}}}},17899:(Tn,_t,e)=>{"use strict";e.d(_t,{JT:()=>Q,Tw:()=>pe,ak:()=>q,x9:()=>r});var s=e(14041),l=e(5124),b=e(11638),A=e(50585),W=e(68721);const r=(0,l.c)({id:"plugin.permission.api"});class q{constructor(de,me){this.permissionClient=de,this.identityApi=me}static create(de){const{config:me,discovery:H,identity:xe}=de,ve=new A.$D({discovery:H,config:me});return new q(ve,xe)}async authorize(de){return(await this.permissionClient.authorize([de],await this.identityApi.getCredentials()))[0]}}function Q(_){const de=(0,l.u)(r),{data:me,error:H}=(0,W.Ay)(_,async xe=>{if((0,A.OL)(xe.permission)&&!xe.resourceRef)return A.bh.DENY;const{result:ve}=await de.authorize(xe);return ve});return H?{error:H,loading:!1,allowed:!1}:me===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:me===A.bh.ALLOW}}const t=_=>{const{permission:de,resourceRef:me,errorComponent:H,...xe}=_,ve=Q(isResourcePermission(de)?{permission:de,resourceRef:me}:{permission:de}),dt=useApp(),{NotFoundErrorPage:z}=dt.getComponents();let ee=H===void 0?React.createElement(z,null):H;return ve.loading?ee=null:ve.allowed&&(ee=_.element),React.createElement(Route,{...xe,element:ee})};function pe(_){const{permission:de,resourceRef:me}=_,H=Q((0,A.OL)(de)?{permission:de,resourceRef:me}:{permission:de}),xe=(0,b.nm)();if(H.loading)return null;if(H.allowed)return s.createElement(s.Fragment,null,_.children);if(_.errorPage)return s.createElement(s.Fragment,null,_.errorPage);const{NotFoundErrorPage:ve}=xe.getComponents();return s.createElement(ve,null)}},10015:(Tn,_t,e)=>{"use strict";e.d(_t,{c:()=>pe});var s=e(29835),l="http://json-schema.org/draft-07/schema",b="TemplateV1beta3",A="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",W=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],r=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},presentation:{type:"object",description:"A way to redefine the labels for actionable buttons.",properties:{backButtonText:{type:"string",description:"A button which return the user to one step back."},createButtonText:{type:"string",description:"A button which start the execution of the template."},reviewButtonText:{type:"string",description:"A button which open the review step to verify the input prior to start the execution."}}},EXPERIMENTAL_recovery:{type:"object",description:"A task recovery section.",properties:{EXPERIMENTAL_strategy:{type:"string",description:"Recovery strategy for your task (none or startOver). By default none"}}},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],q={$schema:l,$id:b,description:A,examples:W,allOf:r};const Q=(0,s.zu)(q),t={async check(_){return Q(_)===_}},pe=_=>_.apiVersion==="scaffolder.backstage.io/v1beta3"&&_.kind==="Template"},97093:(Tn,_t,e)=>{"use strict";e.d(_t,{C1:()=>J,KE:()=>he,KV:()=>bn,RO:()=>rn,Wu:()=>un,gZ:()=>Vn,g_:()=>G,hJ:()=>pn,he:()=>wt,lN:()=>Ra,lV:()=>K});var s=e(5124),l=e(11638),b=e(78733),A=e(21619),W=e(37877),r=e(64947),q=e(88951),Q=e(58837),t=e(99703),pe=e(54917),_=e(14041),de=e(400),me=e(72937),H=e(22968),xe=e(94403),ve=e(45810),dt=e.n(ve),z=e(73466),ee=e(12564),D=e(46108),w=e.n(D),M=e(43157),y=e(30860),v=e(95061),F=e(72501),re=e(94384),Ne=e(58007),ye=e(8109),X=e(46423),N=e(5951),V=e(4321),ie=e(7147),oe=e(29835),Ce=e(92651),nt=e(2069),He=e(77125),Xe=e(40703),at=e(59469),Ge=e(48653),Ye=e(67720),Re=e(37197),Le=e(42899),ct=e(23127),vt=e(10015),St=e(52950),Jt=e(91638),At=e(86613),ue=e(4832),ft=e(54819),xt=e(78467),gt=e(51767),Nt=e(25711),S=e(53373),P=e.n(S),j=e(7707),Z=e(9181),Te=e(45313),Ke=e(4794),mt=e.n(Ke),Je=e(76842),qe=e(56005),Ut=e.n(qe),nn=e(69076),It=e(86901),ht=e(16249),Zt=e(44148),ln=e(41260),on=e(6924),Qt=e(20577),Ae=e(29365),Ve=e(26343),jt=e(28233),zt=e(55197),Kt=e(25534),Et=e(75625),xn=e(20353),dn=e(71407);function Xt(te){return typeof te=="object"&&te!==null&&!Array.isArray(te)}function yn(te,Ie){if(!Xt(te))return;const{properties:ke,items:ze,anyOf:et,oneOf:tt,allOf:bt,dependencies:Lt,then:Gt,else:mn}=te;for(const tn in te)te.hasOwnProperty(tn)&&tn.startsWith("ui:")&&(Ie[tn]=te[tn],delete te[tn]);if(Xt(ke))for(const tn in ke){if(!ke.hasOwnProperty(tn))continue;const ia=ke[tn];if(Xt(ia)){if(!Xt(Ie[tn])){const Nn={};Ie[tn]=Nn}yn(ia,Ie[tn])}}if(Xt(ze)){const tn={};Ie.items=tn,yn(ze,tn)}if(Array.isArray(et))for(const tn of et)Xt(tn)&&yn(tn,Ie);if(Array.isArray(tt))for(const tn of tt)Xt(tn)&&yn(tn,Ie);if(Array.isArray(bt))for(const tn of bt)Xt(tn)&&yn(tn,Ie);if(Xt(Lt))for(const tn of Object.keys(Lt)){const ia=Lt[tn];Xt(ia)&&yn(ia,Ie)}Xt(Gt)&&yn(Gt,Ie),Xt(mn)&&yn(mn,Ie)}const Qe=te=>{const Ie={},ke=(0,me.qg)((0,me.As)(te));return yn(ke,Ie),{uiSchema:Ie,schema:ke}},pt=()=>{const te={__errors:[],addError:Ie=>{var ke;(ke=te.__errors)==null||ke.push(Ie)}};return te};function Dt(te){return!!te&&"__errors"in te}function it(te){var Ie;if(!te)return!1;for(const ke of Object.values(te)){if(Dt(ke)){if(((Ie=ke.__errors)!=null?Ie:[]).length>0)return!0;continue}if(it(ke))return!0}return!1}function Ze(te){return typeof te=="object"&&te!==null&&!Array.isArray(te)}const Y=te=>"type"in te&&te.type==="error",he=(te,Ie,ke)=>{async function ze(et,tt="#",bt=et){var Lt,Gt;const mn=new de.t0(te),tn={},ia=async(Nn,Dn,Fn,Yn,Wn)=>{const la=Ie[Nn];if(la){const sa=pt();try{await la(Fn,sa,{...ke,formData:et,schema:Yn,uiSchema:Wn})}catch(Aa){sa.addError(Aa.message)}tn[Dn]=sa}};for(const[Nn,Dn]of Object.entries(bt)){const Fn=`${tt}/${Nn}`,Yn=mn.getSchema({pointer:Fn,data:et});if(!Yn)continue;if(Y(Yn))throw new Error(Yn.message);const{schema:Wn,uiSchema:la}=Qe(Yn),sa=Yn&&Yn.items,Aa=async(Sa,xa,Ha)=>{await ia(Sa["ui:field"],Nn,Dn,xa,Ha)},pa=async Sa=>{if("ui:field"in Sa){const{schema:xa,uiSchema:Ha}=Qe(Yn.items);await Aa(Sa,xa,Ha)}};if("ui:field"in Yn)await Aa(Yn,Wn,la);else if(sa&&"ui:field"in Yn.items)await pa(Yn.items);else if(sa&&Yn.items.type==="object"){const Sa=(Gt=(Lt=Yn.items)==null?void 0:Lt.properties)!=null?Gt:[];for(const[,xa]of Object.entries(Sa))await pa(xa)}else Ze(Dn)&&(tn[Nn]=await ze(et,Fn,Dn))}return tn}return async et=>await ze(et)},fe=te=>{const Ie=Object.fromEntries(Object.entries(te.formState).map(([ke,ze])=>{var et;for(const tt of te.schemas){const Lt=new de.t0(tt.mergedSchema).getSchema({pointer:`#/${ke}`,data:te.formState});if(Lt){const Gt=(et=Lt["ui:backstage"])==null?void 0:et.review;if(Gt){if(Gt.mask)return[ke,Gt.mask];if(Gt.show===!1)return[]}if(Lt["ui:widget"]==="password")return[ke,"******"];if(Lt.enum&&Lt.enumNames)return[ke,Lt.enumNames[Lt.enum.indexOf(ze)]||ze]}}return[ke,ze]}).filter(ke=>ke.length>0));return _.createElement(H.tA,{metadata:Ie})},Ct=te=>{const Ie=(0,s.u)(s.f),ze=te.steps.map(({title:et,description:tt,schema:bt})=>({title:et,description:tt,mergedSchema:bt,...Qe(bt)})).filter(et=>{var tt;const bt=(tt=et.uiSchema["ui:backstage"])==null?void 0:tt.featureFlag;return bt?Ie.isActive(bt):!0}).map(et=>{var tt,bt,Lt,Gt;const mn={...et,schema:{...et.schema,title:void 0}};return((tt=et.schema)!=null&&tt.properties||!((bt=et.schema)!=null&&bt.dependencies))&&(mn.schema.properties=Object.fromEntries(Object.entries((Gt=(Lt=et.schema)==null?void 0:Lt.properties)!=null?Gt:{}).filter(([tn])=>{var ia,Nn;const Dn=(Nn=(ia=et.uiSchema[tn])==null?void 0:ia["ui:backstage"])==null?void 0:Nn.featureFlag;return Dn?Ie.isActive(Dn):!0}))),mn});return{presentation:te.presentation,steps:ze}},Ft=te=>(0,_.useState)(()=>{if(te)return te;const Ie=dt().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(Ie.formData)}catch{return{}}}),cn=te=>{const Ie=(0,s.u)(ee.s),{value:ke,loading:ze,error:et}=(0,z.A)(()=>Ie.getTemplateParameterSchema(te),[Ie,te]);return{manifest:ke,loading:ze,error:et}},An=te=>{const Ie="backstage:featureFlag",ke=(0,s.u)(s.f);if(!te)return;const ze=te==null?void 0:te.steps.filter(et=>{const tt=et.schema[Ie];return typeof tt!="string"||ke.isActive(tt)}).map(et=>{var tt;const bt=w()(et),Lt=[];return bt.schema.properties&&(bt.schema.properties=Object.fromEntries(Object.entries(bt.schema.properties).filter(([Gt,mn])=>mn[Ie]?ke.isActive(mn[Ie])?!0:(Lt.push(Gt),!1):!0)),bt.schema.required=Array.isArray(bt.schema.required)?(tt=bt.schema.required)==null?void 0:tt.filter(Gt=>!Lt.includes(Gt)):bt.schema.required),bt});return{...te,steps:ze}},In=(te,Ie={})=>{var ke;const{layouts:ze=[]}=Ie,et=te==null?void 0:te.uiSchema["ui:ObjectFieldTemplate"];if(typeof et!="string")return te;const tt=(ke=ze.find(bt=>bt.name===et))==null?void 0:ke.component;return tt?{...te,uiSchema:{...te.uiSchema,"ui:ObjectFieldTemplate":tt}}:te};var Hn=Object.freeze({__proto__:null,DescriptionField:({description:te})=>te&&_.createElement(H.h2,{content:te,linkTarget:"_blank"})});const Cn=(0,Q.A)(te=>({markdownDescription:{fontSize:te.typography.caption.fontSize,margin:0,color:te.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),Vn=te=>{const{children:Ie,displayLabel:ke=!0,rawErrors:ze=[],errors:et,help:tt,rawDescription:bt,required:Lt,disabled:Gt}=te,mn=Cn();return _.createElement(v.A,{fullWidth:!0,error:!!ze.length,required:Lt,disabled:Gt},Ie,ke&&bt?_.createElement(H.h2,{content:bt,className:mn.markdownDescription}):null,et,tt)},ua=te=>{const{id:Ie,children:ke,classNames:ze,style:et,disabled:tt,displayLabel:bt,hidden:Lt,label:Gt,onDropPropertyClick:mn,onKeyChange:tn,readonly:ia,required:Nn,rawErrors:Dn=[],errors:Fn,help:Yn,rawDescription:Wn,schema:la,uiSchema:sa,registry:Aa}=te,pa=(0,y.$R)(sa),Sa=(0,y.$F)("WrapIfAdditionalTemplate",Aa,pa);return Lt?_.createElement("div",{style:{display:"none"}},ke):_.createElement(Sa,{classNames:ze,style:et,disabled:tt,id:Ie,label:Gt,onDropPropertyClick:mn,onKeyChange:tn,readonly:ia,required:Nn,schema:la,uiSchema:sa,registry:Aa},_.createElement(Vn,{displayLabel:bt,rawErrors:Dn,help:Yn,disabled:tt,rawDescription:Wn,errors:Fn,required:Nn},ke))},ut=(0,Q.A)(te=>({markdownDescription:{fontSize:te.typography.caption.fontSize,margin:0,color:te.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),m=te=>{const{id:Ie,description:ke}=te,ze=ut();return ke?typeof ke=="string"?_.createElement(H.h2,{content:ke,className:ze.markdownDescription}):_.createElement(F.A,{id:Ie,variant:"subtitle2",style:{marginTop:"5px"}},ke):null},R=(0,M.SL)(re.Sx),K=te=>{const Ie=_.useMemo(()=>{var ze;return Object.fromEntries(Object.entries((ze=te.fields)!=null?ze:{}).map(([et,tt])=>[et,bt=>{var Lt,Gt;return _.createElement(tt,{...bt,uiSchema:(Lt=bt.uiSchema)!=null?Lt:{},formData:bt.formData,rawErrors:(Gt=bt.rawErrors)!=null?Gt:[]})}]))},[te.fields]),ke=_.useMemo(()=>({FieldTemplate:ua,DescriptionFieldTemplate:m,...te.templates}),[te.templates]);return _.createElement(R,{...te,templates:ke,fields:Ie})},le=(0,Q.A)(te=>(0,t.A)({list:{width:"100%"},text:{textWrap:"wrap"}})),I=({errors:te})=>{const Ie=le();return _.createElement(V.A,null,_.createElement(Ne.A,{dense:!0,className:Ie.list},te.map((ke,ze)=>_.createElement(ye.A,{key:ze},_.createElement(X.A,null,_.createElement(ie.A,{color:"error"})),_.createElement(N.A,{classes:{primary:Ie.text},primary:ke.stack})))))},U=(0,Q.A)(te=>({backButton:{marginRight:te.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:te.spacing(2)},formWrapper:{padding:te.spacing(2)}})),J=te=>{var Ie,ke,ze,et,tt,bt,Lt;const{layouts:Gt=[],components:mn={},...tn}=te,{ReviewStateComponent:ia=fe,ReviewStepComponent:Nn,backButtonText:Dn="Back",createButtonText:Fn="Create",reviewButtonText:Yn="Review"}=mn,Wn=(0,l.st)(),{presentation:la,steps:sa}=Ct(tn.manifest),Aa=(0,s.b)(),[pa,Sa]=(0,_.useState)(0),[xa,Ha]=(0,_.useState)(!1),[Va,Ya]=Ft(tn.initialState),[hr,gr]=(0,_.useState)(),or=U(),ur=(0,_.useMemo)(()=>Object.fromEntries(tn.extensions.map(({name:aa,component:Ea})=>[aa,Ea])),[tn.extensions]),Pa=(0,_.useMemo)(()=>({...Hn,...ur}),[ur]),qa=(0,_.useMemo)(()=>Object.fromEntries(tn.extensions.map(({name:aa,validation:Ea})=>[aa,Ea])),[tn.extensions]),er=(0,_.useMemo)(()=>{var aa;return he((aa=sa[pa])==null?void 0:aa.mergedSchema,qa,{apiHolder:Aa})},[sa,pa,qa,Aa]),ir=()=>{Sa(aa=>aa-1)},ar=(0,_.useCallback)(aa=>Ya(Ea=>({...Ea,...aa.formData})),[Ya]),$e=(0,_.useCallback)(()=>{tn.onCreate(Va)},[tn,Va]),ce=In(sa[pa],{layouts:Gt}),lt=async({formData:aa={}})=>{gr(void 0),Ha(!0);const Ea=await er(aa);Ha(!1),it(Ea)?gr(Ea):(gr(void 0),Sa(ba=>{const wa=ba+1;return Wn.captureEvent("click",`Next Step (${wa})`),wa})),Ya(ba=>({...ba,...aa}))},Rn=(ke=(Ie=la==null?void 0:la.buttonLabels)==null?void 0:Ie.backButtonText)!=null?ke:Dn,Kn=(et=(ze=la==null?void 0:la.buttonLabels)==null?void 0:ze.createButtonText)!=null?et:Fn,na=(bt=(tt=la==null?void 0:la.buttonLabels)==null?void 0:tt.reviewButtonText)!=null?bt:Yn;return _.createElement(_.Fragment,null,xa&&_.createElement(q.A,{variant:"indeterminate"}),_.createElement(b.A,{activeStep:pa,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},sa.map((aa,Ea)=>{const ba=pa>Ea;return _.createElement(A.A,{key:Ea},_.createElement(W.A,{"aria-label":`Step ${Ea+1}`,style:{cursor:ba?"pointer":"default"},onClick:()=>{ba&&Sa(Ea)}},aa.title))}),_.createElement(A.A,null,_.createElement(W.A,null,"Review"))),_.createElement("div",{className:or.formWrapper},pa<sa.length?_.createElement(K,{validator:xe.Ay,extraErrors:hr,formData:Va,formContext:{formData:Va},schema:ce.schema,uiSchema:ce.uiSchema,onSubmit:lt,fields:Pa,showErrorList:"top",templates:{ErrorListTemplate:I},onChange:ar,experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(Lt=tn.formProps)!=null?Lt:{}},_.createElement("div",{className:or.footer},_.createElement(r.A,{onClick:ir,className:or.backButton,disabled:pa<1||xa},Rn),_.createElement(r.A,{variant:"contained",color:"primary",type:"submit",disabled:xa},pa===sa.length-1?na:"Next"))):Nn?_.createElement(Nn,{disableButtons:xa,formData:Va,handleBack:ir,handleReset:()=>{},steps:sa,handleCreate:$e}):_.createElement(_.Fragment,null,_.createElement(ia,{formState:Va,schemas:sa}),_.createElement("div",{className:or.footer},_.createElement(r.A,{onClick:ir,className:or.backButton,disabled:pa<1},"Back"),_.createElement(r.A,{variant:"contained",color:"primary",onClick:$e},Kn)))))},we=(0,Q.A)(()=>({header:{backgroundImage:({cardBackgroundImage:te})=>te,color:({cardFontColor:te})=>te},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),Oe=te=>{const{template:{metadata:{title:Ie,name:ke},spec:{type:ze}}}=te,{getPageTheme:et}=(0,pe.A)(),tt=et({themeId:ze}),bt=we({cardFontColor:tt.fontColor,cardBackgroundImage:tt.backgroundImage}),Lt=_.createElement("div",{className:bt.subtitleWrapper},_.createElement("div",null,ze),_.createElement("div",null,_.createElement(Ce.uR,{entity:te.template,style:{padding:0}})));return _.createElement(H.f1,{title:Ie!=null?Ie:ke,subtitle:Lt,classes:{root:bt.header}})},st=(0,Q.A)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),Rt=({icon:te,text:Ie,url:ke})=>{const ze=st();return _.createElement("div",{className:ze.linkText},_.createElement(te,{fontSize:"small"}),_.createElement(H.N_,{style:{marginLeft:"8px"},to:ke},Ie||ke))},qt=(0,Q.A)(te=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:te.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:te.palette.link}})),en=te=>{var Ie,ke,ze,et,tt,bt,Lt;const{template:Gt}=te,mn=qt(),tn=(0,nt.g)(Gt,oe.vv),ia=(0,l.nm)(),Nn=Wn=>{var la;return Wn&&(la=ia.getSystemIcon(Wn))!=null?la:ct.A},Dn=!!((Ie=Gt.metadata.tags)!=null&&Ie.length),Fn=!!((ke=te.additionalLinks)!=null&&ke.length)||!!((ze=Gt.metadata.links)!=null&&ze.length),Yn=!Dn&&!Fn;return _.createElement(Xe.A,null,_.createElement(Oe,{template:Gt}),_.createElement(Ge.A,null,_.createElement(Le.A,{container:!0,spacing:2},_.createElement(Le.A,{item:!0,xs:12},_.createElement(He.A,{className:mn.box},_.createElement(H.h2,{className:mn.markdown,content:(et=Gt.metadata.description)!=null?et:"No description"}))),Yn&&_.createElement(Le.A,{item:!0,xs:12},_.createElement(Re.A,{"data-testid":"template-card-separator"})),Dn&&_.createElement(_.Fragment,null,_.createElement(Le.A,{item:!0,xs:12},_.createElement(Re.A,{"data-testid":"template-card-separator--tags"})),_.createElement(Le.A,{item:!0,xs:12},_.createElement(Le.A,{container:!0,spacing:2},(tt=Gt.metadata.tags)==null?void 0:tt.map(Wn=>_.createElement(Le.A,{key:`grid-${Wn}`,item:!0},_.createElement(Ye.A,{style:{margin:0},size:"small",label:Wn,key:Wn})))))),Fn&&_.createElement(_.Fragment,null,_.createElement(Le.A,{item:!0,xs:12},_.createElement(Re.A,{"data-testid":"template-card-separator--links"})),_.createElement(Le.A,{item:!0,xs:12},_.createElement(Le.A,{container:!0,spacing:2},(bt=te.additionalLinks)==null?void 0:bt.map(({icon:Wn,text:la,url:sa},Aa)=>_.createElement(Le.A,{className:mn.linkText,item:!0,xs:6,key:Aa},_.createElement(Rt,{icon:Wn,text:la,url:sa}))),(Lt=Gt.metadata.links)==null?void 0:Lt.map(({url:Wn,icon:la,title:sa},Aa)=>_.createElement(Le.A,{className:mn.linkText,item:!0,xs:6,key:Aa},_.createElement(Rt,{icon:Nn(la),text:sa||Wn,url:Wn})))))))),_.createElement(at.A,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},_.createElement("div",{className:mn.footer},_.createElement("div",{className:mn.ownedBy},tn.length>0&&_.createElement(_.Fragment,null,_.createElement(H.ny,{fontSize:"small"}),_.createElement(Ce.iI,{style:{marginLeft:"8px"},entityRefs:tn,defaultKind:"Group",hideIcons:!0}))),_.createElement(r.A,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var Wn;return(Wn=te.onSelected)==null?void 0:Wn.call(te,Gt)}},"Choose"))))},hn=te=>{const{templates:Ie,title:ke,components:{CardComponent:ze}={},onSelected:et}=te,tt=typeof ke=="string"?_.createElement(H.dv,{title:ke}):ke;if(Ie.length===0)return null;const bt=ze||en;return _.createElement(H.UC,null,tt,_.createElement(H.s3,null,Ie.map(({template:Lt,additionalLinks:Gt})=>_.createElement(bt,{key:(0,oe.U2)(Lt),additionalLinks:Gt,template:Lt,onSelected:et}))))},pn=te=>{const{loading:Ie,error:ke,entities:ze}=(0,Ce.nK)(),{groups:et,templateFilter:tt,TemplateCardComponent:bt,onTemplateSelected:Lt}=te,Gt=(0,s.u)(s.r),mn=(0,_.useCallback)(tn=>{Lt==null||Lt(tn)},[Lt]);return Ie?_.createElement(H.ke,null):ke?(Gt.post(ke),null):!ze||!ze.length?_.createElement(F.A,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",_.createElement(H.N_,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):_.createElement(_.Fragment,null,et.map(({title:tn,filter:ia},Nn)=>{const Dn=ze.filter(vt.c).filter(Fn=>tt?tt(Fn):!0).filter(ia).map(Fn=>{var Yn,Wn;const la=(Wn=(Yn=te.additionalLinksForEntity)==null?void 0:Yn.call(te,Fn))!=null?Wn:[];return{template:Fn,additionalLinks:la}});return _.createElement(hn,{key:Nn,templates:Dn,title:tn,components:{CardComponent:bt},onSelected:mn})}))},$t=te=>{const Ie=(0,s.u)(Ce.vp),{value:ke}=(0,Jt.A)(async()=>{var ze;const et=await Ie.getEntityByRef(te),tt=(ze=et==null?void 0:et.metadata.annotations)==null?void 0:ze["backstage.io/time-saved"];if(!et||!tt)return;const bt=St.dw.fromISO(tt).as("minutes");if(!Number.isNaN(bt))return bt},[Ie,te]);return ke},Pn=(0,Q.A)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),un=te=>{var Ie;const{title:ke,description:ze,namespace:et,templateName:tt,onCreate:bt,...Lt}=te,Gt=(0,l.st)(),mn=Pn(),tn=(0,oe.U2)({kind:"Template",namespace:et,name:tt}),ia=(0,s.u)(s.r),{loading:Nn,manifest:Dn,error:Fn}=cn(tn),Yn=An(Dn),Wn=$t(tn),la=(0,_.useCallback)(async sa=>{var Aa;bt(sa);const pa=typeof sa.name=="string"?sa.name:void 0;Gt.captureEvent("create",(Aa=pa!=null?pa:tt)!=null?Aa:"unknown",{value:Wn})},[bt,Gt,tt,Wn]);return(0,_.useEffect)(()=>{Fn&&ia.post(new Error(`Failed to load template, ${Fn}`))},[Fn,ia]),Fn?Lt.onError(Fn):_.createElement(H.UC,null,Nn&&_.createElement(H.ke,null),Yn&&_.createElement(H.nO,{title:ke!=null?ke:Yn.title,subheader:_.createElement(H.h2,{className:mn.markdown,content:(Ie=ze!=null?ze:Yn.description)!=null?Ie:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},_.createElement(J,{manifest:Yn,onCreate:la,...Lt})))},Un=te=>React.createElement(SecretsContextProvider,null,React.createElement(un,{...te})),qn=(0,Q.A)({root:{"&:hover":{textDecoration:"none"}}}),ta=te=>{const{links:Ie=[]}=te.output,ke=qn(),ze=(0,l.nm)(),et=(0,l.Sf)(Ce.sF),tt=bt=>{var Lt;return(Lt=ze.getSystemIcon(bt))!=null?Lt:At.A};return _.createElement(_.Fragment,null,Ie.filter(({url:bt,entityRef:Lt})=>bt||Lt).map(({url:bt,entityRef:Lt,title:Gt,icon:mn})=>{if(Lt){const tn=(0,oe.KU)(Lt),ia=et(tn);return{title:Gt,icon:mn,url:ia}}return{title:Gt,icon:mn,url:bt}}).map(({url:bt,title:Lt,icon:Gt},mn)=>{const tn=tt(Gt);return _.createElement(H.N_,{to:bt,key:mn,classes:{root:ke.root}},_.createElement(r.A,{startIcon:_.createElement(tn,null),component:"div",color:"primary"},Lt))}))},$n=te=>{const{output:{text:Ie=[]},index:ke,setIndex:ze}=te,et=(0,l.nm)(),tt=bt=>{var Lt;return(Lt=et.getSystemIcon(bt))!=null?Lt:ue.A};return _.createElement(_.Fragment,null,Ie.filter(({content:bt})=>bt!==void 0).map(({title:bt,icon:Lt},Gt)=>{const mn=tt(Lt);return _.createElement(r.A,{key:Gt,startIcon:_.createElement(mn,null),component:"div",color:"primary",onClick:()=>{ke!==Gt&&(ze==null||ze(Gt))},variant:ke===Gt?"outlined":void 0},bt)}))},bn=te=>{var Ie,ke;const{output:ze}=te,[et,tt]=(0,_.useState)(void 0);(0,_.useEffect)(()=>{if(et===void 0&&(ze!=null&&ze.text)){const Lt=ze.text.findIndex(Gt=>Gt.default);tt(Lt>=0?Lt:0)}},[et,ze]);const bt=(0,_.useMemo)(()=>{var Lt;return et!==void 0?(Lt=ze==null?void 0:ze.text)==null?void 0:Lt[et]:null},[ze,et]);return ze?_.createElement(_.Fragment,null,_.createElement(He.A,{paddingBottom:2},_.createElement(V.A,null,_.createElement(He.A,{padding:2,justifyContent:"center",display:"flex",gridGap:16},_.createElement($n,{output:ze,index:et,setIndex:tt}),_.createElement(ta,{output:ze})))),bt?_.createElement(He.A,{paddingBottom:2},_.createElement(H.nO,{title:(Ie=bt.title)!=null?Ie:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},_.createElement(He.A,{padding:2,height:"100%"},_.createElement(H.h2,{content:(ke=bt.content)!=null?ke:""})))):null):null},fn=(0,Q.A)(te=>({root:{color:te.palette.text.disabled},completed:{color:te.palette.status.ok},error:{color:te.palette.status.error}})),Vt=te=>{const Ie=fn(),{active:ke,completed:ze,error:et,skipped:tt}=te,bt=()=>ke?_.createElement(xt.A,{size:"20px"}):ze?_.createElement(j.A,null):et?_.createElement(Z.A,null):tt?_.createElement(gt.A,null):_.createElement(Nt.A,null);return _.createElement("div",{className:P()(Ie.root,{[Ie.completed]:ze,[Ie.error]:et})},bt())},En=te=>{const[Ie,ke]=(0,_.useState)(""),{step:ze}=te,et=()=>ze.startedAt&&ze.endedAt&&Ie?null:ze.startedAt&&ze.endedAt?1:1e3,tt=(0,_.useCallback)(()=>{if(!ze.startedAt){ke("");return}const bt=ze.endedAt?St.c9.fromISO(ze.endedAt):St.c9.local(),Lt=St.c9.fromISO(ze.startedAt),Gt=St.IX.fromDateTimes(Lt,bt).toDuration().valueOf();ke(mt()(Gt,{round:!0}))},[ze.endedAt,ze.startedAt]);return(0,Je.u)(tt),(0,Te.A)(tt,et()),_.createElement(F.A,{variant:"caption"},Ie)},Sn=(0,Q.A)(te=>({failed:{backgroundColor:te.palette.error.main},success:{backgroundColor:te.palette.success.main}})),ya=te=>{const Ie=Sn();return te.isComplete?_.createElement(q.A,{variant:"determinate",classes:{bar:te.isError?Ie.failed:Ie.success},value:100}):_.createElement(q.A,{variant:"indeterminate"})},Ra=te=>{var Ie,ke;return _.createElement(V.A,{style:{position:"relative",overflow:"hidden"}},_.createElement(ya,{isComplete:(Ie=te.isComplete)!=null?Ie:!1,isError:(ke=te.isError)!=null?ke:!1}),_.createElement(He.A,{padding:2},_.createElement(b.A,{activeStep:te.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},te.steps.map(ze=>{const et=ze.status==="completed",tt=ze.status==="failed",bt=ze.status==="processing",Lt=ze.status==="skipped",Gt={completed:et,error:tt,active:bt,skipped:Lt};return _.createElement(A.A,{key:ze.id},_.createElement(ft.A,null,_.createElement(W.A,{StepIconProps:Gt,StepIconComponent:Vt,"data-testid":"step-label"},_.createElement(He.A,null,ze.name),!Lt&&_.createElement(En,{step:ze}))))}))))},Oa=(0,Q.A)({root:{width:"100%",height:"100%",position:"relative"}}),G=te=>{const Ie=Oa();return _.createElement("div",{className:Ie.root},_.createElement(H.rW,{text:Object.values(te.logs).map(ke=>ke.join(`
`)).filter(Boolean).join(`
`)}))},be=_.createElement(ln.A,{fontSize:"small"}),We=_.createElement(Zt.A,{fontSize:"small"}),ot=(0,Q.A)({root:{},label:{}},{name:"ScaffolderReactTemplateCategoryPicker"}),wt=()=>{const te=ot(),Ie=(0,s.u)(s.l),{error:ke,loading:ze,availableTypes:et,selectedTypes:tt,setSelectedTypes:bt}=(0,Ce.jF)();return ze?_.createElement(H.ke,null):ke?(Ie.post({message:`Failed to load entity types with error: ${ke}`,severity:"error"}),null):et?_.createElement(He.A,{className:te.root,pb:1,pt:1},_.createElement(F.A,{className:te.label,variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),_.createElement(Qt.Ay,{multiple:!0,id:"categories-picker",options:et,value:tt,onChange:(Lt,Gt)=>bt(Gt),renderOption:(Lt,{selected:Gt})=>_.createElement(It.A,{control:_.createElement(nn.A,{icon:be,checkedIcon:We,checked:Gt}),label:Ut()(Lt)}),size:"small",popupIcon:_.createElement(on.A,null),renderInput:Lt=>_.createElement(ht.A,{...Lt,variant:"outlined"})})):null},Ot=(0,Q.A)(te=>({button:{color:te.page.fontColor}}));function rn(te){const{onEditorClicked:Ie,onActionsClicked:ke,onTasksClicked:ze,onCreateClicked:et}=te,tt=Ot(),[bt,Lt]=(0,_.useState)();if(!Ie&&!ke)return null;const Gt=tn=>{Lt(tn.currentTarget)},mn=()=>{Lt(void 0)};return _.createElement(_.Fragment,null,_.createElement(Ae.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!bt,"aria-haspopup":"true",role:"button",onClick:Gt,"data-testid":"menu-button",color:"inherit",className:tt.button},_.createElement(dn.A,null)),_.createElement(zt.Ay,{"aria-labelledby":"long-menu",open:!!bt,onClose:mn,anchorEl:bt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},_.createElement(jt.A,null,et&&_.createElement(Ve.A,{onClick:et},_.createElement(X.A,null,_.createElement(Kt.A,{fontSize:"small"})),_.createElement(N.A,{primary:"Create"})),Ie&&_.createElement(Ve.A,{onClick:Ie},_.createElement(X.A,null,_.createElement(Et.A,{fontSize:"small"})),_.createElement(N.A,{primary:"Template Editor"})),ke&&_.createElement(Ve.A,{onClick:ke},_.createElement(X.A,null,_.createElement(ue.A,{fontSize:"small"})),_.createElement(N.A,{primary:"Installed Actions"})),ze&&_.createElement(Ve.A,{onClick:ze},_.createElement(X.A,null,_.createElement(xn.A,{fontSize:"small"})),_.createElement(N.A,{primary:"Task List"})))))}},12564:(Tn,_t,e)=>{"use strict";e.d(_t,{S:()=>W,s:()=>q,u:()=>r});var s=e(97388),l=e(14041),b=e(5124);const A=(0,s.tK)("secrets-context"),W=Q=>{const{initialSecrets:t={}}=Q,[pe,_]=(0,l.useState)({...t});return l.createElement(A.Provider,{value:(0,s.Bl)({1:{secrets:pe,setSecrets:_}})},Q.children)},r=()=>{var Q;const t=(Q=(0,l.useContext)(A))==null?void 0:Q.atVersion(1);if(!t)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:pe,secrets:_={}}=t;return{setSecrets:(0,l.useCallback)(me=>{pe(H=>({...H,...me}))},[pe]),secrets:_}},q=(0,s.Q6)("scaffolder:scaffolder-api-ref",()=>(0,b.c)({id:"plugin.scaffolder.service"}))},77189:(Tn,_t,e)=>{"use strict";e.d(_t,{TA:()=>xe,cw:()=>me,l3:()=>pe,zD:()=>Q});var s=e(11638),l=e(5124),b=e(12564),A=e(82806),W=e(14041);const r="scaffolder.extensions.wrapper.v1",q="scaffolder.extensions.field.v1";function Q(z){return{expose(){const ee=()=>null;return(0,s.h3)(ee,q,z),ee}}}const t=()=>null;(0,s.h3)(t,r,!0);const pe=z=>(0,s.OJ)(z,ee=>ee.selectByComponentData({key:r}).findComponentData({key:q})),_="scaffolder.layout.v1",de="scaffolder.layouts.wrapper.v1",me=z=>(0,s.OJ)(z,ee=>ee.selectByComponentData({key:de}).findComponentData({key:_}));function H(z,ee){var D,w,M;switch(ee.type){case"INIT":{z.steps=ee.data.spec.steps.reduce((y,v)=>(y[v.id]={status:"open",id:v.id},y),{}),z.stepLogs=ee.data.spec.steps.reduce((y,v)=>(y[v.id]=[],y),{}),z.loading=!1,z.error=void 0,z.completed=!1,z.task=ee.data;return}case"LOGS":{const y=ee.data;for(const v of y){const F=`${v.createdAt} ${v.body.message}`;if(!v.body.stepId||!((D=z.steps)!=null&&D[v.body.stepId]))continue;const re=(w=z.stepLogs)==null?void 0:w[v.body.stepId],Ne=(M=z.steps)==null?void 0:M[v.body.stepId];Ne&&v.body.status&&v.body.status!==Ne.status&&(Ne.status=v.body.status,Ne.status==="processing"&&(Ne.startedAt=v.createdAt),["cancelled","completed","failed"].includes(Ne.status)&&(Ne.endedAt=v.createdAt)),re==null||re.push(F)}return}case"COMPLETED":{z.completed=!0,z.output=ee.data.body.output,z.error=ee.data.body.error;return}case"CANCELLED":{z.cancelled=!0;return}case"RECOVERED":{for(const y in z.steps)z.steps.hasOwnProperty(y)&&(z.steps[y].startedAt=void 0,z.steps[y].endedAt=void 0,z.steps[y].status="open");return}case"ERROR":{z.error=ee.data,z.loading=!1,z.completed=!0;return}default:return}}const xe=z=>{const ee=(0,l.u)(b.s),[D,w]=(0,A.A)(H,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,W.useEffect)(()=>{let M=!1,y,v,F=1;const re=()=>ee.getTask(z).then(Ne=>{if(M)return;w({type:"INIT",data:Ne});const ye=ee.streamLogs({taskId:z}),X=new Array;function N(){if(X.length){const V=X.splice(0,X.length);w({type:"LOGS",data:V})}}v=setInterval(N,500),y=ye.subscribe({next:V=>{switch(F=1,V.type){case"log":return X.push(V);case"cancelled":w({type:"CANCELLED"});return;case"completion":N(),w({type:"COMPLETED",data:V});return;case"recovered":w({type:"RECOVERED",data:V});return;default:throw new Error(`Unhandled event type ${V.type} in observer`)}},error:V=>{N();const ie=3;V.message||(V.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${F>ie?ie:F}/${ie} retries)`),setTimeout(()=>{F+=1,re()},15e3),w({type:"ERROR",data:V})}})},Ne=>{M||w({type:"ERROR",data:Ne})});return re(),()=>{M=!0,y&&y.unsubscribe(),v&&clearInterval(v)}},[ee,w,z]),D};function ve(z){return{expose(){const ee=()=>null;return attachComponentData(ee,_,z),ee}}}const dt=()=>null;(0,s.h3)(dt,de,!0)},16976:(Tn,_t,e)=>{"use strict";e.d(_t,{E:()=>gt,M:()=>ht,O:()=>qe,R:()=>it,a:()=>xt,b:()=>Ke,c:()=>Te,d:()=>It,e:()=>j,f:()=>Ve,g:()=>Je,h:()=>Bn,i:()=>In,j:()=>he,k:()=>Y,l:()=>cn,m:()=>Ft,n:()=>ua,r:()=>jt,v:()=>Zt});var s=e(29835),l=e(14041),b=e(16249),A=e(46195),W=e(75757),r=e(5124),q=e(11638),Q=e(92651),t=e(95061),pe=e(20577),_=e(73466),de=e(33478),me=e(51253),H=e(63301),xe=e(48543),ve=e(22968),dt=e(12564),z=e(77189),ee=e(22771),D=e(77125),w=e(37197),M=e(72501),y=e(8380),v=e(63177),F=e(3399),re=e(18690),Ne=e(64947),ye=e(4321),X=e(58837),N=e(54917),V=e(45516),ie=e(45810),oe=e.n(ie),Ce=e(29365),nt=e(46423),He=e(5951),Xe=e(26343),at=e(28233),Ge=e(55197),Ye=e(91042),Re=e(92399),Le=e(55534),ct=e(25283),vt=e(86868),St=e(71407),Jt=e(97093);function At(ut,m){return{schema:{returnValue:(0,v.Ay)(ut),uiOptions:m?(0,v.Ay)(m):void 0},type:null,uiOptionsType:null}}const ue=A.z.record(A.z.string().or(A.z.object({exists:A.z.boolean().optional()})).or(A.z.array(A.z.string()))),xt=At(A.z.string(),A.z.object({allowedKinds:A.z.array(A.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:A.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:A.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:A.z.union([A.z.string(),A.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:A.z.array(ue).or(ue).optional().describe("List of key-value filter expression for entities")})).schema,gt=ut=>{var m,R,K,le,I;const{onChange:U,schema:{title:J="Entity",description:we="An entity from the catalog"},required:Oe,uiSchema:st,rawErrors:Rt,formData:qt,idSchema:en}=ut,hn=P(st),pn=(m=st["ui:options"])==null?void 0:m.defaultKind,$t=((R=st["ui:options"])==null?void 0:R.defaultNamespace)||void 0,Pn=(0,r.u)(Q.vp),{value:un,loading:Un}=(0,_.A)(async()=>{const fn=["metadata.name","metadata.namespace","kind"],{items:Vt}=await Pn.getEntities(hn?{filter:hn,fields:fn}:{filter:void 0,fields:fn});return Vt}),qn=(le=(K=st["ui:options"])==null?void 0:K.allowArbitraryValues)!=null?le:!0,ta=(0,l.useCallback)(fn=>{try{return(0,Q.SE)((0,s.KU)(fn,{defaultKind:pn,defaultNamespace:$t}),{defaultKind:pn,defaultNamespace:$t})}catch{return fn}},[pn,$t]),$n=(0,l.useCallback)((fn,Vt,En)=>{if(typeof Vt!="string")U(Vt?(0,s.U2)(Vt):void 0);else if(En==="blur"||En==="create-option"){let Sn=Vt;try{Sn=(0,s.U2)((0,s.KU)(Vt,{defaultKind:pn,defaultNamespace:$t}))}catch{}(qt!==Vt||qn)&&U(Sn)}},[U,qt,pn,$t,qn]),bn=(I=un==null?void 0:un.find(fn=>(0,s.U2)(fn)===qt))!=null?I:qn&&qt?ta(qt):"";return(0,l.useEffect)(()=>{(un==null?void 0:un.length)===1&&bn===""&&U((0,s.U2)(un[0]))},[un,U,bn]),l.createElement(t.A,{margin:"normal",required:Oe,error:(Rt==null?void 0:Rt.length)>0&&!qt},l.createElement(pe.Ay,{disabled:(un==null?void 0:un.length)===1,id:en==null?void 0:en.$id,value:bn,loading:Un,onChange:$n,options:un||[],getOptionLabel:fn=>typeof fn=="string"?fn:(0,Q.SE)(fn,{defaultKind:pn,defaultNamespace:$t}),autoSelect:!0,freeSolo:qn,renderInput:fn=>l.createElement(b.A,{...fn,label:J,margin:"dense",helperText:we,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Oe,InputProps:fn.InputProps})}))};function Nt(ut){return typeof ut=="object"&&ut.exists?W.cr:ut==null?void 0:ut.toString()}function S(ut){const m={};for(const[R,K]of Object.entries(ut))Array.isArray(K)?m[R]=K:m[R]=Nt(K);return m}function P(ut){var m,R;const K=(m=ut["ui:options"])==null?void 0:m.allowedKinds,le=((R=ut["ui:options"])==null?void 0:R.catalogFilter)||K&&{kind:K};if(le)return Array.isArray(le)?le.map(S):S(le)}const j=(ut,m)=>{s.yz.isValidObjectName(ut)||m.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Te=At(A.z.string()).schema,Ke=ut=>{const{onChange:m,required:R,schema:{title:K="Name",description:le="Unique name of the component"},rawErrors:I,formData:U,uiSchema:{"ui:autofocus":J},idSchema:we,placeholder:Oe}=ut;return l.createElement(b.A,{id:we==null?void 0:we.$id,label:K,placeholder:Oe,helperText:le,required:R,value:U!=null?U:"",onChange:({target:{value:st}})=>m(st),margin:"normal",error:(I==null?void 0:I.length)>0&&!U,inputProps:{autoFocus:J}})},Je=At(A.z.string(),A.z.object({allowedKinds:A.z.array(A.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:A.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:A.z.union([A.z.string(),A.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:A.z.array(ue).or(ue).optional().describe("List of key-value filter expression for entities")})).schema,qe=ut=>{var m,R,K,le,I;const{schema:{title:U="Owner",description:J="The owner of the component"},uiSchema:we,...Oe}=ut,st=(m=we["ui:options"])==null?void 0:m.defaultNamespace,Rt=(R=we["ui:options"])==null?void 0:R.allowedKinds,qt=((K=we["ui:options"])==null?void 0:K.catalogFilter)||{kind:Rt||["Group","User"]},en={...we,"ui:options":{catalogFilter:qt,defaultKind:"Group",allowArbitraryValues:(I=(le=we["ui:options"])==null?void 0:le.allowArbitraryValues)!=null?I:!0,...st!==void 0?{defaultNamespace:st}:{}}};return l.createElement(gt,{...Oe,schema:{title:U,description:J},uiSchema:en})},Ut=A.z.record(A.z.string().or(A.z.object({exists:A.z.boolean().optional()})).or(A.z.array(A.z.string()))),It=At(A.z.array(A.z.string()),A.z.object({defaultKind:A.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:A.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:A.z.union([A.z.string(),A.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:A.z.array(Ut).or(Ut).optional().describe("List of key-value filter expression for entities")})).schema,ht=ut=>{var m,R,K,le,I;const{onChange:U,schema:{title:J="Entity",description:we="An entity from the catalog"},required:Oe,uiSchema:st,rawErrors:Rt,formData:qt,idSchema:en}=ut,hn=Qt(st),pn=(m=st["ui:options"])==null?void 0:m.defaultKind,$t=((R=st["ui:options"])==null?void 0:R.defaultNamespace)||void 0,Pn=(0,r.u)(Q.vp),{value:un,loading:Un}=(0,_.A)(async()=>{const{items:bn}=await Pn.getEntities(hn?{filter:hn}:void 0);return bn}),qn=(le=(K=st["ui:options"])==null?void 0:K.allowArbitraryValues)!=null?le:!0,ta=(0,l.useCallback)(bn=>{try{return(0,Q.SE)((0,s.KU)(bn,{defaultKind:pn,defaultNamespace:$t}),{defaultKind:pn,defaultNamespace:$t})}catch{return bn}},[pn,$t]),$n=(0,l.useCallback)((bn,fn,Vt)=>{const En=fn.map(Sn=>{if(typeof Sn!="string")return Sn?(0,s.U2)(Sn):void 0;if(Vt==="blur"||Vt==="create-option"){let ya=Sn;try{ya=(0,s.U2)((0,s.KU)(Sn,{defaultKind:pn,defaultNamespace:$t}))}catch{}if(qt.includes(Sn)||qn)return ya}}).filter(Sn=>Sn!==void 0);U(En)},[U,qt,pn,$t,qn]);return(0,l.useEffect)(()=>{(un==null?void 0:un.length)===1&&U([(0,s.U2)(un[0])])},[un,U]),l.createElement(t.A,{margin:"normal",required:Oe,error:(Rt==null?void 0:Rt.length)>0&&!qt},l.createElement(pe.Ay,{multiple:!0,filterSelectedOptions:!0,disabled:(un==null?void 0:un.length)===1,id:en==null?void 0:en.$id,value:(I=un==null?void 0:un.filter(bn=>qt&&qt.includes((0,s.U2)(bn))))!=null?I:qn&&qt?qt.map(ta):[],loading:Un,onChange:$n,options:un||[],getOptionLabel:bn=>typeof bn=="string"?bn:(0,Q.SE)(bn,{defaultKind:pn,defaultNamespace:$t}),autoSelect:!0,freeSolo:qn,renderInput:bn=>l.createElement(b.A,{...bn,label:J,margin:"dense",helperText:we,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Oe,InputProps:bn.InputProps})}))},Zt=(ut,m)=>{ut.forEach(R=>{try{(0,s.KU)(R)}catch{m.addError(`${R} is not a valid entity ref`)}})};function ln(ut){return typeof ut=="object"&&ut.exists?W.cr:ut==null?void 0:ut.toString()}function on(ut){const m={};for(const[R,K]of Object.entries(ut))Array.isArray(K)?m[R]=K:m[R]=ln(K);return m}function Qt(ut){var m;const R=(m=ut["ui:options"])==null?void 0:m.catalogFilter;if(R)return Array.isArray(R)?R.map(on):on(R)}const Ve=At(A.z.string(),A.z.object({allowedHosts:A.z.array(A.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:A.z.array(A.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:A.z.array(A.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:A.z.array(A.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:A.z.array(A.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:A.z.object({secretsKey:A.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:A.z.object({gitea:A.z.array(A.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:A.z.array(A.z.string()).optional().describe("Additional Gerrit scopes to request"),github:A.z.array(A.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:A.z.array(A.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:A.z.array(A.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:A.z.array(A.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,jt=(ut,m,R)=>{var K,le;try{const{host:I,searchParams:U}=new URL(`https://${ut}`),J=R.apiHolder.get(de.YT);I?(((K=J==null?void 0:J.byHost(I))==null?void 0:K.type)==="bitbucket"?(I==="bitbucket.org"&&!U.get("workspace")&&m.addError("Incomplete repository location provided, workspace not provided"),U.get("project")||m.addError("Incomplete repository location provided, project not provided")):((le=J==null?void 0:J.byHost(I))==null?void 0:le.type)!=="gerrit"&&(U.get("owner")||m.addError("Incomplete repository location provided, owner not provided")),U.get("repo")||m.addError("Incomplete repository location provided, repo not provided")):m.addError("Incomplete repository location provided, host not provided")}catch{m.addError("Unable to parse the Repository URL")}},zt=ut=>{const{allowedOwners:m=[],rawErrors:R,state:K,onChange:le}=ut,I=m?m.map(J=>({label:J,value:J})):[{label:"Loading...",value:"loading"}],{owner:U}=K;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(R==null?void 0:R.length)>0&&!U},m!=null&&m.length?l.createElement(ve.l6,{native:!0,label:"Owner Available",onChange:J=>le({owner:String(Array.isArray(J)?J[0]:J)}),disabled:m.length===1,selected:U,items:I}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(H.A,{id:"ownerInput",onChange:J=>le({owner:J.target.value}),value:U})),l.createElement(me.A,null,"The organization, user or project that this repo will belong to")))},Kt=ut=>{const{allowedOwners:m=[],state:R,onChange:K,rawErrors:le}=ut,I=m?m.map(J=>({label:J,value:J})):[{label:"Loading...",value:"loading"}],{owner:U}=R;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!U},m!=null&&m.length?l.createElement(ve.l6,{native:!0,label:"Owner Available",onChange:J=>K({owner:String(Array.isArray(J)?J[0]:J)}),disabled:m.length===1,selected:U,items:I}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(H.A,{id:"ownerInput",onChange:J=>K({owner:J.target.value}),value:U})),l.createElement(me.A,null,"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Et=ut=>{const{allowedOwners:m=[],state:R,onChange:K,rawErrors:le}=ut,I=m?m.map(J=>({label:J,value:J})):[{label:"Loading...",value:"loading"}],{owner:U}=R;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!U},m!=null&&m.length?l.createElement(ve.l6,{native:!0,label:"Owner Available",onChange:J=>K({owner:String(Array.isArray(J)?J[0]:J)}),disabled:m.length===1,selected:U,items:I}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(H.A,{id:"ownerInput",onChange:J=>K({owner:J.target.value}),value:U})),l.createElement(me.A,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},xn=ut=>{const{allowedOrganizations:m=[],allowedOwners:R=[],rawErrors:K,state:le,onChange:I}=ut,U=m?m.map(st=>({label:st,value:st})):[{label:"Loading...",value:"loading"}],J=R?R.map(st=>({label:st,value:st})):[{label:"Loading...",value:"loading"}],{organization:we,owner:Oe}=le;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(K==null?void 0:K.length)>0&&!we},m!=null&&m.length?l.createElement(ve.l6,{native:!0,label:"Organization",onChange:st=>I({organization:String(Array.isArray(st)?st[0]:st)}),disabled:m.length===1,selected:we,items:U}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"orgInput"},"Organization"),l.createElement(H.A,{id:"orgInput",onChange:st=>I({organization:st.target.value}),value:we})),l.createElement(me.A,null,"The Organization that this repo will belong to")),l.createElement(t.A,{margin:"normal",required:!0,error:(K==null?void 0:K.length)>0&&!Oe},R!=null&&R.length?l.createElement(ve.l6,{native:!0,label:"Owner",onChange:st=>I({owner:String(Array.isArray(st)?st[0]:st)}),disabled:R.length===1,selected:Oe,items:J}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"ownerInput"},"Project"),l.createElement(H.A,{id:"ownerInput",onChange:st=>I({owner:st.target.value}),value:Oe})),l.createElement(me.A,null,"The Project that this repo will belong to")))},dn=ut=>{const{allowedOwners:m=[],allowedProjects:R=[],onChange:K,rawErrors:le,state:I}=ut,{host:U,workspace:J,project:we}=I,Oe=m?m==null?void 0:m.map(Rt=>({label:Rt,value:Rt})):[],st=R?R==null?void 0:R.map(Rt=>({label:Rt,value:Rt})):[];return(0,l.useEffect)(()=>{U==="bitbucket.org"&&m.length&&K({workspace:m[0]})},[m,U,K]),l.createElement(l.Fragment,null,U==="bitbucket.org"&&l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!J},m!=null&&m.length?l.createElement(ve.l6,{native:!0,label:"Allowed Workspaces",onChange:Rt=>K({workspace:String(Array.isArray(Rt)?Rt[0]:Rt)}),disabled:m.length===1,selected:J,items:Oe}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"workspaceInput"},"Workspace"),l.createElement(H.A,{id:"workspaceInput",onChange:Rt=>K({workspace:Rt.target.value}),value:J})),l.createElement(me.A,null,"The Workspace that this repo will belong to")),l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!we},R!=null&&R.length?l.createElement(ve.l6,{native:!0,label:"Allowed Projects",onChange:Rt=>K({project:String(Array.isArray(Rt)?Rt[0]:Rt)}),disabled:R.length===1,selected:we,items:st}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"projectInput"},"Project"),l.createElement(H.A,{id:"projectInput",onChange:Rt=>K({project:Rt.target.value}),value:we})),l.createElement(me.A,null,"The Project that this repo will belong to")))},Xt=ut=>{const{onChange:m,rawErrors:R,state:K}=ut,{workspace:le,owner:I}=K;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",error:(R==null?void 0:R.length)>0&&!le},l.createElement(xe.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(H.A,{id:"ownerInput",onChange:U=>m({owner:U.target.value}),value:I}),l.createElement(me.A,null,"The owner of the project (optional)")),l.createElement(t.A,{margin:"normal",required:!0,error:(R==null?void 0:R.length)>0&&!le},l.createElement(xe.A,{htmlFor:"parentInput"},"Parent"),l.createElement(H.A,{id:"parentInput",onChange:U=>m({workspace:U.target.value}),value:le}),l.createElement(me.A,null,"The project parent that the repo will belong to")))},yn=ut=>{const{host:m,hosts:R,onChange:K,rawErrors:le}=ut,I=(0,r.u)(dt.s),{value:{integrations:U}={integrations:[]},loading:J}=(0,_.A)(async()=>await I.getIntegrationsList({allowedHosts:R!=null?R:[]}));(0,l.useEffect)(()=>{m||(R!=null&&R.length?K(R[0]):U!=null&&U.length&&K(U[0].host))},[R,m,K,U]);const we=U?U.filter(Oe=>R!=null&&R.length?R==null?void 0:R.includes(Oe.host):!0).map(Oe=>({label:Oe.title,value:Oe.host})):[{label:"Loading...",value:"loading"}];return J?l.createElement(ve.ke,null):l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!m},l.createElement(ve.l6,{native:!0,disabled:(R==null?void 0:R.length)===1,label:"Host",onChange:Oe=>K(String(Array.isArray(Oe)?Oe[0]:Oe)),selected:m,items:we,"data-testid":"host-select"}),l.createElement(me.A,null,"The host where the repository will be created")))},Qe=ut=>{const{repoName:m,allowedRepos:R,onChange:K,rawErrors:le}=ut;(0,l.useEffect)(()=>{m||R!=null&&R.length&&K(R[0])},[R,m,K]);const I=R?R.map(U=>({label:U,value:U})):[{label:"Loading...",value:"loading"}];return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!m},R!=null&&R.length?l.createElement(ve.l6,{native:!0,label:"Repositories Available",onChange:U=>K(String(Array.isArray(U)?U[0]:U)),disabled:R.length===1,selected:m,items:I}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"repoNameInput"},"Repository"),l.createElement(H.A,{id:"repoNameInput",onChange:U=>K(String(U.target.value)),value:m})),l.createElement(me.A,null,"The name of the repository")))};function pt(ut){if(!ut.host)return;const m=new URLSearchParams;return ut.owner&&m.set("owner",ut.owner),ut.repoName&&m.set("repo",ut.repoName),ut.organization&&m.set("organization",ut.organization),ut.workspace&&m.set("workspace",ut.workspace),ut.project&&m.set("project",ut.project),`${ut.host}?${m.toString()}`}function Dt(ut){let m="",R="",K="",le="",I="",U="";try{if(ut){const J=new URL(`https://${ut}`);m=J.host,R=J.searchParams.get("owner")||"",K=J.searchParams.get("repo")||"",le=J.searchParams.get("organization")||"",I=J.searchParams.get("workspace")||"",U=J.searchParams.get("project")||""}}catch{}return{host:m,owner:R,repoName:K,organization:le,workspace:I,project:U}}const it=ut=>{var m,R;const{uiSchema:K,onChange:le,rawErrors:I,formData:U,schema:J}=ut,[we,Oe]=(0,l.useState)(Dt(U)),st=(0,r.u)(de.YT),Rt=(0,r.u)(de.$J),{secrets:qt,setSecrets:en}=(0,dt.u)(),hn=(0,l.useMemo)(()=>{var Vt,En;return(En=(Vt=K==null?void 0:K["ui:options"])==null?void 0:Vt.allowedHosts)!=null?En:[]},[K]),pn=(0,l.useMemo)(()=>{var Vt,En;return(En=(Vt=K==null?void 0:K["ui:options"])==null?void 0:Vt.allowedOrganizations)!=null?En:[]},[K]),$t=(0,l.useMemo)(()=>{var Vt,En;return(En=(Vt=K==null?void 0:K["ui:options"])==null?void 0:Vt.allowedOwners)!=null?En:[]},[K]),Pn=(0,l.useMemo)(()=>{var Vt,En;return(En=(Vt=K==null?void 0:K["ui:options"])==null?void 0:Vt.allowedProjects)!=null?En:[]},[K]),un=(0,l.useMemo)(()=>{var Vt,En;return(En=(Vt=K==null?void 0:K["ui:options"])==null?void 0:Vt.allowedRepos)!=null?En:[]},[K]),{owner:Un,organization:qn,project:ta,repoName:$n}=we;(0,l.useEffect)(()=>{le(pt(we))},[we,le]),(0,l.useEffect)(()=>{pn.length>0&&!qn&&Oe(Vt=>({...Vt,organization:pn[0]}))},[Oe,pn,qn]),(0,l.useEffect)(()=>{$t.length>0&&!Un&&Oe(Vt=>({...Vt,owner:$t[0]}))},[Oe,$t,Un]),(0,l.useEffect)(()=>{Pn.length>0&&!ta&&Oe(Vt=>({...Vt,project:Pn[0]}))},[Oe,Pn,ta]),(0,l.useEffect)(()=>{un.length>0&&!$n&&Oe(Vt=>({...Vt,repoName:un[0]}))},[Oe,un,$n]);const bn=(0,l.useCallback)(Vt=>{Oe(En=>({...En,...Vt}))},[Oe]);(0,ee.A)(async()=>{var Vt;const{requestUserCredentials:En}=(Vt=K==null?void 0:K["ui:options"])!=null?Vt:{},Sn=we.owner?we.owner:we.project;if(!En||!(we.host&&Sn&&we.repoName)||qt[En.secretsKey])return;const[ya,Ra]=[we.host,we.repoName].map(encodeURIComponent),{token:Oa}=await Rt.getCredentials({url:`https://${ya}/${Sn}/${Ra}`,additionalScope:{repoWrite:!0,customScopes:En.additionalScopes}});en({[En.secretsKey]:Oa})},500,[we,K]);const fn=(R=we.host&&((m=st.byHost(we.host))==null?void 0:m.type))!=null?R:null;return l.createElement(l.Fragment,null,J.title&&l.createElement(D.A,{my:1},l.createElement(M.A,{variant:"h5"},J.title),l.createElement(w.A,null)),J.description&&l.createElement(M.A,{variant:"body1"},J.description),l.createElement(yn,{host:we.host,hosts:hn,onChange:Vt=>Oe(En=>({...En,host:Vt})),rawErrors:I}),fn==="github"&&l.createElement(zt,{allowedOwners:$t,onChange:bn,rawErrors:I,state:we}),fn==="gitea"&&l.createElement(Kt,{allowedOwners:$t,allowedRepos:un,rawErrors:I,state:we,onChange:bn}),fn==="gitlab"&&l.createElement(Et,{allowedOwners:$t,rawErrors:I,state:we,onChange:bn}),fn==="bitbucket"&&l.createElement(dn,{allowedOwners:$t,allowedProjects:Pn,rawErrors:I,state:we,onChange:bn}),fn==="azure"&&l.createElement(xn,{allowedOrganizations:pn,allowedOwners:$t,rawErrors:I,state:we,onChange:bn}),fn==="gerrit"&&l.createElement(Xt,{rawErrors:I,state:we,onChange:bn}),l.createElement(Qe,{repoName:we.repoName,allowedRepos:un,onChange:Vt=>Oe(En=>({...En,repoName:Vt})),rawErrors:I}))},Y=At(A.z.string(),A.z.object({allowedKinds:A.z.array(A.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:A.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:A.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:A.z.union([A.z.string(),A.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:A.z.array(ue).or(ue).optional().describe("List of key-value filter expression for entities")})).schema,he=ut=>{const{schema:{title:m="Entity",description:R="An entity from the catalog"},uiSchema:K,required:le}=ut,I=(0,r.u)(r.t),{loading:U,value:J}=(0,_.A)(async()=>(await I.getBackstageIdentity()).ownershipEntityRefs);if(U)return l.createElement(pe.Ay,{loading:U,renderInput:Oe=>l.createElement(b.A,{...Oe,label:m,margin:"dense",helperText:R,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:le,InputProps:Oe.InputProps}),options:[]});const we=fe(K,J);return l.createElement(gt,{...ut,uiSchema:we})};function fe(ut,m){const R=(ut==null?void 0:ut["ui:options"])||{},K=R.allowedKinds;return{"ui:options":{catalogFilter:{...R.catalogFilter,...K?{kind:K,[`relations.${s.vv}`]:m||[]}:{[`relations.${s.vv}`]:m||[]}}}}}const Ft=At(A.z.array(A.z.string()),A.z.object({kinds:A.z.array(A.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:A.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:A.z.string().optional().describe("Helper text to display")})).schema,cn=ut=>{var m,R,K;const{formData:le,onChange:I,uiSchema:U}=ut,J=(0,r.u)(Q.vp),[we,Oe]=(0,l.useState)([]),[st,Rt]=(0,l.useState)(""),[qt,en]=(0,l.useState)(!1),hn=(0,s.tj)().isValidTag,pn=(m=U["ui:options"])==null?void 0:m.kinds,$t=(R=U["ui:options"])==null?void 0:R.showCounts,Pn=(K=U["ui:options"])==null?void 0:K.helperText,{loading:un,value:Un}=(0,_.A)(async()=>{const ta="metadata.tags",$n={facets:[ta]};pn&&($n.filter={kind:pn});const{facets:bn}=await J.getEntityFacets($n),fn=Object.fromEntries(bn[ta].map(({value:Vt,count:En})=>[Vt,En]));return Oe(Object.keys(fn).sort((Vt,En)=>$t?fn[En]-fn[Vt]:Vt.localeCompare(En))),fn}),qn=(ta,$n)=>{let bn=!1,fn=!1;const Vt=le||[];if($n!=null&&$n.length&&Vt.length<$n.length){const En=$n[$n.length-1]=$n[$n.length-1].toLocaleLowerCase("en-US").trim();bn=!hn(En),fn=Vt.indexOf(En)!==-1}en(bn),Rt(bn?st:""),!bn&&!fn&&I($n||[])};return(0,y.A)(()=>I(le||[])),l.createElement(t.A,{margin:"normal"},l.createElement(pe.Ay,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:qn,value:le||[],inputValue:st,loading:un,options:we,ChipProps:{size:"small"},renderOption:ta=>$t?`${ta} (${Un==null?void 0:Un[ta]})`:ta,renderInput:ta=>l.createElement(b.A,{...ta,label:"Tags",onChange:$n=>Rt($n.target.value),error:qt,helperText:Pn!=null?Pn:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},In=At(A.z.string(),A.z.object({title:A.z.string().default("Group").describe("Group"),description:A.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,Bn=ut=>{const{schema:{title:m,description:R},required:K,rawErrors:le,onChange:I,formData:U}=ut,J=(0,r.u)(r.t),we=(0,r.u)(Q.vp),Oe=(0,r.u)(r.r),[st,Rt]=(0,l.useState)([]);(0,_.A)(async()=>{const{userEntityRef:hn}=await J.getBackstageIdentity();if(!hn){Oe.post(new F.m_("No user entity ref found"));return}const{items:pn}=await we.getEntities({filter:{kind:"Group","relations.hasMember":[hn]}}),$t=pn.filter(Pn=>!!Pn).map(Pn=>{var un;return{label:(un=Pn.metadata.title)!=null?un:Pn.metadata.name,ref:(0,s.U2)(Pn)}});Rt($t)});const qt=(hn,pn)=>{var $t;I(($t=pn==null?void 0:pn.ref)!=null?$t:"")},en=(st==null?void 0:st.find(hn=>hn.ref===U))||null;return l.createElement(t.A,{margin:"normal",required:K,error:(le==null?void 0:le.length)>0},l.createElement(pe.Ay,{id:"OwnershipEntityRefPicker-dropdown",options:st||[],value:en,onChange:qt,getOptionLabel:hn=>hn.label,renderInput:hn=>l.createElement(b.A,{...hn,label:m,margin:"dense",helperText:R,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:K})}))},Hn=(0,X.A)(()=>({button:{color:({fontColor:ut})=>ut}})),Cn=ut=>{const{cancelEnabled:m,logsVisible:R,buttonBarVisible:K,onStartOver:le,onToggleLogs:I,onToggleButtonBar:U,taskId:J}=ut,{getPageTheme:we}=(0,N.A)(),Oe=we({themeId:"website"}),st=Hn({fontColor:Oe.fontColor}),Rt=(0,r.u)(dt.s),[qt,en]=(0,l.useState)(),[{status:hn},{execute:pn}]=(0,Ye.Y)(async()=>{J&&await Rt.cancelTask(J)});return l.createElement(l.Fragment,null,l.createElement(Ce.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:$t=>{en($t.currentTarget)},"data-testid":"menu-button",className:st.button},l.createElement(St.A,null)),l.createElement(Ge.Ay,{open:!!qt,onClose:()=>en(void 0),anchorEl:qt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},l.createElement(at.A,null,l.createElement(Xe.A,{onClick:()=>I==null?void 0:I(!R)},l.createElement(nt.A,null,l.createElement(ct.A,{fontSize:"small"})),l.createElement(He.A,{primary:R?"Hide Logs":"Show Logs"})),l.createElement(Xe.A,{onClick:()=>U==null?void 0:U(!K)},l.createElement(nt.A,null,l.createElement(vt.A,{fontSize:"small"})),l.createElement(He.A,{primary:K?"Hide Button Bar":"Show Button Bar"})),l.createElement(Xe.A,{onClick:le},l.createElement(nt.A,null,l.createElement(Le.A,{fontSize:"small"})),l.createElement(He.A,{primary:"Start Over"})),l.createElement(Xe.A,{onClick:pn,disabled:!m||hn!=="not-executed","data-testid":"cancel-task"},l.createElement(nt.A,null,l.createElement(Re.A,{fontSize:"small"})),l.createElement(He.A,{primary:"Cancel"})))))},Vn=(0,X.A)(ut=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:ut.spacing(1)},logsVisibilityButton:{marginRight:ut.spacing(1)}})),ua=ut=>{var m,R,K,le,I,U,J,we;const{taskId:Oe}=(0,re.g)(),st=(0,q.Sf)(V.s),Rt=(0,re.Zp)(),qt=(0,r.u)(dt.s),en=(0,z.TA)(Oe),hn=Vn(),pn=(0,l.useMemo)(()=>{var Sn,ya;return(ya=(Sn=en.task)==null?void 0:Sn.spec.steps.map(Ra=>{var Oa;return{...Ra,...(Oa=en==null?void 0:en.steps)==null?void 0:Oa[Ra.id]}}))!=null?ya:[]},[en]),[$t,Pn]=(0,l.useState)(!1),[un,Un]=(0,l.useState)(!0);(0,l.useEffect)(()=>{en.error&&Pn(!0)},[en.error]),(0,l.useEffect)(()=>{en.completed&&!en.error&&Un(!1)},[en.error,en.completed]);const qn=(0,l.useMemo)(()=>{for(let Sn=pn.length-1;Sn>=0;Sn--)if(pn[Sn].status!=="open")return Sn;return 0},[pn]),ta=(0,l.useCallback)(()=>{var Sn,ya,Ra,Oa,G,be;const{namespace:We,name:ot}=(Oa=(Ra=(ya=(Sn=en.task)==null?void 0:Sn.spec.templateInfo)==null?void 0:ya.entity)==null?void 0:Ra.metadata)!=null?Oa:{},wt=(be=(G=en.task)==null?void 0:G.spec.parameters)!=null?be:{};!We||!ot||Rt({pathname:st({namespace:We,templateName:ot}),search:`?${oe().stringify({formData:JSON.stringify(wt)})}`})},[Rt,(m=en.task)==null?void 0:m.spec.parameters,(le=(K=(R=en.task)==null?void 0:R.spec.templateInfo)==null?void 0:K.entity)==null?void 0:le.metadata,st]),[{status:$n},{execute:bn}]=(0,Ye.Y)(async()=>{Oe&&await qt.cancelTask(Oe)}),fn=(I=ut.TemplateOutputsComponent)!=null?I:Jt.KV,Vt=(we=(J=(U=en.task)==null?void 0:U.spec.templateInfo)==null?void 0:J.entity)==null?void 0:we.metadata.name,En=!(en.cancelled||en.completed);return l.createElement(ve.YW,{themeId:"website"},l.createElement(ve.Y9,{pageTitleOverride:`Run of ${Vt}`,title:l.createElement("div",null,"Run of ",l.createElement("code",null,Vt)),subtitle:`Task ${Oe}`},l.createElement(Cn,{cancelEnabled:En,logsVisible:$t,buttonBarVisible:un,onStartOver:ta,onToggleLogs:Pn,onToggleButtonBar:Un,taskId:Oe})),l.createElement(ve.UC,{className:hn.contentWrapper},en.error?l.createElement(D.A,{paddingBottom:2},l.createElement(ve.bJ,{error:en.error,titleFormat:"markdown",title:en.error.message})):null,l.createElement(D.A,{paddingBottom:2},l.createElement(Jt.lN,{steps:pn,activeStep:qn,isComplete:en.completed,isError:!!en.error})),l.createElement(fn,{output:en.output}),un?l.createElement(D.A,{paddingBottom:2},l.createElement(ye.A,null,l.createElement(D.A,{padding:2},l.createElement("div",{className:hn.buttonBar},l.createElement(Ne.A,{className:hn.cancelButton,disabled:!En||$n!=="not-executed",onClick:bn,"data-testid":"cancel-button"},"Cancel"),l.createElement(Ne.A,{className:hn.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>Pn(!$t)},$t?"Hide Logs":"Show Logs"),l.createElement(Ne.A,{variant:"contained",color:"primary",disabled:En,onClick:ta},"Start Over"))))):null,$t?l.createElement(D.A,{paddingBottom:2,height:"100%"},l.createElement(ye.A,{style:{height:"100%"}},l.createElement(D.A,{padding:2,height:"100%"},l.createElement(Jt.g_,{logs:en.stepLogs})))):null))}},45516:(Tn,_t,e)=>{"use strict";e.d(_t,{S:()=>me,a:()=>z,b:()=>D,c:()=>ee,d:()=>H,e:()=>w,r:()=>ve,s:()=>dt,v:()=>xe});var s=e(29835),l=e(3399),b=e(45810),A=e.n(b),W=e(96403),r=e.n(W),q=e(4237),Q=e.n(q),t=e(11638),pe=Object.defineProperty,_=(M,y,v)=>y in M?pe(M,y,{enumerable:!0,configurable:!0,writable:!0,value:v}):M[y]=v,de=(M,y,v)=>(_(M,typeof y!="symbol"?y+"":y,v),v);class me{constructor(y){de(this,"discoveryApi"),de(this,"scmIntegrationsApi"),de(this,"fetchApi"),de(this,"identityApi"),de(this,"useLongPollingLogs");var v,F;this.discoveryApi=y.discoveryApi,this.fetchApi=(v=y.fetchApi)!=null?v:{fetch},this.scmIntegrationsApi=y.scmIntegrationsApi,this.useLongPollingLogs=(F=y.useLongPollingLogs)!=null?F:!1,this.identityApi=y.identityApi}async listTasks(y){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const v=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:F}=await this.identityApi.getBackstageIdentity(),re=A().stringify(y.filterByOwnership==="owned"?{createdBy:F}:{}),Ne=await this.fetchApi.fetch(`${v}/v2/tasks?${re}`);if(!Ne.ok)throw await l.o3.fromResponse(Ne);return await Ne.json()}async getIntegrationsList(y){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(F=>!this.scmIntegrationsApi.bitbucketCloud.byHost(F.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(F.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(F=>({type:F.type,title:F.title,host:F.config.host})).filter(F=>y.allowedHosts.includes(F.host))}}async getTemplateParameterSchema(y){const{namespace:v,kind:F,name:re}=(0,s.KU)(y,{defaultKind:"template"}),Ne=await this.discoveryApi.getBaseUrl("scaffolder"),ye=[v,F,re].map(ie=>encodeURIComponent(ie)).join("/"),X=`${Ne}/v2/templates/${ye}/parameter-schema`,N=await this.fetchApi.fetch(X);if(!N.ok)throw await l.o3.fromResponse(N);return await N.json()}async scaffold(y){const{templateRef:v,values:F,secrets:re={}}=y,Ne=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,ye=await this.fetchApi.fetch(Ne,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:v,values:{...F},secrets:re})});if(ye.status!==201){const N=`${ye.status} ${ye.statusText}`,V=await ye.text();throw new Error(`Backend request failed, ${N} ${V.trim()}`)}const{id:X}=await ye.json();return{taskId:X}}async getTask(y){const F=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(y)}`,re=await this.fetchApi.fetch(F);if(!re.ok)throw await l.o3.fromResponse(re);return await re.json()}streamLogs(y){return this.useLongPollingLogs?this.streamLogsPolling(y):this.streamLogsEventStream(y)}async dryRun(y){const v=await this.discoveryApi.getBaseUrl("scaffolder"),F=await this.fetchApi.fetch(`${v}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:y.template,values:y.values,secrets:y.secrets,directoryContents:y.directoryContents})});if(!F.ok)throw await l.o3.fromResponse(F);return F.json()}streamLogsEventStream({taskId:y,after:v}){return new(r())(F=>{var re;const Ne=new URLSearchParams;v!==void 0&&Ne.set("after",String(Number(v))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(re=this.identityApi)==null?void 0:re.getCredentials()]).then(([ye,X])=>{const N=`${ye}/v2/tasks/${encodeURIComponent(y)}/eventstream`,V=oe=>{if(oe.data)try{F.next(JSON.parse(oe.data))}catch(Ce){F.error(Ce)}},ie=new q.EventSourcePolyfill(N,{withCredentials:!0,headers:X!=null&&X.token?{Authorization:`Bearer ${X.token}`}:{}});ie.addEventListener("log",V),ie.addEventListener("recovered",V),ie.addEventListener("cancelled",V),ie.addEventListener("completion",oe=>{V(oe),ie.close(),F.complete()}),ie.addEventListener("error",oe=>{F.error(oe)})},ye=>{F.error(ye)})})}streamLogsPolling({taskId:y,after:v}){let F=v;return new(r())(re=>{this.discoveryApi.getBaseUrl("scaffolder").then(async Ne=>{for(;!re.closed;){const ye=`${Ne}/v2/tasks/${encodeURIComponent(y)}/events?${A().stringify({after:F})}`,X=await this.fetchApi.fetch(ye);if(!X.ok){await new Promise(V=>setTimeout(V,1e3));continue}const N=await X.json();for(const V of N)if(F=Number(V.id),re.next(V),V.type==="completion"){re.complete();return}}})})}async listActions(){const y=await this.discoveryApi.getBaseUrl("scaffolder"),v=await this.fetchApi.fetch(`${y}/v2/actions`);if(!v.ok)throw await l.o3.fromResponse(v);return await v.json()}async cancelTask(y){const F=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(y)}/cancel`,re=await this.fetchApi.fetch(F,{method:"POST"});if(!re.ok)throw await l.o3.fromResponse(re);return await re.json()}}const H=(0,t.Il)({id:"register-component",optional:!0}),xe=(0,t.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),ve=(0,t.HM)({id:"scaffolder"});(0,t.Vb)({id:"scaffolder/legacy/selected-template",parent:ve,path:"/templates/:templateName"});const dt=(0,t.Vb)({id:"scaffolder/selected-template",parent:ve,path:"/templates/:namespace/:templateName"}),z=(0,t.Vb)({id:"scaffolder/task",parent:ve,path:"/tasks/:taskId"}),ee=(0,t.Vb)({id:"scaffolder/list-tasks",parent:ve,path:"/tasks"}),D=(0,t.Vb)({id:"scaffolder/actions",parent:ve,path:"/actions"}),w=(0,t.Vb)({id:"scaffolder/edit",parent:ve,path:"/edit"})},77587:(Tn,_t,e)=>{"use strict";e.d(_t,{Te:()=>z,r6:()=>F});var s=e(45516),l=e(33478),b=e(12564),A=e(77189),W=e(16976),r=e(11638),q=e(5124),Q=e(14041),t=e(56005),pe=e.n(t),_=e(44148),de=e(41260),me=e(96403),H=e.n(me),xe=e(4237),ve=e.n(xe),dt=e(63177);const z=(0,r.i1)({id:"scaffolder",apis:[(0,r.bW)({api:b.s,deps:{discoveryApi:q.q,scmIntegrationsApi:l.YT,fetchApi:q.s,identityApi:q.t},factory:({discoveryApi:at,scmIntegrationsApi:Ge,fetchApi:Ye,identityApi:Re})=>new s.S({discoveryApi:at,scmIntegrationsApi:Ge,fetchApi:Ye,identityApi:Re})})],routes:{root:s.r,selectedTemplate:s.s,ongoingTask:s.a,actions:s.b,listTasks:s.c,edit:s.e},externalRoutes:{registerComponent:s.d,viewTechDoc:s.v}}),ee=z.provide((0,A.zD)({component:W.E,name:"EntityPicker",schema:W.a})),D=z.provide((0,A.zD)({component:W.b,name:"EntityNamePicker",validation:W.e,schema:W.c})),w=z.provide((0,A.zD)({component:W.M,name:"MultiEntityPicker",schema:W.d,validation:W.v})),M=z.provide((0,A.zD)({component:W.R,name:"RepoUrlPicker",validation:W.r,schema:W.f})),y=z.provide((0,A.zD)({component:W.O,name:"OwnerPicker",schema:W.g})),v=z.provide((0,A.zD)({component:W.h,name:"MyGroupsPicker",schema:W.i})),F=z.provide((0,r.QJ)({name:"ScaffolderPage",component:()=>e.e(4362).then(e.bind(e,94362)).then(at=>at.Router),mountPoint:s.r})),re=z.provide((0,A.zD)({component:W.j,name:"OwnedEntityPicker",schema:W.k})),Ne=z.provide((0,A.zD)({component:W.l,name:"EntityTagsPicker",schema:W.m})),ye=Q.createElement(de.A,{fontSize:"small"}),X=Q.createElement(_.A,{fontSize:"small"}),N=()=>{const at=useApi(alertApiRef),{error:Ge,loading:Ye,availableTypes:Re,selectedTypes:Le,setSelectedTypes:ct}=useEntityTypeFilter();return Ye?React.createElement(Progress,null):Re?Ge?(at.post({message:"Failed to load entity types",severity:"error"}),null):React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),React.createElement(Autocomplete,{id:"categories-picker",multiple:!0,options:Re,value:Le,onChange:(vt,St)=>ct(St),renderOption:(vt,{selected:St})=>React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{icon:ye,checkedIcon:X,checked:St}),label:capitalize(vt)}),size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":"categories-picker-expand"}),renderInput:vt=>React.createElement(TextField,{...vt,variant:"outlined"})})):null},V=null,ie=null,oe=null,Ce=null,nt=null,He=null,Xe=null},4237:function(Tn,_t){var e,s,l;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(b){"use strict";var A=b.setTimeout,W=b.clearTimeout,r=b.XMLHttpRequest,q=b.XDomainRequest,Q=b.ActiveXObject,t=b.EventSource,pe=b.document,_=b.Promise,de=b.fetch,me=b.Response,H=b.TextDecoder,xe=b.TextEncoder,ve=b.AbortController;if(typeof window!="undefined"&&typeof pe!="undefined"&&!("readyState"in pe)&&pe.body==null&&(pe.readyState="loading",window.addEventListener("load",function(S){pe.readyState="complete"},!1)),r==null&&Q!=null&&(r=function(){return new Q("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(S){function P(){}return P.prototype=S,new P}),Date.now||(Date.now=function(){return new Date().getTime()}),ve==null){var dt=de;de=function(S,P){var j=P.signal;return dt(S,{headers:P.headers,credentials:P.credentials,cache:P.cache}).then(function(Z){var Te=Z.body.getReader();return j._reader=Te,j._aborted&&j._reader.cancel(),{status:Z.status,statusText:Z.statusText,headers:Z.headers,body:{getReader:function(){return Te}}}})},ve=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function z(){this.bitsNeeded=0,this.codePoint=0}z.prototype.decode=function(S){function P(Ut,nn,It){if(It===1)return Ut>=128>>nn&&Ut<<nn<=2047;if(It===2)return Ut>=2048>>nn&&Ut<<nn<=55295||Ut>=57344>>nn&&Ut<<nn<=65535;if(It===3)return Ut>=65536>>nn&&Ut<<nn<=1114111;throw new Error}function j(Ut,nn){if(Ut===6*1)return nn>>6>15?3:nn>31?2:1;if(Ut===6*2)return nn>15?3:2;if(Ut===6*3)return 3;throw new Error}for(var Z=65533,Te="",Ke=this.bitsNeeded,mt=this.codePoint,Je=0;Je<S.length;Je+=1){var qe=S[Je];Ke!==0&&(qe<128||qe>191||!P(mt<<6|qe&63,Ke-6,j(Ke,mt)))&&(Ke=0,mt=Z,Te+=String.fromCharCode(mt)),Ke===0?(qe>=0&&qe<=127?(Ke=0,mt=qe):qe>=192&&qe<=223?(Ke=6*1,mt=qe&31):qe>=224&&qe<=239?(Ke=6*2,mt=qe&15):qe>=240&&qe<=247?(Ke=6*3,mt=qe&7):(Ke=0,mt=Z),Ke!==0&&!P(mt,Ke,j(Ke,mt))&&(Ke=0,mt=Z)):(Ke-=6,mt=mt<<6|qe&63),Ke===0&&(mt<=65535?Te+=String.fromCharCode(mt):(Te+=String.fromCharCode(55296+(mt-65535-1>>10)),Te+=String.fromCharCode(56320+(mt-65535-1&1023))))}return this.bitsNeeded=Ke,this.codePoint=mt,Te};var ee=function(){try{return new H().decode(new xe().encode("test"),{stream:!0})==="test"}catch(S){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+S)}return!1};(H==null||xe==null||!ee())&&(H=z);var D=function(){};function w(S){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=D,this.onload=D,this.onerror=D,this.onreadystatechange=D,this._contentType="",this._xhr=S,this._sendTimeout=0,this._abort=D}w.prototype.open=function(S,P){this._abort(!0);var j=this,Z=this._xhr,Te=1,Ke=0;this._abort=function(It){j._sendTimeout!==0&&(W(j._sendTimeout),j._sendTimeout=0),(Te===1||Te===2||Te===3)&&(Te=4,Z.onload=D,Z.onerror=D,Z.onabort=D,Z.onprogress=D,Z.onreadystatechange=D,Z.abort(),Ke!==0&&(W(Ke),Ke=0),It||(j.readyState=4,j.onabort(null),j.onreadystatechange())),Te=0};var mt=function(){if(Te===1){var It=0,ht="",Zt=void 0;if("contentType"in Z)It=200,ht="OK",Zt=Z.contentType;else try{It=Z.status,ht=Z.statusText,Zt=Z.getResponseHeader("Content-Type")}catch{It=0,ht="",Zt=void 0}It!==0&&(Te=2,j.readyState=2,j.status=It,j.statusText=ht,j._contentType=Zt,j.onreadystatechange())}},Je=function(){if(mt(),Te===2||Te===3){Te=3;var It="";try{It=Z.responseText}catch{}j.readyState=3,j.responseText=It,j.onprogress()}},qe=function(It,ht){if((ht==null||ht.preventDefault==null)&&(ht={preventDefault:D}),Je(),Te===1||Te===2||Te===3){if(Te=4,Ke!==0&&(W(Ke),Ke=0),j.readyState=4,It==="load")j.onload(ht);else if(It==="error")j.onerror(ht);else if(It==="abort")j.onabort(ht);else throw new TypeError;j.onreadystatechange()}},Ut=function(It){Z!=null&&(Z.readyState===4?(!("onload"in Z)||!("onerror"in Z)||!("onabort"in Z))&&qe(Z.responseText===""?"error":"load",It):Z.readyState===3?"onprogress"in Z||Je():Z.readyState===2&&mt())},nn=function(){Ke=A(function(){nn()},500),Z.readyState===3&&Je()};"onload"in Z&&(Z.onload=function(It){qe("load",It)}),"onerror"in Z&&(Z.onerror=function(It){qe("error",It)}),"onabort"in Z&&(Z.onabort=function(It){qe("abort",It)}),"onprogress"in Z&&(Z.onprogress=Je),"onreadystatechange"in Z&&(Z.onreadystatechange=function(It){Ut(It)}),("contentType"in Z||!("ontimeout"in r.prototype))&&(P+=(P.indexOf("?")===-1?"?":"&")+"padding=true"),Z.open(S,P,!0),"readyState"in Z&&(Ke=A(function(){nn()},0))},w.prototype.abort=function(){this._abort(!1)},w.prototype.getResponseHeader=function(S){return this._contentType},w.prototype.setRequestHeader=function(S,P){var j=this._xhr;"setRequestHeader"in j&&j.setRequestHeader(S,P)},w.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},w.prototype.send=function(){if((!("ontimeout"in r.prototype)||!("sendAsBinary"in r.prototype)&&!("mozAnon"in r.prototype))&&pe!=null&&pe.readyState!=null&&pe.readyState!=="complete"){var S=this;S._sendTimeout=A(function(){S._sendTimeout=0,S.send()},4);return}var P=this._xhr;"withCredentials"in P&&(P.withCredentials=this.withCredentials);try{P.send(void 0)}catch(j){throw j}};function M(S){return S.replace(/[A-Z]/g,function(P){return String.fromCharCode(P.charCodeAt(0)+32)})}function y(S){for(var P=Object.create(null),j=S.split(`\r
`),Z=0;Z<j.length;Z+=1){var Te=j[Z],Ke=Te.split(": "),mt=Ke.shift(),Je=Ke.join(": ");P[M(mt)]=Je}this._map=P}y.prototype.get=function(S){return this._map[M(S)]},r!=null&&r.HEADERS_RECEIVED==null&&(r.HEADERS_RECEIVED=2);function v(){}v.prototype.open=function(S,P,j,Z,Te,Ke,mt){S.open("GET",Te);var Je=0;S.onprogress=function(){var Ut=S.responseText,nn=Ut.slice(Je);Je+=nn.length,j(nn)},S.onerror=function(Ut){Ut.preventDefault(),Z(new Error("NetworkError"))},S.onload=function(){Z(null)},S.onabort=function(){Z(null)},S.onreadystatechange=function(){if(S.readyState===r.HEADERS_RECEIVED){var Ut=S.status,nn=S.statusText,It=S.getResponseHeader("Content-Type"),ht=S.getAllResponseHeaders();P(Ut,nn,It,new y(ht))}},S.withCredentials=Ke;for(var qe in mt)Object.prototype.hasOwnProperty.call(mt,qe)&&S.setRequestHeader(qe,mt[qe]);return S.send(),S};function F(S){this._headers=S}F.prototype.get=function(S){return this._headers.get(S)};function re(){}re.prototype.open=function(S,P,j,Z,Te,Ke,mt){var Je=null,qe=new ve,Ut=qe.signal,nn=new H;return de(Te,{headers:mt,credentials:Ke?"include":"same-origin",signal:Ut,cache:"no-store"}).then(function(It){return Je=It.body.getReader(),P(It.status,It.statusText,It.headers.get("Content-Type"),new F(It.headers)),new _(function(ht,Zt){var ln=function(){Je.read().then(function(on){if(on.done)ht(void 0);else{var Qt=nn.decode(on.value,{stream:!0});j(Qt),ln()}}).catch(function(on){Zt(on)})};ln()})}).catch(function(It){if(It.name!=="AbortError")return It}).then(function(It){Z(It)}),{abort:function(){Je!=null&&Je.cancel(),qe.abort()}}};function Ne(){this._listeners=Object.create(null)}function ye(S){A(function(){throw S},0)}Ne.prototype.dispatchEvent=function(S){S.target=this;var P=this._listeners[S.type];if(P!=null)for(var j=P.length,Z=0;Z<j;Z+=1){var Te=P[Z];try{typeof Te.handleEvent=="function"?Te.handleEvent(S):Te.call(this,S)}catch(Ke){ye(Ke)}}},Ne.prototype.addEventListener=function(S,P){S=String(S);var j=this._listeners,Z=j[S];Z==null&&(Z=[],j[S]=Z);for(var Te=!1,Ke=0;Ke<Z.length;Ke+=1)Z[Ke]===P&&(Te=!0);Te||Z.push(P)},Ne.prototype.removeEventListener=function(S,P){S=String(S);var j=this._listeners,Z=j[S];if(Z!=null){for(var Te=[],Ke=0;Ke<Z.length;Ke+=1)Z[Ke]!==P&&Te.push(Z[Ke]);Te.length===0?delete j[S]:j[S]=Te}};function X(S){this.type=S,this.target=void 0}function N(S,P){X.call(this,S),this.data=P.data,this.lastEventId=P.lastEventId}N.prototype=Object.create(X.prototype);function V(S,P){X.call(this,S),this.status=P.status,this.statusText=P.statusText,this.headers=P.headers}V.prototype=Object.create(X.prototype);function ie(S,P){X.call(this,S),this.error=P.error}ie.prototype=Object.create(X.prototype);var oe=-1,Ce=0,nt=1,He=2,Xe=-1,at=0,Ge=1,Ye=2,Re=3,Le=/^text\/event\-stream(;.*)?$/i,ct=1e3,vt=18e6,St=function(S,P){var j=S==null?P:parseInt(S,10);return j!==j&&(j=P),Jt(j)},Jt=function(S){return Math.min(Math.max(S,ct),vt)},At=function(S,P,j){try{typeof P=="function"&&P.call(S,j)}catch(Z){ye(Z)}};function ue(S,P){Ne.call(this),P=P||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,gt(this,S,P)}function ft(){return r!=null&&"withCredentials"in r.prototype||q==null?new r:new q}var xt=de!=null&&me!=null&&"body"in me.prototype;function gt(S,P,j){P=String(P);var Z=!!j.withCredentials,Te=j.lastEventIdQueryParameterName||"lastEventId",Ke=Jt(1e3),mt=St(j.heartbeatTimeout,45e3),Je="",qe=Ke,Ut=!1,nn=0,It=j.headers||{},ht=j.Transport,Zt=xt&&ht==null?void 0:new w(ht!=null?new ht:ft()),ln=ht!=null&&typeof ht!="string"?new ht:Zt==null?new re:new v,on=void 0,Qt=0,Ae=oe,Ve="",jt="",zt="",Kt="",Et=at,xn=0,dn=0,Xt=function(it,Ze,Y,he){if(Ae===Ce)if(it===200&&Y!=null&&Le.test(Y)){Ae=nt,Ut=Date.now(),qe=Ke,S.readyState=nt;var fe=new V("open",{status:it,statusText:Ze,headers:he});S.dispatchEvent(fe),At(S,S.onopen,fe)}else{var Ct="";it!==200?(Ze&&(Ze=Ze.replace(/\s+/g," ")),Ct="EventSource's response has a status "+it+" "+Ze+" that is not 200. Aborting the connection."):Ct="EventSource's response has a Content-Type specifying an unsupported type: "+(Y==null?"-":Y.replace(/\s+/g," "))+". Aborting the connection.",pt();var fe=new V("error",{status:it,statusText:Ze,headers:he});S.dispatchEvent(fe),At(S,S.onerror,fe),console.error(Ct)}},yn=function(it){if(Ae===nt){for(var Ze=-1,Y=0;Y<it.length;Y+=1){var he=it.charCodeAt(Y);(he===10||he===13)&&(Ze=Y)}var fe=(Ze!==-1?Kt:"")+it.slice(0,Ze+1);Kt=(Ze===-1?Kt:"")+it.slice(Ze+1),it!==""&&(Ut=Date.now(),nn+=it.length);for(var Ct=0;Ct<fe.length;Ct+=1){var he=fe.charCodeAt(Ct);if(Et===Xe&&he===10)Et=at;else if(Et===Xe&&(Et=at),he===13||he===10){if(Et!==at){Et===Ge&&(dn=Ct+1);var Ft=fe.slice(xn,dn-1),cn=fe.slice(dn+(dn<Ct&&fe.charCodeAt(dn)===32?1:0),Ct);Ft==="data"?(Ve+=`
`,Ve+=cn):Ft==="id"?jt=cn:Ft==="event"?zt=cn:Ft==="retry"?(Ke=St(cn,Ke),qe=Ke):Ft==="heartbeatTimeout"&&(mt=St(cn,mt),Qt!==0&&(W(Qt),Qt=A(function(){Dt()},mt)))}if(Et===at){if(Ve!==""){Je=jt,zt===""&&(zt="message");var An=new N(zt,{data:Ve.slice(1),lastEventId:jt});if(S.dispatchEvent(An),zt==="open"?At(S,S.onopen,An):zt==="message"?At(S,S.onmessage,An):zt==="error"&&At(S,S.onerror,An),Ae===He)return}Ve="",zt=""}Et=he===13?Xe:at}else Et===at&&(xn=Ct,Et=Ge),Et===Ge?he===58&&(dn=Ct+1,Et=Ye):Et===Ye&&(Et=Re)}}},Qe=function(it){if(Ae===nt||Ae===Ce){Ae=oe,Qt!==0&&(W(Qt),Qt=0),Qt=A(function(){Dt()},qe),qe=Jt(Math.min(Ke*16,qe*2)),S.readyState=Ce;var Ze=new ie("error",{error:it});S.dispatchEvent(Ze),At(S,S.onerror,Ze),it!=null&&console.error(it)}},pt=function(){Ae=He,on!=null&&(on.abort(),on=void 0),Qt!==0&&(W(Qt),Qt=0),S.readyState=He},Dt=function(){if(Qt=0,Ae!==oe){if(!Ut&&on!=null)Qe(new Error("No activity within "+mt+" milliseconds. "+(Ae===Ce?"No response received.":nn+" chars received.")+" Reconnecting.")),on!=null&&(on.abort(),on=void 0);else{var it=Math.max((Ut||Date.now())+mt-Date.now(),1);Ut=!1,Qt=A(function(){Dt()},it)}return}Ut=!1,nn=0,Qt=A(function(){Dt()},mt),Ae=Ce,Ve="",zt="",jt=Je,Kt="",xn=0,dn=0,Et=at;var Ze=P;if(P.slice(0,5)!=="data:"&&P.slice(0,5)!=="blob:"&&Je!==""){var Y=P.indexOf("?");Ze=Y===-1?P:P.slice(0,Y+1)+P.slice(Y+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(cn,An){return An===Te?"":cn}),Ze+=(P.indexOf("?")===-1?"?":"&")+Te+"="+encodeURIComponent(Je)}var he=S.withCredentials,fe={};fe.Accept="text/event-stream";var Ct=S.headers;if(Ct!=null)for(var Ft in Ct)Object.prototype.hasOwnProperty.call(Ct,Ft)&&(fe[Ft]=Ct[Ft]);try{on=ln.open(Zt,Xt,yn,Qe,Ze,he,fe)}catch(cn){throw pt(),cn}};S.url=P,S.readyState=Ce,S.withCredentials=Z,S.headers=It,S._close=pt,Dt()}ue.prototype=Object.create(Ne.prototype),ue.prototype.CONNECTING=Ce,ue.prototype.OPEN=nt,ue.prototype.CLOSED=He,ue.prototype.close=function(){this._close()},ue.CONNECTING=Ce,ue.OPEN=nt,ue.CLOSED=He,ue.prototype.withCredentials=void 0;var Nt=t;r!=null&&(t==null||!("withCredentials"in t.prototype))&&(Nt=ue),function(S){if(typeof Tn.exports=="object"){var P=S(_t);P!==void 0&&(Tn.exports=P)}else s=[_t],e=S,l=typeof e=="function"?e.apply(_t,s):e,l!==void 0&&(Tn.exports=l)}(function(S){S.EventSourcePolyfill=ue,S.NativeEventSource=t,S.EventSource=Nt})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},22299:(Tn,_t,e)=>{"use strict";e.d(_t,{S:()=>D,b:()=>de,c:()=>z});var s=e(14041),l=e(11638),b=e(58007),A=e(8109),W=e(58837),r=e(46423),q=e(5951),Q=e(77125),t=e(72501),pe=e(22968);const _=(0,W.A)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),de=w=>{const{text:M,preTag:y,postTag:v}=w,F=_(),re=(0,s.useMemo)(()=>M.split(new RegExp(`(${y}.+?${v})`)),[v,y,M]);return s.createElement(s.Fragment,null,re.map((Ne,ye)=>Ne.includes(y)?s.createElement("mark",{className:F.highlight,key:ye},Ne.replace(new RegExp(`${y}|${v}`,"g"),"")):Ne))},me=({result:w,highlight:M,icon:y,secondaryAction:v,lineClamp:F=5})=>w?s.createElement(s.Fragment,null,y&&s.createElement(r.A,null,y),s.createElement(q.A,{primaryTypographyProps:{variant:"h6"},primary:s.createElement(pe.N_,{noTrack:!0,to:w.location},M!=null&&M.fields.title?s.createElement(de,{text:(M==null?void 0:M.fields.title)||"",preTag:(M==null?void 0:M.preTag)||"",postTag:(M==null?void 0:M.postTag)||""}):w.title),secondary:s.createElement(t.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:F,overflow:"hidden"},color:"textSecondary",variant:"body2"},M!=null&&M.fields.text?s.createElement(de,{text:M.fields.text,preTag:M.preTag,postTag:M.postTag}):w.text)}),v&&s.createElement(Q.A,{alignItems:"flex-end"},v)):null,H=w=>s.createElement(l.Ig,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},s.createElement(me,{...w})),xe="search.results.list.items.extensions.v1",ve=(w,M)=>{for(const y of w){if(!(0,s.isValidElement)(y))continue;const v=(0,l.E0)(y,xe);if(v!=null&&v(M))return(0,s.cloneElement)(y,{rank:M.rank,highlight:M.highlight,result:M.document,...y.props})}return null},dt=w=>{const{rank:M,result:y,noTrack:v,children:F,alignItems:re="flex-start",...Ne}=w,ye=(0,l.st)(),X=(0,s.useCallback)(()=>{v||y&&ye.captureEvent("discover",y.title,{attributes:{to:y.location},value:M})},[M,y,v,ye]);return s.createElement(A.A,{divider:!0,alignItems:re,onClickCapture:X,...Ne},F)},z=w=>{const{name:M,component:y,predicate:v=()=>!0}=w;return(0,l.zZ)({name:M,component:{lazy:()=>y().then(F=>re=>s.createElement(dt,{rank:re.rank,result:re.result,noTrack:re.noTrack},(0,s.createElement)(F,re)))},data:{[xe]:v}})},ee=w=>{const M=(0,l.OJ)(w,y=>y.selectByComponentData({key:xe}).getElements(),[w]);return(0,s.useCallback)((y,v)=>{const F=ve(M,y);return s.createElement(s.Fragment,{key:v},F!=null?F:s.createElement(dt,{rank:y.rank,result:y.document},s.createElement(H,{rank:y.rank,highlight:y.highlight,result:y.document})))},[M])},D=w=>{const{results:M,children:y,...v}=w,F=ee(y);return s.createElement(b.A,{...v},M.map(F))}},13270:(Tn,_t,e)=>{"use strict";e.d(_t,{$6:()=>Te,IW:()=>St,Lt:()=>Le,SQ:()=>Xe,Z5:()=>yn,Zf:()=>vt,nJ:()=>qe,pY:()=>ft,q0:()=>Zt,yY:()=>Ce});var s=e(5124),l=e(11638),b=e(22299),A=e(29365),W=e(34839),r=e(16249),q=e(64947),Q=e(45917),t=e(14041),pe=e(22771),_=e(45250),de=e.n(_),me=e(73466),H=e(5877),xe=e(97388),ve=e(78467),dt=e(58837),z=e(20577),ee=e(95061),D=e(86901),w=e(48543),M=e(69076),y=e(81215),v=e(26343),F=e(91761),re=e(72501),Ne=e(67720),ye=e(87290),X=e(60083),N=e(22968),V=e(21098),ie=e(22982),oe=e(1048).Buffer;const Ce=(0,s.c)({id:"plugin.search.queryservice"});class nt{constructor(pt){this.mockedResults=pt}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const He=(0,xe.tK)("search-context"),Xe=()=>{const Qe=(0,t.useContext)(He);if(!Qe)throw new Error("useSearch must be used within a SearchContextProvider");const pt=Qe.atVersion(1);if(!pt)throw new Error("No SearchContext v1 found");return pt},at=()=>(0,t.useContext)(He)!==void 0,Ge={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},Ye=(Qe=Ge)=>{var pt,Dt,it,Ze;const Y=(0,s.u)(Ce),he=(0,l.st)(),[fe,Ct]=(0,t.useState)(Qe.term),[Ft,cn]=(0,t.useState)(Qe.types),[An,In]=(0,t.useState)(Qe.filters),[Bn,Hn]=(0,t.useState)(Qe.pageLimit),[Cn,Vn]=(0,t.useState)(Qe.pageCursor),ua=(0,H.A)(fe),ut=(0,H.A)(An),m=(0,me.A)(async()=>{var J,we;const Oe=await Y.query({term:fe,types:Ft,filters:An,pageLimit:Bn,pageCursor:Cn});return fe&&he.captureEvent("search",fe,{value:(we=(J=m.value)==null?void 0:J.numberOfResults)!=null?we:void 0}),Oe},[fe,Ft,An,Bn,Cn]),R=!m.loading&&!m.error&&((pt=m.value)==null?void 0:pt.nextPageCursor),K=!m.loading&&!m.error&&((Dt=m.value)==null?void 0:Dt.previousPageCursor),le=(0,t.useCallback)(()=>{var J;Vn((J=m.value)==null?void 0:J.nextPageCursor)},[(it=m.value)==null?void 0:it.nextPageCursor]),I=(0,t.useCallback)(()=>{var J;Vn((J=m.value)==null?void 0:J.previousPageCursor)},[(Ze=m.value)==null?void 0:Ze.previousPageCursor]);return(0,t.useEffect)(()=>{ua!==void 0&&fe!==ua&&Vn(void 0)},[fe,ua,Vn]),(0,t.useEffect)(()=>{ut!==void 0&&!(0,_.isEqual)(An,ut)&&Vn(void 0)},[An,ut,Vn]),{result:m,term:fe,setTerm:Ct,types:Ft,setTypes:cn,filters:An,setFilters:In,pageLimit:Bn,setPageLimit:Hn,pageCursor:Cn,setPageCursor:Vn,fetchNextPage:R?le:void 0,fetchPreviousPage:K?I:void 0}},Re=Qe=>{const{initialState:pt,children:Dt}=Qe,it=Ye(pt);return t.createElement(l.Ig,{attributes:{searchTypes:it.types.sort().join(",")}},t.createElement(He.Provider,{value:(0,xe.Bl)({1:it})},Dt))},Le=Qe=>{const{initialState:pt,inheritParentContextIfAvailable:Dt,children:it}=Qe,Ze=at(),Y=(0,s.u)(s.p),he=pt!=null?pt:{},fe=Y.has("search.query.pageLimit")?{pageLimit:Y.getNumber("search.query.pageLimit")}:{},Ct={...Ge,...he,...fe};return Ze&&Dt?t.createElement(t.Fragment,null,it):t.createElement(Re,{initialState:Ct},it)};function ct(Qe){return(0,t.forwardRef)((pt,Dt)=>t.createElement(Le,{inheritParentContextIfAvailable:!0},t.createElement(Qe,{...pt,ref:Dt})))}const vt=ct((0,t.forwardRef)((Qe,pt)=>{const{onChange:Dt,onKeyDown:it=()=>{},onClear:Ze=()=>{},onSubmit:Y=()=>{},debounceTime:he=200,clearButton:fe=!0,fullWidth:Ct=!0,value:Ft,label:cn,placeholder:An,inputProps:In={},InputProps:Bn={},endAdornment:Hn,...Cn}=Qe,Vn=(0,s.u)(s.p),[ua,ut]=(0,t.useState)(""),m=(0,t.useRef)("");(0,t.useEffect)(()=>{ut(Oe=>Oe===m.current?String(Ft):Oe)},[Ft,m]),(0,pe.A)(()=>{m.current=ua,Dt(ua)},he,[ua]);const R=(0,t.useCallback)(Oe=>{ut(Oe.target.value)},[ut]),K=(0,t.useCallback)(Oe=>{it&&it(Oe),Y&&Oe.key==="Enter"&&Y()},[it,Y]),le=(0,t.useCallback)(()=>{m.current="",Dt(""),ut(""),Ze&&Ze()},[Dt,Ze]),I=cn?void 0:"Search",U=An!=null?An:`Search in ${Vn.getOptionalString("app.title")||"Backstage"}`,J=t.createElement(W.A,{position:"start"},t.createElement(A.A,{"aria-label":"Query",size:"small",disabled:!0},t.createElement(Q.A,null))),we=t.createElement(W.A,{position:"end"},t.createElement(q.A,{"aria-label":"Clear",size:"small",onClick:le,onKeyDown:Oe=>{Oe.key==="Enter"&&Oe.stopPropagation()}},"Clear"));return t.createElement(r.A,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:pt,value:ua,label:cn,placeholder:U,InputProps:{startAdornment:J,endAdornment:fe?we:Hn,...Bn},inputProps:{"aria-label":I,...In},fullWidth:Ct,onChange:R,onKeyDown:K,...Cn})})),St=ct((0,t.forwardRef)((Qe,pt)=>{const{value:Dt="",onChange:it,...Ze}=Qe,{term:Y,setTerm:he}=Xe();(0,t.useEffect)(()=>{Dt&&he(String(Dt))},[Dt,he]);const fe=(0,t.useCallback)(Ct=>{it?it(Ct):he(Ct)},[it,he]);return t.createElement(l.Ig,{attributes:{pluginId:"search",extension:"SearchBar"}},t.createElement(vt,{...Ze,ref:pt,value:Y,onChange:fe}))})),Jt=(0,dt.A)(Qe=>({loading:{right:Qe.spacing(1),position:"absolute"}})),At=Qe=>pt=>t.createElement(Le,{inheritParentContextIfAvailable:!0},t.createElement(Qe,{...pt})),ue=()=>{const Qe=Jt();return t.createElement(ve.A,{className:Qe.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},ft=At(function(pt){const{loading:Dt,value:it,onChange:Ze=()=>{},options:Y=[],getOptionLabel:he=m=>String(m),inputPlaceholder:fe,inputDebounceTime:Ct,freeSolo:Ft=!0,fullWidth:cn=!0,clearOnBlur:An=!1,"data-testid":In="search-autocomplete",...Bn}=pt,{setTerm:Hn}=Xe(),Cn=(0,t.useCallback)(m=>m?typeof m=="string"?m:he(m):"",[he]),Vn=(0,t.useMemo)(()=>Cn(it),[it,Cn]),ua=(0,t.useCallback)((m,R,K,le)=>{Hn(Cn(R)),Ze(m,R,K,le)},[Cn,Hn,Ze]),ut=(0,t.useCallback)(({InputProps:{ref:m,className:R,endAdornment:K},InputLabelProps:le,...I})=>t.createElement(St,{...I,ref:m,clearButton:!1,value:Vn,placeholder:fe,debounceTime:Ct,endAdornment:Dt?t.createElement(ue,null):K,InputProps:{className:R}}),[Dt,Vn,fe,Ct]);return t.createElement(z.Ay,{...Bn,"data-testid":In,value:it,onChange:ua,options:Y,getOptionLabel:he,renderInput:ut,freeSolo:Ft,fullWidth:cn,clearOnBlur:An})}),xt=Qe=>{const{icon:pt,primaryText:Dt,primaryTextTypographyProps:it,secondaryText:Ze,secondaryTextTypographyProps:Y,disableTextTypography:he}=Qe;return React.createElement(React.Fragment,null,pt?React.createElement(ListItemIcon,null,pt):null,React.createElement(ListItemText,{primary:Dt,primaryTypographyProps:it,secondary:Ze,secondaryTypographyProps:Y,disableTypography:he}))},gt=(Qe,pt,Dt=[],it=250)=>{const Ze=(0,t.useRef)({}),Y=Qe||(()=>Promise.resolve([])),[he,fe]=(0,ye.A)(Y,[pt],{loading:!0});if((0,pe.A)(()=>{Ze.current[pt]===void 0&&(Ze.current[pt]=fe(pt).then(Ft=>(Ze.current[pt]=Ft,Ft)))},it,[fe,pt]),Dt.length)return{loading:!1,value:Dt};const Ct=Ze.current[pt];return Array.isArray(Ct)?{loading:!1,value:Ct}:he},Nt=(Qe,pt)=>{const{setFilters:Dt}=Xe();(0,t.useEffect)(()=>{pt&&[pt].flat().length>0&&Dt(it=>({...it,[Qe]:pt}))},[])},S=Qe=>{const{className:pt,defaultValue:Dt,name:it,values:Ze,valuesDebounceMs:Y,label:he,filterSelectedOptions:fe,limitTags:Ct,multiple:Ft}=Qe,[cn,An]=(0,t.useState)("");Nt(it,Dt);const In=typeof Ze=="function"?Ze:void 0,Bn=typeof Ze=="function"?void 0:Ze,{value:Hn,loading:Cn}=gt(In,cn,Bn,Y),{filters:Vn,setFilters:ua}=Xe(),ut=Vn[it]||(Ft?[]:null),m=(le,I)=>{ua(U=>{const{[it]:J,...we}=U;return I?{...we,[it]:I}:{...we}})},R=le=>t.createElement(r.A,{...le,name:"search",variant:"outlined",label:he,fullWidth:!0}),K=(le,I)=>le.map((U,J)=>t.createElement(Ne.A,{label:U,color:"primary",...I({index:J})}));return t.createElement(z.Ay,{filterSelectedOptions:fe,limitTags:Ct,multiple:Ft,className:pt,id:`${Ft?"multi-":""}select-filter-${it}--select`,options:Hn||[],loading:Cn,value:ut,onChange:m,onInputChange:(le,I)=>An(I),renderInput:R,renderTags:K})},P=(0,dt.A)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),j=Qe=>{const{className:pt,defaultValue:Dt,label:it,name:Ze,values:Y=[],valuesDebounceMs:he}=Qe,fe=P(),{filters:Ct,setFilters:Ft}=Xe();Nt(Ze,Dt);const cn=typeof Y=="function"?Y:void 0,An=typeof Y=="function"?void 0:Y,{value:In=[],loading:Bn}=gt(cn,"",An,he),Hn=Cn=>{const{target:{value:Vn,checked:ua}}=Cn;Ft(ut=>{const{[Ze]:m,...R}=ut,K=(m||[]).filter(I=>I!==Vn),le=ua?[...K,Vn]:K;return le.length?{...R,[Ze]:le}:R})};return t.createElement(ee.A,{className:pt,disabled:Bn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},it?t.createElement(F.A,{className:fe.label},it):null,In.map(Cn=>{var Vn;return t.createElement(D.A,{key:Cn,classes:{root:fe.checkboxWrapper,label:fe.textWrapper},label:Cn,control:t.createElement(M.A,{color:"primary",inputProps:{"aria-labelledby":Cn},value:Cn,name:Cn,onChange:Hn,checked:((Vn=Ct[Ze])!=null?Vn:[]).includes(Cn)})})}))},Z=Qe=>{const{className:pt,defaultValue:Dt,label:it,name:Ze,values:Y,valuesDebounceMs:he}=Qe,fe=P();Nt(Ze,Dt);const Ct=typeof Y=="function"?Y:void 0,Ft=typeof Y=="function"?void 0:Y,{value:cn=[],loading:An}=gt(Ct,"",Ft,he),{filters:In,setFilters:Bn}=Xe(),Hn=Cn=>{const{target:{value:Vn}}=Cn;Bn(ua=>{const{[Ze]:ut,...m}=ua;return Vn?{...m,[Ze]:Vn}:m})};return t.createElement(ee.A,{disabled:An,className:pt,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},it?t.createElement(w.A,{className:fe.label,margin:"dense"},it):null,t.createElement(y.A,{variant:"outlined",value:In[Ze]||"",onChange:Hn},t.createElement(v.A,{value:""},t.createElement("em",null,"All")),cn.map(Cn=>t.createElement(v.A,{key:Cn,value:Cn},t.createElement(re.A,{variant:"inherit",noWrap:!0},Cn)))))},Te=Qe=>{const{component:pt,...Dt}=Qe;return t.createElement(pt,{...Dt})};Te.Checkbox=Qe=>t.createElement(Te,{...Qe,component:j}),Te.Select=Qe=>t.createElement(Te,{...Qe,component:Z}),Te.Autocomplete=Qe=>t.createElement(Te,{...Qe,component:S});const Ke=Qe=>oe.from(Qe.toString(),"utf-8").toString("base64"),mt=Qe=>Qe?Number(oe.from(Qe,"base64").toString("utf-8")):0,Je=Qe=>{const{total:pt=-1,cursor:Dt,hasNextPage:it,onCursorChange:Ze,limit:Y=25,limitLabel:he="Results per page:",limitText:fe=({from:Hn,to:Cn})=>pt>0?`of ${pt}`:`${Hn}-${Cn}`,limitOptions:Ct,onLimitChange:Ft,...cn}=Qe,An=(0,t.useMemo)(()=>mt(Dt),[Dt]),In=(0,t.useCallback)((Hn,Cn)=>{Ze==null||Ze(Ke(Cn))},[Ze]),Bn=(0,t.useCallback)(Hn=>{const Cn=Hn.target.value;Ft==null||Ft(parseInt(Cn,10))},[Ft]);return t.createElement(X.A,{...cn,component:"div",count:pt,page:An,nextIconButtonProps:{...it!==void 0&&{disabled:!it}},onPageChange:In,rowsPerPage:Y,labelRowsPerPage:he,labelDisplayedRows:fe,rowsPerPageOptions:Ct,onRowsPerPageChange:Bn})},qe=Qe=>{const{pageLimit:pt,setPageLimit:Dt,pageCursor:it,setPageCursor:Ze,fetchNextPage:Y}=Xe(),he=(0,t.useCallback)(fe=>{Dt(fe),Ze(void 0)},[Dt,Ze]);return t.createElement(Je,{...Qe,hasNextPage:!!Y,limit:pt,onLimitChange:he,cursor:it,onCursorChange:Ze})},Ut=Qe=>{const{children:pt}=Qe,Dt=Xe(),{result:it,...Ze}=Dt;return pt(it,Ze)},nn=Qe=>{const{query:pt,children:Dt}=Qe,it=(0,s.u)(Ce),Ze=(0,me.A)(()=>{const{term:Y="",types:he=[],filters:fe={},...Ct}=pt;return it.query({...Ct,term:Y,types:he,filters:fe})},[pt]);return Dt(Ze,pt)},It=Qe=>{const{query:pt,children:Dt}=Qe;return pt?t.createElement(nn,{query:pt},Dt):t.createElement(Ut,null,Dt)},ht=Qe=>{const{query:pt,children:Dt,noResultsComponent:it=t.createElement(N.pp,{missing:"data",title:"Sorry, no results were found"}),...Ze}=Qe;return t.createElement(It,{query:pt},({loading:Y,error:he,value:fe})=>Y?t.createElement(N.ke,null):he?t.createElement(N._1,{title:"Error encountered while fetching search results",error:he}):fe!=null&&fe.results.length?(0,_.isFunction)(Dt)?Dt(fe):t.createElement(b.S,{...Ze,results:fe.results},Dt):it)},Zt=Qe=>t.createElement(l.Ig,{attributes:{pluginId:"search",extension:"SearchResult"}},t.createElement(ht,{...Qe})),ln=Qe=>{const{error:pt,loading:Dt,resultItems:it,renderResultItem:Ze=Ct=>React.createElement(HigherOrderDefaultResultListItem,{key:Ct.document.location,result:Ct.document}),disableRenderingWithNoResults:Y,noResultsComponent:he=Y?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...fe}=Qe;return Dt?React.createElement(Progress,null):pt?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:pt}):it!=null&&it.length?React.createElement(List,{...fe},it.map(Ze)):React.createElement(React.Fragment,null,he)},on=Qe=>{const{query:pt,renderResultItem:Dt,children:it,...Ze}=Qe,Y=useSearchResultListItemExtensions(it);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(It,{query:pt},({loading:he,error:fe,value:Ct})=>React.createElement(ln,{...Ze,error:fe,loading:he,resultItems:Ct==null?void 0:Ct.results,renderResultItem:Dt!=null?Dt:Y})))},Qt=(0,dt.A)(Qe=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Qe.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Qe.palette.text.secondary,margin:Qe.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Qe.palette.text.secondary,margin:Qe.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Qe.spacing(.5)}})),Ae=Qe=>{const pt=Qt(),{label:Dt,children:it,...Ze}=Qe;return React.createElement(Chip,{...Ze,className:pt.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,Dt,": ",it)})},Ve=()=>null,jt=(0,dt.A)(Qe=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Qe.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Qe.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),zt=Qe=>{const pt=jt(),{label:Dt,value:it="None",onChange:Ze,onDelete:Y}=Qe,he=useCallback(fe=>{Ze(fe.target.value)},[Ze]);return React.createElement(Ae,{label:Dt,onDelete:Y},React.createElement(Typography,{role:"textbox",component:"span",className:pt.root,onChange:he,contentEditable:!0,suppressContentEditableWarning:!0},it==null?void 0:it.toString()))},Kt=(0,dt.A)(Qe=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Qe.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),Et=Qe=>{const pt=Kt(),{label:Dt,value:it="none",onChange:Ze,onDelete:Y,children:he}=Qe,fe=useCallback(Ct=>{Ze(Ct.target.value)},[Ze]);return React.createElement(Ae,{label:Dt,onDelete:Y},React.createElement(Select,{className:pt.root,value:it,onChange:fe,input:React.createElement(InputBase,null),IconComponent:Ve},React.createElement(MenuItem,{value:"none"},"None"),he))};function xn(Qe){const pt=Qt(),[Dt,it]=useState(null),{error:Ze,loading:Y,icon:he,title:fe,titleProps:Ct={},link:Ft=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:pt.listSubheaderLinkIcon})),linkProps:cn={},filterOptions:An,renderFilterOption:In=le=>React.createElement(MenuItem,{key:String(le),value:String(le)},String(le)),filterFields:Bn,renderFilterField:Hn,resultItems:Cn,renderResultItem:Vn=le=>React.createElement(HigherOrderDefaultResultListItem,{key:le.document.location,result:le.document}),disableRenderingWithNoResults:ua,noResultsComponent:ut=ua?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...m}=Qe,R=useCallback(le=>{it(le.currentTarget)},[]),K=useCallback(()=>{it(null)},[]);return Y?React.createElement(Progress,null):Ze?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:Ze}):Cn!=null&&Cn.length?React.createElement(List,{...m},React.createElement(ListSubheader,{className:pt.listSubheader},he,React.createElement(Typography,{className:pt.listSubheaderName,component:"strong",...Ct},fe),An?React.createElement(Chip,{className:pt.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:R}):null,An?React.createElement(Menu,{id:"filters-menu",anchorEl:Dt,open:!!Dt,onClose:K,onClick:K,keepMounted:!0},An.map(In)):null,Bn==null?void 0:Bn.map(le=>{var I;return(I=Hn==null?void 0:Hn(le))!=null?I:null}),React.createElement(Link,{className:pt.listSubheaderLink,to:"/search",...cn},Ft)),Cn.map(Vn)):React.createElement(React.Fragment,null,ut)}function dn(Qe){const{query:pt,children:Dt,renderResultItem:it,linkProps:Ze={},...Y}=Qe,he=useSearchResultListItemExtensions(Dt);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(It,{query:pt},({loading:fe,error:Ct,value:Ft},{term:cn,types:An,pageCursor:In,filters:Bn={}})=>{const Hn=`/search?${qs.stringify({term:cn,types:An,filters:Bn,pageCursor:In,query:cn},{arrayFormat:"brackets"})}`;return React.createElement(xn,{...Y,error:Ct,loading:fe,linkProps:{to:Hn,...Ze},filterFields:Object.keys(Bn),resultItems:Ft==null?void 0:Ft.results,renderResultItem:it!=null?it:he})}))}const Xt=(0,dt.A)(Qe=>({root:{display:"flex",justifyContent:"space-between",gap:Qe.spacing(2),margin:Qe.spacing(2,0)}})),yn=()=>{const{fetchNextPage:Qe,fetchPreviousPage:pt}=Xe(),Dt=Xt();return!Qe&&!pt?t.createElement(t.Fragment,null):t.createElement("nav",{"aria-label":"pagination navigation",className:Dt.root},t.createElement(q.A,{"aria-label":"previous page",disabled:!pt,onClick:pt,startIcon:t.createElement(ie.A,null)},"Previous"),t.createElement(q.A,{"aria-label":"next page",disabled:!Qe,onClick:Qe,endIcon:t.createElement(V.A,null)},"Next"))}},2788:(Tn,_t,e)=>{"use strict";e.d(_t,{S:()=>vt,a:()=>xt,b:()=>Ye,c:()=>Re,r:()=>at});var s=e(3399),l=e(45810),b=e.n(l),A=e(13270),W=e(11638),r=e(5124),q=e(14041),Q=e(5877),t=e(18690),pe=e(69076),_=e(67720),de=e(95061),me=e(48543),H=e(5951),xe=e(26343),ve=e(81215),dt=e(58837),z=e(8380),ee=e(8973),D=e(29655),w=e(91567),M=e(40703),y=e(48653),v=e(45685),F=e(37197),re=e(58007),Ne=e(8109),ye=e(46423),X=e(6924),N=e(53364),V=e(73466),ie=e(38605),oe=e(31653),Ce=Object.defineProperty,nt=(gt,Nt,S)=>Nt in gt?Ce(gt,Nt,{enumerable:!0,configurable:!0,writable:!0,value:S}):gt[Nt]=S,He=(gt,Nt,S)=>(nt(gt,typeof Nt!="symbol"?Nt+"":Nt,S),S);class Xe{constructor(Nt){He(this,"discoveryApi"),He(this,"identityApi"),this.discoveryApi=Nt.discoveryApi,this.identityApi=Nt.identityApi}async query(Nt){const{token:S}=await this.identityApi.getCredentials(),P=b().stringify(Nt),j=`${await this.discoveryApi.getBaseUrl("search")}/query?${P}`,Z=await fetch(j,{headers:S?{Authorization:`Bearer ${S}`}:{}});if(!Z.ok)throw await s.o3.fromResponse(Z);return Z.json()}}const at=(0,W.HM)({id:"search"}),Ge=(0,W.i1)({id:"search",apis:[(0,W.bW)({api:A.yY,deps:{discoveryApi:r.q,identityApi:r.t},factory:({discoveryApi:gt,identityApi:Nt})=>new Xe({discoveryApi:gt,identityApi:Nt})})],routes:{root:at}}),Ye=Ge.provide((0,W.QJ)({name:"SearchPage",component:()=>e.e(4428).then(e.bind(e,84428)).then(gt=>gt.SearchPage),mountPoint:at})),Re=Ge.provide((0,W.NC)({name:"SidebarSearchModal",component:{lazy:()=>e.e(6119).then(e.bind(e,26119)).then(gt=>gt.SidebarSearchModal)}})),Le=Ge.provide((0,W.NC)({name:"HomePageSearchBar",component:{lazy:()=>e.e(776).then(e.bind(e,70776)).then(gt=>gt.HomePageSearchBar)}})),ct=()=>{const gt=(0,t.zy)(),{term:Nt,setTerm:S,types:P,setTypes:j,pageCursor:Z,setPageCursor:Te,filters:Ke,setFilters:mt}=(0,A.SQ)(),Je=(0,Q.A)(gt.search);return(0,q.useEffect)(()=>{if(gt.search===Je)return;const qe=b().parse(gt.search.substring(1),{arrayLimit:0})||{};qe.filters&&mt(qe.filters),qe.query&&S(qe.query),qe.pageCursor&&Te(qe.pageCursor),qe.types&&j(qe.types)},[Je,gt,S,j,Te,mt]),(0,q.useEffect)(()=>{const qe=b().stringify({query:Nt,types:P,pageCursor:Z,filters:Ke},{arrayFormat:"brackets"}),Ut=`${window.location.pathname}?${qe}`;window.history.replaceState(null,document.title,Ut)},[Nt,P,Z,Ke]),null},vt=()=>{const gt=(0,t.P1)();return q.createElement(A.Lt,null,q.createElement(ct,null),gt)},St=(0,dt.A)(gt=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:gt.spacing(1)},icon:{color:gt.palette.text.primary},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:gt.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:gt.spacing(2,0),"&.Mui-expanded":{margin:gt.spacing(2,0)}},accordionDetails:{padding:gt.spacing(0,0,1)}})),Jt=gt=>{const Nt=St(),{filters:S,setPageCursor:P,setTypes:j,term:Z,types:Te}=(0,A.SQ)(),Ke=(0,r.u)(A.yY),[mt,Je]=(0,q.useState)(!0),{defaultValue:qe,name:Ut,showCounts:nn,types:It}=gt,ht=()=>Je(Ae=>!Ae),Zt=Ae=>()=>{j(Ae!==""?[Ae]:[]),P(void 0),Je(!1)};(0,q.useEffect)(()=>{qe&&j([qe])},[]);const ln=[{value:"",name:"All",icon:q.createElement(N.A,null)},...It],on=Te[0]||"",{value:Qt}=(0,V.A)(async()=>{if(!nn)return{};const Ae=await Promise.all(ln.map(Ve=>Ve.value).map(async Ve=>{const{numberOfResults:jt}=await Ke.query({term:Z,types:Ve?[Ve]:[],filters:Te.includes(Ve)||!Te.length&&!Ve?S:{},pageLimit:0});return[Ve,jt!==void 0?`${jt>=1e4?">10000":jt} results`:" -- "]}));return Object.fromEntries(Ae)},[S,nn,Z,Te]);return q.createElement(M.A,{className:Nt.card},q.createElement(v.A,{title:Ut,titleTypographyProps:{variant:"overline"}}),q.createElement(y.A,{className:Nt.cardContent},q.createElement(ee.A,{className:Nt.accordion,expanded:mt,onChange:ht},q.createElement(D.A,{classes:{root:Nt.accordionSummary,content:Nt.accordionSummaryContent},expandIcon:q.createElement(X.A,{className:Nt.icon}),IconButtonProps:{size:"small"}},mt?"Collapse":ln.filter(Ae=>Ae.value===on)[0].name),q.createElement(w.A,{classes:{root:Nt.accordionDetails}},q.createElement(re.A,{className:Nt.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},ln.map(Ae=>q.createElement(q.Fragment,{key:Ae.value},q.createElement(F.A,null),q.createElement(Ne.A,{selected:Te[0]===Ae.value||Te.length===0&&Ae.value==="",onClick:Zt(Ae.value),button:!0},q.createElement(ye.A,null,(0,q.cloneElement)(Ae.icon,{className:Nt.listItemIcon})),q.createElement(H.A,{primary:Ae.name,secondary:Qt&&Qt[Ae.value]})))))))))},At=(0,dt.A)(gt=>({tabs:{borderBottom:`1px solid ${gt.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:gt.typography.fontWeightBold,fontSize:gt.typography.pxToRem(13),color:gt.palette.text.primary,minWidth:"130px"}})),ue=gt=>{const Nt=At(),{setPageCursor:S,setTypes:P,types:j}=(0,A.SQ)(),{defaultValue:Z,types:Te}=gt,Ke=(Je,qe)=>{P(qe!==""?[qe]:[]),S(void 0)};(0,q.useEffect)(()=>{Z&&P([Z])},[]);const mt=[{value:"",name:"All"},...Te];return q.createElement(oe.A,{"aria-label":"List of search types tabs",className:Nt.tabs,indicatorColor:"primary",value:j.length===0?"":j[0],onChange:Ke},mt.map((Je,qe)=>q.createElement(ie.A,{key:qe,className:Nt.tab,label:Je.name,value:Je.value})))},ft=(0,dt.A)(gt=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:gt.spacing(1)},chip:{margin:2}})),xt=gt=>{const{className:Nt,defaultValue:S,name:P,values:j=[]}=gt,Z=ft(),{types:Te,setTypes:Ke}=(0,A.SQ)();(0,z.A)(()=>{Te.length||(S&&Array.isArray(S)?Ke(S):S&&Ke([S]))});const mt=Je=>{const qe=Je.target.value;Ke(qe)};return q.createElement(de.A,{className:Nt,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},q.createElement(me.A,{className:Z.label,margin:"dense"},P),q.createElement(ve.A,{multiple:!0,variant:"outlined",value:Te,onChange:mt,placeholder:"All Results",renderValue:Je=>q.createElement("div",{className:Z.chips},Je.map(qe=>q.createElement(_.A,{key:qe,label:qe,className:Z.chip,size:"small"})))},j.map(Je=>q.createElement(xe.A,{key:Je,value:Je},q.createElement(pe.A,{checked:Te.indexOf(Je)>-1}),q.createElement(H.A,{primary:Je})))))};xt.Accordion=gt=>q.createElement(Jt,{...gt}),xt.Tabs=gt=>q.createElement(ue,{...gt})},47745:(Tn,_t,e)=>{"use strict";e.d(_t,{M:()=>A,T:()=>de,a:()=>b});var s=e(5124),l=e(11638);const b=(0,s.c)({id:"plugin.techradar.service"});var A=(me=>(me[me.Down=-1]="Down",me[me.NoChange=0]="NoChange",me[me.Up=1]="Up",me))(A||{});const W=new Array;W.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),W.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),W.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),W.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const r=new Array;r.push({id:"infrastructure",name:"Infrastructure"}),r.push({id:"frameworks",name:"Frameworks"}),r.push({id:"languages",name:"Languages"}),r.push({id:"process",name:"Process"});const q=new Array;q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),q.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),q.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),q.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),q.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),q.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const Q={entries:q,quadrants:r,rings:W};class t{async load(){return Q}}const pe=(0,l.HM)({id:"tech-radar"}),de=(0,l.i1)({id:"tech-radar",routes:{root:pe},apis:[(0,l.bW)(b,new t)]}).provide((0,l.QJ)({name:"TechRadarPage",component:()=>e.e(8095).then(e.bind(e,38095)).then(function(me){return me.b}).then(me=>me.RadarPage),mountPoint:pe}))},51330:(Tn,_t,e)=>{"use strict";e.d(_t,{Gr:()=>Ut});var s=e(5124),l=e(11638),b=e(20443),A=e(14041),W=e(87881),r=e(7031),q=e(64947),Q=e(58837),t=e(41883),pe=e(4321),_=e(33466),de=e(54917),me=e(26343),H=e(5951),xe=e(72501),ve=e(77125),dt=e(29365),z=e(63798),ee=e(6924),D=e(52536),w=e.n(D),M=e(63188),y=e(33478),v=e(85005),F=e(22968),re=e(18466),Ne=e(80113),ye=e(10527),X=e(60367);const N=".md-nav__item--nested .md-toggle",V="@backstage/techdocs-addons/nav-expanded",ie=(0,r.A)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(q.A),oe=(0,r.A)({root:{height:"20px",width:"20px"}})(z.A),Ce=(0,r.A)({root:{height:"20px",width:"20px"}})(ee.A),nt=()=>{const ht={expandAllNestedNavs:!1},{value:Zt,set:ln}=(0,W.t)(V,{defaultValue:ht}),[on,Qt]=(0,A.useState)(!1),[...Ae]=(0,b.$r)([N]),Ve=(0,A.useCallback)(zt=>{const Kt=zt.checked,Et=Zt==null?void 0:Zt.expandAllNestedNavs;return!!(Et&&!Kt||!Et&&Kt)},[Zt]);(0,A.useEffect)(()=>{Ae!=null&&Ae.length&&(Qt(!0),Ae.forEach(zt=>{Ve(zt)&&zt.click()}))},[Zt,Ve,Ae]);const jt=()=>{ln(zt=>({expandAllNestedNavs:!(zt!=null&&zt.expandAllNestedNavs)}))};return A.createElement(A.Fragment,null,on?A.createElement(ie,{size:"small",onClick:jt,"aria-label":Zt!=null&&Zt.expandAllNestedNavs?"collapse-nav":"expand-nav"},Zt!=null&&Zt.expandAllNestedNavs?A.createElement(Ce,null):A.createElement(oe,null)):null)},He="techdocs-report-issue",Xe=`#${He}`,at='[title^="Edit this page"]',Ge='[title^="Leave feedback for"]',Ye='[data-md-component="main"] .md-content',Re=(ht,Zt)=>Zt==="github"?(0,M.Fw)(ht,"blob"):Zt==="gitlab"?(0,M.B)(ht,"blob"):(console.error(`Invalid SCM type ${Zt} found in ReportIssue addon for URL ${ht}!`),ht),Le=ht=>{const Zt=ht.toString().substring(0,70),ln=Zt.length===70?"...":"";return`Documentation feedback: ${Zt}${ln}`},ct=(ht,Zt,ln)=>{const on="## Documentation Feedback \u{1F4DD}",Qt="#### The highlighted text:",Ae="#### The comment on the text:",Ve="_>replace this line with your comment<_",jt=ht.toString().trim().split(`
`).map(Kt=>`> ${Kt.trim()}`).join(`
`),zt=[`${ln} URL: <${window.location.href}> 
Markdown URL: <${Zt}>`];return`${on}

 ${Qt} 

 ${jt}

 ${Ae} 
 ${Ve}

 ___
${zt}`},vt=ht=>{var Zt,ln;const on={title:"",body:""},Qt=(0,b.k0)(ht),[Ae]=(0,b.$r)([at]),Ve=(Zt=Ae==null?void 0:Ae.href)!=null?Zt:"",jt=(0,s.u)(y.YT),Kt=(0,s.u)(s.p).getOptionalString("app.title")||"Backstage";if(!Qt||!Ve)return on;const Et=(ln=jt.byUrl(Ve))==null?void 0:ln.type;return Et?{title:Le(Qt),body:ct(Qt,Re(Ve,Et),Kt)}:on},St=()=>{var ht,Zt;const ln=(0,s.u)(y.YT),[on]=(0,b.$r)([at]),Qt=(ht=on==null?void 0:on.href)!=null?ht:"";if(!Qt)return null;const Ae=(Zt=ln.byUrl(Qt))==null?void 0:Zt.type;return Ae?{...w()(Re(Qt,Ae)),type:Ae}:null},Jt=(0,Q.A)(ht=>({root:{display:"grid",gridGap:ht.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:ht.palette.common.black,fontSize:ht.typography.button.fontSize}})),At=({type:ht})=>ht==="github"?F.Hk:v.A,ue=({type:ht})=>ht==="github"?"Github":"Gitlab",ft=(ht,Zt)=>{const{title:ln,body:on}=Zt,Qt=encodeURIComponent(ln),Ae=encodeURIComponent(on),{protocol:Ve,resource:jt,owner:zt,name:Kt,type:Et}=ht,xn=`${Ve}://${jt}/${zt}/${Kt}`,dn=encodeURI(xn);return Et==="github"?`${dn}/issues/new?title=${Qt}&body=${Ae}`:`${dn}/issues/new?issue[title]=${Qt}&issue[description]=${Ae}`},xt=({template:ht,repository:Zt})=>{const ln=Jt(),on=At(Zt),Qt=ft(Zt,ht);return A.createElement(F.N_,{className:ln.root,to:Qt,target:"_blank"},A.createElement(on,null)," Open new ",ue(Zt)," issue")},gt=(0,Q.A)(ht=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:ht.spacing(1),zIndex:ht.zIndex.tooltip,background:ht.palette.common.white}})),Nt=({debounceTime:ht=500,templateBuilder:Zt})=>{const ln=gt(),[on,Qt]=(0,A.useState)(),Ae=St(),Ve=vt(ht),jt=(0,b.k0)(ht),[zt,Kt]=(0,b.$r)([Ye,Ge]);let[Et]=(0,b.$r)([Xe]);return Kt&&(Kt.style.display="none"),(0,A.useEffect)(()=>{if(!Ae||!jt||!jt.containsNode(zt,!0)||jt!=null&&jt.containsNode(Et,!0))return;const xn=zt.getBoundingClientRect(),dn=jt.getRangeAt(0).getBoundingClientRect(),Xt=dn.top-xn.top,yn=50;let Qe=Xt<yn?101:Xt-16;if(xn.top<0){const pt=Math.abs(xn.top);Xt-pt<yn&&(Qe+=89)}Qt({top:`${Qe}px`,left:`${dn.left+dn.width/2}px`})},[jt,zt,Et]),!jt||!Ae||!["github","gitlab"].includes(Ae.type)?null:(Et||(Et=document.createElement("div"),Et.setAttribute("id",He),zt.prepend(Et)),A.createElement(t.A,{container:Et},A.createElement(pe.A,{"data-testid":"report-issue-addon",className:ln.root,style:on},A.createElement(xt,{repository:Ae,template:Zt?Zt({selection:jt}):Ve}))))},S="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",P=(0,r.A)(ht=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:ht.palette.common.white,boxShadow:S,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:S}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:ht.palette.textSubtle,fontSize:ht.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(_.A),j={key:"techdocs.addons.settings.textsize",defaultValue:100},Z=[{value:90},{value:100},{value:115},{value:130},{value:150}],Te=(0,Q.A)(ht=>({container:{color:ht.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:ht.spacing(1)},increaseButton:{marginLeft:ht.spacing(1)}})),Ke=()=>{const ht=Te(),Zt=(0,de.A)(),[ln]=(0,b.$r)(["body"]),[on,Qt]=(0,A.useState)(()=>{const Xt=localStorage==null?void 0:localStorage.getItem(j.key);return Xt?parseInt(Xt,10):j.defaultValue}),Ae=(0,A.useMemo)(()=>Z.map(Xt=>Xt.value),[]),Ve=(0,A.useMemo)(()=>Ae.indexOf(on),[Ae,on]),jt=(0,A.useMemo)(()=>Ae[0],[Ae]),zt=(0,A.useMemo)(()=>Ae[Ae.length-1],[Ae]),Kt=(0,A.useCallback)(()=>`${on}%`,[on]),Et=(0,A.useCallback)((Xt,yn)=>{Array.isArray(yn)||(Qt(yn),localStorage==null||localStorage.setItem(j.key,String(yn)))},[Qt]),xn=(0,A.useCallback)(Xt=>{Et(Xt,Ae[Ve-1])},[Ve,Ae,Et]),dn=(0,A.useCallback)(Xt=>{Et(Xt,Ae[Ve+1])},[Ve,Ae,Et]);return(0,A.useEffect)(()=>{var Xt,yn;if(!ln)return;const Qe=(yn=(Xt=Zt.typography)==null?void 0:Xt.htmlFontSize)!=null?yn:16;ln.style.setProperty("--md-typeset-font-size",`${Qe*(on/100)}px`)},[ln,on,Zt]),A.createElement(me.A,{className:ht.menuItem,button:!0,disableRipple:!0},A.createElement(H.A,{primary:A.createElement(xe.A,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:A.createElement(ve.A,{className:ht.container},A.createElement(dt.A,{className:ht.decreaseButton,size:"small",edge:"start",disabled:on===jt,onClick:xn,"aria-label":"Decrease text size"},A.createElement(Ne.A,null)),A.createElement(P,{value:on,"aria-labelledby":"text-size-slider",getAriaValueText:Kt,valueLabelDisplay:"on",valueLabelFormat:Kt,marks:Z,step:null,min:jt,max:zt,onChangeCommitted:Et}),A.createElement(dt.A,{className:ht.increaseButton,size:"small",edge:"end",disabled:on===zt,onClick:dn,"aria-label":"Increase text size"},A.createElement(re.A,null))),disableTypography:!0}))},mt=()=>{const ht=(0,b.$r)(["img"]);return(0,A.useEffect)(()=>{let Zt=null,ln=new ye.A({pswpModule:X.A,initialZoomLevel:1,secondaryZoomLevel:on=>{const Qt=on.elementSize.x,Ae=on.elementSize.y,Ve=on.panAreaSize.x,jt=on.panAreaSize.y,zt=Ve/Qt,Kt=jt/Ae;return Math.min(zt,Kt)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return ht.forEach((on,Qt)=>{on.onclick=()=>(Zt===null&&(Zt=ht.map(Ae=>({element:Ae,src:Ae.src,msrc:Ae.src,alt:Ae.alt,width:Ae.clientWidth,height:Ae.clientHeight}))),ln.loadAndOpen(Qt,Zt),!1)}),ln.init(),()=>{ln.destroy(),ln=null}},[ht]),null},Je=(0,l.i1)({id:"techdocsModuleAddonsContrib"}),qe=Je.provide((0,b.Hr)({name:"ExpandableNavigation",location:b.eK.PrimarySidebar,component:nt})),Ut=Je.provide((0,b.Hr)({name:"ReportIssue",location:b.eK.Content,component:Nt})),nn=Je.provide((0,b.Hr)({name:"TextSize",location:b.eK.Settings,component:Ke})),It=Je.provide((0,b.Hr)({name:"LightBox",location:b.eK.Content,component:mt}))},20443:(Tn,_t,e)=>{"use strict";e.d(_t,{$r:()=>at,AF:()=>ve,Hr:()=>ee,K$:()=>oe,R7:()=>N,V1:()=>V,Wm:()=>xe,YR:()=>y,_$:()=>nt,eK:()=>ie,eh:()=>He,k0:()=>Ye,l9:()=>v,po:()=>dt,sm:()=>F});var s=e(14041),l=e(18690),b=e(11638),A=e(5124),W=e(73466),r=e(28966),q=e(29835),Q=e(97388),t=e(9394),pe=e(91360),_=e(22856),de=e(22968),me=e(12784),H=e.n(me);const xe="techdocs.addons.addon.v1",ve="techdocs.addons.wrapper.v1",dt=()=>null;(0,b.h3)(dt,ve,!0);const z=Re=>`${xe}.${Re.toLocaleLowerCase("en-US")}`;function ee(Re){const{name:Le,component:ct}=Re;return(0,b.zZ)({name:Le,component:{sync:vt=>s.createElement(ct,{...vt})},data:{[xe]:Re,[z(Le)]:!0}})}const D=(Re,Le)=>Re.selectByComponentData({key:Le}).getElements()[0],w=Re=>Re.selectByComponentData({key:ve}).selectByComponentData({key:xe}),M=Re=>Re.selectByComponentData({key:ve}).findComponentData({key:xe}),y=()=>{const Re=(0,l.P1)(),Le=(0,b.OJ)(Re,w),ct=(0,b.OJ)(Re,M),vt=(0,s.useCallback)(At=>{var ue;if(!Le||!At)return null;const ft=z(At.name);return(ue=D(Le,ft))!=null?ue:null},[Le]),St=(0,s.useCallback)(At=>{const ue=ct.find(ft=>ft.name===At);return ue?vt(ue):null},[ct,vt]),Jt=(0,s.useCallback)(At=>{const ue=ct.filter(ft=>ft.location===At);return ue.length?ue.map(vt):null},[ct,vt]);return{renderComponentByName:St,renderComponentsByLocation:Jt}},v=(0,A.c)({id:"plugin.techdocs.service"}),F=(0,A.c)({id:"plugin.techdocs.storageservice"});function re(Re,Le){return Le.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(Re.kind=Re.kind.toLocaleLowerCase(),Re.name=Re.name.toLocaleLowerCase(),Re.namespace=Re.namespace.toLocaleLowerCase()),Re}const Ne=(Re,Le)=>(0,q.U2)(Re)===(0,q.U2)(Le),ye={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},X=(0,Q.tK)("techdocs-reader-page-context"),N=(0,s.memo)(Re=>{const{entityRef:Le,children:ct}=Re,vt=(0,A.u)(v),St=(0,A.u)(A.p),Jt=(0,W.A)(async()=>vt.getEntityMetadata(Le),[Le]),At=(0,r.A)(async()=>vt.getTechDocsMetadata(Le),[Le]),[ue,ft]=(0,s.useState)(ye.title),[xt,gt]=(0,s.useState)(ye.subtitle),[Nt,S]=(0,s.useState)(ye.shadowRoot);(0,s.useEffect)(()=>{Nt&&!At.value&&!At.loading&&At.retry()},[At.value,At.loading,Nt,At.retry,At]);const P={metadata:At,entityRef:re(Le,St),entityMetadata:Jt,shadowRoot:Nt,setShadowRoot:S,title:ue,setTitle:ft,subtitle:xt,setSubtitle:gt},j=(0,Q.Bl)({1:P});return s.createElement(b.Ig,{attributes:{entityRef:(0,q.U2)(Le)}},s.createElement(X.Provider,{value:j},ct instanceof Function?ct(P):ct))},(Re,Le)=>Ne(Re.entityRef,Le.entityRef)),V=()=>{const Re=(0,s.useContext)(X);if(Re===void 0)return ye;const Le=Re.atVersion(1);if(Le===void 0)throw new Error("No context found for version 1.");return Le},ie=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),oe="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",Ce=Re=>{(0,s.useEffect)(()=>{var Le;if(!Re)return()=>{};const ct=Re.querySelectorAll('head > link[rel="stylesheet"]');let vt=(Le=ct==null?void 0:ct.length)!=null?Le:0;const St=new CustomEvent(oe);if(!vt)return Re.dispatchEvent(St),()=>{};const Jt=()=>{--vt===0&&Re.dispatchEvent(St)};return ct==null||ct.forEach(At=>{At.addEventListener("load",Jt)}),()=>{ct==null||ct.forEach(At=>{At.removeEventListener("load",Jt)})}},[Re])},nt=Re=>{const[Le,ct]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!Re)return()=>{};ct(!0);const vt=Re.style;vt.setProperty("opacity","0");const St=()=>{ct(!1),vt.setProperty("opacity","1")};return Re.addEventListener(oe,St),()=>{Re.removeEventListener(oe,St)}},[Re]),Le},He=Re=>{const{element:Le,onAppend:ct,children:vt}=Re,[St,Jt]=(0,s.useState)((0,t.vt)({...(0,_.A)(),insertionPoint:void 0}));Ce(Le);const At=nt(Le),ue=(0,s.useCallback)(ft=>{if(!Le||!ft)return;Jt((0,t.vt)({...(0,_.A)(),insertionPoint:Le.querySelector("head")||void 0}));let xt=ft.shadowRoot;xt||(xt=ft.attachShadow({mode:"open"})),xt.replaceChildren(Le),typeof ct=="function"&&ct(xt)},[Le,ct]);return s.createElement(s.Fragment,null,At&&s.createElement(de.ke,null),s.createElement(pe.Ay,{jss:St,sheetsManager:new Map},s.createElement("div",{ref:ue,"data-testid":"techdocs-native-shadowroot"}),vt))},Xe=()=>{const{shadowRoot:Re}=V();return Re},at=Re=>{const Le=Xe();return Le?Re.map(ct=>Le==null?void 0:Le.querySelectorAll(ct)).filter(ct=>ct.length).map(ct=>Array.from(ct)).flat():[]},Ge=Re=>Re.toString()&&Re.rangeCount&&Re.getRangeAt(0).getBoundingClientRect().top,Ye=(Re=0)=>{const Le=Xe(),[ct,vt]=(0,s.useState)(null),St=(0,s.useMemo)(()=>H()(()=>{const Jt=Le,At=Jt.getSelection?Jt.getSelection():document.getSelection();At&&Ge(At)?vt(At):vt(null)},Re),[Le,vt,Re]);return(0,s.useEffect)(()=>(window.document.addEventListener("selectionchange",St),()=>{St.cancel(),window.document.removeEventListener("selectionchange",St)}),[St]),ct}},19491:(Tn,_t,e)=>{"use strict";e.d(_t,{E:()=>xe,a:()=>dt,c:()=>z,d:()=>ee,t:()=>me});var s=e(14041),l=e(18690),b=e(29835),A=e(20443),W=e(45495),r=e(11638),q=e(5124),Q=e(22299),t=e(76866),pe=e(20356),_=e(2069),de=e(92651);const me=(0,r.i1)({id:"techdocs",apis:[(0,r.bW)({api:A.sm,deps:{configApi:q.p,discoveryApi:q.q,identityApi:q.t,fetchApi:q.s},factory:({configApi:ye,discoveryApi:X,identityApi:N,fetchApi:V})=>new W.T({configApi:ye,discoveryApi:X,identityApi:N,fetchApi:V})}),(0,r.bW)({api:A.l9,deps:{configApi:q.p,discoveryApi:q.q,fetchApi:q.s},factory:({configApi:ye,discoveryApi:X,fetchApi:N})=>new W.a({configApi:ye,discoveryApi:X,fetchApi:N})})],routes:{root:W.r,docRoot:W.b,entityContent:W.c}}),H=me.provide((0,r.QJ)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return Ne}).then(ye=>ye.Router),mountPoint:W.r})),xe=me.provide((0,r.QJ)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return Ne}).then(ye=>ye.EmbeddedDocsRouter),mountPoint:W.c})),ve=me.provide((0,r.QJ)({name:"TechDocsCustomHome",component:()=>e.e(257).then(e.bind(e,52638)).then(ye=>ye.TechDocsCustomHome),mountPoint:W.r})),dt=me.provide((0,r.QJ)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,20356)).then(function(ye){return ye.d}).then(ye=>ye.TechDocsIndexPage),mountPoint:W.r})),z=me.provide((0,r.QJ)({name:"TechDocsReaderPage",component:()=>e.e(9507).then(e.bind(e,89507)).then(ye=>ye.TechDocsReaderPage),mountPoint:W.b})),ee=me.provide((0,Q.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,27332)).then(ye=>ye.TechDocsSearchResultListItem),predicate:ye=>ye.type==="techdocs"})),D="backstage.io/techdocs-entity",w=({entity:ye})=>{var X,N;let V=(0,b.sM)(ye);if((X=ye.metadata.annotations)!=null&&X[D])try{V=(0,b.KU)((N=ye.metadata.annotations)==null?void 0:N[D])}catch{}return s.createElement(z,{entityRef:V},s.createElement(t.e,null),s.createElement(t.d,{withSearch:!1}))},M="backstage.io/techdocs-ref",y="backstage.io/techdocs-entity";var Ne=Object.freeze({__proto__:null,EmbeddedDocsRouter:ye=>{var X,N;const{children:V}=ye,{entity:ie}=(0,_.u)(),oe=(0,l.Ye)([{path:"/*",element:s.createElement(w,{entity:ie}),children:[{path:"*",element:V}]}]);return((X=ie.metadata.annotations)==null?void 0:X[M])||((N=ie.metadata.annotations)==null?void 0:N[y])?oe:s.createElement(de.o9,{annotation:[M]})},Router:()=>s.createElement(l.BV,null,s.createElement(l.qh,{path:"/",element:s.createElement(pe.c,null)}),s.createElement(l.qh,{path:"/:namespace/:kind/:name/*",element:s.createElement(t.T,null)})),isTechDocsAvailable:ye=>{var X,N,V,ie;return!!((N=(X=ye==null?void 0:ye.metadata)==null?void 0:X.annotations)!=null&&N[M])||!!((ie=(V=ye==null?void 0:ye.metadata)==null?void 0:V.annotations)!=null&&ie[y])}})},20356:(Tn,_t,e)=>{"use strict";e.r(_t),e.d(_t,{D:()=>y,E:()=>v,T:()=>F,a:()=>ye,b:()=>Ne,c:()=>X,d:()=>N,t:()=>z});var s=e(14041),l=e(18690),b=e(22968),A=e(92651),W=e(2069),r=e(75757),q=e(11638),Q=e(5124),t=e(36338),pe=e(45250),_=e.n(pe),de=e(29835),me=e(45495),H=e(55290),xe=e(7031),ve=e(80109),dt=e(15303);function z(V,ie){return ie.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?V:V.toLocaleLowerCase("en-US")}const ee=(0,xe.A)({root:{color:"#f3ba37"}})(ve.A),D={createCopyDocsUrlAction(V){return ie=>({icon:()=>s.createElement(H.A,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>V(`${window.location.origin}${ie.resolved.docsUrl}`)})},createStarEntityAction(V,ie){return oe=>{const Ce=oe.entity,nt=V(Ce);return{cellStyle:{paddingLeft:"1em"},icon:()=>nt?s.createElement(ee,null):s.createElement(dt.A,null),tooltip:nt?"Remove from favorites":"Add to favorites",onClick:()=>ie(Ce)}}}};function w(V){return V.metadata.title||V.metadata.name}const M={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:V=>s.createElement(b.md,{value:s.createElement(b.N_,{to:V.resolved.docsUrl},w(V.entity)),subvalue:V.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:V})=>s.createElement(A.iI,{entityRefs:V.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},y=V=>{const{entities:ie,title:oe,loading:Ce,columns:nt,actions:He,options:Xe}=V,[,at]=(0,t.A)(),Ge=(0,q.Sf)(me.b),Ye=(0,Q.u)(Q.p);if(!ie)return null;const Re=ie.map(Jt=>{var At;const ue=(0,W.g)(Jt,de.vv);return{entity:Jt,resolved:{docsUrl:Ge({namespace:z((At=Jt.metadata.namespace)!=null?At:"default",Ye),kind:z(Jt.kind,Ye),name:z(Jt.metadata.name,Ye)}),ownedByRelations:ue,ownedByRelationsTitle:ue.map(ft=>(0,A.SE)(ft,{defaultKind:"group"})).join(", ")}}}),Le=[M.createNameColumn(),M.createOwnerColumn(),M.createKindColumn(),M.createTypeColumn()],ct=[D.createCopyDocsUrlAction(at)],vt=20,St=Re&&Re.length>vt;return s.createElement(s.Fragment,null,Ce||Re&&Re.length>0?s.createElement(b.XI,{isLoading:Ce,options:{paging:St,pageSize:vt,search:!0,actionsColumnIndex:-1,...Xe},data:Re,columns:nt||Le,actions:He||ct,title:oe?`${oe} (${Re.length})`:`All (${Re.length})`}):s.createElement(b.pp,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:s.createElement(b.Su,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};y.columns=M,y.actions=D;const v=V=>{var ie,oe;const{columns:Ce,actions:nt,options:He}=V,{loading:Xe,error:at,entities:Ge,filters:Ye}=(0,A.nK)(),{isStarredEntity:Re,toggleStarredEntity:Le}=(0,A.IT)(),[,ct]=(0,t.A)(),vt=(0,pe.capitalize)((oe=(ie=Ye.user)==null?void 0:ie.value)!=null?oe:"all"),St=[D.createCopyDocsUrlAction(ct),D.createStarEntityAction(Re,Le)];return at?s.createElement(b.Bp,{severity:"error",title:"Could not load available documentation."},s.createElement(b.z7,{language:"text",text:at.toString()})):s.createElement(y,{title:vt,entities:Ge,loading:Xe,actions:nt||St,columns:Ce,options:He})};v.columns=M,v.actions=D;const F=V=>{var ie;const{children:oe}=V,nt=`Documentation available in ${(ie=(0,Q.u)(Q.p).getOptionalString("organization.name"))!=null?ie:"Backstage"}`;return s.createElement(b.dT,{title:"Documentation",subtitle:nt,themeId:"documentation"},oe)};class re{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":r.cr}}}const Ne=()=>{const{updateFilters:V}=(0,A.nK)();return(0,s.useEffect)(()=>{V({techdocs:new re})},[V]),null},ye=V=>{const{initialFilter:ie="owned",columns:oe,actions:Ce}=V;return s.createElement(F,null,s.createElement(b.UC,null,s.createElement(b.dv,{title:""},s.createElement(b.Yl,null,"Discover documentation in your ecosystem.")),s.createElement(A.B9,null,s.createElement(A.GI,null,s.createElement(A.GI.Filters,null,s.createElement(Ne,null),s.createElement(A.y2,{initialFilter:ie}),s.createElement(A.t3,null),s.createElement(A.mo,null)),s.createElement(A.GI.Content,null,s.createElement(v,{actions:Ce,columns:oe}))))))},X=V=>(0,l.P1)()||s.createElement(ye,{...V});var N=Object.freeze({__proto__:null,TechDocsIndexPage:X})},76866:(Tn,_t,e)=>{"use strict";e.d(_t,{T:()=>Oa,a:()=>Ra,d:()=>bn,e:()=>ya});var s=e(14041),l=e(18690),b=e(22968),A=e(20443),W=e(42899),r=e(58837),q=e(99703),Q=e(268),t=e(54917),pe=e(7031),_=e(50868),de=e(13270),me=e(27332),H=e(78467),xe=e(64947),ve=e(74219),dt=e(73845),z=e(29365),ee=e(72501),D=e(32881),w=e(5124),M=e(11638),y=e(73466),v=e(28966),F=e(5893),re=e(33478),Ne=e(71651),ye=e.n(Ne),X=e(63188),N=e(90292),V=e(52536),ie=e.n(V),oe=e(27326),Ce=e(10437),nt=e(71677),He=e(36338),Xe=e(41883),at=e(93285),Ge=e(4387),Ye=e(13660),Re=e(2069),Le=e(92651),ct=e(29835),vt=e(45250),St=e(45495),Jt=e(75173),At=e(37757),ue=e(77125),ft=e(9684),xt=e(91042),gt=e(76842),Nt=e(3399);function S(){const G=useApi(identityApiRef),[be,We]=useAsync(async()=>{const{token:ot}=await G.getCredentials();if(!ot)throw new Error("Expected Backstage token in sign-in response");return ot});return useMountEffect(We.execute),be.status==="error"&&be.error?React.createElement(React.Fragment,null,"An error occurred: ",be.error.message):be.status==="success"&&be.result?React.createElement("form",{ref:ot=>ot==null?void 0:ot.submit(),action:window.location.href,method:"POST"},React.createElement("input",{type:"hidden",name:"type",value:"sign-in"}),React.createElement("input",{type:"hidden",name:"token",value:be.result}),React.createElement("input",{type:"submit",value:"Continue"})):null}const P="/.backstage/auth/v1/cookie",j=365*24*36e5;function Z(G){const{pluginId:be}=G!=null?G:{},We=(0,w.u)(w.s),ot=(0,w.u)(w.q),wt=(0,s.useMemo)(()=>"BroadcastChannel"in window?new BroadcastChannel(`${be}-auth-cookie-expires-at`):null,[be]),[Ot,rn]=(0,xt.Y)(async()=>{const ze=`${await ot.getBaseUrl(be)}${P}`,et=await We.fetch(`${ze}`,{credentials:"include"});if(!et.ok){if(et.status===404)return{expiresAt:new Date(Date.now()+j)};throw await Nt.o3.fromResponse(et)}const tt=await et.json();if(!tt.expiresAt)throw new Error("No expiration date found in response");return tt});(0,gt.u)(rn.execute);const te=(0,s.useCallback)(()=>{rn.execute()},[rn]),Ie=(0,s.useCallback)(ke=>{const ze=(1+3*Math.random())*6e4,et=Date.parse(ke.expiresAt)-Date.now()-ze,tt=setTimeout(te,et);return()=>clearTimeout(tt)},[te]);return(0,s.useEffect)(()=>{if(Ot.status!=="success"||!Ot.result)return()=>{};wt==null||wt.postMessage({action:"COOKIE_REFRESH_SUCCESS",payload:Ot.result});let ke=Ie(Ot.result);const ze=et=>{const{action:tt,payload:bt}=et.data;tt==="COOKIE_REFRESH_SUCCESS"&&(ke(),ke=Ie(bt))};return wt==null||wt.addEventListener("message",ze),()=>{ke(),wt==null||wt.removeEventListener("message",ze)}},[Ot,Ie,wt]),Ot.status==="not-executed"?{status:"loading"}:Ot.status==="loading"&&!Ot.result?{status:"loading"}:Ot.status==="loading"&&Ot.error?{status:"loading"}:Ot.status==="error"&&Ot.error?{status:"error",error:Ot.error,retry:te}:{status:"success",data:Ot.result}}function Te(G){const{children:be,...We}=G,ot=(0,M.nm)(),{Progress:wt}=ot.getComponents(),Ot=Z(We);return Ot.status==="loading"?s.createElement(wt,null):Ot.status==="error"?s.createElement(b.bJ,{error:Ot.error},s.createElement(xe.A,{variant:"outlined",onClick:Ot.retry},"Retry")):s.createElement(s.Fragment,null,be)}function Ke({contentLoading:G,content:be,activeSyncState:We}){return G||We==="BUILD_READY_RELOAD"||!be&&We==="CHECKING"?"CHECKING":!be&&We==="BUILDING"?"INITIAL_BUILD":be?We==="BUILDING"?"CONTENT_STALE_REFRESHING":We==="BUILD_READY"?"CONTENT_STALE_READY":We==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function mt(G,be){const We={...G};switch(be.type){case"sync":be.state==="CHECKING"&&(We.buildLog=[]),We.activeSyncState=be.state,We.syncError=be.syncError;break;case"contentLoading":We.contentLoading=!0,We.contentError=void 0;break;case"content":typeof be.path=="string"&&(We.path=be.path),We.contentLoading=!1,We.content=be.content,We.contentError=be.contentError;break;case"buildLog":We.buildLog=We.buildLog.concat(be.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(We.activeSyncState)&&["contentLoading","content"].includes(be.type)&&(We.activeSyncState="UP_TO_DATE",We.buildLog=[]),We}function Je(G,be,We,ot){var wt,Ot;const[rn,te]=(0,s.useReducer)(mt,{activeSyncState:"CHECKING",path:ot,contentLoading:!0,buildLog:[]}),Ie=(0,w.u)(A.sm),{retry:ke}=(0,v.A)(async()=>{te({type:"contentLoading"});try{const tt=await Ie.getEntityDocs({kind:G,namespace:be,name:We},ot);return te({type:"content",content:tt,path:ot}),tt}catch(tt){te({type:"content",contentError:tt,path:ot})}},[Ie,G,be,We,ot]),ze=(0,s.useRef)({content:void 0,reload:()=>{}});return ze.current={content:rn.content,reload:ke},(0,y.A)(async()=>{te({type:"sync",state:"CHECKING"});const tt=setTimeout(()=>{te({type:"sync",state:"BUILDING"})},1e3);try{switch(await Ie.syncEntityDocs({kind:G,namespace:be,name:We},Lt=>{te({type:"buildLog",log:Lt})})){case"updated":ze.current.content?te({type:"sync",state:"BUILD_READY"}):(ze.current.reload(),te({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":te({type:"sync",state:"UP_TO_DATE"});break;default:te({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(bt){te({type:"sync",state:"ERROR",syncError:bt})}finally{clearTimeout(tt)}},[G,We,be,Ie,te,ze]),{state:(0,s.useMemo)(()=>Ke({activeSyncState:rn.activeSyncState,contentLoading:rn.contentLoading,content:rn.content}),[rn.activeSyncState,rn.content,rn.contentLoading]),contentReload:ke,path:rn.path,content:rn.content,contentErrorMessage:(wt=rn.contentError)==null?void 0:wt.toString(),syncErrorMessage:(Ot=rn.syncError)==null?void 0:Ot.toString(),buildLog:rn.buildLog}}const qe=(0,s.createContext)({}),Ut=()=>(0,s.useContext)(qe),nn=G=>{const{children:be}=G,{"*":We=""}=(0,l.g)(),{entityRef:ot}=(0,A.V1)(),{kind:wt,namespace:Ot,name:rn}=ot,te=Je(wt,Ot,rn,We);return s.createElement(qe.Provider,{value:te},be instanceof Function?be(te):be)},It=G=>be=>s.createElement(nn,null,s.createElement(G,{...be})),ht=G=>G==null?void 0:G.document,Zt=G=>{const{entityId:be,entityTitle:We,debounceTime:ot=150}=G,[wt,Ot]=(0,s.useState)(!1),rn=(0,l.Zp)(),{setFilters:te,result:{loading:Ie,value:ke}}=(0,de.SQ)(),[ze,et]=(0,s.useState)([]);(0,s.useEffect)(()=>{let mn=!0;if(mn&&ke){const tn=ke.results.slice(0,10);et(tn)}return()=>{mn=!1}},[Ie,ke]);const{kind:tt,name:bt,namespace:Lt}=be;(0,s.useEffect)(()=>{te(mn=>({...mn,kind:tt,namespace:Lt,name:bt}))},[tt,Lt,bt,te]);const Gt=(mn,tn)=>{if(ht(tn)){const{location:ia}=tn.document;rn(ia)}};return s.createElement(de.pY,{"data-testid":"techdocs-search-bar",size:"small",open:wt,getOptionLabel:()=>"",filterOptions:mn=>mn,onClose:()=>{Ot(!1)},onFocus:()=>{Ot(!0)},onChange:Gt,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:ze,renderOption:({document:mn,highlight:tn})=>s.createElement(me.TechDocsSearchResultListItem,{result:mn,lineClamp:3,asListItem:!1,asLink:!1,title:mn.title,highlight:tn}),loading:Ie,inputDebounceTime:ot,inputPlaceholder:`Search ${We||be.name} docs`,freeSolo:!1})},ln=G=>{const be={term:"",types:["techdocs"],pageCursor:"",filters:G.entityId};return s.createElement(de.Lt,{initialState:be},s.createElement(Zt,{...G}))},on=(0,r.A)(G=>(0,q.A)({paper:{width:"100%",[G.breakpoints.up("sm")]:{width:"75%"},[G.breakpoints.up("md")]:{width:"50%"},padding:G.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:G.palette.background.default}})),Qt=({buildLog:G,onClose:be})=>{const We=on(),ot=G.length===0?"Waiting for logs...":G.join(`
`);return s.createElement(W.A,{container:!0,direction:"column",className:We.root,spacing:0,wrap:"nowrap"},s.createElement(W.A,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},s.createElement(ee.A,{variant:"h5"},"Build Details"),s.createElement(z.A,{key:"dismiss",title:"Close the drawer",onClick:be,color:"inherit"},s.createElement(D.A,null))),s.createElement(W.A,{item:!0,xs:!0},s.createElement(b.rW,{text:ot,classes:{root:We.logs}})))},Ae=({buildLog:G})=>{const be=on(),[We,ot]=(0,s.useState)(!1);return s.createElement(s.Fragment,null,s.createElement(xe.A,{color:"inherit",onClick:()=>ot(!0)},"Show Build Logs"),s.createElement(dt.Ay,{classes:{paper:be.paper},anchor:"right",open:We,onClose:()=>ot(!1)},s.createElement(Qt,{buildLog:G,onClose:()=>ot(!1)})))},Ve=({errorMessage:G})=>{const be=(0,w.u)(w.p).getOptionalString("techdocs.builder"),We=(0,M.st)(),{entityRef:ot}=(0,A.V1)(),wt=(0,l.zy)();(0,s.useEffect)(()=>{const{pathname:rn,search:te,hash:Ie}=wt;We.captureEvent("not-found",`${rn}${te}${Ie}`,{attributes:ot})},[We,ot,wt]);let Ot="";return be!=="local"&&(Ot="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),s.createElement(b.M,{status:"404",statusMessage:G||"Documentation not found",additionalInfo:Ot})},jt=(0,r.A)(G=>({root:{marginBottom:G.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),zt=()=>{let G=null;const be=jt(),{state:We,contentReload:ot,contentErrorMessage:wt,syncErrorMessage:Ot,buildLog:rn}=Ut();return We==="INITIAL_BUILD"&&(G=s.createElement(ve.A,{classes:{root:be.root},variant:"outlined",severity:"info",icon:s.createElement(H.A,{size:"24px"}),action:s.createElement(Ae,{buildLog:rn})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),We==="CONTENT_STALE_REFRESHING"&&(G=s.createElement(ve.A,{variant:"outlined",severity:"info",icon:s.createElement(H.A,{size:"24px"}),action:s.createElement(Ae,{buildLog:rn}),classes:{root:be.root}},"A newer version of this documentation is being prepared and will be available shortly.")),We==="CONTENT_STALE_READY"&&(G=s.createElement(ve.A,{variant:"outlined",severity:"success",action:s.createElement(xe.A,{color:"inherit",onClick:()=>ot()},"Refresh"),classes:{root:be.root}},"A newer version of this documentation is now available, please refresh to view.")),We==="CONTENT_STALE_ERROR"&&(G=s.createElement(ve.A,{variant:"outlined",severity:"error",action:s.createElement(Ae,{buildLog:rn}),classes:{root:be.root,message:be.message}},"Building a newer version of this documentation failed."," ",Ot)),We==="CONTENT_NOT_FOUND"&&(G=s.createElement(s.Fragment,null,Ot&&s.createElement(ve.A,{variant:"outlined",severity:"error",action:s.createElement(Ae,{buildLog:rn}),classes:{root:be.root,message:be.message}},"Building a newer version of this documentation failed."," ",Ot),s.createElement(Ve,{errorMessage:wt}))),G},Kt=/main\.[A-Fa-f0-9]{8}\.min\.css$/,Et=/^https:\/\/fonts\.googleapis\.com/,xn=/^https:\/\/fonts\.gstatic\.com/,dn=G=>G.nodeName==="LINK",Xt=G=>{const be=(G==null?void 0:G.getAttribute("href"))||"",We=be.match(Kt),ot=be.match(Et),wt=be.match(xn);return We||ot||wt},yn=G=>(dn(G)&&!Xt(G)&&G.remove(),G),Qe=G=>G.nodeName==="IFRAME",pt=(G,be)=>{const We=G.getAttribute("src")||"";try{const{host:ot}=new URL(We);return be.includes(ot)}catch{return!1}},Dt=G=>be=>(Qe(be)&&!pt(be,G)&&be.remove(),be),it=()=>{const G=(0,w.u)(w.p);return(0,s.useMemo)(()=>G.getOptionalConfig("techdocs.sanitizer"),[G])},Ze=()=>{const G=it();return(0,s.useCallback)(async be=>{const We=G==null?void 0:G.getOptionalStringArray("allowedIframeHosts");ye().addHook("beforeSanitizeElements",yn);const ot=["link"];return We&&(ot.push("iframe"),ye().addHook("beforeSanitizeElements",Dt(We))),ye().sanitize(be.outerHTML,{ADD_TAGS:ot,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[G])};var Y=({theme:G})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${G.palette.text.primary};
  --md-default-fg-color--light: ${G.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,Q.a)(G.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,Q.a)(G.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${G.palette.background.default};
  --md-default-bg-color--light: ${G.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,Q.a)(G.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,Q.a)(G.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${G.palette.primary.main};
  --md-primary-fg-color--light: ${G.palette.primary.light};
  --md-primary-fg-color--dark: ${G.palette.primary.dark};
  --md-primary-bg-color: ${G.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,Q.a)(G.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${G.shadows[1]};
  --md-shadow-z2: ${G.shadows[2]};
  --md-shadow-z3: ${G.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${G.palette.text.primary};
  --md-code-bg-color: ${G.palette.background.paper};
  --md-code-hl-color: ${(0,Q.X4)(G.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${G.palette.type==="dark"?G.palette.primary.light:G.palette.primary.dark};
  --md-code-hl-function-color: ${G.palette.type==="dark"?G.palette.secondary.light:G.palette.secondary.dark};
  --md-code-hl-string-color: ${G.palette.type==="dark"?G.palette.success.light:G.palette.success.dark};
  --md-code-hl-number-color: ${G.palette.type==="dark"?G.palette.error.light:G.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${G.palette.link};
  --md-typeset-table-color: ${G.palette.text.primary};
  --md-typeset-del-color: ${G.palette.type==="dark"?(0,Q.X4)(G.palette.error.dark,.5):(0,Q.X4)(G.palette.error.light,.5)};
  --md-typeset-ins-color: ${G.palette.type==="dark"?(0,Q.X4)(G.palette.success.dark,.5):(0,Q.X4)(G.palette.success.light,.5)};
  --md-typeset-mark-color: ${G.palette.type==="dark"?(0,Q.X4)(G.palette.warning.dark,.5):(0,Q.X4)(G.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,he=({theme:G})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${G.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const fe="224px";var Ct=({theme:G,sidebar:be})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${G.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${G.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${be.isPinned?`calc(-12.1rem + ${fe})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const Ft=["h1","h2","h3","h4","h5","h6"];var cn=({theme:G})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Ft.reduce((be,We)=>{var ot;const wt=(ot=G.typography.htmlFontSize)!=null?ot:16,Ot=G.typography[We],{lineHeight:rn,fontFamily:te,fontWeight:Ie,fontSize:ke}=Ot,ze=et=>{let tt=1;return typeof et=="number"&&(tt=et/wt*.6),typeof et=="string"&&(tt=et.replace("rem","")),`calc(${tt} * var(--md-typeset-font-size))`};return be.concat(`
    .md-typeset ${We} {
      color: var(--md-default-fg-color);
      line-height: ${rn};
      font-family: ${te};
      font-weight: ${Ie};
      font-size: ${ze(ke)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${G.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}

.md-typeset code {
  word-break: keep-all;
}
`,An=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,In=({theme:G})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${G.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${G.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${G.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${G.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${G.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const Bn=[Y,he,Ct,cn,An,In],Hn=()=>(0,b.Ut)(),Cn=()=>{const G=Hn(),be=(0,t.A)();return(0,s.useMemo)(()=>{const We={theme:be,sidebar:G};return Bn.reduce((ot,wt)=>ot+wt(We),"")},[be,G])},Vn=()=>{const G=Cn();return(0,s.useCallback)(be=>(be.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${G}</style>`),be),[G])},ua=(G,be,We)=>{const ot=G==="src"&&be.endsWith(".svg"),wt=!be.match(/^([a-z]*:)?\/\//i),Ot=be.startsWith(We);return ot&&(wt||Ot)},ut=({techdocsStorageApi:G,entityId:be,path:We})=>async ot=>{const wt=await G.getApiOrigin(),Ot=async(rn,te)=>{for(const Ie of rn)if(Ie.hasAttribute(te)){const ke=Ie.getAttribute(te);if(!ke)return;const ze=await G.getBaseUrl(ke,be,We);if(ua(te,ke,wt))try{const tt=await(await fetch(ze,{credentials:"include"})).text();Ie.setAttribute(te,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(tt)))}`)}catch{Ie.setAttribute("alt",`Error: ${ke}`)}else Ie.setAttribute(te,ze)}};return await Promise.all([Ot(ot.querySelectorAll("img"),"src"),Ot(ot.querySelectorAll("script"),"src"),Ot(ot.querySelectorAll("source"),"src"),Ot(ot.querySelectorAll("link"),"href"),Ot(ot.querySelectorAll("a[download]"),"href")]),ot};let m;m=Promise.resolve().then(e.t.bind(e,25873,19));function R(G,be){m.then(We=>{"createRoot"in We?We.createRoot(be).render(G):We.render(G,be)})}const K=G=>be=>{var We;const ot=be.querySelector('[title="Edit this page"]');if(!ot||!ot.href)return be;const wt=new URL(ot.href),Ot=G.byUrl(wt);if((Ot==null?void 0:Ot.type)!=="github"&&(Ot==null?void 0:Ot.type)!=="gitlab")return be;const rn=((We=be.querySelector("article>h1"))==null?void 0:We.childNodes[0].textContent)||"",te=encodeURIComponent(`Documentation Feedback: ${rn}`),Ie=encodeURIComponent(`Page source:
${ot.href}

Feedback:`),ke=(Ot==null?void 0:Ot.type)==="github"?(0,X.Fw)(wt.href,"blob"):wt.href,ze=ie()(ke),et=`/${ze.organization}/${ze.name}`,tt=ot.cloneNode();switch(Ot==null?void 0:Ot.type){case"gitlab":tt.href=`${wt.origin}${et}/issues/new?issue[title]=${te}&issue[description]=${Ie}`;break;case"github":tt.href=`${wt.origin}${et}/issues/new?title=${te}&body=${Ie}`;break;default:return be}return R(s.createElement(N.A),tt),tt.style.paddingLeft="5px",tt.title="Leave feedback for this page",tt.id="git-feedback-link",ot==null||ot.insertAdjacentElement("beforebegin",tt),be},le=()=>G=>{const be=G.querySelector('.md-header label[for="__drawer"]'),We=G.querySelector("article");if(!be||!We)return G;const ot=be.cloneNode();return R(s.createElement(oe.A),ot),ot.id="toggle-sidebar",ot.title="Toggle Sidebar",ot.classList.add("md-content__button"),ot.style.setProperty("padding","0 0 0 5px"),ot.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),We==null||We.prepend(ot),G},I=()=>G=>(((We,ot)=>{Array.from(We).filter(wt=>wt.hasAttribute(ot)).forEach(wt=>{const Ot=wt.getAttribute(ot);if(Ot){Ot.match(/^https?:\/\//i)&&wt.setAttribute("target","_blank");try{const rn=U(window.location.href);wt.setAttribute(ot,new URL(Ot,rn).toString())}catch{wt.replaceWith(wt.textContent||Ot)}}})})(Array.from(G.getElementsByTagName("a")),"href"),G);function U(G){const be=new URL(G);return!be.pathname.endsWith("/")&&!be.pathname.endsWith(".html")&&(be.pathname+="/"),be.toString()}const J=({baseUrl:G,onClick:be})=>We=>(Array.from(We.getElementsByTagName("a")).forEach(ot=>{ot.addEventListener("click",wt=>{const rn=ot.getAttribute("href");rn&&rn.startsWith(G)&&!ot.hasAttribute("download")&&(wt.preventDefault(),be(wt,rn))})}),We),we=(0,pe.A)(G=>({tooltip:{fontSize:"inherit",color:G.palette.text.primary,margin:0,padding:G.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(nt.Ay),Oe=()=>s.createElement(Ce.A,null,s.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),st=({text:G})=>{const[be,We]=(0,s.useState)(!1),[,ot]=(0,He.A)(),wt=(0,s.useCallback)(()=>{ot(G),We(!0)},[G,ot]),Ot=(0,s.useCallback)(()=>{We(!1)},[We]);return s.createElement(we,{title:"Copied to clipboard",placement:"left",open:be,onClose:Ot,leaveDelay:1e3},s.createElement(z.A,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:wt},s.createElement(Oe,null)))},Rt=G=>be=>{var We;const ot=be.querySelectorAll("pre > code");for(const wt of ot){const Ot=wt.textContent||"",rn=document.createElement("div");(We=wt==null?void 0:wt.parentElement)==null||We.prepend(rn),R(s.createElement(_.A,{theme:G},s.createElement(st,{text:Ot})),rn)}return be},qt=()=>G=>{var be;return(be=G.querySelector(".md-header"))==null||be.remove(),G},en=()=>G=>{var be,We;return(be=G.querySelector(".md-footer .md-copyright"))==null||be.remove(),(We=G.querySelector(".md-footer-copyright"))==null||We.remove(),G},hn=({onLoading:G,onLoaded:be})=>We=>(G(),We.addEventListener(A.K$,function ot(){be(),We.removeEventListener(A.K$,ot)}),We),pn=()=>G=>(setTimeout(()=>{const be=G==null?void 0:G.querySelectorAll("li.md-nav__item--active");be.length!==0&&(be.forEach(ot=>{const wt=ot==null?void 0:ot.querySelector("input");wt!=null&&wt.checked||wt==null||wt.click()}),be[be.length-1].scrollIntoView())},200),G),$t=async(G,be)=>{let We;if(typeof G=="string")We=new DOMParser().parseFromString(G,"text/html").documentElement;else if(G instanceof Element)We=G;else throw new Error("dom is not a recognized type");for(const ot of be)We=await ot(We);return We};function Pn(G,be){const We=new URL(be),ot=`${We.origin}${We.pathname.replace(/\/$/,"")}`,wt=G.replace(ot,"").replace(/^\/+/,""),Ot=new URL(`http://localhost/${wt}`);return`${Ot.pathname}${Ot.search}${Ot.hash}`}function un(){const G=(0,l.Zp)(),We=(0,w.u)(w.p).getOptionalString("app.baseUrl");return(0,s.useCallback)(wt=>{let Ot=wt;if(We)try{Ot=Pn(wt,We)}catch{}G(Ot)},[G,We])}const Un="screen and (max-width: 76.1875em)",qn=G=>{const be=un(),We=(0,t.A)(),ot=(0,F.A)(Un),wt=Ze(),Ot=Vn(),rn=(0,M.st)(),te=(0,w.u)(A.sm),Ie=(0,w.u)(re.YT),{state:ke,path:ze,content:et}=Ut(),[tt,bt]=(0,s.useState)(null),Lt=(0,A._$)(tt),Gt=(0,s.useCallback)(()=>{if(!tt)return;tt.querySelectorAll(".md-sidebar").forEach(Dn=>{var Fn,Yn,Wn,la;if(ot)Dn.style.top="0px";else{const sa=document==null?void 0:document.querySelector(".techdocs-reader-page"),Aa=(Fn=sa==null?void 0:sa.getBoundingClientRect().top)!=null?Fn:0;let pa=(Yn=tt.getBoundingClientRect().top)!=null?Yn:0;const Sa=tt.querySelector(".md-container > .md-tabs"),xa=(Wn=Sa==null?void 0:Sa.getBoundingClientRect().height)!=null?Wn:0;pa<Aa&&(pa=Aa);const Ha=Math.max(pa,0)+xa;Dn.style.top=`${Ha}px`;const Va=tt.querySelector(".md-container > .md-footer"),Ya=(la=Va==null?void 0:Va.getBoundingClientRect().top)!=null?la:window.innerHeight;Dn.style.height=`${Ya-Ha}px`}Dn.style.setProperty("opacity","1")})},[tt,ot]);(0,s.useEffect)(()=>(window.addEventListener("resize",Gt),window.addEventListener("scroll",Gt,!0),()=>{window.removeEventListener("resize",Gt),window.removeEventListener("scroll",Gt,!0)}),[tt,Gt]);const mn=(0,s.useCallback)(()=>{if(!tt)return;const Nn=tt.querySelector(".md-footer");Nn&&(Nn.style.width=`${tt.getBoundingClientRect().width}px`)},[tt]);(0,s.useEffect)(()=>(window.addEventListener("resize",mn),()=>{window.removeEventListener("resize",mn)}),[tt,mn]),(0,s.useEffect)(()=>{Lt||(mn(),Gt())},[ke,Lt,mn,Gt]);const tn=(0,s.useCallback)((Nn,Dn)=>$t(Nn,[wt,ut({techdocsStorageApi:te,entityId:G,path:Dn}),I(),le(),qt(),en(),K(Ie),Ot]),[G,Ie,te,wt,Ot]),ia=(0,s.useCallback)(async Nn=>$t(Nn,[pn(),Rt(We),J({baseUrl:window.location.origin,onClick:(Dn,Fn)=>{var Yn,Wn;const la=Dn.ctrlKey||Dn.metaKey,sa=new URL(Fn),Aa=((Yn=Dn.target)==null?void 0:Yn.innerText)||Fn,pa=Fn.replace(window.location.origin,"");rn.captureEvent("click",Aa,{attributes:{to:pa}}),sa.hash?la?window.open(Fn,"_blank"):(be(Fn),(Wn=Nn==null?void 0:Nn.querySelector(`[id="${sa.hash.slice(1)}"]`))==null||Wn.scrollIntoView()):la?window.open(Fn,"_blank"):be(Fn)}}),hn({onLoading:()=>{},onLoaded:()=>{var Dn;(Dn=Nn.querySelector(".md-nav__title"))==null||Dn.removeAttribute("for")}}),hn({onLoading:()=>{Array.from(Nn.querySelectorAll(".md-sidebar")).forEach(Fn=>{Fn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[We,be,rn]);return(0,s.useEffect)(()=>{if(!et)return()=>{};let Nn=!0;return tn(et,ze).then(async Dn=>{if(!(Dn!=null&&Dn.innerHTML)||!Nn)return;window.scroll({top:0});const Fn=await ia(Dn);bt(Fn)}),()=>{Nn=!1}},[et,ze,tn,ia]),tt},ta=()=>{const G=(0,A.YR)(),{shadowRoot:be}=(0,A.V1)(),We=be==null?void 0:be.querySelector('[data-md-component="content"]'),ot=be==null?void 0:be.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let wt=ot==null?void 0:ot.querySelector('[data-techdocs-addons-location="primary sidebar"]');wt||(wt=document.createElement("div"),wt.setAttribute("data-techdocs-addons-location","primary sidebar"),ot==null||ot.prepend(wt));const Ot=be==null?void 0:be.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let rn=Ot==null?void 0:Ot.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return rn||(rn=document.createElement("div"),rn.setAttribute("data-techdocs-addons-location","secondary sidebar"),Ot==null||Ot.prepend(rn)),s.createElement(s.Fragment,null,s.createElement(Xe.A,{container:wt},G.renderComponentsByLocation(A.eK.PrimarySidebar)),s.createElement(Xe.A,{container:We},G.renderComponentsByLocation(A.eK.Content)),s.createElement(Xe.A,{container:rn},G.renderComponentsByLocation(A.eK.SecondarySidebar)))},$n=(0,r.A)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),bn=It(G=>{var be;const{withSearch:We=!0,onReady:ot}=G,wt=$n(),{entityMetadata:{value:Ot,loading:rn},entityRef:te,setShadowRoot:Ie}=(0,A.V1)(),ke=qn(te),ze=window.location.pathname,et=window.location.hash,tt=(0,A._$)(ke),[bt]=(0,A.$r)([`[id="${et.slice(1)}"]`]);(0,s.useEffect)(()=>{var Gt;tt||(et?bt&&bt.scrollIntoView():(Gt=document==null?void 0:document.querySelector("header"))==null||Gt.scrollIntoView())},[ze,et,bt,tt]);const Lt=(0,s.useCallback)(Gt=>{Ie(Gt),ot instanceof Function&&ot()},[Ie,ot]);return rn===!1&&!Ot?s.createElement(b.M,{status:"404",statusMessage:"PAGE NOT FOUND"}):ke?s.createElement(b.UC,null,s.createElement(W.A,{container:!0},s.createElement(W.A,{xs:12,item:!0},s.createElement(zt,null)),We&&s.createElement(W.A,{className:wt.search,xs:"auto",item:!0},s.createElement(ln,{entityId:te,entityTitle:(be=Ot==null?void 0:Ot.metadata)==null?void 0:be.title})),s.createElement(W.A,{xs:12,item:!0},s.createElement(A.eh,{element:ke,onAppend:Lt},s.createElement(ta,null))))):s.createElement(b.UC,null,s.createElement(W.A,{container:!0},s.createElement(W.A,{xs:12,item:!0},s.createElement(zt,null))))}),fn=null,Vt=s.createElement(Ge.A,{animation:"wave",variant:"text",height:40}),En=G=>{const{children:be}=G,We=(0,A.YR)(),ot=(0,w.u)(w.p),{title:wt,setTitle:Ot,subtitle:rn,setSubtitle:te,entityRef:Ie,metadata:{value:ke,loading:ze},entityMetadata:{value:et,loading:tt}}=(0,A.V1)();(0,s.useEffect)(()=>{ke&&(Ot(ke.site_name),te(()=>{let{site_description:Wn}=ke;return(!Wn||Wn==="None")&&(Wn=""),Wn}))},[ke,Ot,te]);const bt=ot.getOptional("app.title")||"Backstage",Lt=[wt,rn,bt].filter(Boolean).join(" | "),{locationMetadata:Gt,spec:mn}=et||{},tn=mn==null?void 0:mn.lifecycle,ia=et?(0,Re.g)(et,ct.vv):[],Nn=(0,M.Sf)(St.r)(),Dn=s.createElement(s.Fragment,null,s.createElement(b.ST,{label:(0,vt.capitalize)((et==null?void 0:et.kind)||"entity"),value:s.createElement(Le.zI,{color:"inherit",entityRef:Ie,title:et==null?void 0:et.metadata.title,defaultKind:"Component"})}),ia.length>0&&s.createElement(b.ST,{label:"Owner",value:s.createElement(Le.iI,{color:"inherit",entityRefs:ia,defaultKind:"group"})}),tn?s.createElement(b.ST,{label:"Lifecycle",value:String(tn)}):null,Gt&&Gt.type!=="dir"&&Gt.type!=="file"?s.createElement(b.ST,{label:"",value:s.createElement(W.A,{container:!0,direction:"column",alignItems:"center"},s.createElement(W.A,{style:{padding:0},item:!0},s.createElement(Ye.A,{style:{marginTop:"-25px"}})),s.createElement(W.A,{style:{padding:0},item:!0},"Source")),url:Gt.target}):null);return!tt&&et===void 0||!ze&&ke===void 0?null:s.createElement(b.Y9,{type:"Documentation",typeLink:Nn,title:wt||Vt,subtitle:rn===""?void 0:rn||Vt},s.createElement(at.A,{titleTemplate:"%s"},s.createElement("title",null,Lt)),Dn,be,We.renderComponentsByLocation(A.eK.Header))},Sn=(0,r.A)(G=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:G.spacing(3,3,0),"@media print":{display:"none"}}})),ya=G=>{const be=Sn(),[We,ot]=(0,s.useState)(null),wt=(0,s.useCallback)(et=>{ot(et.currentTarget)},[]),Ot=(0,s.useCallback)(()=>{ot(null)},[]),{entityMetadata:{value:rn,loading:te}}=(0,A.V1)(),Ie=(0,A.YR)(),ke=Ie.renderComponentsByLocation(A.eK.Subheader),ze=Ie.renderComponentsByLocation(A.eK.Settings);return!ke&&!ze||te===!1&&!rn?null:s.createElement(Jt.A,{classes:be,...G.toolbarProps},s.createElement(ue.A,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},ke,ze?s.createElement(s.Fragment,null,s.createElement(nt.Ay,{title:"Settings"},s.createElement(z.A,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:wt},s.createElement(ft.A,null))),s.createElement(At.A,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:We,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!!We,onClose:Ot,keepMounted:!0},s.createElement("div",null,ze))):null))},Ra=G=>{const{withSearch:be,withHeader:We=!0}=G;return s.createElement(b.YW,{themeId:"documentation"},We&&s.createElement(En,null),s.createElement(ya,null),s.createElement(bn,{withSearch:be}))},Oa=G=>{const{kind:be,name:We,namespace:ot}=(0,M.KS)(St.b),{children:wt,entityRef:Ot={kind:be,name:We,namespace:ot}}=G,rn=(0,l.P1)();if(!wt){const ke=(rn?s.Children.toArray(rn.props.children):[]).flatMap(ze=>{var et,tt;return(tt=(et=ze==null?void 0:ze.props)==null?void 0:et.children)!=null?tt:[]}).find(ze=>!(0,M.E0)(ze,A.AF)&&!(0,M.E0)(ze,A.Wm));return s.createElement(Te,{pluginId:"techdocs"},s.createElement(A.R7,{entityRef:Ot},ke||s.createElement(Ra,null)))}return s.createElement(Te,{pluginId:"techdocs"},s.createElement(A.R7,{entityRef:Ot},({metadata:te,entityMetadata:Ie,onReady:ke})=>s.createElement("div",{className:"techdocs-reader-page"},s.createElement(b.YW,{themeId:"documentation"},wt instanceof Function?wt({entityRef:Ot,techdocsMetadataValue:te.value,entityMetadataValue:Ie.value,onReady:ke}):wt))))}},27332:(Tn,_t,e)=>{"use strict";e.r(_t),e.d(_t,{TechDocsSearchResultListItem:()=>t});var s=e(14041),l=e(46423),b=e(5951),A=e(58837),W=e(72501),r=e(22968),q=e(22299);const Q=(0,A.A)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),t=pe=>{const{result:_,highlight:de,lineClamp:me=5,asListItem:H=!0,asLink:xe=!0,title:ve,icon:dt}=pe,z=Q(),ee=({children:M})=>xe?s.createElement(r.N_,{noTrack:!0,to:_.location},M):s.createElement(s.Fragment,null,M),D=()=>{const M=de!=null&&de.fields.title?s.createElement(q.b,{text:de.fields.title,preTag:de.preTag,postTag:de.postTag}):_.title,y=de!=null&&de.fields.entityTitle?s.createElement(q.b,{text:de.fields.entityTitle,preTag:de.preTag,postTag:de.postTag}):_.entityTitle,v=de!=null&&de.fields.name?s.createElement(q.b,{text:de.fields.name,preTag:de.preTag,postTag:de.postTag}):_.name;return _?s.createElement(b.A,{className:z.itemText,primaryTypographyProps:{variant:"h6"},primary:s.createElement(ee,null,ve||s.createElement(s.Fragment,null,M," | ",y!=null?y:v," docs")),secondary:s.createElement(W.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:me,overflow:"hidden"},color:"textSecondary",variant:"body2"},de!=null&&de.fields.text?s.createElement(q.b,{text:de.fields.text,preTag:de.preTag,postTag:de.postTag}):_.text)}):null},w=({children:M})=>H?s.createElement(s.Fragment,null,dt&&s.createElement(l.A,null,typeof dt=="function"?dt(_):dt),s.createElement("div",{className:z.flexContainer},M)):s.createElement(s.Fragment,null,M);return s.createElement(w,null,s.createElement(D,null))}},45495:(Tn,_t,e)=>{"use strict";e.d(_t,{T:()=>t,a:()=>Q,b:()=>_,c:()=>de,r:()=>pe});var s=e(3399),l=e(17520),b=e.n(l),A=e(11638),W=Object.defineProperty,r=(me,H,xe)=>H in me?W(me,H,{enumerable:!0,configurable:!0,writable:!0,value:xe}):me[H]=xe,q=(me,H,xe)=>(r(me,typeof H!="symbol"?H+"":H,xe),xe);class Q{constructor(H){q(this,"configApi"),q(this,"discoveryApi"),q(this,"fetchApi"),this.configApi=H.configApi,this.discoveryApi=H.discoveryApi,this.fetchApi=H.fetchApi}async getCookie(){const xe=`${await this.getApiOrigin()}/cookie`,ve=await this.fetchApi.fetch(`${xe}`,{credentials:"include"});if(!ve.ok)throw await s.o3.fromResponse(ve);return await ve.json()}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(H){const{kind:xe,namespace:ve,name:dt}=H,ee=`${await this.getApiOrigin()}/metadata/techdocs/${ve}/${xe}/${dt}`,D=await this.fetchApi.fetch(`${ee}`);if(!D.ok)throw await s.o3.fromResponse(D);return await D.json()}async getEntityMetadata(H){const{kind:xe,namespace:ve,name:dt}=H,ee=`${await this.getApiOrigin()}/metadata/entity/${ve}/${xe}/${dt}`,D=await this.fetchApi.fetch(`${ee}`);if(!D.ok)throw await s.o3.fromResponse(D);return await D.json()}}class t{constructor(H){q(this,"configApi"),q(this,"discoveryApi"),q(this,"identityApi"),q(this,"fetchApi"),this.configApi=H.configApi,this.discoveryApi=H.discoveryApi,this.identityApi=H.identityApi,this.fetchApi=H.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var H;return(H=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?H:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(H,xe){const{kind:ve,namespace:dt,name:z}=H,D=`${await this.getStorageUrl()}/${dt}/${ve}/${z}/${xe}`,w=await this.fetchApi.fetch(`${D.endsWith("/")?D:`${D}/`}index.html`);let M="";switch(w.status){case 404:throw M="Page not found. ",xe||(M+="This could be because there is no index.md file in the root of the docs directory of this repository."),new s.m_(M);case 500:throw M="Could not generate documentation or an error in the TechDocs backend. ",new Error(M)}return w.text()}async syncEntityDocs(H,xe=()=>{}){const{kind:ve,namespace:dt,name:z}=H,D=`${await this.getApiOrigin()}/sync/${dt}/${ve}/${z}`,{token:w}=await this.identityApi.getCredentials();return new Promise((M,y)=>{const v=new l.EventSourcePolyfill(D,{withCredentials:!0,headers:w?{Authorization:`Bearer ${w}`}:{}});v.addEventListener("log",F=>{F.data&&xe(JSON.parse(F.data))}),v.addEventListener("finish",F=>{let re=!1;F.data&&({updated:re}=JSON.parse(F.data)),M(re?"updated":"cached")}),v.onerror=F=>{switch(v.close(),F.status){case 404:y(new s.m_(F.message));return;default:y(new Error(F.data));return}}})}async getBaseUrl(H,xe,ve){const{kind:dt,namespace:z,name:ee}=xe,w=`${await this.getApiOrigin()}/static/docs/${z}/${dt}/${ee}/${ve}`;return new URL(H,w.endsWith("/")?w:`${w}/`).toString()}}const pe=(0,A.HM)({id:"techdocs:index-page"}),_=(0,A.HM)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),de=(0,A.HM)({id:"techdocs:catalog-reader-view"})},70210:(Tn,_t,e)=>{"use strict";e.d(_t,{L:()=>ht,S:()=>Qt,a:()=>ln,e:()=>xt});var s=e(18690),l=e(14041),b=e(58007),A=e(64947),W=e(72501),r=e(22968),q=e(80109),Q=e(42899),t=e(8109),pe=e(46423),_=e(65569),de=e(5951),me=e(71677),H=e(5124),xe=e(11638),ve=e(19087),dt=e(58837),z=e(16249),ee=e(29365),D=e(73643),w=e(64704),M=e(73466),y=e(37757),v=e(26343),F=e(89383),re=e(71407),Ne=e(11746),ye=e(93970),X=e(15485),N=e(42247),V=e(59294),ie=e(84095),oe=e(92651);const Ce=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,nt=()=>l.createElement(r.pp,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:l.createElement(l.Fragment,null,l.createElement(W.A,{variant:"body1"},"Open ",l.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),l.createElement(r.z7,{text:Ce,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(A.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),He=(0,dt.A)(Ae=>({avatar:{width:({size:Ve})=>Ve,height:({size:Ve})=>Ve,fontSize:({size:Ve})=>Ve*.7,border:`1px solid ${Ae.palette.textSubtle}`}})),Xe=({size:Ae,picture:Ve})=>{const{iconSize:jt}=r.hC,zt=He(Ae?{size:Ae}:{size:jt});return l.createElement(ve.A,{src:Ve,className:zt.avatar})},at={},Ge=Ae=>{const{title:Ve,description:jt,icon:zt,apiRef:Kt}=Ae,Et=(0,H.u)(Kt),xn=(0,H.u)(H.r),[dn,Xt]=(0,l.useState)(!1),[yn,Qe]=(0,l.useState)(at);return(0,l.useEffect)(()=>{let pt=!1;const Dt=Et.sessionState$().subscribe(it=>{it!==H.S.SignedIn&&(Qe(at),Xt(!1)),pt||Et.getProfile({optional:!0}).then(Ze=>{pt||(it===H.S.SignedIn&&Xt(!0),Ze&&Qe(Ze))})});return()=>{pt=!0,Dt.unsubscribe()}},[Et]),l.createElement(t.A,null,l.createElement(pe.A,null,l.createElement(zt,null)),l.createElement(de.A,{primary:Ve,secondary:l.createElement(me.Ay,{placement:"top",arrow:!0,title:jt},l.createElement(Q.A,{container:!0,spacing:6},l.createElement(Q.A,{item:!0},l.createElement(Xe,{size:48,picture:yn.picture})),l.createElement(Q.A,{item:!0,xs:12,sm:!0,container:!0},l.createElement(Q.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(Q.A,{item:!0,xs:!0},yn.displayName&&l.createElement(W.A,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},yn.displayName),yn.email&&l.createElement(W.A,{variant:"body2",color:"textSecondary"},yn.email),l.createElement(W.A,{variant:"body2",color:"textSecondary"},jt)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),l.createElement(_.A,null,l.createElement(me.Ay,{placement:"top",arrow:!0,title:dn?`Sign out from ${Ve}`:`Sign in to ${Ve}`},l.createElement(A.A,{variant:"outlined",color:"primary",onClick:()=>{(dn?Et.signOut():Et.signIn()).catch(Dt=>xn.post(Dt))}},dn?"Sign out":"Sign in"))))},Ye=Ae=>{const{configuredProviders:Ve}=Ae;return l.createElement(l.Fragment,null,Ve.includes("google")&&l.createElement(Ge,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:H.g,icon:q.A}),Ve.includes("microsoft")&&l.createElement(Ge,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:H.m,icon:q.A}),Ve.includes("github")&&l.createElement(Ge,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:H.d,icon:q.A}),Ve.includes("gitlab")&&l.createElement(Ge,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:H.e,icon:q.A}),Ve.includes("okta")&&l.createElement(Ge,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:H.o,icon:q.A}),Ve.includes("bitbucket")&&l.createElement(Ge,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:H.i,icon:q.A}),Ve.includes("onelogin")&&l.createElement(Ge,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:H.h,icon:q.A}),Ve.includes("atlassian")&&l.createElement(Ge,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:H.k,icon:q.A}),Ve.includes("bitbucketServer")&&l.createElement(Ge,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:H.j,icon:q.A}))},Re=Ae=>{const{providerSettings:Ve}=Ae,zt=(0,H.u)(H.p).getOptionalConfig("auth.providers"),Kt=(zt==null?void 0:zt.keys())||[],Et=Ve!=null?Ve:l.createElement(Ye,{configuredProviders:Kt});return!Ve&&!(Kt!=null&&Kt.length)?l.createElement(nt,null):l.createElement(r.nO,{title:"Available Providers"},l.createElement(b.A,{dense:!0},Et))},Le=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,ct=()=>l.createElement(r.pp,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:l.createElement(l.Fragment,null,l.createElement(W.A,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),l.createElement(r.z7,{text:Le,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(A.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),vt=Ae=>Ae.description?Ae.description:Ae.pluginId?`Registered in ${Ae.pluginId} plugin`:"Registered in the application",St=({flag:Ae,enabled:Ve,toggleHandler:jt})=>l.createElement(t.A,{divider:!0,button:!0,onClick:()=>jt(Ae.name)},l.createElement(pe.A,null,l.createElement(me.Ay,{placement:"top",arrow:!0,title:Ve?"Disable":"Enable"},l.createElement(D.A,{color:"primary",checked:Ve,name:Ae.name}))),l.createElement(de.A,{primary:Ae.name,secondary:vt(Ae)})),Jt=(Ae,Ve)=>{const jt=Ae.filter(Kt=>Ve.isActive(Kt.name)),zt=Ae.filter(Kt=>!Ve.isActive(Kt.name));return[...jt,...zt]},At=()=>{const Ae=(0,H.u)(H.f),Ve=l.useRef(),jt=Ae.getRegisteredFlags(),zt=Jt(jt,Ae),[Kt]=(0,l.useState)(zt),Et=Object.fromEntries(Kt.map(({name:Ze})=>[Ze,Ae.isActive(Ze)])),[xn,dn]=(0,l.useState)(Et),[Xt,yn]=(0,l.useState)(""),Qe=(0,l.useCallback)(Ze=>{const Y=Ae.isActive(Ze)?H.F.None:H.F.Active;Ae.save({states:{[Ze]:Y},merge:!0}),dn(he=>({...he,[Ze]:Y===H.F.Active}))},[Ae]);if(!Kt.length)return l.createElement(ct,null);const pt=()=>{var Ze;yn(""),(Ze=Ve==null?void 0:Ve.current)==null||Ze.focus()},Dt=Kt.filter(Ze=>Ze.name.toLocaleLowerCase("en-US").includes(Xt.toLocaleLowerCase("en-US"))),it=()=>l.createElement(Q.A,{container:!0,style:{justifyContent:"space-between"}},l.createElement(Q.A,{item:!0,xs:6,md:8},l.createElement(W.A,{variant:"h5"},"Feature Flags"),l.createElement(W.A,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),Kt.length>=10&&l.createElement(Q.A,{item:!0,xs:6,md:4},l.createElement(z.A,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:Ze=>Ze&&Ze.focus(),InputProps:{...Xt.length&&{endAdornment:l.createElement(ee.A,{"aria-label":"Clear filter",onClick:pt,edge:"end"},l.createElement(w.A,null))}},onChange:Ze=>yn(Ze.target.value),value:Xt})));return l.createElement(r.nO,{title:l.createElement(it,null)},l.createElement(b.A,{dense:!0},Dt.map(Ze=>{const Y=!!xn[Ze.name];return l.createElement(St,{key:Ze.name,flag:Ze,enabled:Y,toggleHandler:Qe})})))},ue=()=>{var Ae;const Ve=(0,H.u)(H.t),jt=(0,H.u)(H.l),{value:zt,loading:Kt,error:Et}=(0,M.A)(async()=>({profile:await Ve.getProfileInfo(),identity:await Ve.getBackstageIdentity()}),[]);return(0,l.useEffect)(()=>{Et&&jt.post({message:`Failed to load user identity: ${Et}`,severity:"error"})},[Et,jt]),Kt||Et?{profile:{},displayName:"",loading:Kt}:{profile:zt.profile,backstageIdentity:zt.identity,displayName:(Ae=zt.profile.displayName)!=null?Ae:zt.identity.userEntityRef,loading:Kt}},ft=(0,dt.A)(Ae=>({avatar:{width:({size:Ve})=>Ve,height:({size:Ve})=>Ve,fontSize:({size:Ve})=>Ve*.7,border:`1px solid ${Ae.palette.textSubtle}`}})),xt=Ae=>{const{size:Ve}=Ae,{iconSize:jt}=r.hC,zt=ft(Ve?{size:Ve}:{size:jt}),{profile:Kt}=ue();return l.createElement(ve.A,{src:Kt.picture,className:zt.avatar,alt:"Profile picture"})},gt=()=>{const Ae=(0,H.u)(H.r),Ve=(0,H.u)(H.t),[jt,zt]=l.useState(!1),[Kt,Et]=l.useState(void 0),xn=Xt=>{Et(Xt.currentTarget),zt(!0)},dn=()=>{Et(void 0),zt(!1)};return l.createElement(l.Fragment,null,l.createElement(ee.A,{"data-testid":"user-settings-menu","aria-label":"more",onClick:xn},l.createElement(re.A,null)),l.createElement(y.A,{anchorEl:Kt,open:jt,onClose:dn},l.createElement(v.A,{"data-testid":"sign-out",onClick:()=>Ve.signOut().catch(Xt=>Ae.post(Xt))},l.createElement(pe.A,null,l.createElement(F.A,null)),"Sign Out")))},Nt=()=>{const{profile:Ae,displayName:Ve}=ue();return l.createElement(r.nO,{title:"Profile",variant:"gridItem"},l.createElement(Q.A,{container:!0,spacing:6},l.createElement(Q.A,{item:!0},l.createElement(xt,{size:96})),l.createElement(Q.A,{item:!0,xs:12,sm:!0,container:!0},l.createElement(Q.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(Q.A,{item:!0,xs:!0},l.createElement(W.A,{variant:"subtitle1",gutterBottom:!0},Ve),Ae.email&&l.createElement(W.A,{variant:"body2",color:"textSecondary"},Ae.email))),l.createElement(Q.A,{item:!0},l.createElement(gt,null)))))},S=()=>{const{isPinned:Ae,toggleSidebarPinState:Ve}=(0,r.Ut)();return l.createElement(t.A,null,l.createElement(de.A,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),l.createElement(_.A,null,l.createElement(me.Ay,{placement:"top",arrow:!0,title:`${Ae?"Unpin":"Pin"} Sidebar`},l.createElement(D.A,{color:"primary",checked:Ae,onChange:()=>Ve(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},P=({id:Ae,activeId:Ve,icon:jt})=>jt?(0,l.cloneElement)(jt,{color:Ve===Ae?"primary":void 0}):l.createElement(ye.A,{color:Ve===Ae?"primary":void 0}),j=(0,dt.A)(Ae=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[Ae.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[Ae.breakpoints.down("xs")]:{paddingLeft:0}}})),Z=({children:Ae,title:Ve,value:jt,...zt})=>l.createElement(me.Ay,{placement:"top",arrow:!0,title:Ve},l.createElement(X.A,{value:jt,...zt},Ae)),Te=()=>{const Ae=j(),Ve=(0,H.u)(H.n),jt=(0,Ne.A)(Ve.activeThemeId$(),Ve.getActiveThemeId()),zt=Ve.getInstalledThemes(),{t:Kt}=(0,V.ie)(ie.u),Et=(xn,dn)=>{zt.some(Xt=>Xt.id===dn)?Ve.setActiveThemeId(dn):Ve.setActiveThemeId(void 0)};return l.createElement(t.A,{className:Ae.list,classes:{container:Ae.container}},l.createElement(de.A,{className:Ae.listItemText,primary:Kt("themeToggle.title"),secondary:Kt("themeToggle.description")}),l.createElement(_.A,{className:Ae.listItemSecondaryAction},l.createElement(N.A,{exclusive:!0,size:"small",value:jt!=null?jt:"auto",onChange:Et},zt.map(xn=>{const dn=xn.id,Xt=xn.icon,yn=xn.title||(dn==="light"||dn==="dark"?Kt(`themeToggle.names.${dn}`):dn);return l.createElement(Z,{key:dn,title:Kt("themeToggle.select",{theme:yn}),value:dn},l.createElement(l.Fragment,null,yn,"\xA0",l.createElement(P,{id:dn,icon:Xt,activeId:jt})))}),l.createElement(me.Ay,{placement:"top",arrow:!0,title:Kt("themeToggle.selectAuto")},l.createElement(X.A,{value:"auto",selected:jt===void 0},Kt("themeToggle.names.auto"),"\xA0",l.createElement(ye.A,{color:jt===void 0?"primary":void 0}))))))},Ke=(0,dt.A)(Ae=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[Ae.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[Ae.breakpoints.down("xs")]:{paddingLeft:0}}})),mt=()=>{const Ae=Ke(),Ve=(0,H.u)(V.pl),{t:jt}=(0,V.ie)(ie.u),[zt]=(0,l.useState)(()=>Ve.language$()),{language:Kt}=(0,Ne.A)(zt,Ve.getLanguage()),{languages:Et}=Ve.getAvailableLanguages();if(Et.length<=1)return null;const xn=Xt=>{Ve.setLanguage(Xt)},dn=Xt=>{try{return new Intl.DisplayNames([Xt],{type:"language"}).of(Xt)||Xt}catch{return Xt}};return l.createElement(t.A,{className:Ae.list,classes:{container:Ae.container}},l.createElement(de.A,{className:Ae.listItemText,primary:jt("languageToggle.title"),secondary:jt("languageToggle.description")}),l.createElement(_.A,{className:Ae.listItemSecondaryAction},l.createElement(r.l6,{label:"",selected:Kt,items:Et.map(Xt=>({label:dn(Xt),value:Xt})),onChange:Xt=>xn(Xt)})))},Je=()=>{const{isMobile:Ae}=(0,r.Ut)();return l.createElement(r.nO,{title:"Appearance",variant:"gridItem"},l.createElement(b.A,{dense:!0},l.createElement(Te,null),l.createElement(mt,null),!Ae&&l.createElement(S,null)))},qe=()=>{const{backstageIdentity:Ae}=ue();return Ae?l.createElement(Q.A,{container:!0,spacing:1},l.createElement(Q.A,{item:!0,xs:12},l.createElement(W.A,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",l.createElement(oe.iI,{entityRefs:[Ae.userEntityRef]}))),l.createElement(Q.A,{item:!0,xs:12},l.createElement(W.A,{variant:"subtitle1"},"Ownership Entities:"," ",l.createElement(oe.iI,{entityRefs:Ae.ownershipEntityRefs})))):l.createElement(W.A,null,"No Backstage Identity")},Ut=()=>l.createElement(r.nO,{title:"Backstage Identity"},l.createElement(qe,null)),nn=()=>l.createElement(Q.A,{container:!0,direction:"row",spacing:3},l.createElement(Q.A,{item:!0,xs:12,md:6},l.createElement(Nt,null)),l.createElement(Q.A,{item:!0,xs:12,md:6},l.createElement(Je,null)),l.createElement(Q.A,{item:!0,xs:12,md:6},l.createElement(Ut,null))),It="plugin.user-settings.settingsLayout",ht="plugin.user-settings.settingsLayoutRoute",Zt=()=>null;(0,xe.h3)(Zt,ht,!0),(0,xe.h3)(Zt,"core.gatherMountPoints",!0);const ln=Ae=>{const{title:Ve,children:jt}=Ae,{isMobile:zt}=(0,r.Ut)(),Kt=(0,xe.OJ)(jt,Et=>Et.selectByComponentData({key:ht,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(xn=>xn.props));return l.createElement(r.YW,{themeId:"home"},!zt&&l.createElement(r.Y9,{title:Ve!=null?Ve:"Settings"}),l.createElement(r.kE,{routes:Kt}))};(0,xe.h3)(ln,It,!0),ln.Route=Zt;const on=Ae=>{const{providerSettings:Ve,tabs:jt}=Ae;return l.createElement(ln,null,l.createElement(ln.Route,{path:"general",title:"General"},l.createElement(nn,null)),l.createElement(ln.Route,{path:"auth-providers",title:"Authentication Providers"},l.createElement(Re,{providerSettings:Ve})),l.createElement(ln.Route,{path:"feature-flags",title:"Feature Flags"},l.createElement(At,null)),jt)},Qt=Ae=>{const{providerSettings:Ve}=Ae,jt=(0,s.P1)(),zt=(0,xe.OJ)(jt,Et=>Et.selectByComponentData({key:It}).getElements()),Kt=(0,xe.OJ)(jt,Et=>Et.selectByComponentData({key:ht}).getElements());return l.createElement(l.Fragment,null,zt.length!==0&&zt||l.createElement(on,{tabs:Kt,providerSettings:Ve}))}},84095:(Tn,_t,e)=>{"use strict";e.d(_t,{U:()=>W,s:()=>b,u:()=>r});var s=e(11638),l=e(59294);const b=(0,s.HM)({id:"user-settings"}),W=(0,s.i1)({id:"user-settings",routes:{settingsPage:b}}).provide((0,s.QJ)({name:"UserSettingsPage",component:()=>e.e(7136).then(e.bind(e,37136)).then(q=>q.SettingsPage),mountPoint:b})),r=(0,l.h2)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select theme {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}}}})},93449:(Tn,_t,e)=>{"use strict";e.d(_t,{wB:()=>xe});var s=e(96403),l=e.n(s),b=e(84095),A=e(14041),W=e(9684),r=e(22968),q=e(11638),Q=e(70210),t=Object.defineProperty,pe=(z,ee,D)=>ee in z?t(z,ee,{enumerable:!0,configurable:!0,writable:!0,value:D}):z[ee]=D,_=(z,ee,D)=>(pe(z,typeof ee!="symbol"?ee+"":ee,D),D);const de={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},me=new Map;class H{constructor(ee,D,w,M,y,v){this.namespace=ee,this.fetchApi=D,this.discoveryApi=w,this.errorApi=M,this.identityApi=y,this.fallback=v,_(this,"subscribers",new Set),_(this,"observables",new Map)}static create(ee){var D;return new H((D=ee.namespace)!=null?D:"default",ee.fetchApi,ee.discoveryApi,ee.errorApi,ee.identityApi,WebStorage.create({namespace:ee.namespace,errorApi:ee.errorApi}))}forBucket(ee){const D=`${this.namespace}.${ee}`;return me.has(D)||me.set(D,new H(D,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),me.get(D)}async remove(ee){const D=await this.getFetchUrl(ee),w=await this.fetchApi.fetch(D,{method:"DELETE"});if(!w.ok&&w.status!==404)throw await ResponseError.fromResponse(w);this.notifyChanges({key:ee,presence:"absent"})}async set(ee,D){if(!await this.isSignedIn()){await this.fallback.set(ee,D),this.notifyChanges({key:ee,presence:"present",value:D});return}const w=await this.getFetchUrl(ee),M=await this.fetchApi.fetch(w,{method:"PUT",headers:de,body:JSON.stringify({value:D})});if(!M.ok)throw await ResponseError.fromResponse(M);const{value:y}=await M.json();this.notifyChanges({key:ee,value:y,presence:"present"})}observe$(ee){return this.observables.has(ee)||this.observables.set(ee,new ObservableImpl(D=>(this.subscribers.add(D),Promise.resolve().then(()=>this.get(ee)).then(w=>D.next(w)).catch(w=>this.errorApi.post(w)),()=>{this.subscribers.delete(D)})).filter(({key:D})=>D===ee)),this.observables.get(ee)}snapshot(ee){return{key:ee,presence:"unknown"}}async get(ee){if(!await this.isSignedIn())return this.fallback.snapshot(ee);const D=await this.getFetchUrl(ee),w=await this.fetchApi.fetch(D);if(w.status===404)return{key:ee,presence:"absent"};if(!w.ok)throw await ResponseError.fromResponse(w);try{const{value:M}=await w.json(),y=JSON.parse(JSON.stringify(M),(v,F)=>(typeof F=="object"&&F!==null&&Object.freeze(F),F));return{key:ee,presence:"present",value:y}}catch{return{key:ee,presence:"absent"}}}async getFetchUrl(ee){const D=await this.discoveryApi.getBaseUrl("user-settings"),w=encodeURIComponent(this.namespace),M=encodeURIComponent(ee);return`${D}/buckets/${w}/keys/${M}`}async notifyChanges(ee){for(const D of this.subscribers)try{D.next(ee)}catch{}}async isSignedIn(){try{const ee=await this.identityApi.getCredentials();return!!(ee!=null&&ee.token)}catch{return!1}}}const xe=z=>{const ee=(0,q.Sf)(b.s),D=z.icon?z.icon:W.A;return A.createElement(r.uk,{text:"Settings",to:ee(),icon:D})},ve=Q.L,dt=z=>A.createElement(Q.a.Route,{path:z.path,title:z.title},A.createElement(A.Fragment,null,"props.children"));(0,q.h3)(dt,ve,"UserSettingsTab")},97388:(Tn,_t,e)=>{"use strict";e.d(_t,{Bl:()=>r,Q6:()=>W,qO:()=>Q,tK:()=>q});var s=e(14041);function l(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const b=l(),A=pe=>`__@backstage/${pe}__`;function W(pe,_){const de=A(pe);let me=b[de];return me||(me=_(),b[de]=me,me)}function r(pe){Object.freeze(pe);const _={atVersion(de){return pe[de]}};return Object.defineProperty(_,"$map",{configurable:!0,enumerable:!0,get(){return pe}}),_}function q(pe){return W(pe,()=>(0,s.createContext)(void 0))}function Q(pe){return(0,s.useContext)(q(pe))}function t(pe){return{set(_){globalThis[`__@backstage/${pe}__`]=createContext(r(_))},reset(){delete globalThis[`__@backstage/${pe}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.ca0f1f22.js.map