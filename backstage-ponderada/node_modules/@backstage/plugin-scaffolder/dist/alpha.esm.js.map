{"version":3,"file":"alpha.esm.js","sources":["../src/alpha.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  createApiExtension,\n  createApiFactory,\n  createNavItemExtension,\n  createPageExtension,\n  createPlugin,\n  discoveryApiRef,\n  fetchApiRef,\n  identityApiRef,\n} from '@backstage/frontend-plugin-api';\nimport CreateComponentIcon from '@material-ui/icons/AddCircleOutline';\nimport {\n  compatWrapper,\n  convertLegacyRouteRef,\n  convertLegacyRouteRefs,\n} from '@backstage/core-compat-api';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport { scaffolderApiRef } from '@backstage/plugin-scaffolder-react';\nimport { ScaffolderClient } from './api';\nimport {\n  registerComponentRouteRef,\n  rootRouteRef,\n  viewTechDocRouteRef,\n  selectedTemplateRouteRef,\n  scaffolderTaskRouteRef,\n  scaffolderListTaskRouteRef,\n  actionsRouteRef,\n  editRouteRef,\n} from './routes';\n\nexport {\n  type FormProps,\n  type TemplateListPageProps,\n  type TemplateWizardPageProps,\n} from './next';\n\nconst scaffolderApi = createApiExtension({\n  factory: createApiFactory({\n    api: scaffolderApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      scmIntegrationsApi: scmIntegrationsApiRef,\n      fetchApi: fetchApiRef,\n      identityApi: identityApiRef,\n    },\n    factory: ({ discoveryApi, scmIntegrationsApi, fetchApi, identityApi }) =>\n      new ScaffolderClient({\n        discoveryApi,\n        scmIntegrationsApi,\n        fetchApi,\n        identityApi,\n      }),\n  }),\n});\n\nconst scaffolderPage = createPageExtension({\n  routeRef: convertLegacyRouteRef(rootRouteRef),\n  defaultPath: '/create',\n  loader: () =>\n    import('./components/Router').then(m => compatWrapper(<m.Router />)),\n});\n\nconst scaffolderNavItem = createNavItemExtension({\n  routeRef: convertLegacyRouteRef(rootRouteRef),\n  title: 'Create...',\n  icon: CreateComponentIcon,\n});\n\n/** @alpha */\nexport default createPlugin({\n  id: 'scaffolder',\n  routes: convertLegacyRouteRefs({\n    root: rootRouteRef,\n    selectedTemplate: selectedTemplateRouteRef,\n    ongoingTask: scaffolderTaskRouteRef,\n    actions: actionsRouteRef,\n    listTasks: scaffolderListTaskRouteRef,\n    edit: editRouteRef,\n  }),\n  externalRoutes: convertLegacyRouteRefs({\n    registerComponent: registerComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef,\n  }),\n  extensions: [scaffolderApi, scaffolderPage, scaffolderNavItem],\n});\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAqDA,MAAM,gBAAgB,kBAAmB,CAAA;AAAA,EACvC,SAAS,gBAAiB,CAAA;AAAA,IACxB,GAAK,EAAA,gBAAA;AAAA,IACL,IAAM,EAAA;AAAA,MACJ,YAAc,EAAA,eAAA;AAAA,MACd,kBAAoB,EAAA,qBAAA;AAAA,MACpB,QAAU,EAAA,WAAA;AAAA,MACV,WAAa,EAAA,cAAA;AAAA,KACf;AAAA,IACA,OAAA,EAAS,CAAC,EAAE,YAAA,EAAc,oBAAoB,QAAU,EAAA,WAAA,EACtD,KAAA,IAAI,gBAAiB,CAAA;AAAA,MACnB,YAAA;AAAA,MACA,kBAAA;AAAA,MACA,QAAA;AAAA,MACA,WAAA;AAAA,KACD,CAAA;AAAA,GACJ,CAAA;AACH,CAAC,CAAA,CAAA;AAED,MAAM,iBAAiB,mBAAoB,CAAA;AAAA,EACzC,QAAA,EAAU,sBAAsB,YAAY,CAAA;AAAA,EAC5C,WAAa,EAAA,SAAA;AAAA,EACb,MAAQ,EAAA,MACN,OAAO,6BAAqB,CAAE,CAAA,IAAA,CAAK,CAAK,CAAA,KAAA,aAAA,iBAAe,KAAA,CAAA,aAAA,CAAA,CAAA,CAAE,MAAF,EAAA,IAAS,CAAE,CAAC,CAAA;AACvE,CAAC,CAAA,CAAA;AAED,MAAM,oBAAoB,sBAAuB,CAAA;AAAA,EAC/C,QAAA,EAAU,sBAAsB,YAAY,CAAA;AAAA,EAC5C,KAAO,EAAA,WAAA;AAAA,EACP,IAAM,EAAA,mBAAA;AACR,CAAC,CAAA,CAAA;AAGD,YAAe,YAAa,CAAA;AAAA,EAC1B,EAAI,EAAA,YAAA;AAAA,EACJ,QAAQ,sBAAuB,CAAA;AAAA,IAC7B,IAAM,EAAA,YAAA;AAAA,IACN,gBAAkB,EAAA,wBAAA;AAAA,IAClB,WAAa,EAAA,sBAAA;AAAA,IACb,OAAS,EAAA,eAAA;AAAA,IACT,SAAW,EAAA,0BAAA;AAAA,IACX,IAAM,EAAA,YAAA;AAAA,GACP,CAAA;AAAA,EACD,gBAAgB,sBAAuB,CAAA;AAAA,IACrC,iBAAmB,EAAA,yBAAA;AAAA,IACnB,WAAa,EAAA,mBAAA;AAAA,GACd,CAAA;AAAA,EACD,UAAY,EAAA,CAAC,aAAe,EAAA,cAAA,EAAgB,iBAAiB,CAAA;AAC/D,CAAC,CAAA;;;;"}