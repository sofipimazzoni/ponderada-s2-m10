'use strict';

var backendPluginApi = require('@backstage/backend-plugin-api');
var fs = require('fs-extra');
var path = require('path');
var configLoader = require('@backstage/config-loader');

function _interopDefaultCompat (e) { return e && typeof e === 'object' && 'default' in e ? e : { default: e }; }

var fs__default = /*#__PURE__*/_interopDefaultCompat(fs);

const staticFallbackHandlerExtensionPoint = backendPluginApi.createExtensionPoint({
  id: "app.staticFallbackHandler"
});
const configSchemaExtensionPoint = backendPluginApi.createExtensionPoint({
  id: "app.configSchema"
});

async function loadCompiledConfigSchema(appDistDir) {
  const schemaPath = path.resolve(appDistDir, ".config-schema.json");
  if (await fs__default.default.pathExists(schemaPath)) {
    const serializedSchema = await fs__default.default.readJson(schemaPath);
    return await configLoader.loadConfigSchema({
      serialized: serializedSchema
    });
  }
  return void 0;
}

exports.configSchemaExtensionPoint = configSchemaExtensionPoint;
exports.loadCompiledConfigSchema = loadCompiledConfigSchema;
exports.staticFallbackHandlerExtensionPoint = staticFallbackHandlerExtensionPoint;
//# sourceMappingURL=index.cjs.js.map
