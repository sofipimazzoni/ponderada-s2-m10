'use strict';

var fs = require('fs-extra');
var index = require('./index-CCLafGQH.cjs.js');
var cliNode = require('@backstage/cli-node');

function _interopDefaultCompat (e) { return e && typeof e === 'object' && 'default' in e ? e : { default: e }; }

var fs__default = /*#__PURE__*/_interopDefaultCompat(fs);

async function findRoleFromCommand(opts) {
  var _a;
  if (opts.role) {
    return (_a = cliNode.PackageRoles.getRoleInfo(opts.role)) == null ? void 0 : _a.role;
  }
  const pkg = await fs__default.default.readJson(index.paths.resolveTarget("package.json"));
  const info = cliNode.PackageRoles.getRoleFromPackage(pkg);
  if (!info) {
    throw new Error(`Target package must have 'backstage.role' set`);
  }
  return info;
}

exports.findRoleFromCommand = findRoleFromCommand;
//# sourceMappingURL=role-6YZbMsXe.cjs.js.map
